if(typeof QSI==='undefined'){QSI={};}
QSI.config={"hostedJSLocation":"https://siteintercept.qualtrics.com/dxjsmodule/","zoneId":"ZN_e5sZQpBKez95p8V"};QSI.overrides={"baseURL":"https://siteintercept.qualtrics.com"};QSI.shouldStripQueryParamsInQLoc=false;try{!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),e.exports=n(13)},function(e,t){if(void 0===window.QSI&&(window.QSI={}),void 0===QSI.reg&&(QSI.reg={}),void 0===QSI.ed&&(QSI.ed={}),void 0===QSI.reqID&&(QSI.reqID={}),QSI.overrides=QSI.overrides||{},void 0===QSI.isFullDbgInitialized&&(QSI.isFullDbgInitialized=!1),QSI.initFullDbg=function(){!0!==QSI.isFullDbgInitialized&&(QSI.isFullDbgInitialized=!0,QSI.dbg={log:function(){},c:function(e){try{console.log(e)}catch(e){}QSI.dbg.log(e)},d:function(e){try{console.dir(e)}catch(e){}QSI.dbg.log(e)},t:function(e){try{console.trace()}catch(e){}QSI.dbg.log(e)},e:function(e){var t="error";e.message&&(t=e.message);try{console.log(t),console.error(e)}catch(n){try{console.log(t),console.log(e)}catch(e){}}QSI.dbg.log(e)}})},-1===window.location.href.indexOf("Q_DEBUG")?QSI.dbg={log:function(){},c:function(e){QSI.dbg.log(e)},d:function(e){QSI.dbg.log(e)},t:function(e){QSI.dbg.log(e)},e:function(e){QSI.dbg.log(e)}}:QSI.initFullDbg(),void 0===QSI.config&&(QSI.config={}),void 0===QSI.global&&(QSI.global={currentZIndex:2e9,intercepts:{},eventTrackers:[]}),QSI.global.hostedJSLocation=QSI.config.hostedJSLocation||QSI.config.clientBaseURL,QSI.global.legacyId=QSI.config.interceptId||QSI.config.zoneId||QSI.config.targetingId||QSI.global.ID,!QSI.global.legacyId)throw"You must specify a zoneId or zoneId and interceptId";QSI.getBaseURLFromConfigAndOverrides=function(e,t){t=t||{},(e=e||{}).zoneId=e.zoneId||"",e.brandId=e.brandId||"";var n="",i=!1;if(t.baseURL?(i=!0,0===(n=t.baseURL).indexOf("https://")?n=n.substring(8):0===n.indexOf("http://")?n=n.substring(7):0===n.indexOf("//")&&(n=n.substring(2))):n="siteintercept.qualtrics.com",!i&&e.brandId){if(!e.zoneId)throw"You must specify a zoneId";n=e.zoneId.replace("_","").toLowerCase()+"-"+e.brandId.toLowerCase()+"."+n}return n},QSI.global.baseURL=QSI.getBaseURLFromConfigAndOverrides(QSI.config,QSI.overrides),QSI.global.baseURL="//"+QSI.global.baseURL,QSI.global.clientVersion="1.10.0",QSI.global.clientType="web",void 0===QSI.global.isHostedJS&&(QSI.global.isHostedJS=function(){return"hostedjs"===QSI.global.clientType}),QSI.global.isHostedJS()?QSI.global.enableJSSanitization=void 0===QSI.config.enableJSSanitization||QSI.config.enableJSSanitization:QSI.global.enableJSSanitization=!1,QSI.baseURL=QSI.baseURL||QSI.overrides.siBaseURL||"https:"+QSI.global.baseURL+"/WRSiteInterceptEngine/",QSI.Browser={}},function(e,t){(void 0===window.QSI.LatencyLog||window.QTest)&&(QSI.LatencyLog={metricName:"si.SILatency",components:{CORE_MODULE:"coreModuleRequest",TARGETING:"targetingRequest",DPR_TARGETING:"dprTargetingRequest",ASSETS_AND_MODULES:"allAssetDefinitionsAndJSModules",CONTACT_FREQUENCY:"contactFrequencyCheck"},overallLatencyStartTime:null,overallLatency:null,componentStartTimes:{},componentLatencies:{},startTimer:function(){this.latencyStartTime=Date.now()},endTimer:function(){null!==this.latencyStartTime?this.overallLatency=Date.now()-this.latencyStartTime:QSI.dbg.e("Tried to log overall end time without a start time.")},startComponentTimer:function(e){this.componentStartTimes[e]=Date.now()},endComponentTimer:function(e){var t=this.componentStartTimes[e];void 0!==t?this.componentLatencies[e]=Date.now()-t:QSI.dbg.e("Tried to log a component end time without a component start time.  Component name:"+e)},send:function(){try{if(null===this.overallLatency)return void QSI.dbg.e("Incomplete Latency Data Provided");var e=QSI.baseURL+"Ajax.php?action=LatencyLog";void 0!==QSI.Orchestrator&&void 0!==QSI.Orchestrator.getClientVersionQueryString&&(e=e+"&"+QSI.Orchestrator.getClientVersionQueryString());var t={MetricName:this.metricName,Latency:this.overallLatency,ComponentLatencies:this.componentLatencies},n=[];for(var i in QSI.reqID)Object.prototype.hasOwnProperty.call(QSI.reqID,i)&&n.push(i);t.AdditionalData={RequestIDs:n,ClientURL:QSI.currentURL,UserAgent:navigator.userAgent,BrandID:QSI.global.brandID,BrandDC:QSI.global.brandDC},QSI.util.sendHttpRequest({type:"POST",url:e,header:{"Content-type":"application/x-www-form-urlencoded"},includeCookies:!1,data:QSI.util.buildQueryString({LoggingData:JSON.stringify(t)})})}catch(e){QSI.dbg.e(e)}},sampledSend:function(e){try{Math.random()<=e/100==!0&&this.send()}catch(e){QSI.dbg.e(e)}}})},function(e,t){QSI.profile||(QSI.profile={namespace:"QSI_",set:function(e,t,n,i){if(void 0===e||void 0===t||void 0===n)throw new Error("To few arguments");try{var r=this.getStorage(i),o=this.namespace+e,a=r.getItem(o);(a=a?JSON.parse(a):{})[t]=n,a=JSON.stringify(a),r.setItem(o,a)}catch(e){QSI.dbg.e("error setting profile item"),QSI.dbg.e(e)}},get:function(e,t,n){var i=this.getStorage(n),r=this.namespace+e,o=i.getItem(r);return o?(o=JSON.parse(o),t?o[t]?o[t]:null:o):null},erase:function(e,t,n){var i=this.getStorage(n),r=this.namespace+e;if(t){var o=JSON.parse(i.getItem(r));delete o[t],o=JSON.stringify(o),i.setItem(r,o)}else i.removeItem(r)},getStorage:function(e){if(this.hasSessionStorage())return e?localStorage:sessionStorage;if(QSI.UserDataStorage){var t=QSI.UserDataStorage;return e?t.isPermanent(!0):t.isPermanent(!1),t}return QSI.CookieStorage},hasSessionStorage:function(){var e="qualtricssessionstoragetestkey",t=window.sessionStorage;try{return t.setItem(e,e),t.removeItem(e),!0}catch(e){return!1}}})},function(e,t){void 0===QSI.util&&(QSI.util={$:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},forOwn:function(e,t){if(e&&e instanceof Object&&this.isFunction(t))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},build:function(e,t,n){var i=document.createElement(e);if(t){var r=this;QSI.util.forOwn(t,function(e,n){switch(n){case"style":r.setStyle(i,t[n]);break;case"className":i.className=t[n];break;case"id":i.id=t[n];break;default:i.setAttribute(n,t[n])}})}if(n)if(QSI.util.isString(n))"style"===e&&i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(String(n)));else if(QSI.util.isArray(n))for(var o=0,a=n.length;o<a;o++){var s=n[o];"string"==typeof s||"number"==typeof s?i.appendChild(document.createTextNode(String(s))):s&&s.nodeType&&i.appendChild(s)}return i},setStyle:function(e,t){QSI.util.forOwn(t,function(n,i){try{e.style[i]=t[i]}catch(e){QSI.dbg.e(e)}})},isString:function(e){return"string"==typeof e},isArray:function(e){return"object"==typeof e&&e instanceof Array},getQueryParam:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n?"":n[1]},observe:function(e,t,n,i){this.obs=this.obs||[],e&&(this.obs.push({el:e,e:t,f:n,preventRemove:i||!1}),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+this.capFirst(t)]&&(e["on"+this.capFirst(t)]=n))},stopObserving:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+this.capFirst(t)]&&(e["on"+this.capFirst(t)]=null)},removeObservers:function(){var e=this;this.each(this.obs||[],function(t){t.preventRemove||e.stopObserving(t.el,t.e,t.f)})},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isFunction:function(e){return"function"==typeof e||!1},capFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},each:function(e,t){var n=e.length;if(n)for(var i=0;i<n;i++)t(e[i],i)}})},function(e,t){QSI.API&&!window.QTest||(QSI.API={load:function(){function e(e){try{if(QSI.reg||this.unloading)return void e.reject();void 0===window.QSI&&(window.QSI={}),void 0===QSI.reg&&(QSI.reg={}),void 0===QSI.ed&&(QSI.ed={}),void 0===QSI.reqID&&(QSI.reqID={}),void 0===QSI.Request&&(QSI.Request={}),void 0===QSI.styleElements&&(QSI.styleElements=[]),QSI.util.forOwn(QSI.reqID,function(t,n){var i={loadingFromAPI:!0};i.id=n,"Editing"===QSI.version&&(i.version="0"),void 0!==QSI.global.clientVersion&&null!==QSI.global.clientVersion&&(i.Q_CLIENTVERSION=QSI.global.clientVersion),void 0!==QSI.global.clientType&&null!==QSI.global.clientType&&(i.Q_CLIENTTYPE=QSI.global.clientType),0===n.search(/ZN/)?i.ZoneID=n:i.InterceptID=n,QSI.isDebug&&(i.Q_DEBUG=null),i.deferred=e,QSI.Orchestrator.load(i)})}catch(e){QSI.dbg.e(e)}}try{var t=QSI.Orchestrator.Deferred(),n=t.promise();return QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LoadingState&&QSI.LoadingState.length>0?QSI.PendingQueue.push(e.bind(this,t)):e.bind(this,t)(),n}catch(e){QSI.dbg.e(e)}},unload:function(){try{if(QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LoadingState&&QSI.LoadingState.length>0)return void QSI.PendingQueue.push(QSI.API.unload);if(this.unloading=!0,QSI.reg&&(QSI.util.forOwn(QSI.reg,function(e,t){QSI.reg[t].remove()}),QSI.util.removeObservers()),QSI.debug&&(QSI.util.remove(QSI.util.$("QSI_Debug")),QSI.debuggerHasDisplayed=!1),QSI.styleElements)for(var e=QSI.styleElements,t=0;t<e.length;t++)QSI.util.remove(e[t]);QSI.reg=void 0,QSI.Request=void 0,QSI.styleElements=void 0,this.unloading=!1}catch(e){QSI.dbg.e(e)}},run:function(){try{if(QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LoadingState&&QSI.LoadingState.length>0)return void QSI.PendingQueue.push(QSI.API.run);QSI.InterceptsRan||void 0===QSI.reg||QSI.RunIntercepts(null,!0)}catch(e){QSI.dbg.e(e)}},Events:{increment:function(e){try{QSI.EventTracker.track(e)}catch(e){QSI.dbg.e(e)}},count:function(e){try{return QSI.EventTracker.get(e)}catch(e){QSI.dbg.e(e)}},push:function(e){try{QSI.EventTracker.track(e)}catch(e){QSI.dbg.e(e)}}}})},function(e,t){QSI.ContactFrequency={contactFrequencyRequestTimeout:1e4,contactFrequencyCheckResults:{},contactFrequencyCheckStates:{CAN_CONTACT:"CAN_CONTACT",DO_NOT_CONTACT:"DO_NOT_CONTACT",NOT_CHECKED:"NOT_CHECKED"},checkContactFrequencyRules:function(e,t){var n=QSI.Orchestrator.Deferred(),i={};return QSI.util.forOwn(e,function(e,n){if(this.contactFrequencyCheckResults[n]={status:this.contactFrequencyCheckStates.NOT_CHECKED,brandId:null,surveyId:null},null!==e.Targeting.Decision.ActionSetID){var r=e.Intercept;if(!QSI.util.shouldPreventRepeatedDisplay(n,r.DisplayOptions)&&this.shouldCheckContactFrequency(r)){var o=this.getIQDirectorySettings(r);if(o){var a=this.getTargetSurveyId(r,e.Targeting);a&&(o.surveyId=a,this.contactFrequencyCheckResults[n].surveyId=a),this.contactFrequencyCheckResults[n].brandId=t,o.brandId=t,i[n]=o,this.contactFrequencyCheckResults[n].status=this.contactFrequencyCheckStates.DO_NOT_CONTACT}else this.contactFrequencyCheckResults[n].status=this.contactFrequencyCheckStates.DO_NOT_CONTACT}}}.bind(this)),0!==Object.keys(i).length?this.sendContactFrequencyRequest(i,n):n.resolve(),n.promise()},shouldCheckContactFrequency:function(e){return e.DisplayOptions&&e.DisplayOptions.useContactFrequencyRules},getIQDirectorySettings:function(e){if(!e.DisplayOptions)return null;var t=e.DisplayOptions,n=this.resolveContactFrequencyExternalReference(t.contactFrequencyRefLocator,t.contactFrequencyRefExpression);if(!n)return QSI.dbg.e("Could not retrieve external reference ID for Contact Frequency Check"),null;if(!("string"==typeof n||n instanceof String))return QSI.dbg.e("External reference ID must be a string for Contact Frequency Check"),null;var i=t.contactFrequencyDirectoryID;if(!i)return QSI.dbg.e("Missing directoryId for Contact Frequency Check"),null;var r=t.contactFrequencyUserID;return r?{extRef:n,directoryId:i,userId:r}:(QSI.dbg.e("Missing User Id for Contact Frequency Check"),null)},getTargetSurveyId:function(e,t){if(!t.Decision||!t.Decision.ActionSetID)return null;var n=t.Decision.ActionSetID;return e.ActionSets&&e.ActionSets[n]&&e.ActionSets[n].Target&&"Survey"===e.ActionSets[n].Target.Type?e.ActionSets[n].Target.PrimaryElement:null},resolveContactFrequencyExternalReference:function(e,t){if(!t)return QSI.dbg.e("No reference expression used for contact frequency check"),null;switch(e){case"JavaScript":return QSI.EmbeddedData.getJavaScriptValue(t.expression);case"Cookie":return QSI.cookie.get(t.expression);default:return QSI.dbg.e("Reference locator used for contact frequency check is unsupported:"+e),null}},sendContactFrequencyRequest:function(e,t){var n="https://"+QSI.global.brandDC+"/dx-iqd-proxy/check-frequency-rules";return QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),void QSI.util.sendHttpRequest({type:"POST",url:n,header:{"Content-type":"application/json"},data:JSON.stringify(e),successCallback:function(e){try{var n;if(e.response&&(n=JSON.parse(e.response)),"object"!=typeof n)throw new Error("ContactFrequency check came back with invalid response: "+results);QSI.util.forOwn(n,function(e,t){null!==e?!0===e.passesFrequencyRules&&(this.contactFrequencyCheckResults[t].status=this.contactFrequencyCheckStates.CAN_CONTACT,this.contactFrequencyCheckResults[t].contactId=e.contactId):QSI.dbg.e("ContactFrequency check for intercept:"+t+" errored; defaulting to no show")}.bind(this))}catch(e){QSI.dbg.e(e)}finally{QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),t.resolve()}}.bind(this),errorCallback:function(e){var i="Call to ContactFrequency endpoint: "+n+" failed.";e.status&&(i=i+" Status:"+e.status);e.response&&(i=i+" Response:"+e.response);QSI.dbg.e(i),QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),t.resolve()}.bind(this),timeout:this.contactFrequencyRequestTimeout,timeoutCallback:function(){QSI.dbg.e("ContactFrequency check POST request to:"+n+" timed out"),QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),t.resolve()}})},recordContactFrequencyRequest:function(e){var t="https://"+QSI.global.brandDC+"/dx-iqd-proxy/record-contact";return void QSI.util.sendHttpRequest({type:"POST",url:t,header:{"Content-type":"application/json"},data:JSON.stringify(e),errorCallback:function(e){var n="Call to ContactFrequency endpoint: "+t+" failed.";e.status&&(n=n+" Status:"+e.status);e.response&&(n=n+" Response:"+e.response);QSI.dbg.e(n)}.bind(this),timeout:this.contactFrequencyRequestTimeout,timeoutCallback:function(){QSI.dbg.e("ContactFrequency record POST request to:"+t+" timed out")}})}}},function(e,t){QSI.AssetManager={loadedScripts:{},promiseFetch:function(e,t,n){var i=QSI.Orchestrator.Deferred(),r=new XMLHttpRequest;return r.open(e,t,!0),r.withCredentials=!0,"POST"===e&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?i.resolve(r.responseText):i.reject(r.responseText))},r.send(n),i.promise()},generateDefinitionRequestURL:function(e,t,n,i){var r=QSI.baseURL+"Asset.php?",o=[];return t=t||n.version,o.push("Module="+e),o.push("Version="+t),null!=i&&o.push("Q_InterceptID="+i),null===n.Q_NOCACHE&&o.push("Q_NOCACHE"),QSI.CORSOrigin&&o.push("Q_ORIGIN="+QSI.CORSOrigin),void 0!==n.Q_CLIENTVERSION&&null!==n.Q_CLIENTVERSION&&o.push("Q_CLIENTVERSION="+n.Q_CLIENTVERSION),void 0!==n.Q_CLIENTTYPE&&null!==n.Q_CLIENTTYPE&&o.push("Q_CLIENTTYPE="+n.Q_CLIENTTYPE),r+=o.join("&")},loadDefinition:function(e,t){var n=QSI.Orchestrator.Deferred(),i=new XMLHttpRequest;return i.open("GET",e,!0),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status)try{var e=JSON.parse(i.responseText);e.Error?n.reject(e):(t(e),n.resolve(i.responseText))}catch(e){n.reject(i.responseText)}else n.reject(i.responseText)},i.send(),n.promise()},promiseLoadIntercept:function(e,t,n){var i=t.InterceptID,r=QSI.AssetManager.generateDefinitionRequestURL(i,t.InterceptRevision,n);return QSI.LatencyLog.startComponentTimer("AssetDefinition-"+i),QSI.AssetManager.loadDefinition(r,function(t){QSI.LatencyLog.endComponentTimer("AssetDefinition-"+i),QSI.Request[e].Intercepts[i].Intercept=t.InterceptDefinition})},promiseLoadCreative:function(e,t,n){var i=t.Decision.Creative.ID;if("CR_NoCreative"!==i){var r=QSI.AssetManager.generateDefinitionRequestURL(i,t.Decision.Creative.Revision,n,t.InterceptID);return QSI.LatencyLog.startComponentTimer("AssetDefinition-"+i),QSI.AssetManager.loadDefinition(r,function(n){QSI.LatencyLog.endComponentTimer("AssetDefinition-"+i),QSI.util.isLegacyCreative(n.CreativeDefinition.Type)&&(n.CreativeDefinition=QSI.AssetManager.sortCreativeDefinition(n.CreativeDefinition)),QSI.Request[e].Intercepts[t.InterceptID].Creative=n.CreativeDefinition})}return QSI.Request[e].Intercepts[t.InterceptID].Creative=null,QSI.Orchestrator.Deferred().resolve(null)},promiseLoadPopUnderTarget:function(e,t,n){var i=QSI.AssetManager.generateDefinitionRequestURL(t.Decision.PopUnderTarget.ID,t.Decision.PopUnderTarget.Revision,n,t.InterceptID);return QSI.AssetManager.loadDefinition(i,function(n){QSI.Request[e].Intercepts[t.InterceptID].PopUnderTarget=n.CreativeDefinition})},promiseLoadScript:function(e,t){var n;if(this.alreadyFetched(e))return(n=QSI.Orchestrator.Deferred()).resolve(),n.promise();n=QSI.Orchestrator.Deferred();var i=document.createElement("script");i.src=QSI.global.hostedJSLocation+e+"Module.js?";var r=[];return void 0!==QSI.Orchestrator&&void 0!==QSI.Orchestrator.getClientVersionQueryString&&r.push(QSI.Orchestrator.getClientVersionQueryString()),(-1!==window.location.href.indexOf("Q_DEBUG")||QSI.config.debug)&&r.push("Q_DEBUG=true"),i.src+=r.join("&"),i.defer=!0,i.addEventListener("load",function(){try{!0===QSI.wrongModuleVersionRequested&&(n.reject(),QSI.dbg.e("Script: "+e+" failed to load because an unavailable version ("+t+") was requested.")),QSI.AssetManager.loadedScripts[e]=i,QSI.LatencyLog.endComponentTimer("JSModule-"+e),n.resolve()}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}},!1),i.addEventListener("error",function(){try{n.reject(),QSI.dbg.e("Script: "+e+" failed to load.")}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}),QSI.LatencyLog.startComponentTimer("JSModule-"+e),document.body.appendChild(i),n.promise()},alreadyFetched:function(e){return e in QSI.AssetManager.loadedScripts},sortCreativeDefinition:function(e){if(e&&e.Options&&e.Options.elements&&e.Options.elements.Elements){var t=e.Options.elements.Elements;t=QSI.util.stableSort(t,function(e,t){return Number(e.style.zIndex)<Number(t.style.zIndex)?-1:Number(e.style.zIndex)>Number(t.style.zIndex)?1:0});for(var n=0;n<t.length;n++)t[n].style&&t[n].style.zIndex&&(t[n].style.zIndex=QSI.global.currentZIndex++);return t=QSI.util.stableSort(t,function(e,t){return Number(e.position.left)<Number(t.position.left)?-1:Number(e.position.left)>Number(t.position.left)?1:0}),t=QSI.util.stableSort(t,function(e,t){return Number(e.position.top)<Number(t.position.top)?-1:Number(e.position.top)>Number(t.position.top)?1:0}),e.Options.elements.Elements=t,e}return e}}},function(e,t){QSI.CreativeManager={isCreativeSupported:function(e){return!!QSI.CreativeManager["run"+e]},runEmpty:function(e){var t;t=new QSI.Empty({id:e.interceptID,type:QSI.util.creativeTypes.EMPTY}),QSI.reg[e.interceptID]=t},runWebResponsiveDialog:function(e){var t,n,i,r;t=e.creative.Type,n=e.creative.Options.Layout,i=QSI.BuildResponsiveElementModule.PARENT_CONTAINER_CLASS,r=new QSI.WebResponsive[t][n]({id:e.interceptID,type:t,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,hasCreativeEmbeddedTarget:QSI.CreativeManager.Utilities.hasCreativeEmbeddedTarget(e.creative),impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getWebResponsiveResetStyle(i)}),QSI.reg[e.interceptID]=r},runFeedbackButton:function(e){var t,n;t=e.creative.Type,n=new QSI.FeedbackButton({id:e.interceptID,type:t,target:e.decision.Target,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options,resetStyle:QSI.CreativeManager.Utilities.getWebResponsiveResetStyle("QSIFeedbackButton")}),QSI.reg[e.interceptID]=n},runFeedbackLink:function(e){var t;t=new QSI.FeedbackLink({id:e.interceptID,type:QSI.util.creativeTypes.FEEDBACK_LINK,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id,displayOptions:e.creative.Options,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIFeedbackLink")}),QSI.reg[e.interceptID]=t},runHTTPRedirect:function(e){var t;QSI.global.isHostedJS()?QSI.dbg.c("Creative type '"+QSI.util.creativeTypes.HTTP_REDIRECT+"' is not supported."):(t=new QSI.HTTPRedirect({id:e.interceptID,type:QSI.util.creativeTypes.HTTP_REDIRECT,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions}),QSI.reg[e.interceptID]=t)},runIFrame:function(e){var t;t=new QSI.IFrame({id:e.interceptID,type:QSI.util.creativeTypes.IFRAME,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,iframeOptions:e.creative.Options,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id}),QSI.reg[e.interceptID]=t},runInfoBar:function(e){!function(){var t={id:e.interceptID,type:QSI.util.creativeTypes.INFO_BAR,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,displayOptions:e.creative.Options.displayOptions};if(e.creative.Options.elements)t.elements=e.creative.Options.elements,t.resetStyle=QSI.CreativeManager.Utilities.getResetStyle("QSIInfoBar");else{t.infoBarOptions=e.creative.Options;var n=QSI.CreativeManager.Utilities.parsePipedText(e.creative.Options.content);n&&n.length>0&&(t.locators=n)}var i=new QSI.InfoBar(t);QSI.reg[e.interceptID]=i}()},runLink:function(e){var t,n;t=QSI.CreativeManager.Utilities.parsePipedText(e.creative.Options.linkText),n=new QSI.Link({id:e.interceptID,type:QSI.util.creativeTypes.LINK,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,text:e.creative.Options.linkText,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id,locators:t&&t.length>0?t:null}),QSI.reg[e.interceptID]=n},runNoCreative:function(e){var t;t=new QSI.NoCreative({id:e.interceptID,type:QSI.util.creativeTypes.NO_CREATIVE,actionOptions:e.actionSet.ActionOptions,interceptDisplayOptions:e.intercept.DisplayOptions}),QSI.reg[e.interceptID]=t},runPopOver:function(e){var t;t=new QSI.PopOver({id:e.interceptID,type:QSI.util.creativeTypes.POP_OVER,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,hasCreativeEmbeddedTarget:QSI.CreativeManager.Utilities.hasCreativeEmbeddedTarget(e.creative),impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options.elements,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIPopOver")}),QSI.reg[e.interceptID]=t},runPopUnder:function(e){!function(){if(!("Chrome"===QSI.Browser.name&&QSI.Browser.version>29)){var t=e.creative.Options,n={id:e.interceptID,type:QSI.util.creativeTypes.POP_UNDER,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions};if(e.creative.Options.elements){n.elements=e.creative.Options.elements;var i="body { background-color: "+t.baseElement.style.backgroundColor+"; } .QSIPopUnder .close { color: #000000; text-decoration: none; } ";n.resetStyle=i+QSI.CreativeManager.Utilities.getResetStyle("QSIPopUnder"),t.width=t.baseElement.style.width,t.height=t.baseElement.style.height}else n.locators=QSI.CreativeManager.Utilities.parsePipedText(null);t.helperScriptSrc=QSI.baseURL+"Orchestrator.php?InterceptID="+e.interceptID+"&Q_Type=PopUnderHelper";var r={onPopForwardShowTarget:t.showTargetOnPopForward,showOnPageChange:t.showOnPageChange,showOnSiteExit:t.showOnSiteExit,checkThreshold:3,watchInterval:1e3,targetWidth:e.actionSet.ActionOptions.targetWidth,targetHeight:e.actionSet.ActionOptions.targetHeight,targetFullScreen:e.actionSet.ActionOptions.targetFullScreen,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID})};n.popunderOptions=t,n.popunderHelperOptions=r;var o=new QSI.PopUnder(n);QSI.reg[e.interceptID]=o}}()},runPopUnderHelper:function(e){QualtricsSI[e.interceptID].popunderCheckThreshold=null,QualtricsSI[e.interceptID].popunderWatchInterval=null,QualtricsSI.PopunderWatcherModule.startWatching(e.interceptID)},runPopUp:function(e){var t;t=new QSI.PopUp({id:e.interceptID,type:QSI.util.creativeTypes.POP_UP,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,creativeOptions:e.creative.Options}),QSI.reg[e.interceptID]=t},runRelay:function(e){var t;t=new QSI.Relay({id:e.interceptID,type:QSI.util.creativeTypes.RELAY,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options.elements,containerElement:e.creative.Options.baseElement,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIRelay")}),QSI.reg[e.interceptID]=t},runSlider:function(e){var t;t=new QSI.Slider({id:e.interceptID,type:QSI.util.creativeTypes.SLIDER,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,hasCreativeEmbeddedTarget:QSI.CreativeManager.Utilities.hasCreativeEmbeddedTarget(e.creative),impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options.elements,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSISlider")}),QSI.reg[e.interceptID]=t},runSocialMedia:function(e){!function(){if(QSI.global.isHostedJS())QSI.dbg.c("Creative type '"+QSI.util.creativeTypes.SOCIAL_MEDIA+"' is not supported.");else{var t=new QSI.SocialMedia({id:e.interceptID,type:QSI.util.creativeTypes.SOCIAL_MEDIA,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,buttons:e.creative.Options.buttons,buttonStyles:QSI.CreativeManager.SocialMediaHelper.getButtonStyles(e.creative),displayOptions:e.creative.Options.displayOptions,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id});QSI.reg[e.interceptID]=t}}()},runUserDefinedHTML:function(e){!function(){var t={id:e.interceptID,type:QSI.util.creativeTypes.USER_DEFINED_HTML,targetURL:e.decision.Target.URL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,displayOptions:e.creative.Options.displayOptions,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id};if(e.creative.Options.elements)t.elements=e.creative.Options.elements,t.resetStyle=QSI.CreativeManager.Utilities.getResetStyle("QSIUserDefinedHTML");else{t.html=e.creative.Options.html,t.size=e.creative.Options.size;var n=QSI.CreativeManager.Utilities.parsePipedText(e.creative.Options.html);n&&n.length>0&&(t.locators=n)}var i=new QSI.UserDefinedHTML(t);QSI.reg[e.interceptID]=i}()}}},function(e,t){QSI.CreativeManager.SocialMediaHelper={getButtonStyles:function(e){var t=e.Options.displayOptions.size;e.Options.displayOptions.useWidget&&(t="Large"===t?"80px":"");var n=QSI.CreativeManager.SocialMediaHelper.getThemeStyles(e),i=QSI.CreativeManager.SocialMediaHelper.getPadding(t),r=QSI.CreativeManager.SocialMediaHelper.getBoxShadow(e,t),o=QSI.CreativeManager.SocialMediaHelper.getWidth(e,t),a=".QSI_SocialMediaButton { float: left; cursor: pointer; background: "+n.background+"; border-bottom: "+n.border+"; border-right: "+n.border+"; border-top: "+n.highlight+"; border-left: "+n.highlight+"; } #QSI_SocialMediaContainer { border-top: "+n.border+"; border-left: "+n.border+"; box-shadow: "+r.shadowOutset+"; border-radius: "+r.borderRadius+"; } ";return e.Options.displayOptions.useWidget?(a+=QSI.CreativeManager.SocialMediaHelper.getWidgetStyles(e,t),"Large"===t&&(a+="#QSI_SocialMediaContainer { width: "+o+"; } ")):a+="#QSI_SocialMediaContainer { width: "+o+"; } .QSI_SocialMediaButton { padding: "+i+"; width: "+t+"; height: "+t+"; } ",1===QSI.CreativeManager.SocialMediaHelper.getMaxCols(e)?a+=".QSI_First .QSI_SocialMediaButton { border-radius: "+r.firstBorderRadius+"; } .QSI_Last .QSI_SocialMediaButton { border-radius: "+r.lastBorderRadius+"; } ":a+=".QSI_First .QSI_SocialMediaButton.QSI_First { border-radius: "+r.tlBorderRadius+"; } QSI_First .QSI_SocialMediaButton.QSI_Last { border-radius: "+r.trBorderRadius+"; } QSI_Last .QSI_SocialMediaButton.QSI_First { border-radius: "+r.blBorderRadius+"; } QSI_Last .QSI_SocialMediaButton.QSI_Last { border-radius: "+r.brBorderRadius+"; } ",a},getThemeStyles:function(e){var t={background:"none",border:"none",highlight:"none"};switch(e.Options.displayOptions.theme){case"Transparent":break;case"Glass":if(!("Internet Explorer"===QSI.Browser.name&&QSI.Browser.version<8)){t.background="rgba(255, 255, 255, .4)",t.border="1px solid rgba(200, 200, 200, .6)",t.highlight="1px solid rgba(255, 255, 255, .8)";break}case"Light":t.background="#E6E6E6",t.border="1px solid #B3B3B3",t.highlight="1px solid #FFFFFF";break;case"Medium":t.background="#666666",t.border="1px solid #4D4D4D",t.highlight="1px solid #7D7D7D";break;case"Dark":t.background="#333333",t.border="1px solid #1A1A1A",t.highlight="1px solid #484848"}return t},getPadding:function(e){var t="";switch(e){case"64px":t="8px";break;case"48px":t="7px";break;case"32px":t="6px";break;case"24px":t="5px"}return t},getBoxShadow:function(e,t){var n="0",i={};if("Small"===t)return{shadowOutset:"none",shadowInset:"none",borderRadius:"none",tlBorderRadius:"none",trBorderRadius:"none",blBorderRadius:"none",brBorderRadius:"none",firstBorderRadius:"none",lastBorderRadius:"none"};switch(e.Options.displayOptions.theme){case"Transparent":break;case"Glass":n=.15;break;case"Light":n=.25;break;case"Medium":n=.45;break;case"Dark":n=.6}i.shadowOutset="0px 0px 10px 0px rgba(0, 0, 0, "+n+")",i.shadowInset="none";var r="3px";switch(t){case"64px":r="6px";break;case"48px":r="5px";break;case"32px":r="4px";break;case"24px":r="3px"}if(i.borderRadius=r,i.tlBorderRadius=r+" 0px 0px 0px",i.trBorderRadius="0px "+r+" 0px 0px",i.blBorderRadius="0px 0px 0px "+r,i.brBorderRadius="0px 0px "+r+" 0px",i.firstBorderRadius=r+" "+r+" 0px 0px",i.lastBorderRadius="0px 0px "+r+" "+r,0===e.Options.displayOptions.xOffset)switch(e.Options.displayOptions.position){case"OTLL":case"OML":case"OBLL":i.shadowOutset="0px -4px 10px -2px rgba(0, 0, 0, "+n+"), -5px 0px 10px -4px rgba(0, 0, 0, "+n+"), -2px 4px 10px -3px rgba(0, 0, 0, "+n+")",i.borderRadius=r+" 0px 0px "+r,i.tlBorderRadius=r+" 0px 0px "+r,i.trBorderRadius="none",i.blBorderRadius="0px 0px 0px "+r,i.brBorderRadius="none",i.firstBorderRadius=r+" 0px 0px 0px",i.lastBorderRadius="0px 0px 0px "+r;break;case"OTRR":case"OMR":case"OBRR":i.shadowOutset="2px -5px 10px -3px rgba(0, 0, 0, "+n+"), 8px 0px 10px -6px rgba(0, 0, 0, "+n+"), 0px 5px 10px -3px rgba(0, 0, 0, "+n+")",i.borderRadius="0px "+r+" "+r+" 0px",i.tlBorderRadius="none",i.trBorderRadius="0px "+r+" 0px 0px",i.blBorderRadius="none",i.brBorderRadius="0px 0px "+r+" 0px",i.firstBorderRadius="0px "+r+" 0px 0px",i.lastBorderRadius="0px 0px "+r+"0px"}return i},getWidth:function(e,t){var n=0;switch(t){case"64px":n=82;break;case"48px":n=64;break;case"32px":n=46;break;case"24px":n=38;break;case"Large":case"Small":n=82}return n*QSI.CreativeManager.SocialMediaHelper.getMaxCols(e)},getMaxCols:function(e){var t=0;for(var n in e.Options.buttons)Object.prototype.hasOwnProperty.call(e.Options.buttons,n)&&(t=Math.max(t,e.Options.buttons[n].length));return t},getWidgetStyles:function(e,t){var n=".QSI_SocialMediaButton {position:relative;} ";for(var i in n+="Small"===t?".QSI_SocialMediaButton .Content { height: 20px; padding: 3px; } ":".QSI_SocialMediaButton { height: 80px; width: 80px; } ",e.Options.buttons)if(Object.prototype.hasOwnProperty.call(e.Options.buttons,i)){var r=e.Options.buttons[i];if(r)switch(r.type){case"Facebook":n+="Large"===t?".QSI_SocialMediaButton.QSI_Facebook .Content { width: 48px; height: 62px; position: absolute; top: 9px; left: 17px; } ":".QSI_SocialMediaButton.QSI_Facebook .Content { width: 90px; } ";break;case"GooglePlus":n+="Large"===t?".QSI_SocialMediaButton.QSI_GooglePlus .Content { width: 50px; height: 60px; position: absolute; top: 11px; left: 16px; } ":".QSI_SocialMediaButton.QSI_GooglePlus .Content { width: 90px; } ";break;case"Twitter":n+="Large"===t?".QSI_SocialMediaButton.QSI_Twitter .Content { width: 55px; height: 62px; position: absolute; top: 10px; left: 13px; } ":".QSI_SocialMediaButton.QSI_Twitter .Content { width: 107px; } ";break;case"LinkedIn":n+="Large"===t?".QSI_SocialMediaButton.QSI_LinkedIn .Content { height: 62px; position: absolute; top: 9px; left: 11px; } ":".QSI_SocialMediaButton.QSI_LinkedIn .Content { width: 93px; } ";break;case"Reddit":n+="Large"===t?".QSI_SocialMediaButton.QSI_Reddit .Content { width: 50px; height: 66px; position: absolute; top: 5px; left: 15px; } ":".QSI_SocialMediaButton.QSI_Reddit .Content { height: 17px; width: 75px; margin-top: 3px; } ";break;case"Digg":n+="Large"===t?".QSI_SocialMediaButton.QSI_Digg .Content { width: 54px; height: 69px; position: absolute; top: 6px; left: 14px; } ":".QSI_SocialMediaButton.QSI_Digg .Content { width: 76px; } "}}return n}}},function(e,t){QSI.CreativeManager.Utilities={getImpressionURL:function(e){var t={Q_Impress:1,Q_CID:e.creativeID,Q_SIID:e.interceptID,Q_ASID:e.asid,Q_CLIENTVERSION:QSI.global.clientVersion||"unknown",Q_CLIENTTYPE:QSI.global.clientType||"unknown"};return QSI.baseURL+"?"+QSI.Orchestrator.generateQueryString(t)},getWebResponsiveResetStyle:function(e){var t="";return[{selectorList:["div","dl","dt","dd","ul","ol","li","h1","h2","h3","h4","h5","h6","span","pre","form","fieldset","textarea","p","blockquote","tr","th","td"],styleResets:"{ margin: 0; padding: 0;background-color: transparent; border: 0; font-size: 12px; line-height: normal; vertical-align:baseline; box-shadow: none; }"},{selectorList:["img"],styleResets:"{ height: auto; width: auto; margin: 0; padding: 0 }"},{selectorList:["ul","ol"],styleResets:"{ margin: 12px 0; padding-left: 40px; }"},{selectorList:["ul li"],styleResets:"{ list-style-type: disc; }"},{selectorList:["ol li"],styleResets:"{ list-style-type: decimal; }"},{selectorList:[".scrollable"],styleResets:"{ -webkit-overflow-scrolling: touch; }"},{selectorList:["table"],styleResets:"{ border-collapse: collapse; border-spacing: 0; }"},{selectorList:["table td"],styleResets:"{ padding: 2px; }"},{selectorList:["*"],styleResets:"{ box-sizing: content-box; }"}].forEach(function(n){t+=function(t,n){if(0===t.length)return"";for(var i="."+e,r="",o=0;o<t.length;o++)r+=i+" "+t[o]+",";return(r=r.slice(0,-1))+n}(n.selectorList,n.styleResets)}),t},getResetStyle:function(e){var t="."+e;return t+" div,"+t+" dl,"+t+" dt,"+t+" dd,"+t+" ul,"+t+" ol,"+t+" li,"+t+" h1,"+t+" h2,"+t+" h3,"+t+" h4,"+t+" h5,"+t+" h6,"+t+" pre,"+t+" form,"+t+" fieldset,"+t+" textarea,"+t+" p,"+t+" blockquote,"+t+" th,"+t+" td {margin: 0;padding: 0;color: black;font-family: arial;font-size: 12px;line-height: normal;}"+t+" ul {margin: 12px 0;padding-left: 40px;}"+t+" ol,"+t+" ul {margin: 12px 0;padding-left: 40px;}"+t+" ul li {list-style-type: disc;}"+t+" ol li {list-style-type: decimal;}"+t+" .scrollable {-webkit-overflow-scrolling: touch;}"+t+" table {border-collapse: collapse;border-spacing: 0;}"+t+" table td {padding: 2px;}.QSIPopOver *,.QSISlider *,.QSIPopUnder *,.QSIEmbeddedTarget * {box-sizing: content-box;}"},hasCreativeEmbeddedTarget:function(e){if(!e||!e.Options.elements||!e.Options.elements.Elements)return!1;var t=e.Options.elements.Elements;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(i.type&&"EmbeddedTarget"===i.type)return!0}return!1},parsePipedText:function(e){var t,n=/\$\{(SI)?([A-Za-z]*):\/\/([^\}]*)\}/g,i=[];do{(t=n.exec(e))&&i.push(t)}while(t);return i}}},function(e,t,n){QSI.Orchestrator={init:function(){if(this.setupJFEMessageEventHandlerForIOSOptimization(),QSI.global.latencySamplePercentage=.02,QSI.LoadingState||(QSI.LoadingState=[]),QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LatencyLog.startTimer(),QSI.global.legacyId){QSI.Request||(QSI.Request={}),QSI.debug={};var e,t=QSI.global.legacyId,n={id:t};if(0===t.indexOf("ZN")?n.ZoneID=t:n.InterceptID=t,QSI.global.isHostedJS())(void 0!==(e=QSI.Orchestrator.parseQueryString(window.location.href)).Q_DEBUG||QSI.config.debug)&&(n.Q_DEBUG=null,QSI.initFullDbg()),(QSI.config.editing||"0"===QSI.global.version)&&(n.version="0");else{var i;if(document.currentScript)i=document.currentScript.src;else try{var r=document.querySelectorAll("script"),o=[];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(o[a]=r[a]);var s=QSI.global.baseURL;0===s.indexOf("https://")?s=s.substring(8):0===s.indexOf("http://")?s=s.substring(7):0===s.indexOf("//")&&(s=s.substring(2)),i=o.filter(function(e){return(-1!==e.src.indexOf(s+"/WRSiteInterceptEngine/?")||-1!==e.src.indexOf(s+"/SIE/?"))&&(-1===e.src.indexOf("Q_Impress")&&-1===e.src.indexOf("Q_Redirect")&&-1===e.src.indexOf("Q_Click")&&-1===e.src.indexOf("Q_DPR"))})[0].src}catch(e){QSI.dbg.e("An error occurred while loading the intercept.",e)}void 0!==(e=QSI.Orchestrator.parseQueryString(i)).Q_NOCACHE&&(n.Q_NOCACHE=null),void 0!==e.Q_BOOKMARKLET&&(n.Q_BOOKMARKLET=null,n.Q_DEBUG=null,QSI.initFullDbg()),void 0!==e.Q_DEBUG&&(n.Q_DEBUG=null,QSI.initFullDbg()),void 0!==e.Q_VERSION&&(n.version=e.Q_VERSION)}void 0!==QSI.global.clientVersion&&null!==QSI.global.clientVersion&&(n.Q_CLIENTVERSION=QSI.global.clientVersion),void 0!==QSI.global.clientType&&null!==QSI.global.clientType&&(n.Q_CLIENTTYPE=QSI.global.clientType),QSI.Orchestrator.load(n)}else if(!QSI.Request){QSI.Request={};for(var c=document.querySelectorAll("[data-siteinterceptscript]"),p=0;p<c.length;p++){var l=c[p];QSI.isDebug=QSI.isDebug||l.hasAttribute("data-qdebug")||-1!==window.location.href.indexOf("Q_DEBUG"),QSI.isDebug&&QSI.initFullDbg();var d={};l.hasAttribute("data-interceptid")&&(d.InterceptID=l.getAttribute("data-interceptid"),d.id=d.InterceptID),l.hasAttribute("data-zoneid")&&(d.ZoneID=l.getAttribute("data-zoneid"),d.id=d.ZoneID),l.hasAttribute("data-qnocache")&&(d.Q_NOCACHE=null),l.hasAttribute("data-qbookmarklet")&&(d.Q_BOOKMARKLET=null),QSI.isDebug&&(d.Q_DEBUG=null),l.hasAttribute("data-version")&&(d.version=l.getAttribute("data-version")),QSI.Orchestrator.load(d)}}},load:function(e){QSI.LoadingState.push(!0);var t=QSI.Orchestrator.generateTargetingURL(e);QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.TARGETING);var n=QSI.Orchestrator.getQLOCPostData(),i=QSI.AssetManager.promiseFetch("POST",t,n);QSI.Request[e.id]={},QSI.Request[e.id].Intercepts={},QSI.Request[e.id].Params=e,i.then(function(){QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.TARGETING)}).then(QSI.Orchestrator.handleTargetingResponse.bind(null,e),function(t){QSI.dbg.e(t.Message),e.deferred&&e.deferred.reject()})},getQLOCPostData:function(){return QSI.shouldStripQueryParamsInQLoc?"Q_LOC="+encodeURIComponent(window.location.href.split("?")[0]):"Q_LOC="+encodeURIComponent(window.location.href)},generateTargetingURL:function(e){var t=QSI.baseURL+"Targeting.php?",n=[];e.InterceptID&&n.push("Q_InterceptID="+e.InterceptID),e.ZoneID&&n.push("Q_ZoneID="+e.ZoneID),null===e.Q_DEBUG&&(n.push("Q_DEBUG"),QSI.isDebug=!0),null===e.Q_BOOKMARKLET&&n.push("Q_BOOKMARKLET"),null===e.Q_NOCACHE&&n.push("Q_NOCACHE"),void 0!==e.version&&null!==e.version&&n.push("Version="+e.version);var i=QSI.profile.get("QualtricsSurveyHistory","",1);if(i){var r=encodeURIComponent(Object.keys(i));n.push("Q_QualtricsSurveyTaken="+r)}return void 0!==e.Q_CLIENTVERSION&&null!==e.Q_CLIENTVERSION&&n.push("Q_CLIENTVERSION="+e.Q_CLIENTVERSION),void 0!==e.Q_CLIENTTYPE&&null!==e.Q_CLIENTTYPE&&n.push("Q_CLIENTTYPE="+e.Q_CLIENTTYPE),t+n.join("&")},isMessageEventOriginAllowed:function(e){if(QSI.reg&&QSI.reg instanceof Object)for(var t in QSI.reg)if(Object.prototype.hasOwnProperty.call(QSI.reg,t)&&QSI.reg[t]&&QSI.reg[t].options&&QSI.reg[t].options.targetURLOrigin&&QSI.reg[t].options.targetURLOrigin===e)return!0;return QSI.dbg&&QSI.dbg.c&&QSI.dbg.c("Event origin is not allowed: "+e),!1},handleTargetingResponse:function(e,t){try{var n="";if("SampleRejected"===t)return;try{n=JSON.parse(t)}catch(e){return void QSI.dbg.e("Failed to parse JSON of targeting response: "+t)}if(n.Error)return void QSI.dbg.e(n.Message);QSI.Orchestrator.setGlobalVars(n),QSI.Orchestrator.setupDBGLog();var i=n.Modules;if(i.Core)QSI.AssetManager.promiseLoadScript("Core",i.Core).then(function(){try{if(QSI.history.logVisit(),n.Intercepts)for(var t=0;t<n.Intercepts.length;t++){var i=n.Intercepts[t];i&&(i.Error?QSI.dbg.log(i.Message):(QSI.Request[e.id].Intercepts[i.InterceptID]={},QSI.Request[e.id].Intercepts[i.InterceptID].Targeting=i))}!QSI.Request[e.id].hasDependencies&&QSI.Request[e.id].hasBeenResolved||(QSI.EventTracker.trackElements(),QSI.EventTracker.incrementEventList(),window._qsie=QSI.API.Events),n.Dependencies?QSI.Orchestrator.handleDependencyResolver(e,n):QSI.Orchestrator.loadModules(e,n)}catch(e){QSI.dbg.e(e)}},function(){});else QSI.Orchestrator.doneLoading(e)}catch(e){QSI.dbg.e(e)}},setupDBGLog:function(){QSI.dbg&&(QSI.dbg.log=function(e,t,n){if(QSI.ClientLog)if(QSI.global.featureFlags.isClientLoggingEnabled)QSI.ClientLog.send(e,t,n);else{QSI.ClientLog.sampledSend(e,t,n,.02)}})},handleDependencyResolver:function(e,t){var n=QSI.Orchestrator.generateTargetingURL(e);n+="&t="+(new Date).getTime(),n+="&Q_VSI="+encodeURIComponent(JSON.stringify(t.RequestData.validIntercepts)),n+="&Q_DPR=true",QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.DPR_TARGETING);var i="";for(var r in t.Dependencies)Object.prototype.hasOwnProperty.call(t.Dependencies,r)&&("SiteCatalyst"===r&&(QSI["Resolve"+r].rootName=QSI.adobeVar),i+=QSI["Resolve"+r].prepare(t.Dependencies[r]));i+="&"+QSI.Orchestrator.getQLOCPostData(),QSI.AssetManager.promiseFetch("POST",n,i).then(function(){QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.DPR_TARGETING)}).then(QSI.Orchestrator.handleTargetingResponse.bind(this,e),function(t){QSI.dbg.e(t.Message),e.deferred&&e.deferred.reject()})},loadModules:function(e,t){var n=[],i=t.Modules;for(var r in QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.ASSETS_AND_MODULES),i)if(Object.prototype.hasOwnProperty.call(i,r)){if("ScreenCapture"===r){QSI.Orchestrator.setupScreenCaptureListener(i[r]);continue}if(("HTTPRedirect"===r||"SocialMedia"===r||"LatencyLog"===r)&&QSI.global.isHostedJS()){QSI.dbg.c("Module type '"+r+"' is not supported when using Site Intercept Hosted JS");continue}var o=QSI.AssetManager.promiseLoadScript(r,i[r]);n.push(o)}for(var a=0;a<t.Intercepts.length;a++){var s=t.Intercepts[a];if(s&&!s.Error&&null!==s.Decision.ActionSetID){var c=QSI.AssetManager.promiseLoadIntercept(e.id,s,e),p=QSI.AssetManager.promiseLoadCreative(e.id,s,e);if(n.push(c,p),s.Decision.PopUnderTarget&&s.Decision.PopUnderTarget.ID&&"Target"!==s.Decision.PopUnderTarget.ID){var l=QSI.AssetManager.promiseLoadPopUnderTarget(e.id,s,e);n.push(l)}}}QSI.Orchestrator.when.apply(this,n).then(function(){try{if(QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.ASSETS_AND_MODULES),QSI.global.featureFlags["DX.ContactFrequency"])QSI.ContactFrequency.checkContactFrequencyRules(QSI.Request[e.id].Intercepts,QSI.global.brandID).then(function(){QSI.Orchestrator.prepareIntercepts(e,t)});else QSI.Orchestrator.prepareIntercepts(e,t)}catch(e){QSI.dbg.e(e)}},function(t){var n="";"string"==typeof t?n=t:t&&"string"==typeof t.Message&&(n=t),QSI.dbg.e("An error occurred while loading the intercept. "+n),e.deferred&&e.deferred.reject()})},setInterceptDisplayOptionCallback:function(e,t){switch(e){case"":case"onfocus":QSI.util.waitForFocus().done(t);break;case"onload":t();break;case"onexit":QSI.util.waitForExitIntent().done(t);break;default:return}},prepareIntercepts:function(e,t){!0!==e.loadingFromAPI&&(QSI.LatencyLog.endTimer(),QSI.LatencyLog.sampledSend(QSI.global.latencySamplePercentage)),QSI.Orchestrator.setGlobalIncludes(e,t),("manual"!==QSI.Request[e.id].displayInterceptType&&!QSI.Request[e.id].zoneManualDisplay||QSI.Request[e.id].hasDependencies)&&QSI.RunIntercepts(e.id,!1),QSI.Orchestrator.doneLoading(e),e.deferred&&e.deferred.resolve()},setGlobalIncludes:function(e,t){QSI.isDebug&&(QSI.Request[e.id].Debug={debugInfo:JSON.parse(t.DebugInfo),version:t.RequestData.bVersion},QSI.debug.version=t.RequestData.bVersion,QSI.debug.debugInfo=JSON.parse(t.DebugInfo)),QSI.version=t.RequestData.bVersion,QSI.InterceptsRan=!1,QSI.Request[e.id].hasDependencies=t.RequestData.hasDependencies,QSI.Request[e.id].hasBeenResolved=t.RequestData.hasBeenResolved,QSI.Request[e.id].displayInterceptType=t.RequestData.displayInterceptType,QSI.Request[e.id].zoneManualDisplay=t.RequestData.zoneManualDisplay},setGlobalVars:function(e){QSI.Browser={name:e.RequestData.browser,version:e.RequestData.browserVersion,isMobile:e.RequestData.isMobile,isBrowserSupported:e.RequestData.isBrowserSupported},QSI.CORSOrigin=e.RequestData.CORSOrigin,QSI.OS={name:e.RequestData.osName,version:e.RequestData.osVersion},QSI.global.brandID=e.RequestData.brandID,QSI.global.brandDC=e.RequestData.brandDC,QSI.global.isHostedJS()?(QSI.global.graphicPath="https://"+QSI.global.brandDC+"/WRQualtricsSiteIntercept/Graphic.php?IM=",QSI.global.imagePath="https:"+QSI.global.baseURL+"/WRSiteInterceptEngine/../WRQualtricsShared/Graphics/"):(QSI.global.graphicPath="https://"+QSI.global.brandDC+"/WRQualtricsSiteIntercept/Graphic.php?IM=",QSI.global.imagePath=QSI.global.baseURL+"/WRQualtricsShared/Graphics/"),QSI.global.maxCookieSize=e.RequestData.maxCookieSize,QSI.global.featureFlags=e.FeatureFlags,QSI.global.screenCaptureServiceBaseURL=e.RequestData.screenCaptureServiceBaseURL,QSI.global.eventTrackers=e.RequestData.eventTrackers,QSI.adobeVar=e.RequestData.adobeSCVariable,QSI.id=e.RequestData.ID,QSI.reqID[e.RequestData.ID]=!0,QSI.CookieDomain=e.RequestData.cookieDomain,QSI.historyStorageType=e.RequestData.historyStorageType,QSI.historyStorageSize=e.RequestData.historyStorageSize,QSI.currentURL=window.location.href.split("?")[0],function(){var e=document.createElement("div");e.className="scrollbar-measure",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-99999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;QSI.scrollbarWidth=t,document.body.removeChild(e)}()},parseQueryString:function(e){var t={};if(e&&-1!==e.indexOf("?")){var n=e.split("?",2)[1];n=n.split("&");for(var i=0;i<n.length;i++){var r=n[i].split("=",2);"Q_LOC"===r[0]&&-1!==r[1].indexOf("Q_DEBUG")&&(t.Q_DEBUG=!0),r[0]&&(t[r[0]]=decodeURIComponent(r[1]))}}return t},generateQueryString:function(e){var t=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=n;e[n]&&(i+="="+encodeURIComponent(e[n])),t.push(i)}return t.join("&")},getClientVersionQueryString:function(){return QSI.Orchestrator.generateQueryString({Q_CLIENTVERSION:QSI.global.clientVersion||"unknown",Q_CLIENTTYPE:QSI.global.clientType||"unknown"})},replaceAll:function(e,t,n){return t=t.replace(/([.*+?^${}()|\[\]\\=!:\/])/g,"\\$1"),e.replace(new RegExp(t,"g"),n)},Deferred:function(){var e={},t="pending",n=[],i=[],r=[],o=[],a={state:function(){return t},then:function(e,t){return this.done(e).fail(t),this},done:function(e){if("pending"===t)r.push(e);else if("resolved"===t)try{e.apply(this,n)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}return this},fail:function(e){if("pending"===t)o.push(e);else if("rejected"===t)try{e.apply(this,i)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}return this},promise:function(){return a}};return QSI.Orchestrator.forOwn(a,function(t,n){e[n]=a[n]}),e.resolve=function(){if("pending"===t){t="resolved";var e=QSI.Orchestrator.createArrayFromArguments(arguments);n=e;var i=this;QSI.Orchestrator.each(r,function(t){try{t.apply(i,e)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}},e.reject=function(){if("pending"===t){t="rejected";var e=QSI.Orchestrator.createArrayFromArguments(arguments);i=e;var n=this;QSI.Orchestrator.each(o,function(t){try{t.apply(n,e)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}},e},when:function(e){var t=QSI.Orchestrator.createArrayFromArguments(arguments),n=t.length,i=n,r=1===i?e:QSI.Orchestrator.Deferred(),o=function(e,t){return function(n){t[e]=arguments.length>1?n:QSI.Orchestrator.createArrayFromArguments(arguments),--i||r.resolve(t)}};if(n>1)for(var a=0;a<n;a++)t[a]&&t[a].promise?t[a].promise().done(o(a,t)).fail(r.reject):i--;return i<1&&r.resolve(t),r.promise()},createArrayFromArguments:function(e){return e?Array.prototype.slice.call(e):[]},isFunction:function(e){return"function"==typeof e||!1},forOwn:function(e,t){if(e&&e instanceof Object&&this.isFunction(t))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},each:function(e,t){var n=e.length;if(n)for(var i=0;i<n;i++)t(e[i],i)},doneLoading:function(e){if(QSI.LoadingState.pop(),0===QSI.LoadingState.length){if(!0!==e.loadingFromAPI){var t=document.createEvent("Event");t.initEvent("qsi_js_loaded",!0,!0),window.dispatchEvent(t)}for(var n=QSI.PendingQueue.length,i=0;i<n;i++){QSI.PendingQueue.shift()()}}},setupJFEMessageEventHandlerForIOSOptimization:function(){if(!QSI.JFEListenerRegistered){QSI.JFEListenerRegistered=!0;return window.addEventListener("message",function(e){try{if(QSI.Orchestrator&&QSI.Orchestrator.isMessageEventOriginAllowed&&!QSI.Orchestrator.isMessageEventOriginAllowed(e.origin))return;(function(e){var t=null;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return!1}return null!==t&&"JFE"===t.from&&"SI"===t.to&&"JFELoaded"===t.event&&"iOS"===QSI.OS.name})(e.data)&&(t=e.source,n=e.origin,t.postMessage({event:"addIOSSIWorkaround",from:"SI",to:"JFE"},n))}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}var t,n})}},setupScreenCaptureListener:function(e){if(!QSI.screenCaptureListenerRegistered)return QSI.screenCaptureListenerRegistered=!0,window.addEventListener("message",function(t){try{if(QSI.Orchestrator&&QSI.Orchestrator.isMessageEventOriginAllowed&&!QSI.Orchestrator.isMessageEventOriginAllowed(t.origin))return;var n=QSI.util.getOriginInterceptOfMessage(t.source);if(!n)return;var i=t.data;if("string"==typeof i)try{i=JSON.parse(i)}catch(e){return}if(!i||"JFE"!==i.from||"SI"!==i.to)return;if(QSI.screenCaptureHandlers||(QSI.screenCaptureHandlers={}),"canScreenCapture"===i.event){void 0===QSI.screenCaptureModulePromise&&(QSI.screenCaptureModulePromise=QSI.AssetManager.promiseLoadScript("ScreenCapture",e));return void t.source.postMessage(JSON.stringify({event:"canScreenCapture",from:"SI",to:"JFE",canScreenCapture:!0}),t.origin)}void 0!==QSI.screenCaptureModulePromise&&QSI.screenCaptureModulePromise.then(function(){switch(QSI.screenCaptureHandlers[i.sessionId]||(QSI.screenCaptureHandlers[i.sessionId]=new QSI.ScreenCaptureHandler(n,t.source,i.sessionId,i.translations,t.origin)),i.event){case"startScreenCapture":QSI.screenCaptureHandlers[i.sessionId].captureScreen(i.questionId);break;case"editScreenCapture":QSI.screenCaptureHandlers[i.sessionId].editAnnotations(i.questionId);break;case"removeScreenCapture":QSI.screenCaptureHandlers[i.sessionId].removeScreenCapture(i.questionId);break;case"sessionFinished":QSI.screenCaptureHandlers[i.sessionId].removeAllScreenCaptures();break;default:return}})}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}}},function(e,t){QSI.RunIntercepts=function(e,t){void 0===e&&(e=null),QSI.util.observe(window,"message",function(e){try{if(QSI.Orchestrator&&QSI.Orchestrator.isMessageEventOriginAllowed&&!QSI.Orchestrator.isMessageEventOriginAllowed(e.origin))return;if(e.data&&"string"==typeof e.data){var t=e.data.split("|");if("QualtricsEOS"===t[0]){var n=t[1],i=t[2];QSI.history.logSurvey(n,i)}}}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}});for(var n=e?[e]:Object.keys(QSI.Request),i=0;i<n.length;i++){for(var r in QSI.Request[n[i]].Intercepts)if(Object.prototype.hasOwnProperty.call(QSI.Request[n[i]].Intercepts,r)){var o=QSI.Request[n[i]].Intercepts[r];if(!QSI.reg[r]){var a;if(QSI.history.logIntercept(r,o.Targeting.Decision.ActionSetID),o.siid=n[i],o.Intercept){var s=o.Intercept.DisplayOptions;a=void 0!==s.displayInterceptType?s.displayInterceptType:!0===s.manualDisplay?"manual":"onload"}!t||QSI.Request[n[i]].zoneManualDisplay&&"manual"!==a?QSI.Orchestrator.setInterceptDisplayOptionCallback(a,QSI.RunIntercept.bind(null,r,o)):"manual"===a&&QSI.RunIntercept(r,o)}}QSI.isDebug&&!QSI.debuggerHasDisplayed&&(new QSI.DebugHandler(QSI.Request[n[i]].Debug),QSI.debuggerHasDisplayed=!0)}var c=document.createEvent("Event");c.initEvent("Resolved",!0,!0),document.body.dispatchEvent(c)},QSI.Orchestrator.addPopUnderTarget=function(e,t){t.Options.width=t.Options.baseElement.style.width,t.Options.height=t.Options.baseElement.style.height,t.Options.helperScriptSrc=QSI.baseURL+"Orchestrator.php";var n={onPopForwardShowTarget:t.Options.showTargetOnPopForward,showOnPageChange:t.Options.showOnPageChange,showOnSiteExit:t.Options.showOnSiteExit,checkThreshold:3,watchInterval:1e3,targetWidth:e.actionSet.ActionOptions.targetWidth,targetHeight:e.actionSet.ActionOptions.targetHeight,targetFullScreen:e.actionSet.ActionOptions.targetFullScreen,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL(e)};e.actionSet.ActionOptions.targetPopUnderDisplay.creative={elements:t.Options.elements,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIPopUnder"),popunderOptions:t.Options,popunderHelperOptions:n}},QSI.RunIntercept=function(e,t){try{if(void 0===t.Targeting.Decision.ActionSetID||null===t.Targeting.Decision.ActionSetID)return;var n=t.Intercept.ActionSets[t.Targeting.Decision.ActionSetID];Q=n.EmbeddedData,(!QSI.ed[e]||Q&&0!==Q.length)&&(QSI.ed[e]=Q),QSI.global.intercepts[e]={CreativeID:t.Targeting.Decision.Creative.ID,ASID:t.Targeting.Decision.ActionSetID};var i={id:t.siid,interceptID:t.Targeting.InterceptID,intercept:t.Intercept,actionSet:t.Intercept.ActionSets[t.Targeting.Decision.ActionSetID],creative:t.Creative,decision:t.Targeting.Decision,params:QSI.Request[t.siid].Params},r=t.Targeting.Decision.Creative.LocatorValues;if(r)for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var a=r[o];if(t.Creative.Options&&t.Creative.Options.content&&(t.Creative.Options.content=QSI.Orchestrator.replaceAll(t.Creative.Options.content,o,a)),t.Creative.Options&&t.Creative.Options.html&&(t.Creative.Options.html=QSI.Orchestrator.replaceAll(t.Creative.Options.html,o,a)),t.Creative.Options&&t.Creative.Options.elements)for(var s in t.Creative.Options.elements.Elements)if(Object.prototype.hasOwnProperty.call(t.Creative.Options.elements.Elements,s)){var c=t.Creative.Options.elements.Elements[s];c.content=QSI.Orchestrator.replaceAll(c.content,o,a)}}var p=t.Targeting.Decision.Creative.AnchorTags;if(p)for(var l in p)if(Object.prototype.hasOwnProperty.call(p,l)){var d=p[l];if(t.Creative.Options&&t.Creative.Options.content&&(t.Creative.Options.content=t.Creative.Options.content.replace(new RegExp(l,"i"),d)),t.Creative.Options&&t.Creative.Options.elements){var I=t.Creative.Options.elements.Elements;if(I&&I.length)for(var u=0;u<I.length;u++)I[u].content=I[u].content.replace(new RegExp(l,"i"),d)}}i.actionSet.ActionOptions.targetPopUnderDisplay&&t.PopUnderTarget&&("Target"===t.Targeting.Decision.PopUnderTarget.ID?i.actionSet.ActionOptions.targetPopUnderDisplay.id="Target":QSI.Orchestrator.addPopUnderTarget(i,t.PopUnderTarget));var S,g=function(){t.Creative?QSI.CreativeManager.isCreativeSupported(t.Creative.Type)?QSI.CreativeManager["run"+t.Creative.Type](i):QSI.dbg.c("Creative type '"+t.Creative.Type+"' is not supported."):QSI.CreativeManager.runNoCreative(i)};if(n.ActionOptions.useCustomTrigger)"scroll"===n.ActionOptions.triggerType?(S=function(){try{var e=n.ActionOptions.scrollPercentage?n.ActionOptions.scrollPercentage:0;QSI.util.hasReachedScrollPosition(e)&&(g(),QSI.util.stopObserving(window,n.ActionOptions.triggerType,S))}catch(e){QSI.dbg.e(e)}},QSI.util.observe(window,n.ActionOptions.triggerType,S)):n.ActionOptions.triggerEntirePage?(S=function(){try{g(),QSI.util.stopObserving(document.body,n.ActionOptions.triggerType,S)}catch(e){QSI.dbg.e(e)}},QSI.util.observe(document.body,n.ActionOptions.triggerType,S)):"pageLoad"===n.ActionOptions.triggerType?g():(S=function(){try{g(),QSI.util.stopObserving(QSI.util.$(n.ActionOptions.triggerElementID),n.ActionOptions.triggerType,S)}catch(e){QSI.dbg.e(e)}},QSI.util.observe(QSI.util.$(n.ActionOptions.triggerElementID),n.ActionOptions.triggerType,S));else g()}catch(e){QSI.dbg.e(e)}var Q}},function(e,t){QSI.Orchestrator.init()}]);}catch(e){if(typeof QSI!=='undefined'&&QSI.dbg&&QSI.dbg.e){QSI.dbg.e(e);}}