(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1027:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(0),i=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),s(t,[{key:"render",value:function(){return a.a.createElement("a",{href:this.props.url,target:this.props.target},this.props.label)}}]),t}();u.propTypes={url:i.a.string,label:i.a.string,target:i.a.string},u.defaultProps={label:"",url:"",target:""},t.a=u},1045:function(e,t,n){"use strict";var r=n(28),a=n.n(r),o=n(1),i=n.n(o),s=n(0),u=n.n(s),l=n(1027),c=n(296),p=n(31),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var h=p.l.LINK_SIGN_IN,m={url:""},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=Object.assign({},m),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),f(t,[{key:"componentDidMount",value:function(){this.setUrl()}},{key:"setUrl",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.navigation.getSigninUrl();case 2:t=e.sent,this.setState({url:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement(l.a,{ref:"linkToSignin",url:this.state.url,label:this.props.label})}}]),t}();d.propTypes={label:u.a.string},d.defaultProps={label:h},t.a=Object(c.a)("navigation").map(d)},1178:function(e,t,n){"use strict";n.r(t);var r=n(28),a=n.n(r),o=n(1),i=n.n(o),s=n(89),u=n(1045),l=n(0),c=n.n(l),p=n(1059),f=n(1060),h=n(31),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=h.v.SESSION_TIMEOUT_TITLE,g=h.v.SESSION_TIMEOUT_DESCRIPTION,v=h.v.SESSION_TIMEOUT_LOG_OUT,b=h.v.SESSION_TIMEOUT_RESUME,y={userResponseTimer:null},O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=Object.assign({},y),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),m(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.onLogout,n=this.state.userResponseTimer;this.props.show!==e.show&&this.props.show&&(n=setTimeout(function(){clearTimeout(n),t()},6e4),this.setState({userResponseTimer:n}))}},{key:"handleResume",value:function(){var e=this.state.userResponseTimer;clearTimeout(e),e=null,this.setState({userResponseTimer:e}),this.props.onResume()}},{key:"render",value:function(){var e=this.props.labelFor;return i.a.createElement(s.n,{className:"one-identity",show:this.props.show},i.a.createElement(s.n.Header,null,i.a.createElement(s.n.Title,null,this.props.title)),i.a.createElement(s.n.Body,null,this.props.description),i.a.createElement(s.n.Footer,null,i.a.createElement(s.u,null,i.a.createElement(s.e,{xs:6,className:"text-right"},i.a.createElement(p.a,{label:e.logout,onClick:this.props.onLogout})),i.a.createElement(s.e,{xs:6},i.a.createElement(f.a,{label:e.resume,onClick:this.handleResume.bind(this)})))))}}]),t}();O.propTypes={show:c.a.bool,title:c.a.string.isRequired,description:c.a.string.isRequired,labelFor:c.a.object,onLogout:c.a.func,onResume:c.a.func},O.defaultProps={show:!1,title:d,description:g,labelFor:{logout:v,resume:b}};var w=O,E=n(303),_=n(211),j=n(296),S=n(294),P=n(997),N=n(11),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var k=h.l.LINK_SIGN_IN,L=h.l.LINK_HI,I=h.l.LINK_LOG_OUT,x=h.d.CONTACT_SUPPORT_NAME,C={userDisplay:"",timeout:!1},R=["enrollment-ui","code-sent","update-password","create-limited-account","account-link","account-federated","account-inactive","social-login-error-page"],U=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=Object.assign({},C),e.emitter=_.a,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E["b"]),T(t,[{key:"onToggleSidebar",value:function(){this.props.onToggleSidebar()}},{key:"componentDidMount",value:function(){this.observeChange();var e=this.props.authenticate;if(e&&e.authenticated){var t=Object(S.a)("profilePersonal").profilePersonal;this.profilePersonal=t,this.fetchUser()}}},{key:"componentWillUnmount",value:function(){this.emitter.removeListener("sessionTimeout",function(){}).removeListener("userInfoChange",function(){})}},{key:"observeChange",value:function(){var e=this;this.emitter.addListener("sessionTimeout",function(t){e.setState({timeout:t})}).addListener("userInfoChange",function(t){t&&(t.preferredName.value?e.setState({userDisplay:t.preferredName.value}):e.setState({userDisplay:t.name.value.firstName+" "+t.name.value.lastName}))})}},{key:"fetchUser",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(a.a.mark(function e(){var t,n,r,o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.profilePersonal.getUser();case 3:t=e.sent,n=t.data.response.name.value,r=n.firstName,o=n.lastName,(i=t.data.response.preferredName.value)?this.setState({userDisplay:i}):r&&o&&this.setState({userDisplay:r+" "+o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleLogout",value:function(){localStorage.setItem("isLoggedIn","false"),this.props.authenticate.logout()}},{key:"render",value:function(){var e=this,t=N.f.split("/").pop(),n=this.props,r=(n.appName,n.tagLine,n.hasSidebar),a=(n.tokenService,n.newHeader),o=this.props.authenticate.authenticated;return a&&x,R.includes(t)?null:i.a.createElement(s.u,{className:"header header--tall"},i.a.createElement(w,{show:this.state.timeout,onLogout:function(){e.handleLogout()},onResume:function(){e.setState({timeout:!1}),e.props.authenticate.setTimeout()}}),i.a.createElement(s.e,{xs:12,sm:10,smOffset:1,md:10,mdOffset:1,lg:10,lgOffset:1},i.a.createElement("header",null,i.a.createElement("div",{className:"header-bar container-header"},r&&i.a.createElement(s.b,{className:"btn--small btn--icon toggle-menu",onClick:function(){return e.onToggleSidebar()}},i.a.createElement("span",{className:"icon-list-menu"})),i.a.createElement("a",{href:this.props.links.CiscoHomepageIcon,className:"header-bar__logo "+(a&&"hide")},i.a.createElement("span",{className:"icon-cisco"})),i.a.createElement("div",{className:"header-toolbar "+(a&&"hide")},i.a.createElement(P.a,null),o&&i.a.createElement(s.c,null,i.a.createElement("span",{className:"icon-medium icon-contact icon-header-person"}),i.a.createElement(s.g,{id:"user-dropdown",className:"avatar",pullRight:!0},i.a.createElement(s.g.Toggle,{noCaret:!0},L," ",this.state.userDisplay),i.a.createElement(s.g.Menu,null,i.a.createElement(s.m,{id:"user-menuitem",eventKey:"1",onClick:function(){return e.handleLogout()}},I)))),!o&&i.a.createElement(u.a,{label:k}))))))}}],[{key:"componentName",value:function(){return"Header"}}]),t}();U.defaultProps={appName:"OneIdentity",tagLine:"Simple, Secure and Seamless Identity Management for Cisco",authenticate:{}};t.default=Object(j.a)("router","authenticate").map(U)},997:function(e,t,n){"use strict";var r=n(28),a=n.n(r),o=n(1),i=n.n(o),s=n(1009),u=n(296),l=n(294),c=n(141),p=n(297),f=n(980),h=n(300),m=n(37),d=n(43),g=n(11),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function b(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var y={languageList:[],displayedLanguage:"",firstName:"",lastName:""},O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=Object.assign({},y),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),v(t,[{key:"componentDidMount",value:function(){this.profilePersonal=this.isLoggedIn()?this.getProfilePersonalService():null,this.setDisplayedLanguage()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.validation.dictionary.findDefinition("preferredLanguage").cannonicalValues;if(!this.state.languageList.length){var r=n||Object.keys(h.a);this.setState({languageList:r})}}},{key:"isLoggedIn",value:function(){var e=this.props.authenticate,t=(void 0===e?{}:e).authenticated;return void 0!==t&&t}},{key:"getProfilePersonalService",value:function(){return Object(l.a)("profilePersonal").profilePersonal}},{key:"setDisplayedLanguage",value:function(){var e=b(a.a.mark(function e(){var t,n,r,o,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.profilePersonal.getUser();case 3:t=e.sent,n=t.data.response,r=n.language,o=n.name.value,i=o.firstName,s=o.lastName,r===m.d?this.setState({firstName:i,lastName:s,displayedLanguage:r}):r&&(Object(p.b)(r),Object(c.f)()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.setState({displayedLanguage:m.d});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"patchPreferredLanguage",value:function(){var e=b(a.a.mark(function e(t){var n,r,o,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state,r=n.firstName,o=n.lastName,i=s?{language:t,nameLocal:{firstName:r,lastName:o}}:{language:t},e.prev=2,e.next=5,this.profilePersonal.patchUser(i);case 5:Object(p.b)(t),Object(c.f)(),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),"30040"===f.a.getErrorCode(e.t0)&&this.patchPreferredLanguage(t,!0),sessionStorage.setItem("languageDropDownError",JSON.stringify(e.t0)),Object(c.f)();case 15:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSelect",value:function(e){var t=this.props.reloadUrl;if(this.profilePersonal)this.patchPreferredLanguage(e);else{Object(p.b)(e);var n=Object(d.g)();delete n.ui_locale;var r=t||""+Object(g.j)()+Object(d.c)(n);Object(c.d)({url:r})}}},{key:"getTitleObject",value:function(e){var t=i.a.createElement("img",{src:"/ux-app/static/language-icon.png",alt:"Language"}),n=i.a.createElement("div",{className:"language-dropdown-title"},i.a.createElement("span",null,e.split("_")[1]),i.a.createElement("br",null),i.a.createElement("span",null,e.split("_")[0]));return{value:e,label:i.a.createElement("div",null,t,n)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.languageList,r=t.displayedLanguage;if(!n.length)return null;var a=(this.props.cssFor||{}).menu,o=void 0===a?"":a;return i.a.createElement("div",{className:"language-dropdown-menu "+o},i.a.createElement(s.a,Object.assign({options:n,name:"languageDropdown",value:this.getTitleObject(r),onRenderOption:function(e){return h.a[e]},onSelect:function(t){return e.handleSelect(t)}},this.props)))}}]),t}();t.a=Object(u.a)("validation","authenticate").map(O)}}]);
//# sourceMappingURL=15.04f15994.chunk.js.map