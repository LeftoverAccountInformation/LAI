!function(i){"use strict";window.TRIPIT.social.Facebook=function(){var o=this,n=!1,e=!1;o.load=function(o){i("<div>").attr("id","fb-root").appendTo(document.body),i.getScript("//connect.facebook.net/en_US/sdk.js").done(function(){"object"==typeof FB&&(FB.init({appId:it.fbApiKey,cookie:!0,display:"popup",version:"v3.3",xfbml:!0}),FB.getLoginStatus(function(o){e=!!o.authResponse}),n=!0,i.isFunction(o)&&o())})},o.isLoaded=function(){return n},o.isLoggedIn=function(){return e},o.hasPermission=function(n,e,t){"object"==typeof FB&&FB.api("/me?fields=permissions",function(o){o&&o.permissions&&o.permissions.data&&o.permissions.data[0]&&o.permissions.data[0][n]?i.isFunction(e)&&(console.log("success"),e()):i.isFunction(t)&&(console.log("failure"),console.log(o),t())})}},window.TRIPIT.social.Facebook.ShareButton=function(o,n){var e=this,t=i(o);e.link=t.data("link"),t.click({shareButton:e},e.showDialog),e.onOpen=i.noop,i.extend(e,n)},window.TRIPIT.social.Facebook.ShareButton.prototype=i.extend(!0,window.TRIPIT.social.Facebook.ShareButton.prototype,{update:function(o){i.extend(!0,this,o)},showDialog:function(o){o.preventDefault();var n=o.data.shareButton;i.isFunction(n.onOpen)&&n.onOpen({event:o}),"object"==typeof FB&&FB.ui({method:"share",href:n.link},function(o){o&&o.post_id?n.onShareSuccess(o):n.onShareFailure(o)})},onShareSuccess:function(o){i(document).trigger("shareFacebook",{shareButton:this})},onShareFailure:function(o){}})}(jQuery),$document.ready(function(o){var n=n=new window.TRIPIT.social.Facebook;n.load()});