(function(I,B){"object"==typeof exports&&"undefined"!=typeof module?B(exports):"function"==typeof define&&define.amd?define(["exports"],B):B(I["@r9/logger"]={})})(this,function(I){function B(m,h){function c(){this.constructor=m}P(m,h);m.prototype=null===h?Object.create(h):(c.prototype=h.prototype,new c)}function N(m,h){return(Object.assign||function(c,g){for(var e in g)g.hasOwnProperty(e)&&(c[e]=g[e]);return m})(m,h)}function Q(m){var h,c=0,g=0;for(h=m.length;c<h;c++)g=(g<<5)-g+m.charCodeAt(c),g|=
0;return g}function O(m){return m.replace(/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/gim,"REPLACED@EMAIL")}function R(m){return m.reduce(function(h,c){if(!c)return h;if(!(c instanceof RegExp)){var g=c.match(V);c=g?new RegExp(g[1],g[2]):new RegExp(c)}return c&&"(?:)"!==c.source&&h.push(c),h},[])}function S(m,h){for(var c=0;c<m.length;c++)if(h(m[c]))return!0;return!1}function W(m){return{id:m.getId(),groupId:m.groupId,message:m.message,extraArgs:m.extraArgs||[],level:r[m.level],type:m.type,context:m.context,
occurrences:m.occurrences,stackTrace:(m.stackTrace||"").split("\n"),fileName:m.fileName,lineNo:m.lineNo,colNo:m.colNo}}function T(m,h){return h&&(h[m]||h.detail&&h.detail[m])||void 0}function X(m){if(!window)return function(){};var h=window.onerror;return window.onerror=function(c,g,e,b,l){if("function"==typeof h)try{h.call(h,c,g,e,b,l)}catch(a){m.send(new F(a,r.ERROR,"window"))}c=new F(l||c,r.ERROR,"window");return c.fileName=g,c.lineNo=e,c.colNo=b,c.originalError=l,m.send(c),!0},function(){return window.onerror=
h}}function Y(m){if(!window)return function(){};var h=function(c){return g=m,b=[["[unhandledrejection] ",T("reason",e=c)||"No `reason` from the event"].join("")],(l=T("promise",e))&&b.push(l),void g.send(new F(b,r.ERROR,"window"));var g,e,b,l};return window.addEventListener("unhandledrejection",h),function(){return window.removeEventListener("unhandledrejection",h)}}var P=function(m,h){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var e in g)g.hasOwnProperty(e)&&
(c[e]=g[e])})(m,h)},C=function(){return(C=Object.assign||function(m){for(var h,c=1,g=arguments.length;c<g;c++)for(var e in h=arguments[c])Object.prototype.hasOwnProperty.call(h,e)&&(m[e]=h[e]);return m}).apply(this,arguments)},z,ba=(function(m,h){m.exports=function(c){function g(b){if(e[b])return e[b].exports;var l=e[b]={exports:{},id:b,loaded:!1};return c[b].call(l.exports,l,l.exports,g),l.loaded=!0,l.exports}var e={};return g.m=c,g.c=e,g.p="",g(0)}([function(c,g,e){c.exports=e(1)},function(c,g,
e){g=e(2);var b="undefined"!=typeof window&&window._rollbarConfig;e=b&&b.globalAlias||"Rollbar";var l="undefined"!=typeof window&&window[e]&&"function"==typeof window[e].shimId&&void 0!==window[e].shimId();("undefined"==typeof window||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!l&&b)?(b=new g(b),window[e]=b):"undefined"!=typeof window?(window.rollbar=g,window._rollbarDidLoad=!0):"undefined"!=typeof self&&(self.rollbar=g,self._rollbarDidLoad=!0);c.exports=g},function(c,
g,e){function b(a,b){this.options=d.handleOptions(A,a);a=new n(this.options,f,y);this.client=b||new k(this.options,a,w,"browser");b="undefined"!=typeof window&&window||"undefined"!=typeof self&&self;a="undefined"!=typeof document&&document;this.client.notifier.addTransform(q.handleItemWithError).addTransform(q.ensureItemHasSomethingToSay).addTransform(q.addBaseInfo).addTransform(q.addRequestInfo(b)).addTransform(q.addClientInfo(b)).addTransform(q.addPluginInfo(b)).addTransform(q.addBody).addTransform(h.addMessageWithError).addTransform(h.addTelemetryData).addTransform(h.addConfigToPayload).addTransform(q.scrubPayload).addTransform(h.userTransform(w)).addTransform(h.itemToPayload);
this.client.queue.addPredicate(m.checkLevel).addPredicate(u.checkIgnore).addPredicate(m.userCheckIgnore(w)).addPredicate(m.urlIsNotBlacklisted(w)).addPredicate(m.urlIsWhitelisted(w)).addPredicate(m.messageIsIgnored(w));(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(p.captureUncaughtExceptions(b,this),p.wrapGlobals(b,this));(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&p.captureUnhandledRejections(b,this);this.instrumenter=new H(this.options,
this.client.telemeter,this,b,a);this.instrumenter.instrument()}function l(a){w.error("Rollbar is not initialized");a&&a(Error("Rollbar is not initialized"))}function a(a){for(var f=0,b=a.length;f<b;++f)if(d.isFunction(a[f]))return a[f]}var k=e(3),d=e(5),n=e(11),w=e(14),p=e(17),f=e(18),y=e(19),q=e(20),h=e(24),u=e(25),m=e(26),v=e(21),H=e(27),t=null;b.init=function(a,d){return t?t.global(a).configure(a):t=new b(a,d)};b.prototype.global=function(a){return this.client.global(a),this};b.global=function(a){return t?
t.global(a):void l()};b.prototype.configure=function(a,f){var b=this.options,k={};return f&&(k={payload:f}),this.options=d.handleOptions(b,a,k),this.client.configure(this.options,f),this.instrumenter.configure(this.options),this};b.configure=function(a,d){return t?t.configure(a,d):void l()};b.prototype.lastError=function(){return this.client.lastError};b.lastError=function(){return t?t.lastError():void l()};b.prototype.log=function(){var a=this._createItem(arguments),d=a.uuid;return this.client.log(a),
{uuid:d}};b.log=function(){if(t)return t.log.apply(t,arguments);var d=a(arguments);l(d)};b.prototype.debug=function(){var a=this._createItem(arguments),d=a.uuid;return this.client.debug(a),{uuid:d}};b.debug=function(){if(t)return t.debug.apply(t,arguments);var d=a(arguments);l(d)};b.prototype.info=function(){var a=this._createItem(arguments),d=a.uuid;return this.client.info(a),{uuid:d}};b.info=function(){if(t)return t.info.apply(t,arguments);var d=a(arguments);l(d)};b.prototype.warn=function(){var a=
this._createItem(arguments),d=a.uuid;return this.client.warn(a),{uuid:d}};b.warn=function(){if(t)return t.warn.apply(t,arguments);var d=a(arguments);l(d)};b.prototype.warning=function(){var a=this._createItem(arguments),d=a.uuid;return this.client.warning(a),{uuid:d}};b.warning=function(){if(t)return t.warning.apply(t,arguments);var d=a(arguments);l(d)};b.prototype.error=function(){var a=this._createItem(arguments),d=a.uuid;return this.client.error(a),{uuid:d}};b.error=function(){if(t)return t.error.apply(t,
arguments);var d=a(arguments);l(d)};b.prototype.critical=function(){var a=this._createItem(arguments),d=a.uuid;return this.client.critical(a),{uuid:d}};b.critical=function(){if(t)return t.critical.apply(t,arguments);var d=a(arguments);l(d)};b.prototype.buildJsonPayload=function(a){return this.client.buildJsonPayload(a)};b.buildJsonPayload=function(){return t?t.buildJsonPayload.apply(t,arguments):void l()};b.prototype.sendJsonPayload=function(a){return this.client.sendJsonPayload(a)};b.sendJsonPayload=
function(){return t?t.sendJsonPayload.apply(t,arguments):void l()};b.prototype.handleUncaughtException=function(a,f,b,k,n,p){var c;b=d.makeUnhandledStackInfo(a,f,b,k,n,"onerror","uncaught exception",v);d.isError(n)?(c=this._createItem([a,n,p]))._unhandledStackInfo=b:d.isError(f)?(c=this._createItem([a,f,p]))._unhandledStackInfo=b:(c=this._createItem([a,p])).stackInfo=b;c.level=this.options.uncaughtErrorLevel;c._isUncaught=!0;this.client.log(c)};b.prototype.handleUnhandledRejection=function(a,f){var b=
"unhandled rejection was null or undefined!";if(a)if(a.message)b=a.message;else{var k=d.stringify(a);k.value&&(b=k.value)}var n,k=a&&a._rollbarContext||f&&f._rollbarContext;d.isError(a)?n=this._createItem([b,a,k]):(n=this._createItem([b,a,k])).stackInfo=d.makeUnhandledStackInfo(b,"",0,0,null,"unhandledrejection","",v);n.level=this.options.uncaughtErrorLevel;n._isUncaught=!0;n._originalArgs=n._originalArgs||[];n._originalArgs.push(f);this.client.log(n)};b.prototype.wrap=function(a,f,b){try{var k;if((k=
d.isFunction(f)?f:function(){return f||{}},!d.isFunction(a))||a._isWrap)return a;if(!a._rollbar_wrapped&&(a._rollbar_wrapped=function(){b&&d.isFunction(b)&&b.apply(this,arguments);try{return a.apply(this,arguments)}catch(L){var f=L;throw f&&window._rollbarWrappedError!==f&&(d.isType(f,"string")&&(f=new String(f)),f._rollbarContext=k()||{},f._rollbarContext._wrappedSource=a.toString(),window._rollbarWrappedError=f),f;}},a._rollbar_wrapped._isWrap=!0,a.hasOwnProperty))for(var n in a)a.hasOwnProperty(n)&&
"_rollbar_wrapped"!==n&&(a._rollbar_wrapped[n]=a[n]);return a._rollbar_wrapped}catch(E){return a}};b.wrap=function(a,d){return t?t.wrap(a,d):void l()};b.prototype.captureEvent=function(){var a=d.createTelemetryEvent(arguments);return this.client.captureEvent(a.type,a.metadata,a.level)};b.captureEvent=function(){return t?t.captureEvent.apply(t,arguments):void l()};b.prototype.captureDomContentLoaded=function(a,d){return d||(d=new Date),this.client.captureDomContentLoaded(d)};b.prototype.captureLoad=
function(a,d){return d||(d=new Date),this.client.captureLoad(d)};var A={version:"2.6.1",scrubFields:"pw;pass;passwd;password;secret;confirm_password;confirmPassword;password_confirmation;passwordConfirmation;access_token;accessToken;secret_key;secretKey;secretToken;cc-number;card number;cardnumber;cardnum;ccnum;ccnumber;cc num;creditcardnumber;credit card number;newcreditcardnumber;new credit card;creditcardno;credit card no;card#;card #;cc-csc;cvc2;cvv2;ccv2;security code;card verification;name on credit card;name on card;nameoncard;cardholder;card holder;name des karteninhabers;card type;cardtype;cc type;cctype;payment type;expiration date;expirationdate;expdate;cc-exp".split(";"),
logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",endpoint:"api.rollbar.com/api/1/item/",verbose:(b.prototype._createItem=function(a){return d.createItem(a,w,this)},!1),enabled:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0};c.exports=b},function(c,g,e){function b(n,c,p,f){this.options=d.merge(n);this.logger=p;b.rateLimiter.configureGlobal(this.options);b.rateLimiter.setPlatformOptions(f,this.options);this.api=c;this.queue=new l(b.rateLimiter,c,p,this.options);this.notifier=
new a(this.queue,this.options);this.telemeter=new k(this.options);this.lastError=null;this.lastErrorHash="none"}g=e(4);var l=e(8),a=e(9),k=e(10),d=e(5);b.rateLimiter=new g({maxItems:0,itemsPerMinute:60});b.prototype.global=function(a){return b.rateLimiter.configureGlobal(a),this};b.prototype.configure=function(a,b){var k=this.options,f={};return b&&(f={payload:b}),this.options=d.merge(k,a,f),this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),
this.global(this.options),this};b.prototype.log=function(a){var d=this._defaultLogLevel();return this._log(d,a)};b.prototype.debug=function(a){this._log("debug",a)};b.prototype.info=function(a){this._log("info",a)};b.prototype.warn=function(a){this._log("warning",a)};b.prototype.warning=function(a){this._log("warning",a)};b.prototype.error=function(a){this._log("error",a)};b.prototype.critical=function(a){this._log("critical",a)};b.prototype.wait=function(a){this.queue.wait(a)};b.prototype.captureEvent=
function(a,d,b){return this.telemeter.captureEvent(a,d,b)};b.prototype.captureDomContentLoaded=function(a){return this.telemeter.captureDomContentLoaded(a)};b.prototype.captureLoad=function(a){return this.telemeter.captureLoad(a)};b.prototype.buildJsonPayload=function(a){return this.api.buildJsonPayload(a)};b.prototype.sendJsonPayload=function(a){this.api.postJsonPayload(a)};b.prototype._log=function(a,d){var b;if(d.callback&&(b=d.callback,delete d.callback),this._sameAsLastError(d))b&&(a=Error("ignored identical item"),
a.item=d,b(a));else try{d.level=d.level||a,this.telemeter._captureRollbarItem(d),d.telemetryEvents=this.telemeter.copyEvents(),this.notifier.log(d,b)}catch(f){this.logger.error(f)}};b.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"};b.prototype._sameAsLastError=function(a){if(!a._isUncaught)return!1;var d,b,f=(d=a.message||"",b=(a.err||{}).stack||String(a.err),d+"::"+b);return this.lastErrorHash===f||(this.lastError=a.err,this.lastErrorHash=f,!1)};c.exports=b},function(c,
g,e){function b(b){this.startTime=a.now();this.perMinCounter=this.counter=0;this.platform=null;this.platformOptions={};this.configureGlobal(b)}function l(a,d,b,c,p,f,l){var k,n,e=null;return b&&(b=Error(b)),b||c||(k=d.environment||d.payload&&d.payload.environment,n={body:{message:{body:l?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.",extra:{maxItems:p,itemsPerMinute:f}}},language:"javascript",environment:k,notifier:{version:d.notifier&&
d.notifier.version||d.version}},"browser"===a?(n.platform="browser",n.framework="browser-js",n.notifier.name="rollbar-browser-js"):"server"===a?(n.framework=d.framework||"node-js",n.notifier.name=d.notifier.name):"react-native"===a&&(n.framework=d.framework||"react-native",n.notifier.name=d.notifier.name),e=n),{error:b,shouldSend:c,payload:e}}var a=e(5);b.globalSettings={startTime:a.now(),maxItems:void 0,itemsPerMinute:void 0};b.prototype.configureGlobal=function(a){void 0!==a.startTime&&(b.globalSettings.startTime=
a.startTime);void 0!==a.maxItems&&(b.globalSettings.maxItems=a.maxItems);void 0!==a.itemsPerMinute&&(b.globalSettings.itemsPerMinute=a.itemsPerMinute)};b.prototype.shouldSend=function(k,d){var c=(d=d||a.now())-this.startTime;(0>c||6E4<=c)&&(this.startTime=d,this.perMinCounter=0);d=b.globalSettings.maxItems;c=b.globalSettings.itemsPerMinute;if(!k.ignoreRateLimit&&1<=d&&d<this.counter)return l(this.platform,this.platformOptions,d+" max items reached",!1);if(!k.ignoreRateLimit&&1<=c&&c<this.perMinCounter)return l(this.platform,
this.platformOptions,c+" items per minute reached",!1);this.counter++;this.perMinCounter++;var e=!(!k.ignoreRateLimit&&1<=d&&d<this.counter);return e=e&&!(!k.ignoreRateLimit&&1<=c&&c<this.perMinCounter),l(this.platform,this.platformOptions,null,e,d,c,e)};b.prototype.setPlatformOptions=function(a,d){this.platform=a;this.platformOptions=d};c.exports=b},function(c,g,e){function b(a,d){return d===l(a)}function l(a){var d=typeof a;return"object"!==d?d:a?a instanceof Error?"error":{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase():
"null"}function a(a){return b(a,"function")}function k(a){var d,f=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),f=RegExp("^"+f+"$");return d=typeof a,null!=a&&("object"==d||"function"==d)&&f.test(a)}function d(a,d,f){var k,c,n;c=b(a,"object");n=b(a,"array");var e=[];if(c&&-1!==f.indexOf(a))return a;if(f.push(a),c)for(k in a)Object.prototype.hasOwnProperty.call(a,k)&&
e.push(k);else if(n)for(n=0;n<a.length;++n)e.push(n);var p=c?{}:[],l=!0;for(n=0;n<e.length;++n)k=e[n],c=a[k],p[k]=d(k,c,f),l=l&&p[k]===a[k];return 0==e.length||l?a:p}function n(){var a=u();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var f=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===d?f:7&f|8).toString(16)})}function w(a){if(b(a,"string")){var d=H;a=d.parser.loose.exec(a);for(var f={},k=0,c=d.key.length;k<c;++k)f[d.key[k]]=a[k]||"";return f[d.q.name]={},
f[d.key[12]].replace(d.q.parser,function(a,b,k){b&&(f[d.q.name][b]=k)}),f}}function p(d,f){var b,k;try{b=v.stringify(d)}catch(K){if(f&&a(f))try{b=f(d)}catch(E){k=E}else k=K}return{error:k,value:b}}function f(a,d){return function(f,b){try{d(f,b)}catch(K){a.error(K)}}}function h(a,d){for(var f=0;f<a.length;++f)if(a[f]===d)return!0;return!1}function q(a){for(var d,f=[],b=0;b<a.length;++b)d="^\\[?(%5[bB])?"+a[b]+"\\[?(%5[bB])?\\]?(%5[dD])?$",f.push(new RegExp(d,"i"));return f}function x(a){for(var d,
f=[],b=0;b<a.length;++b)d="\\[?(%5[bB])?"+a[b]+"\\[?(%5[bB])?\\]?(%5[dD])?",f.push(new RegExp("("+d+"\x3d)([^\x26\\n]+)","igm"));return f}function u(){return Date.now?+Date.now():+new Date}var m=e(6),v={};(g=!1,g=!0,!b(JSON,"undefined")&&(k(JSON.stringify)&&(v.stringify=JSON.stringify),k(JSON.parse)&&(v.parse=JSON.parse)),a(v.stringify)&&a(v.parse))||e(7)(v);var H={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",
parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t="log network dom navigation error manual".split(" "),A=["critical","error","warning","info","debug"];c.exports=
{addParamsAndAccessTokenToPath:function(a,d,f){(f=f||{}).access_token=a;var b;a=[];for(b in f)Object.prototype.hasOwnProperty.call(f,b)&&a.push([b,f[b]].join("\x3d"));f="?"+a.sort().join("\x26");(d=d||{}).path=d.path||"";var k;b=d.path.indexOf("?");a=d.path.indexOf("#");d.path=-1!==b&&(-1===a||b<a)?(k=d.path).substring(0,b)+f+"\x26"+k.substring(b+1):-1!==a?(k=d.path).substring(0,a)+f+k.substring(a):d.path+f},createItem:function(a,d,b,k,c){for(var e,p,q,g,w,h=[],y=0,Z=a.length;y<Z;++y){var x=l(b=a[y]);
switch(x){case "undefined":break;case "string":e?h.push(b):e=b;break;case "function":g=f(d,b);break;case "date":h.push(b);break;case "error":case "domexception":case "exception":p?h.push(b):p=b;break;case "object":case "array":if(b instanceof Error||"undefined"!=typeof DOMException&&b instanceof DOMException){p?h.push(b):p=b;break}if(k&&"object"===x&&!w){for(var x=0,aa=k.length;x<aa;++x)if(void 0!==b[k[x]]){w=b;break}if(w)break}q?h.push(b):q=b;break;default:b instanceof Error||"undefined"!=typeof DOMException&&
b instanceof DOMException?p?h.push(b):p=b:h.push(b)}}0<h.length&&((q=m(q)).extraArgs=h);d={message:e,err:p,custom:q,timestamp:u(),callback:g,uuid:n()};return q&&void 0!==q.level&&(d.level=q.level,delete q.level),k&&w&&(d.request=w),c&&(d.lambdaContext=c),d._originalArgs=a,d},createTelemetryEvent:function(a){for(var d,b,f,k,c=0,n=a.length;c<n;++c)switch(l(k=a[c])){case "string":h(t,k)?d=k:h(A,k)&&(f=k);break;case "object":b=k}return{type:d||"manual",metadata:b||{},level:f}},filterIp:function(a,d){if(a&&
a.user_ip&&!0!==d){var b=a.user_ip;if(d)try{var f;if(-1!==b.indexOf("."))(f=b.split(".")).pop(),f.push("0"),b=f.join(".");else if(-1!==b.indexOf(":")){if(2<(f=b.split(":")).length){var k=f.slice(0,3),c=k[2].indexOf("/");-1!==c&&(k[2]=k[2].substring(0,c));b=k.concat("0000:0000:0000:0000:0000").join(":")}}else b=null}catch(L){b=null}else b=null;a.user_ip=b}},formatArgsAsString:function(a){var d,b,f,k=[];d=0;for(b=a.length;d<b;++d){switch(l(f=a[d])){case "object":500<(f=(f=p(f)).error||f.value).length&&
(f=f.substr(0,497)+"...");break;case "null":f="null";break;case "undefined":f="undefined";break;case "symbol":f=f.toString()}k.push(f)}return k.join(" ")},formatUrl:function(a,d){if(!(d=d||a.protocol)&&a.port&&(80===a.port?d="http:":443===a.port&&(d="https:")),d=d||"https:",!a.hostname)return null;d=d+"//"+a.hostname;return a.port&&(d=d+":"+a.port),a.path&&(d+=a.path),d},get:function(a,d){if(a){d=d.split(".");try{for(var f=0,b=d.length;f<b;++f)a=a[d[f]]}catch(K){a=void 0}return a}},handleOptions:function(a,
d,f){f=m(a,d,f);return!d||d.overwriteScrubFields||d.scrubFields&&(f.scrubFields=(a.scrubFields||[]).concat(d.scrubFields)),f},isError:function(a){return b(a,"error")||b(a,"exception")},isFunction:a,isIterable:function(a){a=l(a);return"object"===a||"array"===a},isNativeFunction:k,isType:b,jsonParse:function(a){var d,f;try{d=v.parse(a)}catch(U){f=U}return{error:f,value:d}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(a,d,f,b,k,c,n,p){d={url:d||"",line:f,column:b};
d.func=p.guessFunctionName(d.url,d.line);d.context=p.gatherContext(d.url,d.line);return{mode:c,message:k?String(k):a||n,url:document&&document.location&&document.location.href,stack:[d],useragent:window&&window.navigator&&window.navigator.userAgent}},merge:m,now:u,redact:function(){return"********"},sanitizeUrl:function(a){return(a=w(a))?(""===a.anchor&&(a.source=a.source.replace("#","")),a.source.replace("?"+a.query,"")):"(unknown)"},scrub:function(a,f){function k(a,d){return d+"********"}function c(a,
f,e){var l=f,q;for(q=0;q<n.length;++q)if(n[q].test(a)){l="********";break}a=l;if(a===f)if(b(f,"object")||b(f,"array"))f=d(f,c,e);else{if(f=a,b(f,"string"))for(e=0;e<p.length;++e)f=f.replace(p[e],k)}else f=a;return f}var n=q(f=f||[]),p=x(f);return d(a,c,[])},set:function(a,d,f){if(a){d=d.split(".");var b=d.length;if(!(1>b)){if(1===b)return void(a[d[0]]=f);try{for(var k=a[d[0]]||{},c=k,n=1;n<b-1;++n)k[d[n]]=k[d[n]]||{},k=k[d[n]];k[d[b-1]]=f;a[d[0]]=c}catch(ja){}}}},stringify:p,traverse:d,typeName:l,
uuid4:n}},function(c,h){var e=Object.prototype.hasOwnProperty,b=Object.prototype.toString,l=function(a){if(!a||"[object Object]"!==b.call(a))return!1;var k,d=e.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&e.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!d&&!c)return!1;for(k in a);return void 0===k||e.call(a,k)};c.exports=function k(){var d,b,c,p,f,e={},q,h=arguments.length;for(d=0;d<h;d++)if(null!=(q=arguments[d]))for(f in q)b=e[f],c=q[f],e!==c&&(c&&l(c)?(p=b&&
l(b)?b:{},e[f]=k(p,c)):void 0!==c&&(e[f]=c));return e}},function(c,h){c.exports=function(c){function b(a){return 10>a?"0"+a:a}function e(){return this.valueOf()}function a(a){return A.lastIndex=0,A.test(a)?'"'+a.replace(A,function(a){var d=h[a];return"string"==typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function k(f,b){var c,e,l,q=d,g=b[f];switch(g&&"object"==typeof g&&"function"==typeof g.toJSON&&(g=g.toJSON(f)),"function"==typeof p&&(g=p.call(b,f,g)),typeof g){case "string":return a(g);
case "number":return isFinite(g)?String(g):"null";case "boolean":case "null":return String(g);case "object":if(!g)return"null";if(d+=n,l=[],"[object Array]"===Object.prototype.toString.apply(g)){b=g.length;for(f=0;f<b;f+=1)l[f]=k(f,g)||"null";return e=0===l.length?"[]":d?"[\n"+d+l.join(",\n"+d)+"\n"+q+"]":"["+l.join(",")+"]",d=q,e}if(p&&"object"==typeof p)for(b=p.length,f=0;f<b;f+=1)"string"==typeof p[f]&&(c=p[f],(e=k(c,g))&&l.push(a(c)+(d?": ":":")+e));else for(c in g)Object.prototype.hasOwnProperty.call(g,
c)&&(e=k(c,g))&&l.push(a(c)+(d?": ":":")+e);return e=0===l.length?"{}":d?"{\n"+d+l.join(",\n"+d)+"\n"+q+"}":"{"+l.join(",")+"}",d=q,e}}var d,n,h,p,f,g,q,x,u,m,v,H,t,A=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+
":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=e,Number.prototype.toJSON=e,String.prototype.toJSON=e);"function"!=typeof c.stringify&&(h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c.stringify=function(a,f,b){var c;if(n=d="","number"==typeof b)for(c=0;c<b;c+=1)n+=" ";else"string"==typeof b&&(n=b);if((p=f)&&"function"!=typeof f&&("object"!=typeof f||"number"!=typeof f.length))throw Error("JSON.stringify");return k("",{"":a})});
"function"!=typeof c.parse&&(c.parse=(m={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},v={go:function(){f="ok"},firstokey:function(){x=u;f="colon"},okey:function(){x=u;f="colon"},ovalue:function(){f="ocomma"},firstavalue:function(){f="acomma"},avalue:function(){f="acomma"}},H={go:function(){f="ok"},ovalue:function(){f="ocomma"},firstavalue:function(){f="acomma"},avalue:function(){f="acomma"}},t={"{":{go:function(){g.push({state:"ok"});q={};f="firstokey"},ovalue:function(){g.push({container:q,
state:"ocomma",key:x});q={};f="firstokey"},firstavalue:function(){g.push({container:q,state:"acomma"});q={};f="firstokey"},avalue:function(){g.push({container:q,state:"acomma"});q={};f="firstokey"}},"}":{firstokey:function(){var a=g.pop();u=q;q=a.container;x=a.key;f=a.state},ocomma:function(){var a=g.pop();q[x]=u;u=q;q=a.container;x=a.key;f=a.state}},"[":{go:function(){g.push({state:"ok"});q=[];f="firstavalue"},ovalue:function(){g.push({container:q,state:"ocomma",key:x});q=[];f="firstavalue"},firstavalue:function(){g.push({container:q,
state:"acomma"});q=[];f="firstavalue"},avalue:function(){g.push({container:q,state:"acomma"});q=[];f="firstavalue"}},"]":{firstavalue:function(){var a=g.pop();u=q;q=a.container;x=a.key;f=a.state},acomma:function(){var a=g.pop();q.push(u);u=q;q=a.container;x=a.key;f=a.state}},":":{colon:function(){if(Object.hasOwnProperty.call(q,x))throw new SyntaxError("Duplicate key '"+x+'"');f="ovalue"}},",":{ocomma:function(){q[x]=u;f="okey"},acomma:function(){q.push(u);f="avalue"}},true:{go:function(){u=!0;f=
"ok"},ovalue:function(){u=!0;f="ocomma"},firstavalue:function(){u=!0;f="acomma"},avalue:function(){u=!0;f="acomma"}},false:{go:function(){u=!1;f="ok"},ovalue:function(){u=!1;f="ocomma"},firstavalue:function(){u=!1;f="acomma"},avalue:function(){u=!1;f="acomma"}},null:{go:function(){u=null;f="ok"},ovalue:function(){u=null;f="ocomma"},firstavalue:function(){u=null;f="acomma"},avalue:function(){u=null;f="acomma"}}},function(a,d){var b,k,c=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;
f="go";g=[];try{for(;b=c.exec(a);)b[1]?t[b[1]][f]():b[2]?(u=+b[2],H[f]()):(k=b[3],u=k.replace(/\\(?:u(.{4})|([^u]))/g,function(a,d,f){return d?String.fromCharCode(parseInt(d,16)):m[f]}),v[f]()),a=a.slice(b[0].length)}catch(E){f=E}if("ok"!==f||/[^\u0020\t\n\r]/.test(a))throw f instanceof SyntaxError?f:new SyntaxError("JSON");return"function"==typeof d?function L(a,f){var b,k,c=a[f];if(c&&"object"==typeof c)for(b in u)Object.prototype.hasOwnProperty.call(c,b)&&(void 0!==(k=L(c,b))?c[b]=k:delete c[b]);
return d.call(a,f,c)}({"":u},""):u}))}},function(c,g,e){function b(a,d,b,c){this.rateLimiter=a;this.api=d;this.logger=b;this.options=c;this.predicates=[];this.pendingItems=[];this.pendingRequests=[];this.retryQueue=[];this.waitIntervalID=this.waitCallback=this.retryHandle=null}var l=e(5);b.prototype.configure=function(a){this.api&&this.api.configure(a);return this.options=l.merge(this.options,a),this};b.prototype.addPredicate=function(a){return l.isFunction(a)&&this.predicates.push(a),this};b.prototype.addPendingItem=
function(a){this.pendingItems.push(a)};b.prototype.removePendingItem=function(a){a=this.pendingItems.indexOf(a);-1!==a&&this.pendingItems.splice(a,1)};b.prototype.addItem=function(a,d,b,c){d&&l.isFunction(d)||(d=function(){});var k=this._applyPredicates(a);if(k.stop)return this.removePendingItem(c),void d(k.err);this._maybeLog(a,b);this.removePendingItem(c);this.pendingRequests.push(a);try{this._makeApiRequest(a,function(f,b){this._dequeuePendingRequest(a);d(f,b)}.bind(this))}catch(f){this._dequeuePendingRequest(a),
d(f)}};b.prototype.wait=function(a){l.isFunction(a)&&(this.waitCallback=a,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))};b.prototype._applyPredicates=function(a){for(var d=null,b=0,c=this.predicates.length;b<c;b++)if(!(d=this.predicates[b](a,this.options))||void 0!==d.err)return{stop:!0,err:d.err};return{stop:!1,err:null}};b.prototype._makeApiRequest=function(a,
d){var b=this.rateLimiter.shouldSend(a);b.shouldSend?this.api.postItem(a,function(b,c){b?this._maybeRetry(b,a,d):d(b,c)}.bind(this)):b.error?d(b.error):this.api.postItem(b.payload,d)};var a="ECONNRESET ENOTFOUND ESOCKETTIMEDOUT ETIMEDOUT ECONNREFUSED EHOSTUNREACH EPIPE EAI_AGAIN".split(" ");b.prototype._maybeRetry=function(b,d,c){var k=!1;if(this.options.retryInterval)for(var e=0,f=a.length;e<f;e++)if(b.code===a[e]){k=!0;break}k?this._retryApiRequest(d,c):c(b)};b.prototype._retryApiRequest=function(a,
d){this.retryQueue.push({item:a,callback:d});this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var a=this.retryQueue.shift();this._makeApiRequest(a.item,a.callback)}}.bind(this),this.options.retryInterval))};b.prototype._dequeuePendingRequest=function(a){a=this.pendingRequests.indexOf(a);-1!==a&&(this.pendingRequests.splice(a,1),this._maybeCallWait())};b.prototype._maybeLog=function(a,d){if(this.logger&&this.options.verbose){if(d=(d=d||l.get(a,"body.trace.exception.message"))||
l.get(a,"body.trace_chain.0.exception.message"))return void this.logger.error(d);(d=l.get(a,"body.message.body"))&&this.logger.log(d)}};b.prototype._maybeCallWait=function(){return!(!l.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),0))};c.exports=b},function(c,g,e){function b(a,b){this.queue=a;this.options=b;this.transforms=[]}var l=e(5);b.prototype.configure=
function(a){this.queue&&this.queue.configure(a);return this.options=l.merge(this.options,a),this};b.prototype.addTransform=function(a){return l.isFunction(a)&&this.transforms.push(a),this};b.prototype.log=function(a,b){if(b&&l.isFunction(b)||(b=function(){}),!this.options.enabled)return b(Error("Rollbar is not enabled"));this.queue.addPendingItem(a);var d=a.err;this._applyTransforms(a,function(c,k){return c?(this.queue.removePendingItem(a),b(c,null)):void this.queue.addItem(k,b,d,a)}.bind(this))};
b.prototype._applyTransforms=function(a,b){var d=-1,c=this.transforms.length,k=this.transforms,e=this.options,f=function(a,l){return a?void b(a,null):++d===c?void b(null,l):void k[d](l,e,f)};f(null,a)};c.exports=b},function(c,g,e){function b(a){this.queue=[];this.options=l.merge(a);this.maxQueueSize=Math.max(0,Math.min(this.options.maxTelemetryEvents||100,100))}var l=e(5);b.prototype.configure=function(a){this.options=l.merge(this.options,a);a=Math.max(0,Math.min(this.options.maxTelemetryEvents||
100,100));var b=0;this.maxQueueSize>a&&(b=this.maxQueueSize-a);this.maxQueueSize=a;this.queue.splice(0,b)};b.prototype.copyEvents=function(){var a=Array.prototype.slice.call(this.queue,0);if(l.isFunction(this.options.filterTelemetry))try{for(var b=a.length;b--;)this.options.filterTelemetry(a[b])&&a.splice(b,1)}catch(d){this.options.filterTelemetry=null}return a};b.prototype.capture=function(a,b,d,c,e){a={level:d||{error:"error",manual:"info"}[a]||"info",type:a,timestamp_ms:e||l.now(),body:b,source:"client"};
c&&(a.uuid=c);try{if(l.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(a))return!1}catch(p){this.options.filterTelemetry=null}return this.push(a),a};b.prototype.captureEvent=function(a,b,d,c){return this.capture(a,b,d,c)};b.prototype.captureError=function(a,b,d,c){var k={message:a.message||String(a)};return a.stack&&(k.stack=a.stack),this.capture("error",k,b,d,c)};b.prototype.captureLog=function(a,b,d,c){return this.capture("log",{message:a},b,d,c)};b.prototype.captureNetwork=
function(a,b,d,c){a.subtype=a.subtype||b||"xhr";c&&(a.request=c);b=this.levelFromStatus(a.status_code);return this.capture("network",a,b,d)};b.prototype.levelFromStatus=function(a){return 200<=a&&400>a?"info":0===a||400<=a?"error":"info"};b.prototype.captureDom=function(a,b,d,c,e){a={subtype:a,element:b};return void 0!==d&&(a.value=d),void 0!==c&&(a.checked=c),this.capture("dom",a,"info",e)};b.prototype.captureNavigation=function(a,b,d){return this.capture("navigation",{from:a,to:b},"info",d)};b.prototype.captureDomContentLoaded=
function(a){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,a&&a.getTime())};b.prototype.captureLoad=function(a){return this.capture("navigation",{subtype:"load"},"info",void 0,a&&a.getTime())};b.prototype.captureConnectivityChange=function(a,b){return this.captureNetwork({change:a},"connectivity",b)};b.prototype._captureRollbarItem=function(a){if(this.options.includeItemsInTelemetry)return a.err?this.captureError(a.err,a.level,a.uuid,a.timestamp):a.message?this.captureLog(a.message,
a.level,a.uuid,a.timestamp):a.custom?this.capture("log",a.custom,a.level,a.uuid,a.timestamp):void 0};b.prototype.push=function(a){this.queue.push(a);this.queue.length>this.maxQueueSize&&this.queue.shift()};c.exports=b},function(c,g,e){function b(b,c,e,f){this.options=b;this.transport=c;this.url=e;this.jsonBackup=f;this.accessToken=b.accessToken;this.transportOptions=a.getTransportFromOptions(b,d,e)}var l=e(5),a=e(12),k=e(13),d={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",
protocol:"https:",port:443};b.prototype.postItem=function(b,d){var c=a.transportOptions(this.transportOptions,"POST");b=a.buildPayload(this.accessToken,b,this.jsonBackup);this.transport.post(this.accessToken,c,b,d)};b.prototype.buildJsonPayload=function(b,d){b=a.buildPayload(this.accessToken,b,this.jsonBackup);b=k.truncate(b);return b.error?(d&&d(b.error),null):b.value};b.prototype.postJsonPayload=function(b,d){var c=a.transportOptions(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,
c,b,d)};b.prototype.configure=function(b){return this.options=l.merge(this.oldOptions,b),this.transportOptions=a.getTransportFromOptions(this.options,d,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this};c.exports=b},function(c,g,e){var b=e(5);c.exports={buildPayload:function(c,a,e){b.isType(a.context,"string")||(e=b.stringify(a.context,e),e.error?a.context="Error: could not serialize 'context'":a.context=e.value||"",255<a.context.length&&(a.context=a.context.substr(0,
255)));return{access_token:c,data:a}},getTransportFromOptions:function(b,a,c){var d=a.hostname,e=a.protocol,k=a.port,l=a.path,f=a.search;a=b.proxy;b.endpoint&&(b=c.parse(b.endpoint),d=b.hostname,e=b.protocol,k=b.port,l=b.pathname,f=b.search);return{hostname:d,protocol:e,port:k,path:l,search:f,proxy:a}},transportOptions:function(b,a){var c=b.protocol||"https:",d=b.port||("http:"===c?80:"https:"===c?443:void 0),e=b.hostname,l=b.path;return b.search&&(l+=b.search),b.proxy&&(l=c+"//"+e+l,e=b.proxy.host||
b.proxy.hostname,d=b.proxy.port,c=b.proxy.protocol||c),{protocol:c,hostname:e,path:l,port:d,method:a}},appendPathToPath:function(b,a){var c=/\/$/.test(b),d=/^\//.test(a);return c&&d?a=a.substring(1):c||d||(a="/"+a),b+a}}},function(c,g,e){function b(a,b){return[a,p.stringify(a,b)]}function l(a,b){var d=a.length;return 2*b<d?a.slice(0,b).concat(a.slice(d-b)):a}function a(a,b,d){d=void 0===d?30:d;var f,c=a.data.body;if(c.trace_chain)for(var c=c.trace_chain,e=0;e<c.length;e++)f=l(f=c[e].frames,d),c[e].frames=
f;else c.trace&&(f=l(f=c.trace.frames,d),c.trace.frames=f);return[a,p.stringify(a,b)]}function k(a,b){return b&&b.length>a?b.slice(0,a-3).concat("..."):b}function d(a,b,d){return[b=p.traverse(b,function u(b,d,f){switch(p.typeName(d)){case "string":return k(a,d);case "object":case "array":return p.traverse(d,u,f);default:return d}},[]),p.stringify(b,d)]}function n(a){return a.exception&&(delete a.exception.description,a.exception.message=k(255,a.exception.message)),a.frames=l(a.frames,1),a}function h(a,
b){var d=a.data.body;if(d.trace_chain)for(var d=d.trace_chain,f=0;f<d.length;f++)d[f]=n(d[f]);else d.trace&&(d.trace=n(d.trace));return[a,p.stringify(a,b)]}var p=e(5);c.exports={truncate:function(f,c,e){e=void 0===e?524288:e;for(var k,l,p,g=[b,a,d.bind(null,1024),d.bind(null,512),d.bind(null,256),h];k=g.shift();)if(l=k(f,c),f=l[0],(p=l[1]).error||(n=p.value,q=e,!(n.length>q)))return p;var n,q;return p},raw:b,truncateFrames:a,truncateStrings:d,maybeTruncateValue:k}},function(c,g,e){e(15);var b=e(16),
l=e(5);c.exports={error:function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("Rollbar:");8>=b.ieVersion()?console.error(l.formatArgsAsString(a)):console.error.apply(console,a)},info:function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("Rollbar:");8>=b.ieVersion()?console.info(l.formatArgsAsString(a)):console.info.apply(console,a)},log:function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("Rollbar:");8>=b.ieVersion()?console.log(l.formatArgsAsString(a)):console.log.apply(console,
a)}}},function(c,g){(function(c){c.console||(c.console={});var b;c=c.console;for(var e=function(){},a=["memory"],k="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");b=a.pop();)c[b]||(c[b]={});for(;b=k.pop();)c[b]||(c[b]=e)})("undefined"==typeof window?this:window)},function(c,g){c.exports={ieVersion:function(){if(document){for(var c=3,b=document.createElement("div"),
l=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++c+"]\x3e\x3ci\x3e\x3c/i\x3e\x3c![endif]--\x3e",l[0];);return 4<c?c:void 0}}}},function(c,g){function e(b,c,a){if(c.hasOwnProperty&&c.hasOwnProperty("addEventListener")){for(var e=c.addEventListener;e._rollbarOldAdd&&e.belongsToShim;)e=e._rollbarOldAdd;var d=function(a,d,f){e.call(this,a,b.wrap(d),f)};d._rollbarOldAdd=e;d.belongsToShim=a;c.addEventListener=d;for(var l=c.removeEventListener;l._rollbarOldRemove&&l.belongsToShim;)l=l._rollbarOldRemove;
d=function(a,b,d){l.call(this,a,b&&b._rollbar_wrapped||b,d)};d._rollbarOldRemove=l;d.belongsToShim=a;c.removeEventListener=d}}c.exports={captureUncaughtExceptions:function(b,c,a){if(b){var e;if("function"==typeof c._rollbarOldOnError)e=c._rollbarOldOnError;else if(b.onerror){for(e=b.onerror;e._rollbarOldOnError;)e=e._rollbarOldOnError;c._rollbarOldOnError=e}var d=function(){var a,d;d=Array.prototype.slice.call(arguments,0);a=e;b._rollbarWrappedError&&(d[4]||(d[4]=b._rollbarWrappedError),d[5]||(d[5]=
b._rollbarWrappedError._rollbarContext),b._rollbarWrappedError=null);c.handleUncaughtException.apply(c,d);a&&a.apply(b,d)};a&&(d._rollbarOldOnError=e);b.onerror=d}},captureUnhandledRejections:function(b,c,a){if(b){"function"==typeof b._rollbarURH&&b._rollbarURH.belongsToShim&&b.removeEventListener("unhandledrejection",b._rollbarURH);var e=function(a){var b,d,e;try{b=a.reason}catch(f){b=void 0}try{d=a.promise}catch(f){d="[unhandledrejection] error getting `promise` from event"}try{e=a.detail,!b&&e&&
(b=e.reason,d=e.promise)}catch(f){}b||(b="[unhandledrejection] error getting `reason` from event");c&&c.handleUnhandledRejection&&c.handleUnhandledRejection(b,d)};e.belongsToShim=a;b._rollbarURH=e;b.addEventListener("unhandledrejection",e)}},wrapGlobals:function(b,c,a){if(b){var k,d,l="EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".split(" ");
for(k=0;k<l.length;++k)d=l[k],b[d]&&b[d].prototype&&e(c,b[d].prototype,a)}}}},function(c,g,e){function b(a,b,d,c,e,k){var f="undefined"!=typeof window&&window||"undefined"!=typeof self&&self;(f=f&&f.Zone&&f.Zone.current)&&"angular"===f._name?f._parent.run(function(){l(a,b,d,c,e,k)}):l(a,b,d,c,e,k)}function l(b,d,f,c,e,l){if("undefined"!=typeof RollbarProxy)return p=c,g=e,void(new RollbarProxy).sendJsonPayload(p,function(a){},function(a){g(Error(a))});var p,g,n;if(!(n=l?l():function(){var a,b,d=[function(){return new XMLHttpRequest},
function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],f=d.length;for(b=0;b<f;b++)try{a=d[b]();break}catch(U){}return a}()))return e(Error("No way to send a request"));try{try{var q=function(){try{if(q&&4===n.readyState){q=void 0;var b=k.jsonParse(n.responseText);if((f=n)&&f.status&&200===f.status)return void e(b.error,b.value);(d=n)&&k.isType(d.status,"number")&&400<=d.status&&600>d.status?
(403===n.status&&h.error(b.value&&b.value.message),e(Error(String(n.status)))):e(a("XHR response had no status code (likely connection failure)"))}}catch(J){e(J&&J.stack?J:Error(J))}var d,f};n.open(f,d,!0);n.setRequestHeader&&(n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-Rollbar-Access-Token",b));n.onreadystatechange=q;n.send(c)}catch(A){if("undefined"!=typeof XDomainRequest){if(!window||!window.location)return e(Error("No window available during request, unknown environment"));
"http:"===window.location.href.substring(0,5)&&"https"===d.substring(0,5)&&(d="http"+d.substring(5));var y=new XDomainRequest;y.onprogress=function(){};y.ontimeout=function(){e(a("Request timed out","ETIMEDOUT"))};y.onerror=function(){e(Error("Error during request"))};y.onload=function(){var a=k.jsonParse(y.responseText);e(a.error,a.value)};y.open(f,d,!0);y.send(c)}else e(Error("Cannot find a method to transport a request"))}}catch(A){e(A)}}function a(a,b){a=Error(a);return a.code=b||"ENOTFOUND",
a}var k=e(5),d=e(13),h=e(14);c.exports={get:function(a,d,f,c,e){c&&k.isFunction(c)||(c=function(){});k.addParamsAndAccessTokenToPath(a,d,f);d=k.formatUrl(d);b(a,d,"GET",null,c,e)},post:function(a,c,f,e,l){if(e&&k.isFunction(e)||(e=function(){}),!f)return e(Error("Cannot send empty request"));f=d.truncate(f);if(f.error)return e(f.error);f=f.value;c=k.formatUrl(c);b(a,c,"POST",f,e,l)},postJsonPayload:function(a,d,f,c,e){c&&k.isFunction(c)||(c=function(){});d=k.formatUrl(d);b(a,d,"POST",f,c,e)}}},function(c,
g){c.exports={parse:function(c){var b,e,a={protocol:null,auth:null,host:null,path:null,hash:null,href:c,hostname:null,port:null,pathname:null,search:null,query:null};if((e=-1!==(b=c.indexOf("//"))?(a.protocol=c.substring(0,b),b+2):0,-1!==(b=c.indexOf("@",e))&&(a.auth=c.substring(e,b),e=b+1),-1===(b=c.indexOf("/",e)))&&-1===(b=c.indexOf("?",e)))return-1===(b=c.indexOf("#",e))?a.host=c.substring(e):(a.host=c.substring(e,b),a.hash=c.substring(b)),a.hostname=a.host.split(":")[0],a.port=a.host.split(":")[1],
a.port&&(a.port=parseInt(a.port,10)),a;a.host=c.substring(e,b);a.hostname=a.host.split(":")[0];a.port=a.host.split(":")[1];a.port&&(a.port=parseInt(a.port,10));e=b;if(-1===(b=c.indexOf("#",e))?a.path=c.substring(e):(a.path=c.substring(e,b),a.hash=c.substring(b)),a.path)c=a.path.split("?"),a.pathname=c[0],a.query=c[1],a.search=a.query?"?"+a.query:null;return a}}},function(c,g,e){function b(a,b,c){var d=a.message,f=a.custom;d||(f?(b=l.stringify(l.scrub(f,b.scrubFields)),d=b.error||b.value||""):d="");
b={body:d};f&&(b.extra=l.merge(f));l.set(a,"data.body",{message:b});c(null,a)}var l=e(5),a=e(21),k=e(14);c.exports={handleItemWithError:function(b,c,e){if(b.data=b.data||{},b.err)try{b.stackInfo=b.err._savedStackTrace||a.parse(b.err)}catch(p){k.error("Error while parsing the error object.",p);try{b.message=b.err.message||b.err.description||b.message||String(b.err)}catch(f){b.message=String(b.err)||String(f)}delete b.err}e(null,b)},ensureItemHasSomethingToSay:function(a,b,c){a.message||a.stackInfo||
a.custom||c(Error("No message, stack info, or custom data"),null);c(null,a)},addBaseInfo:function(a,b,c){a.data=l.merge(a.data,{environment:b.payload&&b.payload.environment||b.environment,level:a.level,endpoint:b.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:a.uuid,notifier:{name:"rollbar-browser-js",version:b.version}});c(null,a)},addRequestInfo:function(a){return function(b,d,c){if(!a||!a.location)return c(null,b);var f="$remote_ip";d.captureIp?!0!==d.captureIp&&
(f+="_anonymize"):f=null;l.set(b,"data.request",{url:a.location.href,query_string:a.location.search,user_ip:f});c(null,b)}},addClientInfo:function(a){return function(b,d,c){if(!a)return c(null,b);d=a.navigator||{};var f=a.screen||{};l.set(b,"data.client",{runtime_ms:b.timestamp-a._rollbarStartTime,timestamp:Math.round(b.timestamp/1E3),javascript:{browser:d.userAgent,language:d.language,cookie_enabled:d.cookieEnabled,screen:{width:f.width,height:f.height}}});c(null,b)}},addPluginInfo:function(a){return function(b,
d,c){if(!a||!a.navigator)return c(null,b);for(var f=[],e=a.navigator.plugins||[],k=0,g=e.length;k<g;++k)d=e[k],f.push({name:d.name,description:d.description});l.set(b,"data.client.javascript.plugins",f);c(null,b)}},addBody:function(d,c,e){if(d.stackInfo){var k=d.data.description,f=d.stackInfo,g=d.custom,h=a.guessErrorClass(f.message),n=f.name||h[0],m=h[1],h={exception:{class:n,message:m}};k&&(h.exception.description=k);k=f.stack;if(k&&0===k.length&&d._unhandledStackInfo&&d._unhandledStackInfo.stack&&
(k=d._unhandledStackInfo.stack),k){var w,v,r,t,A;0===k.length&&(h.exception.stack=f.rawStack,h.exception.raw=String(f.rawException));h.frames=[];for(m=0;m<k.length;++m)f=k[m],n={filename:f.url?l.sanitizeUrl(f.url):"(unknown)",lineno:f.line||null,method:f.func&&"?"!==f.func?f.func:"[anonymous]",colno:f.column},c.sendFrameUrl&&(n.url=f.url),n.method&&n.method.endsWith&&n.method.endsWith("_rollbar_wrapped")||(w=v=r=null,(t=f.context?f.context.length:0)&&(A=Math.floor(t/2),v=f.context.slice(0,A),w=f.context[A],
r=f.context.slice(A)),w&&(n.code=w),(v||r)&&(n.context={},v&&v.length&&(n.context.pre=v),r&&r.length&&(n.context.post=r)),f.args&&(n.args=f.args),h.frames.push(n));h.frames.reverse();g&&(h.extra=l.merge(g));l.set(d,"data.body",{trace:h});e(null,d)}else d.message=n+": "+m,b(d,c,e)}else b(d,c,e)},scrubPayload:function(a,b,c){a.data=l.scrub(a.data,b.scrubFields);c(null,a)}}},function(c,g,e){function b(a){var b={};return b._stackFrame=a,b.url=a.fileName,b.line=a.lineNumber,b.func=a.functionName,b.column=
a.columnNumber,b.args=a.args,b.context=null,b}function l(d){var c=d.constructor&&d.constructor.name;(!c||!c.length||3>c.length)&&(c=d.name);var e,k=[];if(d.stack)e=d;else try{throw d;}catch(y){e=y}try{k=a.parse(e)}catch(y){k=[]}e=[];for(var f=0;f<k.length;f++)e.push(new b(k[f]));return{stack:e,message:d.message,name:c,rawStack:d.stack,rawException:d}}var a=e(22),k=/^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): /;c.exports={guessFunctionName:function(){return"?"},guessErrorClass:function(a){if(!a||
!a.match)return["Unknown error. There was no error message to display.",""];var b=a.match(k),d="(unknown)";return b&&(d=b[b.length-1],a=(a=a.replace((b[b.length-2]||"")+d+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[d,a]},gatherContext:function(){return null},parse:function(a){return new l(a)},Stack:l,Frame:b}},function(c,g,e){var b,l;e=[e(23)];void 0===(l="function"==typeof(b=function(a){function b(a,b,d){if("function"==typeof Array.prototype.map)return a.map(b,d);for(var c=Array(a.length),f=0;f<a.length;f++)c[f]=
b.call(d,a[f]);return c}function d(a,b,d){if("function"==typeof Array.prototype.filter)return a.filter(b,d);for(var c=[],f=0;f<a.length;f++)b.call(d,a[f])&&c.push(a[f]);return c}var c=/(^|@)\S+\:\d+/,e=/^\s*at .*(\S+\:\d+|\(native\))/m,l=/^(eval@)?(\[native code\])?$/;return{parse:function(a){if(void 0!==a.stacktrace||void 0!==a["opera#sourceloc"])return this.parseOpera(a);if(a.stack&&a.stack.match(e))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw Error("Cannot parse given Error object");
},extractLocation:function(a){if(-1===a.indexOf(":"))return[a];a=a.replace(/[\(\)\s]/g,"").split(":");var b=a.pop(),d=a[a.length-1];if(isNaN(parseFloat(d))||!isFinite(d))return[a.join(":"),b,void 0];d=a.pop();return[a.join(":"),d,b]},parseV8OrIE:function(c){c=d(c.stack.split("\n"),function(a){return!!a.match(e)},this);return b(c,function(b){-1<b.indexOf("(eval ")&&(b=b.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var d=b.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),
c=this.extractLocation(d.pop()),d=d.join(" ")||void 0;return new a(d,void 0,"eval"===c[0]?void 0:c[0],c[1],c[2],b)},this)},parseFFOrSafari:function(c){c=d(c.stack.split("\n"),function(a){return!a.match(l)},this);return b(c,function(b){if(-1<b.indexOf(" \x3e eval")&&(b=b.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===b.indexOf("@")&&-1===b.indexOf(":"))return new a(b);var d=b.split("@"),c=this.extractLocation(d.pop()),d=d.shift()||void 0;return new a(d,void 0,c[0],c[1],c[2],
b)},this)},parseOpera:function(a){return!a.stacktrace||-1<a.message.indexOf("\n")&&a.message.split("\n").length>a.stacktrace.split("\n").length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(b){var d=/Line (\d+).*script (?:in )?(\S+)/i;b=b.message.split("\n");for(var c=[],f=2,e=b.length;f<e;f+=2){var k=d.exec(b[f]);k&&c.push(new a(void 0,void 0,k[2],k[1],void 0,b[f]))}return c},parseOpera10:function(b){var d=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;
b=b.stacktrace.split("\n");for(var c=[],f=0,e=b.length;f<e;f+=2){var k=d.exec(b[f]);k&&c.push(new a(k[3]||void 0,void 0,k[2],k[1],void 0,b[f]))}return c},parseOpera11:function(f){f=d(f.stack.split("\n"),function(a){return!!a.match(c)&&!a.match(/^Error created at/)},this);return b(f,function(b){var d,c=b.split("@"),f=this.extractLocation(c.pop()),e=c.shift()||"",c=e.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;e.match(/\(([^\)]*)\)/)&&(d=e.replace(/^[^\(]+\(([^\)]*)\)$/,
"$1"));d=void 0===d||"[arguments not available]"===d?void 0:d.split(",");return new a(c,d,f[0],f[1],f[2],b)},this)}}})?b.apply(g,e):b)||(c.exports=l)},function(c,g,e){var b,l;e=[];void 0===(l="function"==typeof(b=function(){function a(a){return!isNaN(parseFloat(a))&&isFinite(a)}function b(a,b,c,e,f,k){void 0!==a&&this.setFunctionName(a);void 0!==b&&this.setArgs(b);void 0!==c&&this.setFileName(c);void 0!==e&&this.setLineNumber(e);void 0!==f&&this.setColumnNumber(f);void 0!==k&&this.setSource(k)}return b.prototype=
{getFunctionName:function(){return this.functionName},setFunctionName:function(a){this.functionName=String(a)},getArgs:function(){return this.args},setArgs:function(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("Args must be an Array");this.args=a},getFileName:function(){return this.fileName},setFileName:function(a){this.fileName=String(a)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(b){if(!a(b))throw new TypeError("Line Number must be a Number");
this.lineNumber=Number(b)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(b){if(!a(b))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(b)},getSource:function(){return this.source},setSource:function(a){this.source=String(a)},toString:function(){var b=this.getFunctionName()||"{anonymous}",c="("+(this.getArgs()||[]).join(",")+")",e=this.getFileName()?"@"+this.getFileName():"",k=a(this.getLineNumber())?":"+this.getLineNumber():"",f=a(this.getColumnNumber())?
":"+this.getColumnNumber():"";return b+c+e+k+f}},b})?b.apply(g,e):b)||(c.exports=l)},function(c,g,e){var b=e(5);c.exports={itemToPayload:function(c,a,e){a=a.payload||{};a.body&&delete a.body;a=b.merge(c.data,a);c._isUncaught&&(a._isUncaught=!0);c._originalArgs&&(a._originalArgs=c._originalArgs);e(null,a)},addTelemetryData:function(c,a,e){c.telemetryEvents&&b.set(c,"data.body.telemetry",c.telemetryEvents);e(null,c)},addMessageWithError:function(c,a,e){if(c.message){a="data.body.trace_chain.0";var d=
b.get(c,a);if(d||(a="data.body.trace",d=b.get(c,a)),d){if(!d.exception||!d.exception.description)return b.set(c,a+".exception.description",c.message),void e(null,c);d=b.get(c,a+".extra")||{};d=b.merge(d,{message:c.message});b.set(c,a+".extra",d)}}e(null,c)},userTransform:function(c){return function(a,e,d){var k=b.merge(a);try{b.isFunction(e.transform)&&e.transform(k.data,a)}catch(w){return e.transform=null,c.error("Error while calling custom transform() function. Removing custom transform().",w),
void d(null,a)}d(null,k)}},addConfigToPayload:function(c,a,e){if(!a.sendConfig)return e(null,c);var d=b.get(c,"data.custom")||{};d._rollbarConfig=a;c.data.custom=d;e(null,c)}}},function(c,g,e){var b=e(5);c.exports={checkIgnore:function(c,a){return!b.get(a,"plugins.jquery.ignoreAjaxErrors")||!b.get(c,"body.message.extra.isAjax")}}},function(c,g,e){function b(a,b,c,e){var d,k,f,g,l,n,m,G,v,r=!1;"blacklist"===c&&(r=!0);try{if((d=r?b.hostBlackList:b.hostWhiteList,m=d&&d.length,k=h.get(a,"body.trace"),
!d||0===m)||!k||!k.frames||0===k.frames.length)return!r;l=k.frames.length;for(G=0;G<l;G++){if(f=k.frames[G],g=f.filename,!h.isType(g,"string"))return!r;for(v=0;v<m;v++)if(n=d[v],(new RegExp(n)).test(g))return!0}}catch(t){return r?b.hostBlackList=null:b.hostWhiteList=null,a=r?"hostBlackList":"hostWhiteList",e.error("Error while reading your configuration's "+a+" option. Removing custom "+a+".",t),!r}return!1}var h=e(5);c.exports={checkLevel:function(a,b){return!((h.LEVELS[a.level]||0)<(h.LEVELS[b.reportLevel]||
0))},userCheckIgnore:function(a){return function(b,c){var d=!!b._isUncaught;delete b._isUncaught;var e=b._originalArgs;delete b._originalArgs;try{h.isFunction(c.onSendCallback)&&c.onSendCallback(d,e,b)}catch(p){c.onSendCallback=null,a.error("Error while calling onSendCallback, removing",p)}try{if(h.isFunction(c.checkIgnore)&&c.checkIgnore(d,e,b))return!1}catch(p){c.checkIgnore=null,a.error("Error while calling custom checkIgnore(), removing",p)}return!0}},urlIsNotBlacklisted:function(a){return function(c,
d){return!b(c,d,"blacklist",a)}},urlIsWhitelisted:function(a){return function(c,d){return b(c,d,"whitelist",a)}},messageIsIgnored:function(a){return function(b,c){var d,e,k,f,g,l,m,u,G;try{if(!((g=!1,(k=c.ignoredMessages)&&0!==k.length)&&(m=b.body,u=h.get(m,"trace.exception.message"),G=h.get(m,"message.body"),d=u||G)))return!0;f=k.length;for(e=0;e<f&&(l=new RegExp(k[e],"gi"),!(g=l.test(d)));e++);}catch(v){c.ignoredMessages=null,a.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!g}}}},
function(c,g,e){function b(a,b,c,d,e){var f=a[b];a[b]=c(f);d&&d[e].push([a,b,f])}function h(a,b){for(var c;a[b].length;)(c=a[b].shift())[0][c[1]]=c[2]}function a(a,b,c,d,e){var f=a.autoInstrument;!1===a.enabled||!1===f?this.autoInstrument={}:(k.isType(f,"object")||(f=m),this.autoInstrument=k.merge(m,f));this.scrubTelemetryInputs=!!a.scrubTelemetryInputs;this.telemetryScrubber=a.telemetryScrubber;this.defaultValueScrubber=function(a){for(var b=[],c=0;c<a.length;++c)b.push(new RegExp(a[c],"i"));return function(a){a:{if(a&&
a.attributes){a=a.attributes;for(var c=0;c<a.length;++c)if("name"===a[c].key){a=a[c].value;break a}}a=null}if(!a)return!1;for(c=0;c<b.length;++c)if(b[c].test(a))return!0;return!1}}(a.scrubFields);this.telemeter=b;this.rollbar=c;this._window=d||{};this._document=e||{};this.replacements={network:[],log:[],navigation:[],connectivity:[]};this.eventRemovers={dom:[],connectivity:[]};this._lastHref=(this._location=this._window.location)&&this._location.href}var k=e(5),d=e(19),n=e(28),m={network:!0,networkResponseHeaders:!1,
networkResponseBody:!1,networkRequestBody:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};a.prototype.configure=function(a){var b=a.autoInstrument,c=k.merge(this.autoInstrument);!1===a.enabled||!1===b?this.autoInstrument={}:(k.isType(b,"object")||(b=m),this.autoInstrument=k.merge(m,b));this.instrument(c);void 0!==a.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!a.scrubTelemetryInputs);void 0!==a.telemetryScrubber&&(this.telemetryScrubber=a.telemetryScrubber)};a.prototype.instrument=function(a){!this.autoInstrument.network||
a&&a.network?!this.autoInstrument.network&&a&&a.network&&this.deinstrumentNetwork():this.instrumentNetwork();!this.autoInstrument.log||a&&a.log?!this.autoInstrument.log&&a&&a.log&&this.deinstrumentConsole():this.instrumentConsole();!this.autoInstrument.dom||a&&a.dom?!this.autoInstrument.dom&&a&&a.dom&&this.deinstrumentDom():this.instrumentDom();!this.autoInstrument.navigation||a&&a.navigation?!this.autoInstrument.navigation&&a&&a.navigation&&this.deinstrumentNavigation():this.instrumentNavigation();
!this.autoInstrument.connectivity||a&&a.connectivity?!this.autoInstrument.connectivity&&a&&a.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity()};a.prototype.deinstrumentNetwork=function(){h(this.replacements,"network")};a.prototype.instrumentNetwork=function(){function a(a,d){a in d&&k.isFunction(d[a])&&b(d,a,function(a){return c.rollbar.wrap(a)})}var c=this;if("XMLHttpRequest"in this._window){var d=this._window.XMLHttpRequest.prototype;b(d,"open",function(a){return function(b,
c){return k.isType(c,"string")&&(this.__rollbar_xhr={method:b,url:c,status_code:null,start_time_ms:k.now(),end_time_ms:null}),a.apply(this,arguments)}},this.replacements,"network");b(d,"send",function(d){return function(f){function e(){if(g.__rollbar_xhr){if(null===g.__rollbar_xhr.status_code){g.__rollbar_xhr.status_code=0;var a=null;c.autoInstrument.networkRequestBody&&(a=f);g.__rollbar_event=c.telemeter.captureNetwork(g.__rollbar_xhr,"xhr",void 0,a)}if(2>g.readyState&&(g.__rollbar_xhr.start_time_ms=
k.now()),3<g.readyState){g.__rollbar_xhr.end_time_ms=k.now();a=null;if(c.autoInstrument.networkResponseHeaders){var b=c.autoInstrument.networkResponseHeaders,a={};try{var d,e;if(!0===b){var h=g.getAllResponseHeaders();if(h){var l,n,m=h.trim().split(/[\r\n]+/);for(e=0;e<m.length;e++)l=m[e].split(": "),d=l.shift(),n=l.join(": "),a[d]=n}}else for(e=0;e<b.length;e++)d=b[e],a[d]=g.getResponseHeader(d)}catch(E){}}d=null;if(c.autoInstrument.networkResponseBody)try{d=g.responseText}catch(E){}e=null;(d||a)&&
(e={},d&&(e.body=d),a&&(e.headers=a));e&&(g.__rollbar_xhr.response=e);try{var p=g.status,p=1223===p?204:p;g.__rollbar_xhr.status_code=p;g.__rollbar_event.level=c.telemeter.levelFromStatus(p)}catch(E){}}}}var g=this;return a("onload",g),a("onerror",g),a("onprogress",g),"onreadystatechange"in g&&k.isFunction(g.onreadystatechange)?b(g,"onreadystatechange",function(a){return c.rollbar.wrap(a,void 0,e)}):g.onreadystatechange=e,d.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&
b(this._window,"fetch",function(a){return function(b,d){for(var f=Array(arguments.length),e=0,g=f.length;e<g;e++)f[e]=arguments[e];var h,e=f[0],g="GET";k.isType(e,"string")?h=e:e&&(h=e.url,e.method&&(g=e.method));f[1]&&f[1].method&&(g=f[1].method);var l={method:g,url:h,status_code:null,start_time_ms:k.now(),end_time_ms:null};h=null;return c.autoInstrument.networkRequestBody&&(f[1]&&f[1].body?h=f[1].body:f[0]&&!k.isType(f[0],"string")&&f[0].body&&(h=f[0].body)),c.telemeter.captureNetwork(l,"fetch",
void 0,h),a.apply(this,f).then(function(a){l.end_time_ms=k.now();l.status_code=a.status;var b=null;if(c.autoInstrument.networkResponseHeaders){var d=c.autoInstrument.networkResponseHeaders,b={};try{if(!0!==d)for(var f=0;f<d.length;f++){var e=d[f];b[e]=a.headers.get(e)}}catch(E){}}d=null;return b&&(d={headers:b}),d&&(l.response=d),a})}},this.replacements,"network")};a.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var a;this.replacements.log.length;)a=
this.replacements.log.shift(),this._window.console[a[0]]=a[1]};a.prototype.instrumentConsole=function(){function a(a){var d=c[a],f=c,e="warn"===a?"warning":a;c[a]=function(){var a=Array.prototype.slice.call(arguments),c=k.formatArgsAsString(a);b.telemeter.captureLog(c,e);d&&Function.prototype.apply.call(d,f,a)};b.replacements.log.push([a,d])}if("console"in this._window&&this._window.console.log)for(var b=this,c=this._window.console,d=["debug","info","warn","error","log"],e=0,g=d.length;e<g;e++)a(d[e])};
a.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")};a.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var a=this.handleClick.bind(this),b=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",a,!0);this.addListener("dom",this._window,"blur","onfocusout",b,!0)}};a.prototype.handleClick=function(a){try{var b=n.getElementFromEvent(a,this._document),
c=b&&b.tagName,d=n.isDescribedElement(b,"a")||n.isDescribedElement(b,"button");c&&(d||n.isDescribedElement(b,"input",["button","submit"]))?this.captureDomEvent("click",b):n.isDescribedElement(b,"input",["checkbox","radio"])&&this.captureDomEvent("input",b,b.value,b.checked)}catch(x){}};a.prototype.handleBlur=function(a){try{var b=n.getElementFromEvent(a,this._document);b&&b.tagName&&(n.isDescribedElement(b,"textarea")?this.captureDomEvent("input",b,b.value):n.isDescribedElement(b,"select")&&b.options&&
b.options.length?this.handleSelectInputChanged(b):n.isDescribedElement(b,"input")&&!n.isDescribedElement(b,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",b,b.value))}catch(y){}};a.prototype.handleSelectInputChanged=function(a){if(a.multiple)for(var b=0;b<a.options.length;b++)a.options[b].selected&&this.captureDomEvent("input",a,a.options[b].value);else 0<=a.selectedIndex&&a.options[a.selectedIndex]&&this.captureDomEvent("input",a,a.options[a.selectedIndex].value)};
a.prototype.captureDomEvent=function(a,b,c,d){if(void 0!==c)if(this.scrubTelemetryInputs||"password"===n.getElementType(b))c="[scrubbed]";else{var e=n.describeElement(b);this.telemetryScrubber?this.telemetryScrubber(e)&&(c="[scrubbed]"):this.defaultValueScrubber(e)&&(c="[scrubbed]")}b=n.elementArrayToString(n.treeToArray(b));this.telemeter.captureDom(a,b,c,d)};a.prototype.deinstrumentNavigation=function(){var a=this._window.chrome;!(a&&a.app&&a.app.runtime)&&this._window.history&&this._window.history.pushState&&
h(this.replacements,"navigation")};a.prototype.instrumentNavigation=function(){var a=this._window.chrome;if(!(a&&a.app&&a.app.runtime)&&this._window.history&&this._window.history.pushState){var c=this;b(this._window,"onpopstate",function(a){return function(){c.handleUrlChange(c._lastHref,c._location.href);a&&a.apply(this,arguments)}},this.replacements,"navigation");b(this._window.history,"pushState",function(a){return function(){var b=2<arguments.length?arguments[2]:void 0;return b&&c.handleUrlChange(c._lastHref,
b+""),a.apply(this,arguments)}},this.replacements,"navigation")}};a.prototype.handleUrlChange=function(a,b){var c=d.parse(this._location.href),e=d.parse(b),f=d.parse(a);this._lastHref=b;c.protocol===e.protocol&&c.host===e.host&&(b=e.path+(e.hash||""));c.protocol===f.protocol&&c.host===f.host&&(a=f.path+(f.hash||""));this.telemeter.captureNavigation(a,b)};a.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):
h(this.replacements,"connectivity"))};a.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var a=this;b(this._document.body,"ononline",
function(b){return function(){a.telemeter.captureConnectivityChange("online");b&&b.apply(this,arguments)}},this.replacements,"connectivity");b(this._document.body,"onoffline",function(b){return function(){a.telemeter.captureConnectivityChange("offline");b&&b.apply(this,arguments)}},this.replacements,"connectivity")}};a.prototype.addListener=function(a,b,c,d,e,k){b.addEventListener?(b.addEventListener(c,e,k),this.eventRemovers[a].push(function(){b.removeEventListener(c,e,k)})):d&&(b.attachEvent(d,
e),this.eventRemovers[a].push(function(){b.detachEvent(d,e)}))};a.prototype.removeListeners=function(a){for(;this.eventRemovers[a].length;)this.eventRemovers[a].shift()()};c.exports=a},function(c,g){function e(a){return(a.getAttribute("type")||"").toLowerCase()}function b(a){if(!a||!a.tagName)return"";var b=[a.tagName];a.id&&b.push("#"+a.id);a.classes&&b.push("."+a.classes.join("."));for(var c=0;c<a.attributes.length;c++)b.push("["+a.attributes[c].key+'\x3d"'+a.attributes[c].value+'"]');return b.join("")}
function h(a){if(!a||!a.tagName)return null;var b,c,e,g={};g.tagName=a.tagName.toLowerCase();a.id&&(g.id=a.id);(b=a.className)&&"string"==typeof b&&(g.classes=b.split(/\s+/));var h=["type","name","title","alt"];g.attributes=[];for(e=0;e<h.length;e++)b=h[e],(c=a.getAttribute(b))&&g.attributes.push({key:b,value:c});return g}c.exports={describeElement:h,descriptionToString:b,elementArrayToString:function(a){for(var c,d,e=[],g=0,h=a.length-1;0<=h;h--){if(c=b(a[h]),d=g+3*e.length+c.length,h<a.length-1&&
83<=d){e.unshift("...");break}e.unshift(c);g+=c.length}return e.join(" \x3e ")},treeToArray:function(a){for(var b,c=[],e=0;a&&5>e&&"html"!==(b=h(a)).tagName;e++)c.unshift(b),a=a.parentNode;return c},getElementFromEvent:function(a,b){return a.target?a.target:b&&b.elementFromPoint?b.elementFromPoint(a.clientX,a.clientY):void 0},isDescribedElement:function(a,b,c){if(a.tagName.toLowerCase()!==b.toLowerCase())return!1;if(!c)return!0;a=e(a);for(b=0;b<c.length;b++)if(c[b]===a)return!0;return!1},getElementType:e}}])}(z=
{exports:{}},z.exports),z.exports),ca=function(){function m(h){this.custom={};h||(h="undefined"!=typeof window?window:{});var c=h.screen||{},g=h.document||{},e=h.navigator||{};this.url=(h.location||{}).href||"";this.cookiesEnabled=function(b,c){try{if(c.cookieEnabled)return!0;if(b&&"cookie"in b){if(0<b.cookie.length)return!0;if(-1<(b.cookie="MessengerTestCookie\x3d").indexOf.call(b.cookie,"MessengerTestCookie"))return b.cookie="MessengerTestCookie\x3d;max-age\x3d0;expires\x3d0",!0}}catch(a){}return!1}(g,
e);this.screenWidth=c.availWidth||0;this.screenHeight=c.availHeight||0;this.winWidth=h.innerWidth||0;this.winHeight=h.innerHeight||0;this.userAgent=e.userAgent||"";this.jsFiles=Array.prototype.slice.call(g.querySelectorAll&&g.querySelectorAll("script[src]")||[]).map(function(b){return b.src})}return m.prototype.addCustom=function(h,c){return"string"==typeof h?this.custom[h]=c:N(this.custom,h),this},m.prototype.clone=function(){var h=N(new m,this);return h.jsFiles=this.jsFiles.slice(0),h.custom=C({},
this.custom),h},m}(),r,D,F=function(){function m(h,c,g){this.occurrences=0;var e=function k(b,c,e){if("string"==typeof b)return[O(b),(c>r.INFO&&Error()||{}).stack,e||[],void 0];if(b instanceof Error)return[O(b.message||"No error message!"),(b||c>r.INFO&&Error()||{}).stack,e||[],b];if("object"==typeof b&&b){var d=Array.prototype.slice.call(b);if(d.length)return k(d.shift(),c,(e||[]).concat(d))}return[O("Unexpected message format received: "+JSON.stringify(b)),(c>r.INFO&&Error()||{}).stack,e||[],void 0]}(h,
c);h=e[0];var b=e[1],l=e[2],e=e[3];this.message=h;this.stackTrace=b;this.extraArgs=l;this.level=c;this.type=g;this.groupId=Q([h,c,g].join("-"));this.context=new ca;e&&(this.originalError=e)}return m.prototype.getId=function(h){var c;void 0===h&&(h=!1);return h&&this._id||(c=Q([this.groupId,this.fileName||"null",this.lineNo||"null",this.colNo||"null",this.stackTrace||"null"].join("-")))&&h&&(this._id=c)||c},m.prototype.clone=function(){var h=N(new m(this.message,this.level,this.type),this);return h.extraArgs=
this.extraArgs.slice(0),h.context=this.context.clone(),h},m}();(D=r||(r={}))[D.NOTHING=5]="NOTHING";D[D.ERROR=4]="ERROR";D[D.WARN=3]="WARN";D[D.INFO=2]="INFO";D[D.DEBUG=1]="DEBUG";var V=/^\/(.+)\/([gmiyus]*)$/,M=function(){function m(h){this.id=h.id||[];this.groupId=h.groupId||[];this.rx=R(h.rx||[]);this.stackRx=R(h.stackRx||[]);this.minLevel=("number"!=typeof h.minLevel?r[h.minLevel]:h.minLevel)||r.WARN}return m.prototype.isIgnored=function(h){return h.level<this.minLevel||0<=this.id.indexOf(h.getId(!0))||
0<=this.groupId.indexOf(h.groupId)||S(this.rx,function(c){return!!h.message.match(c)})||S(this.stackRx,function(c){return!!(h.stackTrace||"").match(c)})},m}();z=function(){function m(h,c){this.type=h;this._deliveryCount=0;this.setOptions(C({enabled:!1,stopDeliveries:!0,deliveryLimit:0,ignore:{}},c))}return m.prototype.setOptions=function(h){h=this._options=C({},this._options,h);return h.ignore=new M(h.ignore),this},m.prototype.link=function(h){return this._messenger=h,this},m.prototype.setStopDelivery=
function(h){return void 0===h&&(h=!0),this._options.stopDeliveries&&(this._options.enabled=!h),this},m.prototype.send=function(h){var c=this._options,g=c.deliveryLimit,e=c.ignore;return c.enabled&&(this._deliveryCount<g||0>=g)&&!e.isIgnored(h)&&(this._deliveryCount++,this._deliver(h)),this},m}();var da=function(m){function h(c,g){var e;void 0===g&&(g=console);c=m.call(this,"PROTRACTOR",C({styles:(e={},e[r[r.ERROR]]="color:#FF8080",e[r[r.WARN]]="color:#FFC800",e),useGroups:!0,printOnlyArguments:!1},
c))||this;return c._log=g,c}return B(h,m),h.prototype._deliver=function(c){c.occurrences++;var g=this._log,e=function(a,b){switch(a){case r.ERROR:return b.error;case r.WARN:return b.warn;case r.INFO:return b.info;case r.DEBUG:return b.log}}(c.level,g);if(e){var b=this._options;if(!b.useGroups)return b.printOnlyArguments?e.apply(void 0,[c.message].concat(c.extraArgs)):e(c.message,c);var h=r[c.level],a=b.styles[h]||"";g.groupCollapsed("%c(!) [BP] ["+h+"] - "+c.message,a);e(c.message);c.extraArgs.length&&
(g.group("%cExtra args:",a),c.extraArgs.forEach(function(a){return g.log(a)}),g.groupEnd());c.stackTrace&&(g.groupCollapsed("%cStack trace (original):",a),c.stackTrace.split("\n").forEach(function(b){return g.log("%c"+b,a)}),g.groupEnd());b.printOnlyArguments||g.log(c);g.groupEnd()}},h}(z),ea=function(m){function h(c,g){var e;void 0===g&&(g=console);c=m.call(this,"BROWSER",C({styles:(e={},e[r[r.ERROR]]="color:#FF8080",e[r[r.WARN]]="color:#FFC800",e),useGroups:!0,printOnlyArguments:!1},c))||this;return c._log=
g,c}return B(h,m),h.prototype._deliver=function(c){c.occurrences++;var g=this._log,e=function(a,b){switch(a){case r.ERROR:return b.error;case r.WARN:return b.warn;case r.INFO:return b.info;case r.DEBUG:return b.log}}(c.level,g);if(e){var b=this._options;if(!b.useGroups)return b.printOnlyArguments?e.apply(void 0,[c.message].concat(c.extraArgs)):e(c.message,c);var h=r[c.level],a=b.styles[h]||"";g.groupCollapsed("%c(!) [BP] ["+h+"] - "+c.message,a);e(c.message);c.extraArgs.length&&(g.group("%cExtra args:",
a),c.extraArgs.forEach(function(a){return g.log(a)}),g.groupEnd());c.stackTrace&&(g.groupCollapsed("%cStack trace (original):",a),c.stackTrace.split("\n").forEach(function(b){return g.log("%c"+b,a)}),g.groupEnd());b.printOnlyArguments||g.log(c);g.groupEnd()}},h}(z),fa=function(m){function h(c){c=m.call(this,"BUFFER",c)||this;return c._messagesList=[],c}return B(h,m),h.prototype.getMessages=function(c){void 0===c&&(c=!1);var g=this._messagesList.slice(0);return c&&(this._messagesList=[]),g},h.prototype._deliver=
function(c){this._messagesList.push(c)},h}(z);z=function(m){function h(c,g){return m.call(this,c,C({queueTime:1E3},g))||this}return B(h,m),h.prototype._deliver=function(c){var g=this,e=this._options.queueTime,b=this._deliveryCount;0>=e?this._deliverAll([c],b):(this._add(c),this._timer||(this._timer=setTimeout(function(){delete g._timer;g._deliverAll(g._getQueue(!0).messages,b)},e)))},h.prototype._getQueue=function(c){void 0===c&&(c=!1);var g=this._queue;return!c&&g||(this._queue={messages:[],index:{}}),
g||this._queue},h.prototype._add=function(c){var g=c.getId(!0),e=this._getQueue();void 0===e.index[g]?(e.index[g]=e.messages.push(c)-1,c.occurrences++):e.messages[e.index[g]].occurrences++},h}(z);var ga=function(m){function h(c,g,e){void 0===g&&(g=new XMLHttpRequest);void 0===e&&(e=console);c=m.call(this,"R9",C({url:"/log/client/messages",maxValueLength:1E3},c))||this;return c._xhr=g,c._log=e,c}return B(h,m),h.prototype._deliverAll=function(c,g){var e=this._options,b=e.url,e=e.maxValueLength;if(c.length&&
b){var b=this._xhr,h=this._onResponse.bind(this);b.onreadystatechange=function(){h(this)};b.open("POST",this._options.url,!0);b.setRequestHeader("Content-type","application/json; charset\x3dutf-8");b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(function(a,b){if(void 0===a)return"{}";try{return JSON.stringify(a,function(a,c){if(null!=c&&"ngDebugContext"!==a)return"object"!=typeof c&&(a=c&&c.toString()||"",a.length>b)?a.substr(0,b):c})}catch(d){return a.toString()}}({product:this._messenger&&
this._messenger.getProduct()||"UNKNOWN",messages:c.map(W),reqNo:g},e))}},h.prototype._onResponse=function(c){var g=this._log;try{4===c.readyState&&(200!==c.status?g.error("Server side error",c.responseText):this._onSuccess(c.responseText))}catch(e){g.warn("Client side log writing failed",e)}},h.prototype._onSuccess=function(c){try{var g=JSON.parse(c);if(g){g.message&&this._log.error("Server side error:",g.message);var e=this._messenger;if(e){if(g.ignore||g.platformIgnores){c={};g.ignore&&(c.ignore=
new M(g.ignore));var b=g.platformIgnores;b&&(c.platforms=Object.keys(b).reduce(function(c,a){return c[a]={ignore:new M(b[a])},c},{}));e.setOptions(c)}g.stopLogging&&e.setStopDelivery(!0)}}}catch(l){}},h}(z),ha=function(m){function h(c){c=m.call(this,"ROLLBAR",c)||this;return c._getRollbar(),c}return B(h,m),h.prototype.setOptions=function(c){m.prototype.setOptions.call(this,c);var g=this._options;g.enabled=g.enabled&&g.accessToken&&("undefined"==typeof location||"file:"!==location.protocol||!1)||!1;
var e=c.transform;g.transform=function(b){var c=b.body&&(b.body.trace||b.body.message);c&&c.extra&&c.extra.kibId&&(b.fingerprint=c.extra.kibId.toString());"function"==typeof e&&e(b)};c=this._getRollbar();return c&&c.configure(this._getConfig()),this},h.prototype._deliverAll=function(c){if(c.length){var g=this._getRollbar();g&&c.forEach(function(c){var b=[c.type.slice(0,3).toUpperCase(),c.message].join(" | "),e={msgId:c.getId(!0),kibId:c.groupId,occ:1<c.occurrences?c.occurrences:void 0,extraArgs:c.extraArgs,
level:r[c.level],type:c.type,fileName:c.fileName,lineNo:c.lineNo,colNo:c.colNo,jsFiles:c.context.jsFiles,customContext:c.context.custom};switch(c.level){case r.ERROR:var a=c.originalError;return!a&&c.stackTrace&&((a=Error()).message=c.message,a.stack=c.stackTrace),g.error(b,a,e);case r.WARN:return g.warning(b,e);case r.INFO:return g.info(b,e);default:return g.debug(b,e)}})}},h.prototype._getConfig=function(){var c=C({captureUncaught:!1,captureUnhandledRejections:!1,scrubTelemetryInputs:!0,verbose:!1},
this._options);return delete c.queueTime,delete c.stopDeliveries,delete c.deliveryLimit,delete c.ignore,c},h.prototype._getRollbar=function(){return this._options.enabled&&(this._rollbar||(this._rollbar=new ba(this._getConfig())))||void 0},h}(z);z=function(){function m(h){this._platforms=[];this._destroy={};this.setOptions(h)}return m.prototype.setOptions=function(h){var c=this._options=C({enabled:!1,product:"UNKNOWN",ignore:{}},this._options||{},h);return c.ignore=new M(c.ignore),this.getPlatforms().forEach(function(g){return g.setOptions((c.platforms||
{})[g.type]||{})}),this._setupWinHandlers(),this},m.prototype.register=function(h){return this._platforms.push(h),h.link(this),this},m.prototype.send=function(h){var c=this._options;return c.enabled&&!c.ignore.isIgnored(h)&&this._platforms.forEach(function(c){return c.send(h.clone())}),this},m.prototype.getPlatforms=function(){return this._platforms.slice(0)},m.prototype.getProduct=function(){return this._options.product},m.prototype.setStopDelivery=function(h){return void 0===h&&(h=!0),this._platforms.forEach(function(c){return c.setStopDelivery(h)}),
this},m.prototype.init=function(){return this},m.prototype._setupWinHandlers=function(){var h=this._options;this._setupHandler("err",h.windowOnError,X);this._setupHandler("promise",h.windowPromise,Y)},m.prototype._setupHandler=function(h,c,g){var e=this._destroy;c?e[h]||(e[h]=g(this)):e[h]&&(e[h](),delete e[h])},m}();var ia=function(){function m(){}return m.prototype.add=function(h,c){return"string"==typeof h?this[h]=c:(Object.assign||function(c,e){for(var b in e)e.hasOwnProperty(b)&&(c[b]=e[b]);
return c})(this,h),this},m.prototype.remove=function(h){return delete this[h],this},m}();z=function(m){function h(){var c=null!==m&&m.apply(this,arguments)||this;return c.context=new ia,c}return B(h,m),h.prototype.init=function(c,g){var e=this;void 0===g&&(g=new XMLHttpRequest);this.setOptions(c);var b=c.platforms||{};return Object.keys(b).forEach(function(c){switch(c){case "PROTRACTOR":e.register(new da(b[c],g));break;case "BROWSER":e.register(new ea(b[c]));break;case "R9":e.register(new ga(b[c],
g));break;case "ROLLBAR":e.register(new ha(b[c]));break;case "BUFFER":e.register(new fa(b[c]));break;default:console.warn("Unsupported platform options received '"+c+"'")}}),this},h.prototype.send=function(c){return c.context.addCustom(this.context),m.prototype.send.call(this,c)},h.prototype.error=function(c,g){return this.send(new F(g,r.ERROR,c))},h.prototype.warn=function(c,g){return this.send(new F(g,r.WARN,c))},h.prototype.info=function(c,g){return this.send(new F(g,r.INFO,c))},h.prototype.debug=
function(c,g){return this.send(new F(g,r.DEBUG,c))},h}(z);I.Log=z;Object.defineProperty(I,"__esModule",{value:!0})});