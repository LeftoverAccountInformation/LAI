Effect.Scroll=Class.create();Object.extend(Object.extend(Effect.Scroll.prototype,Effect.Base.prototype),{initialize:function(b){this.element=$(b);var a=Object.extend({x:0,y:0,width:"auto",mode:"absolute"},arguments[1]||{});this.start(a)},setup:function(){if(this.options.continuous&&!this.element._ext){this.element.cleanWhitespace();this.element._ext=true;this.element.appendChild(this.element.firstChild)}this.originalLeft=this.element.cumulativeOffset()[0]-this.element.readAttribute("offsetx");this.originalTop=(this.element.cumulativeOffset()[1])-this.element.readAttribute("offsety");if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}else{}},update:function(a){this.element.writeAttribute("style","margin-left:"+(this.options.x*a+this.originalLeft)+"px;margin-top:"+(this.options.y*a+this.originalTop)+"px;width:"+this.options.width+"px")}});Slideshow=Class.create(Abstract,{initialize:function(e,d,a,c,b){this.scrollspace=$(e);this.slides=d;this.scrollcontrols=c;this.current=0;this.scrollcontainer=$(a);this.options=Object.extend({autoslide:false,duration:1,visibleslides:1,imageTransitions:null,pointTo:0,jumpControlClass:"slide-jump",paginationType:null,scrollspeed:1,loopScroll:"no",keyscroll:"no"},b||{});if(this.scrollcontrols){this.scrollcontrols.invoke("observe","click",this.click.bind(this))}if(this.options.pointTo){this.pointTo()}if(this.options.autoslide=="true"){this.autoslide()}if(this.options.keyscroll=="yes"){$(document).observe("keydown",this.keyscroll.bind(this))}if(this.options.paginationType=="text"){$(this.options.textNode).update("1 of "+this.slides.length)}},autoslide:function(){if(this.timer!=null){clearTimeout(this.timer);this.moveslide()}this.timer=setTimeout(this.autoslide.bind(this),this.options.duration*5000)},keyscroll:function(a){var b;if(a==null){b=event.keyCode}else{b=a.keyCode}if(b===Event.KEY_LEFT){this.prev()}if(b===Event.KEY_RIGHT){this.next()}},click:function(event){this.stop();var element=event.findElement("a");if(element.hasClassName(this.options.jumpControlClass)){this.jump(element.rel,parseInt($(element).readAttribute("count")))}else{if(element.rel){if(this.slides.length>this.options.visibleslides){eval("this."+element.rel+"()")}}}},stop:function(){clearTimeout(this.timer)},pointTo:function(){if(this.options.pointTo!=0){this.current=this.options.pointTo;if(this.current>0){this.scrollcontrols.each(function(d){if(d.rel=="prev"){d.writeAttribute("style","visibility:visible")}})}if(this.current<=0){this.scrollcontrols.each(function(d){if(d.rel=="prev"){d.writeAttribute("style","visibility:hidden")}})}if(this.current>=this.slides.length-(this.options.visibleslides)){this.scrollcontrols.each(function(d){if(d.rel=="next"){}})}if(this.options.imageTransitions!=null){this.options.imageTransitions[1].writeAttribute("src",$$(".main_img")[0][gt]("img")[0].readAttribute("src"));this.options.imageTransitions[1].writeAttribute("style","");this.options.imageTransitions[0].writeAttribute("src",this.slides[this.current].select("img")[0].readAttribute("src"));Effect.Fade(this.options.imageTransitions[1],{duration:1})}if(this.current>=this.slides.length-(this.options.visibleslides-1)&&this.current<=this.slides.length-1){var a=this.scrollspace.cumulativeOffset()[0];var b=this.slides[this.slides.length-this.options.visibleslides].cumulativeOffset()[0];if(this.options.width!=null){var c=a-b;$(this.scrollspace).writeAttribute("style","width:"+this.options.width+"px;margin-top:0px;margin-left:"+c+"px")}else{new Effect.Scroll(this.scrollspace,{x:(a-b),y:0,duration:this.options.scrollspeed})}}else{var a=this.scrollspace.cumulativeOffset()[0];var b=this.slides[this.current].cumulativeOffset()[0];if(this.options.width!=null){var c=a-b;$(this.scrollspace).writeAttribute("style","width:"+this.options.width+"px;margin-top:0px;margin-left:"+c+"px")}else{new Effect.Scroll(this.scrollspace,{x:(a-b),y:0,duration:this.options.scrollspeed})}}$(this.slides).each(function(d){if(d.hasClassName("here")){d.removeClassName("here")}});this.slides[this.options.pointTo].addClassName("here")}},next:function(){if(this.options.paginationType!="text"){$(this.scrollcontainer).select("a."+this.options.jumpControlClass)[$(this.slides[this.current]).readAttribute("count")].removeClassName("active")}if(this.current!=this.slides.length-1){if(this.options.loopScroll=="no"||this.options.loopScroll==null){if(!this.scrollcontrols.last().hasClassName("disabledRight")){this.current+=parseInt(this.options.visibleslides);console.log(this.current)}}}if(this.options.loopScroll=="yes"){this.current+=parseInt(this.options.visibleslides)}if(this.current>=this.slides.length){this.current=0}var b=this.scrollspace.cumulativeOffset()[0];var c=this.slides[this.current==0?this.options.visibleslides-1:this.current>=this.slides.length-this.options.visibleslides?this.slides.length-this.options.visibleslides:this.current].cumulativeOffset()[0];if(this.options.width!=null){new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed,width:this.options.width})}else{new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed})}if(this.options.loopScroll=="no"||this.options.loopScroll==null){if(this.current>0){this.scrollcontrols.each(function(d){if(d.rel=="prev"){d.removeClassName("disabledLeft")}})}if(this.current>=this.slides.length-(this.options.visibleslides)){this.scrollcontrols.each(function(d){if(d.rel=="next"){d.addClassName("disabledRight")}})}}if(this.options.paginationType!="text"){$(this.scrollcontainer).select("a."+this.options.jumpControlClass)[$(this.slides[this.current]).readAttribute("count")].addClassName("active")}else{var a=this.current;$(this.options.textNode).update((a+1)+" of "+this.slides.length)}},prev:function(){if(this.options.paginationType!="text"){$(this.scrollcontainer).select("a."+this.options.jumpControlClass)[$(this.slides[this.current]).readAttribute("count")].removeClassName("active")}if(this.current!=0){if(this.options.loopScroll=="no"||this.options.loopScroll==null){this.current-=this.options.visibleslides}}if(this.options.loopScroll=="yes"){this.current-=this.options.visibleslides}if(this.current<0){this.current=this.slides.length-1}var b=this.scrollspace.cumulativeOffset()[0];var c=this.slides[this.current<=0?0:this.current].cumulativeOffset()[0];if(this.options.width!=null){new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed,width:this.options.width})}else{new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed})}if(this.options.loopScroll=="no"||this.options.loopScroll==null){if(this.current<=0){this.scrollcontrols.each(function(d){if(d.rel=="prev"){d.addClassName("disabledLeft")}})}if(this.current<this.slides.length-(this.options.visibleslides-1)){this.scrollcontrols.each(function(d){if(d.rel=="next"){d.removeClassName("disabledRight")}})}}if(this.options.paginationType!="text"){$(this.scrollcontainer).select("a."+this.options.jumpControlClass)[$(this.slides[this.current]).readAttribute("count")].addClassName("active")}else{var a=this.current;$(this.options.textNode).update((a+1)+" of "+this.slides.length)}},moveslide:function(){$(this.scrollcontainer).select("a."+this.options.jumpControlClass)[$(this.slides[this.current]).readAttribute("count")].removeClassName("active");this.current+=this.options.visibleslides;var b=this.scrollspace.cumulativeOffset()[0];if(this.current==0){var c=this.slides[this.current+1].cumulativeOffset()[0];this.slides[this.current-1].removeClassName("here");this.slides[this.current].addClassName("here")}else{if(this.current>=this.slides.length){var c=this.slides[0].cumulativeOffset()[0];if(this.options.width!=null){new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed,width:this.options.width})}else{new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed})}this.current=0;this.slides[this.slides.length-1].removeClassName("here");this.slides[this.current].addClassName("here")}else{if(this.current%this.options.visibleslides==0){var c=this.slides[this.current].cumulativeOffset()[0];if(this.options.width!=null){new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed,width:this.options.width})}else{new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed})}this.slides[this.current-1].removeClassName("here");this.slides[this.current].addClassName("here")}else{if(this.current>=this.slides.length-(this.options.visibleslides)&&this.current<=this.slides.length-1){var c=this.slides[this.current].cumulativeOffset()[0];this.slides[this.current-1].removeClassName("here");this.slides[this.current].addClassName("here")}else{if(this.current>this.slides.length-1){var c=this.slides[0].cumulativeOffset()[0];if(this.options.width!=null){new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed,width:this.options.width})}else{new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed})}this.current=0;this.slides[this.slides.length-1].removeClassName("here");this.slides[this.current].addClassName("here")}else{var c=this.slides[this.current].cumulativeOffset()[0];this.slides[this.current-1].removeClassName("here");this.slides[this.current].addClassName("here")}}}}}if(this.current>0){this.scrollcontrols.each(function(d){if(d.rel=="prev"){d.removeClassName("disabledLeft")}})}if(this.current<=0){this.scrollcontrols.each(function(d){if(d.rel=="prev"){d.addClassName("disabledLeft")}})}if(this.current%this.options.visibleslides==0&&(this.current>=this.slides.length-(this.options.visibleslides)&&this.current<=this.slides.length-1)){this.scrollcontrols.each(function(d){if(d.rel=="next"){d.addClassName("disabledRight")}})}if(this.current<this.slides.length-(this.options.visibleslides)){this.scrollcontrols.each(function(d){if(d.rel=="next"){d.removeClassName("disabledRight")}})}if(this.options.paginationType!="text"){$(this.scrollcontainer).select("a."+this.options.jumpControlClass)[$(this.slides[this.current]).readAttribute("count")].addClassName("active")}else{var a=this.current;$(this.options.textNode).update((a+1)+" of "+this.slides.length)}if(this.options.imageTransitions!=null){this.options.imageTransitions[1].writeAttribute("src",$$(".main_img")[0][gt]("img")[0].readAttribute("src"));this.options.imageTransitions[1].writeAttribute("style","");this.options.imageTransitions[0].writeAttribute("src",this.slides[this.current].select("img")[0].readAttribute("src"));Effect.Fade(this.options.imageTransitions[1],{duration:1})}},jump:function(a,d){this.current=d;var b=this.scrollspace.cumulativeOffset()[0];var c=$(a).cumulativeOffset()[0];if(this.options.width!=null){new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed,width:this.options.width})}else{new Effect.Scroll(this.scrollspace,{x:(b-c),y:0,duration:this.options.scrollspeed})}if(this.options.loopScroll=="no"||this.options.loopScroll==null){if(this.current>0){this.scrollcontrols.each(function(e){if(e.rel=="prev"){e.removeClassName("disabledLeft")}})}if(this.current>=this.slides.length-(this.options.visibleslides)){this.scrollcontrols.each(function(e){if(e.rel=="next"){e.addClassName("disabledRight")}})}if(this.current<=0){this.scrollcontrols.each(function(e){if(e.rel=="prev"){e.addClassName("disabledLeft")}})}if(this.current<this.slides.length-(this.options.visibleslides)){this.scrollcontrols.each(function(e){if(e.rel=="next"){e.removeClassName("disabledRight")}})}}}});