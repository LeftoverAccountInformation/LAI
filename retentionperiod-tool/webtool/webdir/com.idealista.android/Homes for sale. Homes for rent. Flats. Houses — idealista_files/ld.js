!function(){function H(b,a){if(b instanceof Array)for(var c=0;c<b.length;c++)H(b[c],a);else F(a,b)||a.push(b)}function F(b,a){for(var c=JSON.stringify||encodeURIComponent||escape,f=c(a),d=0;d<b.length;d++){var g=b[d];if(g===a||c(g)===f)return!0}return!1}function B(b,a){if(void 0===b&&void 0===a)return!0;if(void 0===b||void 0===a)return!1;if(!(b instanceof Array))return B([b],a);if(!(a instanceof Array))return B(b,[a]);if(b.length!==a.length)return!1;for(var c=0;c<b.length;c++)if(!F(a,b[c]))return!1;
return!0}function l(b){var a=b;if(b instanceof Function)return(a=b())instanceof Function?a:l(a);if(b instanceof Array)for(var a=[],c=0;c<b.length;++c)a[c]=l(b[c]);else if(b&&"[object Object]"===b.toString())for(var a={},c=0,f=Object.getOwnPropertyNames(b);c<f.length;c++){var d=f[c];a[d]=l(b[d])}return a}function J(b,a){for(var c=0;c<b.length;c++){var f=b[c];if(f.event===a.event&&B(a.account,f.account)){for(var d in a)a.hasOwnProperty(d)&&"account"!==d&&(f[d]=a[d]);return}}b.push(a)}function K(b,a){for(var c=
0;c<b.length;c++){var f=b[c];if(f.event===a.event&&B(a.account,f.account)&&f.hash_method===a.hash_method){if(void 0!==a.email){c=f;var f=f.email instanceof Array||void 0===f.email?f.email:[f.email],d=a.email instanceof Array?a.email:[a.email],g=[];if(void 0===f)f=void 0===d?g:d.slice();else if(void 0===d)f=f.slice();else{for(var v=0;v<d.length;v++){var D=d[v];F(f,D)||g.push(D)}f=f.concat(g)}c.email=f}return}}b.push(a)}function E(b,a,c){c=l(c);return L(b,c),J(a,l(c)),1}function L(b,a){for(var c=0;c<
b.length;c++){var f=b[c];if(f.event===a.event&&void 0===a.account&&void 0===f.account||B(a.account,f.account)){for(var d in a)a.hasOwnProperty(d)&&"account"!==d&&(f[d]=a[d]);return}}b.push(a)}function M(b,a,c,f,d){return(function(){if(document&&window.location.hash){var a=N.exec(window.location.hash);if(a&&4===a.length){var c="enable"===a[1],a=Number(a[3]);(new p("criteoTagDebugMode",c?864E5:0)).setValueWitNoDomain(c&&a&&!isNaN(a)?String(a):"0");window.location.href=window.location.href.substr(0,
window.location.href.indexOf("#"))}}}(),document&&"function"==typeof Array.prototype.indexOf&&-1!==document.cookie.indexOf("criteoTagDebugMode\x3d"))?(b=(v=a,D=c,k=f,s=d,t={exceptions:(g=b).exceptions,m_config:D,m_state:k,originalPush:g.push,performances:g.performances,push:function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];0<a.length&&this.stagedPushes.push(a);s.stopRecordingInit()},pushError:function(a){this.stagedPushes.push(a)},removeLater:g.removeLater,setProtectedTimeout:v.setProtectedTimeout,
stagedErrors:[],stagedPushes:[]},window.onerror=(l=window.onerror,function(a,c,b,f){return t.pushError({column:f,lineNumber:b,message:a,url:c}),!(!l||"function"!=typeof l)&&l.apply(window,[a,c,b,f])}),t),function(){if(document){var a="ld-tag-debug."+I+".js",c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",document.location.protocol+"//static.criteo.net/js/ld/"+a);a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a)}}(),b):b;var g,
v,D,k,s,t,l}var I="5.1.1",O=function(){function b(){this.exceptions=[]}return b.prototype.catchAndStoreException=function(a,c){try{return void 0===c?a():a.apply(this,c)}catch(b){b instanceof Error?this.exceptions.push(b):this.exceptions.push(Error(b))}},b.prototype.setProtectedTimeout=function(a,c){var b=this;if("undefined"!=typeof window&&"function"==typeof window.setTimeout)return window.setTimeout(function(){return b.catchAndStoreException(a)},c)},b.prototype.addProtectedEventListener=function(a,
c,b,d){var g=this;if(void 0!==a&&"function"==typeof a.addEventListener)return a.addEventListener(c,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return g.catchAndStoreException(b,a)},d)},b.prototype.attachProtectedEvent=function(a,c,b){var d=this;if(void 0!==a&&"function"==typeof a.attachEvent)return a.attachEvent(c,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return d.catchAndStoreException(b,a)})},b}(),u,x,k=function(){function b(){}return b.extractHostname=
function(a){var c=document.createElement("a");return c.href=a,c.hostname},b.getAnchorWithReferrer=function(a){if(a&&a.referrer){var c=a.createElement("a");return c.href=a.referrer,c}return null},b.getQueryString=function(a){var c;try{c=a.top.location.search}catch(f){try{for(;a.parent.document!==a.document&&a.parent.document;)a=a.parent}catch(d){}a&&(a=b.getAnchorWithReferrer(a.document))&&(c=a.search)}return c},b.getHighestAccessibleUrl=function(a){var c;a=b.getHighestAccessibleWindow(a);var f=a.topFrame;
if(a.err)try{try{c=f.top.location.href}catch(d){var g=f.location.ancestorOrigins;c=g[g.length-1]}}catch(v){c=f.document.referrer}else c=f.location.href;return c},b.onBodyReady=function(a,c){!function d(){document.body?a.setProtectedTimeout(c,0):a.setProtectedTimeout(d,10)}()},b.onDocumentReady=function(a,c){if("complete"===document.readyState)c();else if(document.addEventListener)a.addProtectedEventListener(document,"DOMContentLoaded",c,!1),a.addProtectedEventListener(window,"load",c,!1);else{a.attachProtectedEvent(document,
"onreadystatechange",c);a.attachProtectedEvent(window,"onload",c);var b=!1;try{b=null===window.frameElement&&document.documentElement}catch(d){}if(b&&b.doScroll)!function s(){if(b){try{b.doScroll("left")}catch(d){return void a.setProtectedTimeout(s,50)}c()}}();else{var g=!1,v=null===document.onload?null:function(a,c){return a.onload(c)},l=null===document.onreadystatechange?null:function(a,c){return a.onreadystatechange(c)};document.onload=document.onreadystatechange=function(a){l instanceof Function&&
l(document,a);g||document.readyState&&"complete"!==document.readyState||(v instanceof Function&&v(document,a),g=!0,c())}}}},b.removeLater=function(a,c){a.setProtectedTimeout(function(){null!==c&&null!==c.parentElement&&c.parentElement.removeChild(c)},3E4)},b.appendCriteoContainer=function(a){if(!a)return null;var c=document.createElement("div");return c.setAttribute("id","criteo-tags-div"),c.style.display="none",a.appendChild(c),c},b.getHighestAccessibleWindow=function(a){var c=!1;try{for(;a.parent.document!==
a.document;){if(!a.parent.document){c=!0;break}a=a.parent}}catch(b){c=!0}return{topFrame:a,err:c}},b}();(x=u||(u={}))[x.None=0]="None";x[x.Cookie=1]="Cookie";x[x.LocalStorage=2]="LocalStorage";var p=function(){function b(a,c){this.cookieValue=null;this.isCookieRead=this.isCookieValueExternallySet=!1;this.cookieName=a;this.cookieRetentionTimeInMs=c;this.cookieOrigin=u.None}return b.prototype.setCookieRead=function(){this.isCookieRead=!0},b.prototype.setValue=function(a){this.cookieValue=a;this.isCookieValueExternallySet=
!0;this.writeOnAllStorages(a)},b.prototype.setValueFromExistingCookie=function(){var a=this.getValue();void 0!==a&&(this.cookieValue=a,this.cookieOrigin|=u.Cookie)},b.prototype.setValueFromAllStorages=function(){var a=this.getFromAllStorages();this.cookieValue=a.value;this.cookieOrigin=a.origin},b.prototype.getValue=function(){for(var a=0,c=document.cookie.split(";");a<c.length;a++){var b=c[a];if(b.substr(0,b.indexOf("\x3d")).replace(/^\s+|\s+$/g,"")===this.cookieName)return a=b.substr(b.indexOf("\x3d")+
1),(decodeURIComponent||unescape)(a)}},b.prototype.remove=function(){this.setOnMainDomainWithExpiration("",0)},b.prototype.setOnMainDomain=function(a){return this.setOnMainDomainWithExpiration(a,this.cookieRetentionTimeInMs)},b.prototype.writeOnAllStorages=function(a){if(this.setOnMainDomain(a),window.localStorage)try{window.localStorage.setItem(this.cookieName,a)}catch(c){}},b.prototype.getFromAllStorages=function(){var a=null;window.localStorage&&(a=window.localStorage.getItem(this.cookieName));
var c=this.getValue()||null;return{value:c||a,origin:this.computeStorageOrigin(c,a)}},b.prototype.removeFromAllStorages=function(){this.remove();window.localStorage&&window.localStorage.removeItem(this.cookieName)},b.prototype.setValueWitNoDomain=function(a){var c=new Date;c.setTime(c.getTime()+this.cookieRetentionTimeInMs);c="expires\x3d"+c.toUTCString();document.cookie=this.cookieName+"\x3d"+(encodeURIComponent||escape)(a)+";"+c+";path\x3d/";a=this.getValue();void 0!==a&&(this.cookieValue=a)},b.prototype.toFragmentData=
function(){return{origin:this.cookieOrigin,value:this.cookieValue}},b.prototype.setOnMainDomainWithExpiration=function(a,c){var b=new Date;b.setTime(b.getTime()+c);for(var b="expires\x3d"+b.toUTCString(),d=null===document.location?[]:document.location.hostname.split("."),g=null,l=0;l<d.length;++l){var k="domain\x3d."+(g=d.slice(d.length-l-1,d.length).join("."));document.cookie=this.cookieName+"\x3d"+(encodeURIComponent||escape)(a)+";"+b+";"+k+";path\x3d/";if((k=this.getValue())&&k===a)break}return g||
document.location},b.prototype.computeStorageOrigin=function(a,c){var b=u.None;return a&&(b|=u.Cookie),c&&(b|=u.LocalStorage),b},b}(),P=function(){function b(a){this.readonlyCookieRetentionTime=0;this.optoutCookieRetentionTime=15768E7;this.identificationCookieRetentionTime=34164E6;this.acidCookie=new p("criteo_acid",this.readonlyCookieRetentionTime);this.axidCookie=new p("cto_axid",this.readonlyCookieRetentionTime);this.ccpCookie=new p("criteo_cookie_perm",this.readonlyCookieRetentionTime);this.guidCookie=
new p("cto_idcpy",this.identificationCookieRetentionTime);this.idfsCookie=new p("cto_idfs",this.identificationCookieRetentionTime);this.lwidCookie=new p("cto_lwid",this.identificationCookieRetentionTime);this.optoutCookie=new p("cto_optout",this.optoutCookieRetentionTime);this.pxsigCookie=new p("cto_pxsig",this.readonlyCookieRetentionTime);this.secureIdCookie=new p("cto_sid",this.identificationCookieRetentionTime);this.canWriteCookie=!1;this.clickOriginPayload=null;this.tld=this.getTld();this.exceptionHandler=
a}return b.prototype.fillQueryStringParams=function(a){null!==this.acidCookie.cookieValue&&a.push("acid\x3d"+this.acidCookie.cookieValue);null!==this.axidCookie.cookieValue&&a.push("axid\x3d"+this.axidCookie.cookieValue);null!==this.pxsigCookie.cookieValue&&a.push("pxsig\x3d"+this.pxsigCookie.cookieValue);this.canWriteCookie&&a.push("adce\x3d1");null!==this.ccpCookie.cookieValue&&a.push("ccp\x3d"+this.ccpCookie.cookieValue);null!==this.clickOriginPayload&&a.push("cop\x3d"+this.clickOriginPayload);
null!==this.guidCookie.cookieValue&&(a.push("idcpy\x3d"+this.guidCookie.cookieValue),a.push("iddom\x3d"+document.location.hostname));null!==this.idfsCookie.cookieValue&&a.push("idfs\x3d"+this.idfsCookie.cookieValue);this.idfsCookie.isCookieRead&&a.push("idfs_read\x3d1");null!==this.optoutCookie.cookieValue&&a.push("optout\x3d1");null!==this.secureIdCookie.cookieValue&&(a.push("sid\x3d"+this.secureIdCookie.cookieValue),a.push("sid_read\x3d"+(this.secureIdCookie.isCookieValueExternallySet?"1":"0")));
null!==this.lwidCookie.cookieValue&&a.push("lwid\x3d"+this.lwidCookie.cookieValue);null!==this.tld&&a.push("tld\x3d"+this.tld);void 0!==(new p("cto_clc",this.readonlyCookieRetentionTime)).getValue()&&a.push("clc\x3d1")},b.prototype.checkAcid=function(){this.acidCookie.setValueFromExistingCookie();void 0!==this.optoutCookie.getValue()?this.axidCookie.setValue("optout"):this.axidCookie.setValueFromExistingCookie();this.pxsigCookie.setValueFromExistingCookie();this.setCanWriteCookie()},b.prototype.setCop=
function(){var a=k.getQueryString(window);if(void 0!==a&&(this.clickOriginPayload=this.getParameterValueByName(a,"cto_pld")),null===this.clickOriginPayload)try{var c=k.getAnchorWithReferrer(window.top.document);c&&c.search&&(this.clickOriginPayload=this.getParameterValueByName(c.search,"cto_pld"))}catch(b){}},b.prototype.checkClientSideIdentityStatus=function(a){this.guidCookie.setValueFromAllStorages();this.optoutCookie.getFromAllStorages();this.idfsCookie.setValueFromAllStorages();this.secureIdCookie.setValueFromAllStorages();
this.getOrSetLwidIfNotDefined(a)},b.prototype.checkCookies=function(a){if(a.idfsRead&&this.idfsCookie.setCookieRead(),a.callbacks){var c=0;for(a="string"==typeof a.callbacks?[a.callbacks]:a.callbacks;c<a.length;c++){var b=a[c],d=document.createElement("img");d.setAttribute("style","display:none;");d.setAttribute("width","1");d.setAttribute("height","1");d.setAttribute("data-owner","criteo-tag");d.setAttribute("src",b);b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);k.removeLater(this.exceptionHandler,
d)}}else a.optout?(this.optoutCookie.setValue("1"),this.guidCookie.removeFromAllStorages(),this.idfsCookie.removeFromAllStorages(),this.secureIdCookie.removeFromAllStorages()):(a.uid&&this.guidCookie.setValue(a.uid),a.idfs&&this.idfsCookie.setValue(a.idfs),a.removeSid?this.secureIdCookie.removeFromAllStorages():a.sid&&this.secureIdCookie.setValue(a.sid))},b.prototype.getOrSetLwidIfNotDefined=function(a){if(this.lwidCookie.setValueFromAllStorages(),this.canWriteCookie)a=this.lwidCookie.cookieValue||
a(),this.lwidCookie.writeOnAllStorages(a),this.lwidCookie.setValueFromAllStorages()},b.prototype.getParameterValueByName=function(a,c){if(a&&1<a.length){"?"===a[0]&&(a="\x26"+a.substr(1));var b="\x26"+c+"\x3d",d=a.indexOf(b);if(-1!==d){var g=a.indexOf("\x26",d+b.length);return a.slice(d+b.length,0>g?void 0:g)}}return null},b.prototype.setCanWriteCookie=function(){if(null===this.acidCookie.cookieValue&&null===this.axidCookie.cookieValue&&null===this.pxsigCookie.cookieValue){var a=new p("criteo_write_test",
1E4);a.setValueWitNoDomain("ChUIBBINbXlHb29nbGVSdGJJZBgBIAE");this.canWriteCookie=void 0!==a.cookieValue;a.remove()}else this.canWriteCookie=!0},b.prototype.getTld=function(){var a=new p("cto_tld_test",36E5),c=a.setOnMainDomain("woot");return a.remove(),c},b}(),Q=function(){function b(a){this.forceSyncFrame=!1;this.gumSyncFrameEndPoint=window.CriteoSyncFrameUrlOverride||"https://gum.criteo.com/syncframe";this.gumSyncFrameId="criteo-syncframe";this.isSyncframeLoading=a.isSafari||a.isAndroid||a.isFirefox;
this.waitingForSyncframe=a.hasItp}return b.getUserAgentInfo=function(a){var c=a.match(this.safariRegexp),b=a.toLowerCase();a=null!==c;var d=-1<b.indexOf("android"),b=-1<b.indexOf("firefox");return{hasItp:null!==c&&11<=parseFloat(c[1]),isSafari:a,isAndroid:d,isFirefox:b}},b.getSyncframeForCurrentAgent=function(){return new b(b.getUserAgentInfo(navigator.userAgent))},b.prototype.createIframe=function(a,b,f){var d=document.createElement("iframe"),g=encodeURIComponent||escape,l=k.getHighestAccessibleUrl(window),
g=g(k.extractHostname(l));a={idfs:a.idfsCookie.toFragmentData(),lwid:a.lwidCookie.toFragmentData(),optout:a.optoutCookie.toFragmentData(),origin:window.SYNCFRAME_ORIGIN||"onetag",sid:a.secureIdCookie.toFragmentData(),tld:a.tld,topUrl:g,uid:a.guidCookie.cookieValue,version:b.replace(/\./g,"_")};b=this.gumSyncFrameEndPoint;return"#gum-debug-mode"===window.location.hash?b+="?debug\x3d1\x26topUrl\x3d"+g:b+="?topUrl\x3d"+g,b+="#"+JSON.stringify(a),d.src=b,d.id=this.gumSyncFrameId,d.width="0",d.height=
"0",d.frameBorder="0",d.setAttribute("style","border-width:0px; margin:0px; display:none"),d.title="Criteo GUM iframe",k.removeLater(f,d),d},b.prototype.setWaitingFlag=function(a){this.waitingForSyncframe=this.waitingForSyncframe&&null===a.guidCookie.cookieValue&&null===a.secureIdCookie.cookieValue&&null===a.optoutCookie.cookieValue&&null===a.idfsCookie.cookieValue},b.prototype.shouldInjectSyncframe=function(){var a=this.isSyncframeLoading&&void 0!==window.addEventListener||this.forceSyncFrame;return a||
(this.isSyncframeLoading=!1),a},b.safariRegexp=RegExp(/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[^ ]+ \(KHTML, like Gecko\) Version\/([^ ]+)( Mobile\/[^ ]+)? Safari\/[^ ]+$/i),b}(),R=function(){function b(){this.timings={initTime:null,pushTime:null};this.beginPush=this.beginInit=null;this.hasPerformanceApi=void 0!==window.performance&&"function"==typeof window.performance.now}return b.prototype.canRetrieveMetrics=function(){return this.hasPerformanceApi},b.prototype.startRecordingInit=function(){this.canRetrieveMetrics()&&
(this.beginInit=performance.now())},b.prototype.stopRecordingInit=function(){if(this.canRetrieveMetrics()&&null===this.timings.initTime&&null!==this.beginInit){var a=performance.now();this.timings.initTime=a-this.beginInit}},b.prototype.startRecordingPush=function(){this.canRetrieveMetrics()&&(this.beginPush=performance.now())},b.prototype.stopRecordingPush=function(){if(this.canRetrieveMetrics()&&null===this.timings.pushTime&&null!==this.beginPush&&null!==this.timings.initTime){var a=performance.now();
this.timings.pushTime=a-this.beginPush}},b.prototype.getPerformanceOrDegradedNow=function(){return this.canRetrieveMetrics()?performance.now():(new Date).getTime()},b}(),S=function(){function b(){this.abe=void 0;this.isCbsEnabled=!1;this.uat=void 0}return b.prototype.trySetPageId=function(a,b){this.isCbsEnabled&&this.checkNotExistOrEmpty(a.page_id)&&(a.page_id=b)},b.prototype.tryForceViewListPageId=function(a){this.isCbsEnabled&&this.checkNotExistOrEmpty(a.page_id)&&(this.checkNotExistOrEmpty(a.category)?
this.checkNotExistOrEmpty(a.keywords)?a.page_id="viewList":a.page_id="viewSearchResult":a.page_id="viewCategory")},b.prototype.tryRunActionAfterAdBlockDetectionOrImmediate=function(a,b){var f=this,d=window.criteo_q;null!=d?(d=d.adBlockDetector,this.isCbsEnabled&&void 0!==d?(d(function(b){f.abe=b;a()}),b(a)):a()):a()},b.prototype.tryAppendAdBlockerParameter=function(a){void 0!==this.abe&&a.push("abe\x3d"+(this.abe?1:0))},b.prototype.tryAppendUatParameter=function(a){this.isCbsEnabled&&void 0!==this.uat&&
a.push("uat\x3d"+(encodeURIComponent||escape)(this.uat))},b.prototype.clean=function(){this.abe=void 0;this.isCbsEnabled=!1;this.uat=void 0},b.prototype.enable=function(){this.isCbsEnabled=!0},b.prototype.setUat=function(a){this.uat=a},b.prototype.checkNotExistOrEmpty=function(a){return void 0===a||""===a},b}(),N=/^\#(enable|disable)-criteo-tag-debug-mode(\=(\d+))?$/;if(!window.criteo_q||window.criteo_q instanceof Array)x=window.criteo_q||[],window.criteo_q=function(){function b(a,b,d,f,n,g,q,e){if(a.shouldInjectSyncframe()){var m=
a.createIframe(f,g.tagVersion,s);window.addEventListener&&(s.addProtectedEventListener(window,"message",function(m){var h;(h=m.data)&&h.isCriteoMessage&&(m.stopPropagation(),a.isSyncframeLoading=!1,f.checkCookies(h),a.waitingForSyncframe&&a.waitingForSyncframe&&(a.waitingForSyncframe=!1,c(a,b,d,f,n,g,q,e)))},!0),b.queue.push({event:"appendtag",element:m}))}}function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];s.catchAndStoreException(function(){t.startRecordingPush();for(var b=0,
d=a;b<d.length;b++)r.app.queue.push(d[b]);c(C,r.app,r.cbs,w,h.shortNameMap,h.trackingCallData,h.hooks,h.workflow);var b=h.trackingCallData,d=r.cbs,G=b.extraData,f=!1;if(200<G.length)f=!0;else for(var g=0;g<G.length;g++){var e=G[g],m=0;if(Object.keys)m=Object.keys(e).length;else for(var y in e)Object.prototype.hasOwnProperty.call(e,y)&&(m+=1);if(200<m){f=!0;break}}f&&(G.length=0);!0;b.customerInfo=[];d.clean();t.stopRecordingPush()},arguments);t.stopRecordingInit()}function c(a,b,c,d,f,g,q,e){for(var m=
[],h=b.queue,l=0;l<h.length;++l){var k=h[l];k instanceof Array&&h.splice.apply(h,[l+1,0].concat(k));if(k instanceof Function)h.splice(l+1,0,k());else if(k&&"[object Object]"===k.toString())switch(p(b,c,d,f,g,q,e,k,l,h,m)){case 0:m.push(k);break;case -1:m=m.concat(h.slice(l)),l=h.length}}q.afterEval instanceof Function&&q.afterEval();b.queue=m||[];e.manualFlush||e.noPartialFlush&&0!==b.queue.length||a.waitingForSyncframe||x(b,c,d,f,g,q,e,0!==b.queue.length)}function f(a,b,c){c.hasOwnProperty("account")||
(c.account=b.accounts);a=a.handlerResponseType;c.hasOwnProperty("type")&&(a=c.type,delete c.type);H(c.account,b.disingScheduled);"sequential"===a&&(c.dc=!0)}function d(a,b,c,d){if(!a.bodyReady||b.container&&document.body.contains(b.container)||(b.container=k.appendCriteoContainer(document.body)),d.url)a=void 0,d.isImgUrl?((a=document.createElement("img")).setAttribute("style","display:none;"),a.setAttribute("width","1"),a.setAttribute("height","1")):((a=document.createElement("script")).setAttribute("async",
"true"),a.setAttribute("type","text/javascript")),a.setAttribute("src",d.url),d.element=a;if(c.beforeAppend instanceof Function&&(d.element=c.beforeAppend(d.element)),l(d),d.element&&(d.element.tagName||d.isImgUrl)){if(b.container||"script"!==d.element.tagName.toLowerCase()&&!d.isImgUrl){if(!b.container)return 0;b.container.appendChild(d.element)}else b=document.getElementsByTagName("script")[0],d.element.setAttribute("data-owner","criteo-tag"),b.parentNode.insertBefore(d.element,b);k.removeLater(s,
d.element)}return 1}function g(a,b){return!a.domReady&&b.requiresDOM&&"no"!==b.requiresDOM?"blocking"===b.requiresDOM?-1:0:(delete b.requiresDOM,b.event?(b.account&&H(b.account,a.accounts),b.event=b.event.toLowerCase(),null):(l(b),1))}function p(a,b,c,k,n,z,q,e,m,y,s){var t=e.event,v=g(a,e);if(null!==v)return v;switch(e.event){case "setdata":return E(n.extraData,a.actions,e);case "setparameter":for(var u in e)"event"!==u.toLowerCase()&&e.hasOwnProperty(u)&&(n.handlerParams[u]=e[u]);return 1;case "calldising":f(n,
a,e);break;case "setzipcode":case "setstore":return e.event="setdata",E(n.extraData,a.actions,e);case "setcustomerid":return e.event="setdata",e.customer_id=e.id,delete e.id,E(n.extraData,a.actions,e);case "setretailervisitorid":return b.enable(),e.event="setdata",e.retailer_visitor_id=e.id,delete e.id,E(n.extraData,a.actions,e);case "setemail":case "sethashedemail":case "ceh":e.event="setemail";if(e.hasOwnProperty("email")){e.email instanceof Array||(e.email=[e.email]);b=[];c=0;for(k=e.email;c<k.length;c++)z=
k[c],null!=z&&b.push(z);e.email=b}b=l(e);return n.customerInfo.push(b),K(a.actions,l(e)),1;case "setsitetype":return b="d","mobile"!==e.type&&"m"!==e.type||(b="m"),"tablet"!==e.type&&"t"!==e.type||(b="t"),e.event="setdata",delete e.type,e.site_type=b,E(n.extraData,a.actions,e);case "appendtag":return d(a,q,z,e);case "gettagstate":return e.callback instanceof Function?e.callback(r,h,w,C):1;case "setuat":return b.setUat(e.uat),1;case "viewsearchresult":case "viewcategory":b.trySetPageId(e,t);e.event=
"viewlist";break;case "viewlist":b.tryForceViewListPageId(e);break;case "viewitem":case "viewhome":case "viewbasket":case "tracktransaction":case "addtocart":b.trySetPageId(e,t);break;case "viewstore":b.trySetPageId(e,t);e.event="viewHome";e.sub_event_type="s";break;case "checkavailability":b.trySetPageId(e,t);e.event="viewBasket";e.sub_event_type="a";break;case "reserveinstore":b.trySetPageId(e,t);e.event="viewBasket";e.sub_event_type="r";break;case "flush":case "flushevents":return x(a,b,c,k,n,
z,q,m!==y.length-1||0!==s.length),1;case "setaccount":return n.account=e.account,1;case "seturl":return n.handlerUrlPrefix=e.url,1;case "setcalltype":return n.handlerResponseType=e.type,1;case "setresponsetype":return n.responseType=e.type,1;case "setpartnerpayload":return n.partnerPayload=e.payload,1;case "oninitialized":return z.onInitialized=e.callback,1;case "ondomready":return z.onDOMReady=e.callback,1;case "beforeappend":return z.beforeAppend=e.callback,1;case "aftereval":return z.afterEval=
e.callback,1;case "onflush":return z.onFlush=e.callback,1;case "disonce":return q.disOnce=!0,1;case "manualdising":return q.manualDising=!0,1;case "manualflush":return q.manualFlush=!0,1;case "nopartialflush":return q.noPartialFlush=!0,1;case "disonpartialflush":return q.partialDis=!0,1}return a.actions.push(l(e)),1}function x(a,b,c,h,n,k,q,e){if(k.onFlush instanceof Function&&(k.onFlush(),console.warn("on flush hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")),
0!==a.actions.length){for(var m=0,y=n.extraData;m<y.length;m++)J(a.actions,y[m]);m=0;for(y=n.customerInfo;m<y.length;m++)K(a.actions,y[m]);if(!q.manualDising&&(!e||q.partialDis)){e=[];m=0;for(y=a.accounts;m<y.length;m++){var r=y[m];F(a.disingScheduled,r)||e.push(r)}0<e.length&&(t=n,null!==g(p=a,u={event:"callDising",account:e})||(f(t,p,u),p.actions.push(l(u))))}var t,p,u,v=!1,w=function(a,b,c,d,e){var f=a.actions,g=[];(1===a.accounts.length&&(e.account=a.accounts[0]),null!==e.account&&g.push("a\x3d"+
A(d,e.account,[])),"js"!==e.responseType&&g.push("rt\x3d"+A(d,e.responseType,[])),e.handlerParams)&&(a=decodeURIComponent(A(d,e.handlerParams,[])))&&g.push(a);b.tryAppendUatParameter(g);for(b=0;b<f.length;++b)a=f[b],a.account&&B(null===e.account?void 0:e.account,null===a.account?void 0:a.account)&&delete a.account,g.push("p"+b+"\x3d"+A(d,a,[]));return c.fillQueryStringParams(g),null!==e.partnerPayload&&g.push("pp\x3d"+A(d,e.partnerPayload,[])),g.push("dtycbr\x3d"+Math.floor(1E5*Math.random())),g}(a,
b,c,h,n);a.actions=[];b.tryRunActionAfterAdBlockDetectionOrImmediate(function(){if(!v){v=!0;b.tryAppendAdBlockerParameter(w);var c,e=(c=w.join("\x26"),{event:"appendTag",isImgUrl:"gif"===n.responseType,url:n.handlerUrlPrefix+"?"+c});null!==g(a,e)||d(a,q,k,e);q.disOnce||(a.disingScheduled=[])}},function(a){return s.setProtectedTimeout(a,500)})}}function A(a,b,c){var d,f,g,h="";if(b instanceof Function)h=A(a,b(),c);else if(b instanceof Array){d=[];for(f=0;f<b.length;++f)d[f]=A(a,b[f],c);h+="["+d.join(",")+
"]"}else if(b&&"[object Object]"===b.toString()){var e=[],m;for(m in b)if(b.hasOwnProperty(m)){var k=c.concat([m]);e.push((d=a,f=m,g=k.join("."),(d.properties[g]?d.properties[g]:f)+"\x3d"+A(a,b[m],k)))}h+=e.join("\x26")}else 1===c.length&&"event"===c[0]?h+=a.events[b.toLowerCase()]?a.events[b.toLowerCase()]:b:h+=b;return(encodeURIComponent||escape)(h)}var s=new O,t=new R;t.startRecordingInit();var u,r={app:{accounts:[],actions:[],bodyReady:!1,disingScheduled:[],domReady:!1,queue:[]},cbs:new S},h=
(u=null!==document.location&&"https:"===document.location.protocol?"https://sslwidget.":"http://widget.",{hooks:{},shortNameMap:{events:{applaunched:"al",viewitem:"vp",viewhome:"vh",viewlist:"vl",viewbasket:"vb",viewsearch:"vs",tracktransaction:"vc",addtocart:"ac",calldising:"dis",setdata:"exd",setemail:"ce"},properties:{event:"e",account:"a",currency:"c",product:"p",item:"p","item.id":"i","item.price":"pr","item.quantity":"q","product.id":"i","product.price":"pr","product.quantity":"q",data:"d",
keywords:"kw",checkin_date:"din",checkout_date:"dout",deduplication:"dd",delivery:"dl",attribution:"at","attribution.channel":"ac","attribution.value":"v",user_segment:"si",new_customer:"nc",customer_id:"ci",email:"m",hash_method:"h",transaction_value:"tv",responseType:"rt",page_name:"pn",page_id:"pi",page_number:"pnb",category:"ca",filters:"f","filters.name":"fn","filters.operator":"fo","filters.value":"fv",retailer_visitor_id:"rvi",price:"pr",availability:"av",sub_event_type:"se",store_id:"s",zipcode:"z"}},
trackingCallData:{account:null,customerInfo:[],extraData:[],handlerParams:{v:I},handlerResponseType:"single",handlerUrlPrefix:u+"criteo.com/event",partnerPayload:null,responseType:"js",tagVersion:I},workflow:{container:null,disOnce:!1,manualDising:!1,manualFlush:!1,noPartialFlush:!1,partialDis:!1}}),w=new P(s),C=Q.getSyncframeForCurrentAgent();return s.catchAndStoreException(function(){var d,f,g,l,n,p,q,e;return w.checkAcid(),w.checkClientSideIdentityStatus(function(){return a=t.getPerformanceOrDegradedNow(),
"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)});var a}),w.setCop(),d=C,f=r.app,g=r.cbs,l=w,n=h.shortNameMap,p=h.trackingCallData,q=h.hooks,e=h.workflow,d.setWaitingFlag(l),d.waitingForSyncframe&&s.setProtectedTimeout(function(){d.waitingForSyncframe&&(d.waitingForSyncframe=!1,c(d,f,g,l,n,p,q,e))},1E4),w.ccpCookie.setValueFromExistingCookie(),k.onBodyReady(s,function(){h.hooks.onInitialized instanceof
Function?(r.app.bodyReady=h.hooks.onInitialized(),console.warn("onInitialized hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):r.app.bodyReady=!0;b(C,r.app,r.cbs,w,h.shortNameMap,h.trackingCallData,h.hooks,h.workflow);c(C,r.app,r.cbs,w,h.shortNameMap,h.trackingCallData,h.hooks,h.workflow)}),k.onDocumentReady(s,function(){h.hooks.onDOMReady instanceof Function?(r.app.domReady=h.hooks.onDOMReady(),console.warn("on DOM ready hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):
r.app.domReady=!0;c(C,r.app,r.cbs,w,h.shortNameMap,h.trackingCallData,h.hooks,h.workflow)}),function(a){try{var b=k.getAnchorWithReferrer(document);b&&b.hostname!==document.location.hostname&&L(a,{event:"setData",ref:b.protocol+"//"+b.hostname})}catch(c){}}(h.trackingCallData.extraData),M({exceptions:s.exceptions,performances:t.timings,push:a,removeLater:function(a){return k.removeLater(s,a)}},s,h,r,t)})}(),void 0!==typeof x.adBlockDetector&&(window.criteo_q.adBlockDetector=x.adBlockDetector),window.criteo_q.push.apply(window.criteo_q,
x)}();