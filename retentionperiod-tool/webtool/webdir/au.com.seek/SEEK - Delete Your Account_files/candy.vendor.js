(function(n){"use strict";function r(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),n(this).ajaxSubmit(i))}function u(t){var r=t.target,u=n(r),f,i,e;if(!u.is(":submit,input:image")){if(f=u.closest(":submit"),f.length===0)return;r=f[0]}i=this;i.clk=r;r.type=="image"&&(t.offsetX!==undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof n.fn.offset=="function"?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={};i.fileapi=n("<input type='file'/>").get(0).files!==undefined;i.formdata=window.FormData!==undefined;n.fn.ajaxSubmit=function(r){function ut(t){for(var u=n.param(t).split("&"),e=u.length,f={},r,i=0;i<e;i++)r=u[i].split("="),f[decodeURIComponent(r[0])]=decodeURIComponent(r[1]);return f}function ft(t){for(var o=new FormData,f,e,i,h,u=0;u<t.length;u++)o.append(t[u].name,t[u].value);if(r.extraData){f=ut(r.extraData);for(e in f)f.hasOwnProperty(e)&&o.append(e,f[e])}return r.data=null,i=n.extend(!0,{},n.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:s||"POST"}),r.uploadProgress&&(i.xhr=function(){var n=jQuery.ajaxSettings.xhr();return n.upload&&(n.upload.onprogress=function(n){var t=0,i=n.loaded||n.position,u=n.total;n.lengthComputable&&(t=Math.ceil(i/u*100));r.uploadProgress(n,i,u,t)}),n}),i.data=null,h=i.beforeSend,i.beforeSend=function(n,t){t.data=o;h&&h.call(this,n,t)},n.ajax(i)}function it(i){function et(n){return n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document}function ot(){function h(){try{var n=et(l).readyState;t("state = "+n);n&&n.toLowerCase()=="uninitialized"&&setTimeout(h,50)}catch(i){t("Server abort: ",i," (",i.name,")");w(nt);d&&clearTimeout(d);d=undefined}}var e=u.attr("target"),o=u.attr("action"),r,i;c.setAttribute("target",k);s||c.setAttribute("method","POST");o!=f.url&&c.setAttribute("action",f.url);f.skipEncodingOverride||s&&!/post/i.test(s)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});f.timeout&&(d=setTimeout(function(){it=!0;w(rt)},f.timeout));r=[];try{if(f.extraData)for(i in f.extraData)f.extraData.hasOwnProperty(i)&&(n.isPlainObject(f.extraData[i])&&f.extraData[i].hasOwnProperty("name")&&f.extraData[i].hasOwnProperty("value")?r.push(n('<input type="hidden" name="'+f.extraData[i].name+'">').attr("value",f.extraData[i].value).appendTo(c)[0]):r.push(n('<input type="hidden" name="'+i+'">').attr("value",f.extraData[i]).appendTo(c)[0]));f.iframeTarget||(v.appendTo("body"),l.attachEvent?l.attachEvent("onload",w):l.addEventListener("load",w,!1));setTimeout(h,15);c.submit()}finally{c.setAttribute("action",o);e?c.setAttribute("target",e):u.removeAttr("target");n(r).remove()}}function w(i){var r,u,b,s,k,g,h,c,p;if(!e.aborted&&!ct){try{o=et(l)}catch(tt){t("cannot access response document: ",tt);i=nt}if(i===rt&&e){e.abort("timeout");a.reject(e,"timeout");return}if(i==nt&&e){e.abort("server abort");a.reject(e,"error","server abort");return}if(o&&o.location.href!=f.iframeSrc||it){l.detachEvent?l.detachEvent("onload",w):l.removeEventListener("load",w,!1);r="success";try{if(it)throw"timeout";if(b=f.dataType=="xml"||o.XMLDocument||n.isXMLDoc(o),t("isXml="+b),!b&&window.opera&&(o.body===null||!o.body.innerHTML)&&--ht){t("requeing onLoad callback, DOM not available");setTimeout(w,250);return}s=o.body?o.body:o.documentElement;e.responseText=s?s.innerHTML:null;e.responseXML=o.XMLDocument?o.XMLDocument:o;b&&(f.dataType="xml");e.getResponseHeader=function(n){var t={"content-type":f.dataType};return t[n]};s&&(e.status=Number(s.getAttribute("status"))||e.status,e.statusText=s.getAttribute("statusText")||e.statusText);k=(f.dataType||"").toLowerCase();g=/(json|script|text)/.test(k);g||f.textarea?(h=o.getElementsByTagName("textarea")[0],h?(e.responseText=h.value,e.status=Number(h.getAttribute("status"))||e.status,e.statusText=h.getAttribute("statusText")||e.statusText):g&&(c=o.getElementsByTagName("pre")[0],p=o.getElementsByTagName("body")[0],c?e.responseText=c.textContent?c.textContent:c.innerText:p&&(e.responseText=p.textContent?p.textContent:p.innerText))):k=="xml"&&!e.responseXML&&e.responseText&&(e.responseXML=at(e.responseText));try{st=yt(e,k,f)}catch(i){r="parsererror";e.error=u=i||r}}catch(i){t("error caught: ",i);r="error";e.error=u=i||r}e.aborted&&(t("upload aborted"),r=null);e.status&&(r=e.status>=200&&e.status<300||e.status===304?"success":"error");r==="success"?(f.success&&f.success.call(f.context,st,"success",e),a.resolve(e.responseText,"success",e),y&&n.event.trigger("ajaxSuccess",[e,f])):r&&(u===undefined&&(u=e.statusText),f.error&&f.error.call(f.context,e,r,u),a.reject(e,"error",u),y&&n.event.trigger("ajaxError",[e,f,u]));y&&n.event.trigger("ajaxComplete",[e,f]);y&&!--n.active&&n.event.trigger("ajaxStop");f.complete&&f.complete.call(f.context,e,r);ct=!0;f.timeout&&clearTimeout(d);setTimeout(function(){f.iframeTarget||v.remove();e.responseXML=null},100)}}}var c=u[0],tt,g,f,y,k,v,l,e,b,p,it,d,lt=!!n.fn.prop,a=n.Deferred(),rt,nt,ut,ft,st,o,ht,ct;if(n(":input[name=submit],:input[id=submit]",c).length)return alert('Error: Form elements must not have name or id of "submit".'),a.reject(),a;if(i)for(g=0;g<h.length;g++)tt=n(h[g]),lt?tt.prop("disabled",!1):tt.removeAttr("disabled");if(f=n.extend(!0,{},n.ajaxSettings,r),f.context=f.context||f,k="jqFormIO"+(new Date).getTime(),f.iframeTarget?(v=n(f.iframeTarget),p=v.attr("name"),p?k=p:v.attr("name",k)):(v=n('<iframe name="'+k+'" src="'+f.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),l=v[0],e={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r=i==="timeout"?"timeout":"aborted";if(t("aborting upload... "+r),this.aborted=1,l.contentWindow.document.execCommand)try{l.contentWindow.document.execCommand("Stop")}catch(u){}v.attr("src",f.iframeSrc);e.error=r;f.error&&f.error.call(f.context,e,r,i);y&&n.event.trigger("ajaxError",[e,f,r]);f.complete&&f.complete.call(f.context,e,r)}},y=f.global,y&&0==n.active++&&n.event.trigger("ajaxStart"),y&&n.event.trigger("ajaxSend",[e,f]),f.beforeSend&&f.beforeSend.call(f.context,e,f)===!1)return f.global&&n.active--,a.reject(),a;if(e.aborted)return a.reject(),a;b=c.clk;b&&(p=b.name,p&&!b.disabled&&(f.extraData=f.extraData||{},f.extraData[p]=b.value,b.type=="image"&&(f.extraData[p+".x"]=c.clk_x,f.extraData[p+".y"]=c.clk_y)));rt=1;nt=2;ut=n("meta[name=csrf-token]").attr("content");ft=n("meta[name=csrf-param]").attr("content");ft&&ut&&(f.extraData=f.extraData||{},f.extraData[ft]=ut);f.forceSync?ot():setTimeout(ot,10);ht=50;var at=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},vt=n.parseJSON||function(s){return window.eval("("+s+")")},yt=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e=i==="xml"||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&u.documentElement.nodeName==="parsererror"&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),typeof u=="string"&&(i==="json"||!i&&f.indexOf("json")>=0?u=vt(u):(i==="script"||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u};return a}var s,w,f,u,l,a,h,v,e,c,o,k,tt,y,p;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(u=this,typeof r=="function"&&(r={success:r}),s=this.attr("method"),w=this.attr("action"),f=typeof w=="string"?n.trim(w):"",f=f||window.location.href||"",f&&(f=(f.match(/^([^#]+)/)||[])[1]),r=n.extend(!0,{url:f,success:n.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r),l={},this.trigger("form-pre-serialize",[this,r,l]),l.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(a=r.traditional,a===undefined&&(a=n.ajaxSettings.traditional),h=[],e=this.formToArray(r.semantic,h),r.data&&(r.extraData=r.data,v=n.param(r.data,a)),r.beforeSubmit&&r.beforeSubmit(e,this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[e,this,r,l]),l.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;c=n.param(e,a);v&&(c=c?c+"&"+v:v);r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+c,r.data=null):r.data=c;o=[];r.resetForm&&o.push(function(){u.resetForm()});r.clearForm&&o.push(function(){u.clearForm(r.includeHidden)});!r.dataType&&r.target?(k=r.success||function(){},o.push(function(t){var i=r.replaceTarget?"replaceWith":"html";n(r.target)[i](t).each(k,arguments)})):r.success&&o.push(r.success);r.success=function(n,t,i){for(var s=r.context||this,f=0,e=o.length;f<e;f++)o[f].apply(s,[n,t,i||u,u])};var rt=n("input:file:enabled[value]",this),d=rt.length>0,g="multipart/form-data",nt=u.attr("enctype")==g||u.attr("encoding")==g,b=i.fileapi&&i.formdata;for(t("fileAPI :"+b),tt=(d||nt)&&!b,r.iframe!==!1&&(r.iframe||tt)?r.closeKeepAlive?n.get(r.closeKeepAlive,function(){y=it(e)}):y=it(e):y=(d||nt)&&b?ft(e):n.ajax(r),u.removeData("jqxhr").data("jqxhr",y),p=0;p<h.length;p++)h[p]=null;return this.trigger("form-submit-notify",[this,r]),this};n.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&n.isFunction(n.fn.on),!i.delegation&&this.length===0){var f={s:this.selector,c:this.context};return!n.isReady&&f.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(f.s,f.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}if(i.delegation){n(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,u).on("submit.form-plugin",this.selector,i,r).on("click.form-plugin",this.selector,i,u);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",i,r).bind("click.form-plugin",i,u)};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t,r){var o=[],e,c,l,s,f,h,u,p,w,a,y,v;if(this.length===0||(e=this[0],c=t?e.getElementsByTagName("*"):e.elements,!c))return o;for(l=0,p=c.length;l<p;l++)if(u=c[l],f=u.name,f){if(t&&e.clk&&u.type=="image"){u.disabled||e.clk!=u||(o.push({name:f,value:n(u).val(),type:u.type}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}));continue}if(h=n.fieldValue(u,!0),h&&h.constructor==Array)for(r&&r.push(u),s=0,w=h.length;s<w;s++)o.push({name:f,value:h[s]});else if(i.fileapi&&u.type=="file"&&!u.disabled)if(r&&r.push(u),a=u.files,a.length)for(s=0;s<a.length;s++)o.push({name:f,value:a[s],type:u.type});else o.push({name:f,value:"",type:u.type});else h!==null&&typeof h!="undefined"&&(r&&r.push(u),o.push({name:f,value:h,type:u.type,required:u.required}))}return!t&&e.clk&&(y=n(e.clk),v=y[0],f=v.name,f&&!v.disabled&&v.type=="image"&&(o.push({name:f,value:y.val()}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}))),o};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;u<e;u++)i.push({name:f,value:r[u]});else r!==null&&typeof r!="undefined"&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;u<e;u++)(f=this[u],i=n.fieldValue(f,t),i!==null&&typeof i!="undefined"&&(i.constructor!=Array||i.length))&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,o,r,f;if(i===undefined&&(i=!0),i&&(!a||t.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!t.checked||(u=="submit"||u=="image")&&t.form&&t.form.clk!=t||h=="select"&&t.selectedIndex==-1))return null;if(h=="select"){if(e=t.selectedIndex,e<0)return null;var c=[],l=t.options,s=u=="select-one",v=s?e+1:l.length;for(o=s?e:0;o<v;o++)if(r=l[o],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),s)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,u=this.tagName.toLowerCase();i.test(r)||u=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:u=="select"?this.selectedIndex=-1:t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&n(this).is(t))&&(this.value="")})};n.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return n===undefined&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var r=this.type,i;r=="checkbox"||r=="radio"?this.checked=t:this.tagName.toLowerCase()=="option"&&(i=n(this).parent("select"),t&&i[0]&&i[0].type=="select-one"&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1})(jQuery),function(n){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?n(require("knockout"),exports):typeof define=="function"&&define.amd?define(["knockout","exports"],n):n(ko,ko.validation={})}(function(n,t){function l(n,i,r){return i.validator(n(),r.params===undefined?!0:r.params)?!0:(n.error(t.formatMessage(r.message||i.message,r.params)),n.__valid__(!1),!1)}function a(n,i,r){n.isValidating(!0);var u=function(u){var f=!1,e="";if(!n.__valid__()){n.isValidating(!1);return}u.message?(f=u.isValid,e=u.message):f=u;f||(n.error(t.formatMessage(e||r.message||i.message,r.params)),n.__valid__(f));n.isValidating(!1)};i.validator(n(),r.params||!0,u)}var r,o;if(typeof n===undefined)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";r=t;n.validation=r;var f={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateElement:!1,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",grouping:{deep:!1,observable:!0}},u=n.utils.extend({},f),e=["required","pattern","min","max","step"],s=["email","number","date"],h=function(n){window.setImmediate?window.setImmediate(n):window.setTimeout(n,0)},i=function(){var r=(new Date).getTime(),t={},n="__ko_validation__";return{isArray:function(n){return n.isArray||Object.prototype.toString.call(n)==="[object Array]"},isObject:function(n){return n!==null&&typeof n=="object"},values:function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);return i},getValue:function(n){return typeof n=="function"?n():n},hasAttribute:function(n,t){return n.getAttribute(t)!==null},getAttribute:function(n,t){return n.getAttribute(t)},setAttribute:function(n,t,i){return n.setAttribute(t,i)},isValidatable:function(n){return n&&n.rules&&n.isValid&&n.isModified},insertAfter:function(n,t){n.parentNode.insertBefore(t,n.nextSibling)},newId:function(){return r+=1},getConfigOptions:function(n){var t=i.contextFor(n);return t||u},setDomData:function(r,u){var f=r[n];f||(r[n]=f=i.newId());t[f]=u},getDomData:function(i){var r=i[n];return r?t[r]:undefined},contextFor:function(n){switch(n.nodeType){case 1:case 8:var t=i.getDomData(n);if(t)return t;if(n.parentNode)return i.contextFor(n.parentNode)}return undefined},isEmptyVal:function(n){return n===undefined?!0:n===null?!0:n===""?!0:void 0}}}(),c=function(){var r=0;return{utils:i,init:function(i,f){r>0&&!f||(i=i||{},i.errorElementClass=i.errorElementClass||i.errorClass||u.errorElementClass,i.errorMessageClass=i.errorMessageClass||i.errorClass||u.errorMessageClass,n.utils.extend(u,i),u.registerExtenders&&t.registerExtenders(),r=1)},configure:function(n){t.init(n)},reset:function(){u=$.extend(u,f)},group:function(t,r){var r=n.utils.extend(u.grouping,r),e=n.observableArray([]),f=null,o=function o(t,u){var s=[],f=n.utils.unwrapObservable(t);u=u!==undefined?u:r.deep?1:-1;n.isObservable(t)&&(t.isValid||t.extend({validatable:!0}),e.push(t));f&&(i.isArray(f)?s=f:i.isObject(f)&&(s=i.values(f)));u!==0&&n.utils.arrayForEach(s,function(n){n&&!n.nodeType&&o(n,u+1)})};return r.observable?(o(t),f=n.computed(function(){var t=[];return n.utils.arrayForEach(e(),function(n){n.isValid()||t.push(n.error)}),t})):f=function(){var i=[];return e([]),o(t),n.utils.arrayForEach(e(),function(n){n.isValid()||i.push(n.error)}),i},f.showAllMessages=function(t){t==undefined&&(t=!0);f();n.utils.arrayForEach(e(),function(n){n.isModified(t)})},t.errors=f,t.isValid=function(){return t.errors().length===0},t.isAnyMessageShown=function(){var t=!1;return f(),n.utils.arrayForEach(e(),function(n){!n.isValid()&&n.isModified()&&(t=!0)}),t},f},formatMessage:function(n,t){return typeof n=="function"?n(t):n.replace(/\{0\}/gi,t)},addRule:function(n,t){return n.extend({validatable:!0}),n.rules.push(t),n},addAnonymousRule:function(n,r){var u=i.newId();r.message===undefined&&(r.message="Error");t.rules[u]=r;t.addRule(n,{rule:u,params:r.params})},addExtender:function(r){n.extenders[r]=function(n,u){return u.message||u.onlyIf?t.addRule(n,{rule:r,message:u.message,params:i.isEmptyVal(u.params)?!0:u.params,condition:u.onlyIf}):t.addRule(n,{rule:r,params:u})}},registerExtenders:function(){if(u.registerExtenders)for(var i in t.rules)t.rules.hasOwnProperty(i)&&(n.extenders[i]||t.addExtender(i))},insertValidationMessage:function(n){var t=document.createElement("SPAN");return t.className=i.getConfigOptions(n).errorMessageClass,i.insertAfter(n,t),t},parseInputValidationAttributes:function(r,u){n.utils.arrayForEach(e,function(n){i.hasAttribute(r,n)&&t.addRule(u(),{rule:n,params:r.getAttribute(n)||!0})});var f=r.getAttribute("type");n.utils.arrayForEach(s,function(n){n==f&&t.addRule(u(),{rule:n=="date"?"dateISO":n,params:!0})})},writeInputValidationAttributes:function(t,i){var r=i(),u;r&&r.rules&&(u=r.rules(),n.utils.arrayForEach(e,function(i){var f,r=n.utils.arrayFirst(u,function(n){return n.rule.toLowerCase()===i.toLowerCase()});r&&(f=r.params,r.rule=="pattern"&&r.params instanceof RegExp&&(f=r.params.source),t.setAttribute(i,f))}),u=null)}}}();n.utils.extend(r,c);r.rules={};r.rules.required={validator:function(n,t){var i;return n===undefined||n===null?!t:(i=n,typeof n=="string"&&(i=n.replace(/^\s+|\s+$/g,"")),!t)?!0:(i+"").length>0},message:"This field is required."};r.rules.min={validator:function(n,t){return i.isEmptyVal(n)||n>=t},message:"Please enter a value greater than or equal to {0}."};r.rules.max={validator:function(n,t){return i.isEmptyVal(n)||n<=t},message:"Please enter a value less than or equal to {0}."};r.rules.minLength={validator:function(n,t){return i.isEmptyVal(n)||n.length>=t},message:"Please enter at least {0} characters."};r.rules.maxLength={validator:function(n,t){return i.isEmptyVal(n)||n.length<=t},message:"Please enter no more than {0} characters."};r.rules.pattern={validator:function(n,t){return i.isEmptyVal(n)||n.toString().match(t)!=null},message:"Please check this value."};r.rules.step={validator:function(n,t){return i.isEmptyVal(n)||n*100%(t*100)==0},message:"The value must increment by {0}"};r.rules.email={validator:function(n,t){return t?i.isEmptyVal(n)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n):!0},message:"Please enter a proper email address"};r.rules.date={validator:function(n,t){return t?i.isEmptyVal(n)||t&&!/Invalid|NaN/.test(new Date(n)):!0},message:"Please enter a proper date"};r.rules.dateISO={validator:function(n,t){return t?i.isEmptyVal(n)||t&&/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(n):!0},message:"Please enter a proper date"};r.rules.number={validator:function(n,t){return t?i.isEmptyVal(n)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(n):!0},message:"Please enter a number"};r.rules.digit={validator:function(n,t){return t?i.isEmptyVal(n)||t&&/^\d+$/.test(n):!0},message:"Please enter a digit"};r.rules.phoneUS={validator:function(n,t){return t?typeof n!="string"?!1:i.isEmptyVal(n)?!0:(n=n.replace(/\s+/g,""),t&&n.length>9&&n.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Please specify a valid phone number"};r.rules.equal={validator:function(n,t){var r=t;return n===i.getValue(r)},message:"Values must equal"};r.rules.notEqual={validator:function(n,t){var r=t;return n!==i.getValue(r)},message:"Please choose another value."};r.rules.unique={validator:function(t,r){var u=i.getValue(r.collection),f=i.getValue(r.externalValue),e=0;return!t||!u?!0:(n.utils.arrayFilter(n.utils.unwrapObservable(u),function(n){t===(r.valueAccessor?r.valueAccessor(n):n)&&e++}),e<(f!==undefined&&t!==f?1:2))},message:"Please make sure the value is unique."},function(){r.registerExtenders()}();n.bindingHandlers.validationCore=function(){return{init:function(r,u){var f=i.getConfigOptions(r),e;f.parseInputAttributes&&h(function(){t.parseInputValidationAttributes(r,u)});f.insertMessages&&i.isValidatable(u())&&(e=t.insertValidationMessage(r),f.messageTemplate?n.renderTemplate(f.messageTemplate,{field:u()},null,e,"replaceNode"):n.applyBindingsToNode(e,{validationMessage:u()}));f.writeInputAttributes&&i.isValidatable(u())&&t.writeInputValidationAttributes(r,u);f.decorateElement&&i.isValidatable(u())&&n.applyBindingsToNode(r,{validationElement:u()})},update:function(){}}}(),function(){var t=n.bindingHandlers.value.init;n.bindingHandlers.value.init=function(i,r,u,f,e){return t(i,r,u),n.bindingHandlers.validationCore.init(i,r,u,f,e)}}();n.bindingHandlers.validationMessage={update:function(t,r){var u=r(),o=i.getConfigOptions(t),c=n.utils.unwrapObservable(u),f=!1,e=!1,s,h;u.extend({validatable:!0});f=u.isModified();e=u.isValid();s=function(){return!o.messagesOnModified||f?e?null:u.error:null};h=function(){return!o.messagesOnModified||f?!e:!1};n.bindingHandlers.text.update(t,s);n.bindingHandlers.visible.update(t,h)}};n.bindingHandlers.validationElement={update:function(t,r){var u=r(),f=i.getConfigOptions(t),a=n.utils.unwrapObservable(u),e=!1,o=!1,s;if(u.extend({validatable:!0}),e=u.isModified(),o=u.isValid(),s=function(){var n={},t=e?!o:!1;return f.decorateElement||(t=!1),n[f.errorElementClass]=t,n},n.bindingHandlers.css.update(t,s),f.errorsAsTitle){var h=i.getAttribute(t,"data-orig-title"),c=t.title,v=i.getAttribute(t,"data-orig-title")=="true",l=function(){if(!f.errorsAsTitleOnModified||e)return o?{title:h||c,"data-orig-title":null}:{title:u.error,"data-orig-title":h||c}};n.bindingHandlers.attr.update(t,l)}}};n.bindingHandlers.validationOptions=function(){return{init:function(t,r){var e=n.utils.unwrapObservable(r()),f;e&&(f=n.utils.extend({},u),n.utils.extend(f,e),i.setDomData(t,f))}}}();n.extenders.validation=function(r,u){return n.utils.arrayForEach(i.isArray(u)?u:[u],function(n){t.addAnonymousRule(r,n)}),r};n.extenders.validatable=function(r,u){var f,e;return u&&!i.isValidatable(r)?(r.error=n.observable(null),r.rules=n.observableArray(),r.isValidating=n.observable(!1),r.__valid__=n.observable(!0),r.isModified=n.observable(!1),f=n.computed(function(){var n=r(),i=r.rules();return t.validateObservable(r),!0}),r.isValid=n.computed(function(){return r.__valid__()}),e=r.subscribe(function(){r.isModified(!0)}),r._disposeValidation=function(){r.isValid.dispose();r.rules.removeAll();r.isModified._subscriptions.change=[];r.isValidating._subscriptions.change=[];r.__valid__._subscriptions.change=[];e.dispose();f.dispose();delete r.rules;delete r.error;delete r.isValid;delete r.isValidating;delete r.__valid__;delete r.isModified}):u===!1&&i.isValidatable(r)&&r._disposeValidation&&r._disposeValidation(),r};r.validateObservable=function(n){for(var u=0,r,i,f=n.rules(),e=f.length;u<e;u++)if(i=f[u],!i.condition||i.condition())if(r=t.rules[i.rule],r.async||i.async)a(n,r,i);else if(!l(n,r,i))return!1;return n.error(null),n.__valid__(!0),!0};n.validatedObservable=function(i){if(!t.utils.isObject(i))return n.observable(i).extend({validatable:!0});var r=n.observable(i);return r.errors=t.group(i),r.isValid=n.computed(function(){return r.errors().length===0}),r};r.localize=function(n){var i;for(i in n)t.rules.hasOwnProperty(i)&&(t.rules[i].message=n[i])};n.applyBindingsWithValidation=function(i,r,u){var o=arguments.length,f,e;o>2?(f=r,e=u):o<2?f=document.body:arguments[1].nodeType?f=r:e=arguments[1];t.init();e&&t.utils.setDomData(f,e);n.applyBindings(i,r)};o=n.applyBindings;n.applyBindings=function(n,i){t.init();o(n,i)}})