(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1023:function(module,__webpack_exports__,__webpack_require__){"use strict";function errorHandler(e){var info=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.Raven?window.Raven.captureException(e):console.error(e,info)}__webpack_require__.d(__webpack_exports__,"a",function(){return errorHandler})},1030:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return blockUserRequest}),__webpack_require__.d(__webpack_exports__,"b",function(){return unblockUserRequest});var _utils_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18);function blockUserRequest(_ref){var id=_ref.id;return Object(_utils_api__WEBPACK_IMPORTED_MODULE_0__.default)("/api/2/users/".concat(id,"/blacklist"),{method:"post"})}function unblockUserRequest(_ref2){var id=_ref2.id;return Object(_utils_api__WEBPACK_IMPORTED_MODULE_0__.default)("/api/2/users/".concat(id,"/blacklist"),{method:"delete"})}},1874:function(module,exports,__webpack_require__){},1885:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(277),_loginSignupModal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(22),_errorHandler__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1023);__webpack_require__(1874);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==typeof call&&"function"!==typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var FollowingButton=function(_Component){function FollowingButton(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FollowingButton),(_this=_possibleConstructorReturn(this,_getPrototypeOf(FollowingButton).call(this,props))).onClick=_asyncToGenerator(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(){var _this$props,user,currentUser,onFollow,onUnfollow,id,followingStatus,element,followersCount;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_this$props=_this.props,user=_this$props.user,currentUser=_this$props.currentUser,onFollow=_this$props.onFollow,onUnfollow=_this$props.onUnfollow,id=user.id,followingStatus=_this.state.followingStatus,element=document.getElementById("followers"),currentUser&&currentUser.id){_context.next=8;break}Object(_loginSignupModal__WEBPACK_IMPORTED_MODULE_3__.openSigninSignupPopup)("signin"),_context.next=22;break;case 8:return _context.prev=8,_context.next=11,Object(_utils__WEBPACK_IMPORTED_MODULE_2__.b)(id,followingStatus);case 11:_context.next=18;break;case 13:return _context.prev=13,_context.t0=_context.catch(8),alert("Sorry, an error has occurred. Please try again later"),_this.props.errorHandler(_context.t0),_context.abrupt("return");case 18:followingStatus||"function"!==typeof onFollow||onFollow(user),followingStatus&&"function"===typeof onUnfollow&&onUnfollow(user),_this.setState({followingStatus:!followingStatus}),element&&(followersCount=parseInt(element.innerHTML.trim(),10),element.innerHTML=followersCount+(followingStatus?-1:1));case 22:case"end":return _context.stop()}},_callee,null,[[8,13]])})),_this.state={followingStatus:props.user.is_followed},_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FollowingButton,react__WEBPACK_IMPORTED_MODULE_1__["Component"]),Constructor=FollowingButton,(protoProps=[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({followingStatus:nextProps.user.is_followed})}},{key:"render",value:function(){var _this$props2=this.props,user=_this$props2.user,currentUser=_this$props2.currentUser,size=_this$props2.size,followLabel=_this$props2.followLabel,followingLabel=_this$props2.followingLabel;if(user&&currentUser&&user.id===currentUser.id)return null;var followingStatus=this.state.followingStatus,_generateButtonParams=Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(followingStatus,size),buttonClassName=_generateButtonParams.buttonClassName,followButtonContent=_generateButtonParams.followButtonContent,buttonLabel=followingStatus?followingLabel:followLabel;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:buttonClassName,onClick:this.onClick},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"follower-follow-btn-label"},buttonLabel),followButtonContent)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),FollowingButton}();FollowingButton.defaultProps={size:"big",followLabel:"FOLLOW",followingLabel:"FOLLOWING",errorHandler:_errorHandler__WEBPACK_IMPORTED_MODULE_4__.a},__webpack_exports__.default=FollowingButton},1887:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_blockingPopup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(279),_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_blockingPopup__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__.default=function(_ref){var show=_ref.show,closeFn=_ref.closeFn,user=_ref.user,blockFn=_ref.blockFn,onSuccess=_ref.onSuccess;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default.a,{show:show,closeFn:closeFn,className:"blocking-popup--block"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Block ",user.name,"?"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"Are you sure you want to block ",user.name,"? You won't be able to follow each other or interact with one another on our platform (e.g. chapter comments, groups, reviews, wall). Please note that all existing interactions between you and this user will be permanently deleted after completing this action."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"buttons"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:closeFn,className:"blocking-popup__button blocking-popup__button--white"},"Cancel"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){return blockFn(user,onSuccess)},className:"blocking-popup__button blocking-popup__button--red"},"Block")))}},1888:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_blockingPopup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(279),_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_blockingPopup__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__.default=function(_ref){var show=_ref.show,closeFn=_ref.closeFn,user=_ref.user,unblockFn=_ref.unblockFn;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default.a,{show:show,closeFn:closeFn,className:"blocking-popup--unblock"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Unblock ",user.name,"?"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"Are you sure you want to unblock ",user.name,"?",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br",null),"Please remember you'll have to wait 48 hours before you can re-block ",user.name,"."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"buttons"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:closeFn,className:"blocking-popup__button blocking-popup__button--grey"},"Cancel"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){return unblockFn(user)},className:"blocking-popup__button blocking-popup__button--green"},"Unblock")))}},1889:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_blockingPopup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(279),_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_blockingPopup__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__.default=function(_ref){var show=_ref.show,closeFn=_ref.closeFn,user=_ref.user;_ref.blockFn;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default.a,{show:show,closeFn:closeFn,className:"blocking-popup--blocked"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"User blocked"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"You\u2019ve blocked ",user.name,".",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br",null),"We\u2019re sorry that you\u2019ve had this experience."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"buttons"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:closeFn,className:"blocking-popup__button blocking-popup__button--green"},"OK")))}},1890:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_blockingPopup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(279),_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_blockingPopup__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__.default=function(_ref){var show=_ref.show,closeFn=_ref.closeFn,message=(_ref.user,_ref.message);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_blockingPopup__WEBPACK_IMPORTED_MODULE_1___default.a,{show:show,closeFn:closeFn,className:"blocking-popup--failed"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Block failed"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,message||"Sorry, it's too soon to block this person again. You'll be able to complete this action once 48 hours have passed since you unblocked this person."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"buttons"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:closeFn,className:"blocking-popup__button blocking-popup__button--green"},"OK")))}},1891:function(module,exports,__webpack_require__){},2458:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),React=__webpack_require__(0),blockingPopups_1=__webpack_require__(866),UserActionsMoreBlocked=function(_super){function UserActionsMoreBlocked(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={popupShown:!1},_this}return __extends(UserActionsMoreBlocked,_super),UserActionsMoreBlocked.prototype.render=function(){var _this=this,_a=this.props,unblockUser=_a.unblockUser,user=_a.user,popupShown=this.state.popupShown;return React.createElement("div",{className:"profile-actions-blocked"},React.createElement("button",{onClick:function(){return _this.setState({popupShown:!0})}},"Unblock"),React.createElement(blockingPopups_1.UnblockPopup,{show:popupShown,closeFn:function(){return _this.setState({popupShown:!1})},unblockFn:unblockUser,user:user}))},UserActionsMoreBlocked}(react_1.Component);UserActionsMoreBlocked.propTypes={},exports.default=UserActionsMoreBlocked},2586:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),react_utils=__webpack_require__(570),es=__webpack_require__(12),FollowingButton=__webpack_require__(1885);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==typeof call&&"function"!==typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var component=function(_Component){function FollowButton(){var _getPrototypeOf2,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FollowButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FollowButton)).call.apply(_getPrototypeOf2,[this].concat(args)))).onFollow=function(){var _this$props=_this.props,user=_this$props.user,followUser=_this$props.followUser;mixpanelHelper("user-click-follow",{profile:user.id,source:"Profile"}),followUser()},_this.onUnfollow=function(){var _this$props2=_this.props,user=_this$props2.user,unfollowUser=_this$props2.unfollowUser;mixpanelHelper("user-click-unfollow",{profile:user.id,source:"Profile"}),unfollowUser()},_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FollowButton,react["Component"]),Constructor=FollowButton,(protoProps=[{key:"render",value:function(){var _this$props3=this.props,user=_this$props3.user,currentUser=_this$props3.currentUser;return react_default.a.createElement(FollowingButton.default,{currentUser:currentUser,user:user,onFollow:this.onFollow,onUnfollow:this.onUnfollow})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),FollowButton}(),api=__webpack_require__(1030);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var defaultState={has_blacklisted_me:!1,is_blacklisted_by_me:!1,is_followed:!1},BLOCK_USER="BLOCK_USER",UNBLOCK_USER="UNBLOCK_USER",FOLLOW_USER="FOLLOW_USER",UNFOLLOW_USER="UNFOLLOW_USER";function user_user(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultState,action=arguments.length>1?arguments[1]:void 0;return action.type===BLOCK_USER?_objectSpread({},state,{is_blacklisted_by_me:!0}):action.type===UNBLOCK_USER?_objectSpread({},state,{is_blacklisted_by_me:!1}):action.type===FOLLOW_USER?_objectSpread({},state,{is_followed:!0}):action.type===UNFOLLOW_USER?_objectSpread({},state,{is_followed:!1}):state}var mapDispatchToProps={followUser:function(){return{type:FOLLOW_USER}},unfollowUser:function(){return{type:UNFOLLOW_USER}}},followButton=Object(es.connect)(function(state){return{user:state}},mapDispatchToProps)(component),supportButton=function(_ref){var user=_ref.user;if(!user||!user.donate_url)return null;return react_default.a.createElement("div",{className:"kofi-button-container"},react_default.a.createElement("a",{href:user.donate_url,id:"kofi-button",className:"kofi-button",target:"_blank",onClick:function(e){e.preventDefault();var href=e.currentTarget.href,target=e.currentTarget.target;mixpanelHelper("support-me-button-clicked",{donate_url:user.donate_url,profile:user.username}),setTimeout(function(){return"_blank"===target?window.open(href):window.location=href},1e3)},rel:"nofollow"},react_default.a.createElement("div",{className:"kofi-button-label"},"Support me"),react_default.a.createElement("div",{className:"kofi-button-label kofi-button-label__mobile"},"Support"),react_default.a.createElement("div",{className:"kofi-button-img"})))},supportMeButton=Object(es.connect)(function(state){return{user:state}},null)(supportButton),regenerator=__webpack_require__(8),regenerator_default=__webpack_require__.n(regenerator),blocked=__webpack_require__(2458),blocked_default=__webpack_require__.n(blocked),classnames=__webpack_require__(5),classnames_default=__webpack_require__.n(classnames),blockingPopups=__webpack_require__(866);function unblocked_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function unblocked_getPrototypeOf(o){return(unblocked_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function unblocked_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function unblocked_setPrototypeOf(o,p){return(unblocked_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var unblocked=function(_Component){function UserActionsMoreUnblocked(props){var _this,self,call;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserActionsMoreUnblocked),self=this,call=unblocked_getPrototypeOf(UserActionsMoreUnblocked).call(this,props),(_this=!call||"object"!==typeof call&&"function"!==typeof call?unblocked_assertThisInitialized(self):call).onBlockClick=function(){_this.setState({popupShown:!0,menuShown:!1})},_this.state={menuShown:!1,popupShown:!1},_this.hideTimeoutHandle=null,_this.onWindowTouchStart=_this.onWindowTouchStart.bind(unblocked_assertThisInitialized(_this)),_this.blockUser=_this.blockUser.bind(unblocked_assertThisInitialized(_this)),_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&unblocked_setPrototypeOf(subClass,superClass)}(UserActionsMoreUnblocked,react["Component"]),Constructor=UserActionsMoreUnblocked,(protoProps=[{key:"componentDidMount",value:function(){window.addEventListener("touchstart",this.onWindowTouchStart)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.onWindowTouchStart)}},{key:"onWindowTouchStart",value:function(e){if(this.state.menuShown){for(var refChild=e.target;refChild;){if(refChild===this.ref)return;refChild=refChild.parentNode}this.setState({menuShown:!1})}}},{key:"blockUser",value:function(user){var _this2=this;return this.props.blockUser(user).catch(function(e){_this2.setState({popupShown:!1})})}},{key:"showMenu",value:function(){this.hideTimeoutHandle&&clearTimeout(this.hideTimeoutHandle),this.setState({menuShown:!0})}},{key:"hideMenu",value:function(){this.setState({menuShown:!1})}},{key:"render",value:function(){var _this3=this,user=this.props.user,_this$state=this.state,menuShown=_this$state.menuShown,popupShown=_this$state.popupShown;return react_default.a.createElement("div",{className:"profile-actions",ref:function(_ref){return _this3.ref=_ref},onMouseEnter:function(){return _this3.showMenu()},onMouseLeave:function(){return _this3.hideTimeoutHandle=setTimeout(function(){return _this3.hideMenu()},500)}},react_default.a.createElement("i",{className:"icon-dot-3",onTouchStart:function(){return _this3.setState({menuShown:!0})}}),react_default.a.createElement("a",{className:"more-label"},"More",react_default.a.createElement("i",{className:"icon-angle-down"})),react_default.a.createElement("div",{className:classnames_default()("profile-actions-menu",{"profile-actions-menu--shown":menuShown})},react_default.a.createElement("a",{className:"block",onClick:this.onBlockClick},"Block User")),react_default.a.createElement(blockingPopups.BlockPopup,{user:user,show:popupShown,blockFn:this.blockUser,closeFn:function(){return _this3.setState({popupShown:!1})}}))}}])&&unblocked_defineProperties(Constructor.prototype,protoProps),staticProps&&unblocked_defineProperties(Constructor,staticProps),UserActionsMoreUnblocked}();function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function component_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function component_possibleConstructorReturn(self,call){return!call||"object"!==typeof call&&"function"!==typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function component_getPrototypeOf(o){return(component_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function component_setPrototypeOf(o,p){return(component_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var moreActions_component=function(_Component){function MoreActions(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MoreActions),(_this=component_possibleConstructorReturn(this,component_getPrototypeOf(MoreActions).call(this,props))).state={blockedPopupShown:!1,failedBlockPopupShown:!1,failedBlockPopupMessage:null},_this}var Constructor,protoProps,staticProps,fn,_blockUser;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&component_setPrototypeOf(subClass,superClass)}(MoreActions,react["Component"]),Constructor=MoreActions,(protoProps=[{key:"blockUser",value:(fn=regenerator_default.a.mark(function _callee(user){return regenerator_default.a.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,this.props.blockUser(user);case 3:_context.next=9;break;case 5:return _context.prev=5,_context.t0=_context.catch(0),this.setState({failedBlockPopupShown:!0,failedBlockPopupMessage:_context.t0.errors.error}),_context.abrupt("return");case 9:this.setState({blockedPopupShown:!0});case 10:case"end":return _context.stop()}},_callee,this,[[0,5]])}),_blockUser=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})},function(_x){return _blockUser.apply(this,arguments)})},{key:"render",value:function(){var _this$props=this.props,user=_this$props.user,rest=_objectWithoutProperties(_this$props,["user"]),is_blacklisted_by_me=user.is_blacklisted_by_me;return user.has_blocked_me,is_blacklisted_by_me?react_default.a.createElement(blocked_default.a,Object.assign({user:user},rest)):react_default.a.createElement(unblocked,Object.assign({user:user},rest))}}])&&component_defineProperties(Constructor.prototype,protoProps),staticProps&&component_defineProperties(Constructor,staticProps),MoreActions}(),moreActions_mapDispatchToProps={blockUser:function(_ref){var id=_ref.id;return function(dispatch){return Object(api.a)({id:id}).then(function(){return dispatch(function(_ref2){var id=_ref2.id;return{type:BLOCK_USER,id:id}}({id:id}))})}},unblockUser:function(_ref3){var id=_ref3.id;return function(dispatch){return Object(api.b)({id:id}).then(function(){return dispatch(function(_ref4){var id=_ref4.id;return{type:UNBLOCK_USER,id:id}}({id:id}))})}}},moreActions=Object(es.connect)(function(state){return{user:state}},moreActions_mapDispatchToProps)(moreActions_component),redux_es=__webpack_require__(55),lib=__webpack_require__(208),lib_default=__webpack_require__.n(lib),redux_composeEnhancers=__webpack_require__(252);function profilePage_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function profilePage_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var preloadedState,profilePage_preloadedState=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?profilePage_ownKeys(source,!0).forEach(function(key){profilePage_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):profilePage_ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({is_blacklisted_by_me:!1,has_blacklisted_me:!1},window.globalData.user),store=(preloadedState=profilePage_preloadedState,Object(redux_es.createStore)(user_user,preloadedState,Object(redux_composeEnhancers.default)(Object(redux_es.applyMiddleware)(lib_default.a))));function storeDOMBindingSocialsBlock(state){var isBlocked=function(state){var is_blacklisted_by_me=state.is_blacklisted_by_me,has_blacklisted_me=state.has_blacklisted_me;return is_blacklisted_by_me||has_blacklisted_me}(state);if(isBlocked){var socialsBlock=document.querySelector(".user-socials-block");socialsBlock&&(socialsBlock.style.display=isBlocked?"none":"")}}store.subscribe(function(){return storeDOMBindingSocialsBlock(store.getState())}),storeDOMBindingSocialsBlock(profilePage_preloadedState);var commonProps={currentUser:window.globalData.currentUser};Object(react_utils.mountReduxConnectedComponent)(followButton,"follow-button-desktop",store,!1,commonProps),Object(react_utils.mountReduxConnectedComponent)(followButton,"follow-button-mobile",store,!1,commonProps),Object(react_utils.mountReduxConnectedComponent)(supportMeButton,"support-me-button",store,!1),Object(react_utils.mountReduxConnectedComponent)(moreActions,"more-actions",store,!1,commonProps)},277:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return toggleFollow}),__webpack_require__.d(__webpack_exports__,"a",function(){return generateButtonParams});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_utils_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18),toggleFollow=function(followerId,followingStatus){var url="/api/2/users/".concat(followerId,"/followings"),requestParams={method:followingStatus?"delete":"post"};return Object(_utils_api__WEBPACK_IMPORTED_MODULE_1__.default)(url,requestParams)},generateButtonParams=function(followingStatus,buttonSize){var iconPrefix=followingStatus?"check":"plus";return{buttonClassName:followingStatus?"follower-".concat(buttonSize,"-follow-btn follower-").concat(buttonSize,"-follow-btn-following"):"follower-".concat(buttonSize,"-follow-btn"),followButtonContent:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("i",{className:"icon-".concat(iconPrefix)})}}},279:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),classnames=__webpack_require__(5),CloseSVG=function(_a){var onClick=_a.onClick;return React.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"blocking-popup__close",onClick:onClick},React.createElement("path",{d:"M2.37373 0.95958C1.98321 0.569056 1.35004 0.569056 0.959519 0.95958C0.568995 1.3501 0.568995 1.98327 0.959519 2.37379L2.37373 0.95958ZM19.6262 21.0405C20.0167 21.431 20.6499 21.431 21.0404 21.0405C21.4309 20.6499 21.4309 20.0168 21.0404 19.6262L19.6262 21.0405ZM0.959519 19.6262C0.568995 20.0168 0.568995 20.6499 0.959519 21.0405C1.35004 21.431 1.98321 21.431 2.37373 21.0405L0.959519 19.6262ZM21.0404 2.37379C21.4309 1.98327 21.4309 1.3501 21.0404 0.95958C20.6499 0.569056 20.0167 0.569056 19.6262 0.95958L21.0404 2.37379ZM0.959519 2.37379L19.6262 21.0405L21.0404 19.6262L2.37373 0.95958L0.959519 2.37379ZM2.37373 21.0405L21.0404 2.37379L19.6262 0.95958L0.959519 19.6262L2.37373 21.0405Z",fill:"black"}))};exports.default=function(_a){var show=_a.show,closeFn=_a.closeFn,className=_a.className,children=_a.children;return show?React.createElement("div",{className:classnames("blocking-popup","animated","fadeIn",className)},React.createElement("div",{className:"blocking-popup__content"},React.createElement(CloseSVG,{onClick:closeFn}),children)):null}},570:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"mountComponent",function(){return mountComponent}),__webpack_require__.d(__webpack_exports__,"mountReduxConnectedComponent",function(){return mountReduxConnectedComponent});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12);function mountComponent(Component,containerId){var additionalProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},strict=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],container=document.getElementById(containerId);if(container){var props={};if(container.hasAttribute("props")){var serializedProps=container.getAttribute("props");try{props=JSON.parse(serializedProps)}catch(e){console.error(e)}}return react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component,Object.assign({},props,additionalProps)),container)}return strict&&console.error("Failed to mount ".concat(Component.name,', no element with id "').concat(containerId,'" is found')),null}function mountReduxConnectedComponent(Component,containerId,store){var strict=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],additionalProps=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if("undefined"===typeof Component)return console.error("mountReduxConnectedComponent: no Component"),null;if("undefined"===typeof store)return console.error("mountReduxConnectedComponent: no store"),null;if("undefined"===typeof containerId)return console.error("mountReduxConnectedComponent: no containerId"),null;var container=document.getElementById(containerId);if(container){var props={};if(container.hasAttribute("props")){var serializedProps=container.getAttribute("props");try{props=JSON.parse(serializedProps)}catch(e){console.error(e)}}return react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_redux__WEBPACK_IMPORTED_MODULE_2__.Provider,{store:store},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component,Object.assign({},props,additionalProps))),container)}return strict&&console.error("Failed to mount ".concat(Component.name,', no element with id "').concat(containerId,'" is found')),null}},866:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var blockPopup_1=__webpack_require__(1887);exports.BlockPopup=blockPopup_1.default;var unblockPopup_1=__webpack_require__(1888);exports.UnblockPopup=unblockPopup_1.default;var blockedPopup_1=__webpack_require__(1889);exports.BlockedPopup=blockedPopup_1.default;var failedBlockPopup_1=__webpack_require__(1890);exports.FailedBlockPopup=failedBlockPopup_1.default,__webpack_require__(1891)}}]);
//# sourceMappingURL=32-f8ae3ae9ce583900efd9.chunk.js.map