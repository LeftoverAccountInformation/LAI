(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{2066:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return requestLogin}),__webpack_require__.d(__webpack_exports__,"e",function(){return requestLoginError}),__webpack_require__.d(__webpack_exports__,"d",function(){return requestLoginCompleted}),__webpack_require__.d(__webpack_exports__,"f",function(){return requestLoginFacebook}),__webpack_require__.d(__webpack_exports__,"h",function(){return requestLoginFacebookError}),__webpack_require__.d(__webpack_exports__,"g",function(){return requestLoginFacebookCompleted}),__webpack_require__.d(__webpack_exports__,"j",function(){return requestLoginGoogle}),__webpack_require__.d(__webpack_exports__,"l",function(){return requestLoginGoogleError}),__webpack_require__.d(__webpack_exports__,"k",function(){return requestLoginGoogleCompleted}),__webpack_require__.d(__webpack_exports__,"a",function(){return initGoogleApi}),__webpack_require__.d(__webpack_exports__,"b",function(){return initGoogleApiComplete}),__webpack_require__.d(__webpack_exports__,"i",function(){return requestLoginFromLanding});var _node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),requestLogin=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN"),requestLoginError=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_ERROR"),requestLoginCompleted=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_COMPLETED"),requestLoginFacebook=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_FACEBOOK"),requestLoginFacebookError=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_FACEBOOK_ERROR"),requestLoginFacebookCompleted=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_FACEBOOK_COMPLETED"),requestLoginGoogle=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_GOOGLE"),requestLoginGoogleError=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_GOOGLE_ERROR"),requestLoginGoogleCompleted=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_GOOGLE_COMPLETED"),initGoogleApi=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/INIT_GOOGLE_API"),initGoogleApiComplete=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/INIT_GOOGLE_API_COMPLETE"),requestLoginFromLanding=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/Login/REQUEST_LOGIN_FROM_LANDING")},2167:function(module,exports){var Util={isNOE:function(value){return void 0===value||null===value||NaN===value||""===value},getParameterByName:function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]".concat(name,"=([^&#]*)")).exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},anyIOS:function(){var iDevices=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;iDevices.length;)if(navigator.platform===iDevices.pop())return!0;return!1},youtubeId:function(url){var match=url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!match||11!==match[7].length)&&match[7]}};module.exports=Util},2168:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return loginPolicy}),__webpack_require__.d(__webpack_exports__,"b",function(){return loginPolicyError});var _node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),loginPolicy=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/account/login/LOGIN_POLICY"),loginPolicyError=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/account/login/LOGIN_POLICY_ERROR")},2169:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return loginUserName}),__webpack_require__.d(__webpack_exports__,"b",function(){return loginUserNameError});var _node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),loginUserName=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/account/login/LOGIN_USERNAME"),loginUserNameError=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/account/login/LOGIN_USERNAME_ERROR")},2213:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return USER_LOGOUT}),__webpack_require__.d(__webpack_exports__,"b",function(){return userLogout});var _node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),USER_LOGOUT="remitano/account/logout/USER_LOGOUT",userLogout=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)(USER_LOGOUT)},2215:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return loginToken}),__webpack_require__.d(__webpack_exports__,"b",function(){return loginTokenError});var _node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),loginToken=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/account/login/LOGIN_TOKEN"),loginTokenError=Object(_node_modules_redux_actions_lib__WEBPACK_IMPORTED_MODULE_0__.createAction)("remitano/account/login/LOGIN_TOKEN_ERROR")},2289:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var container=__webpack_require__(733),effects=__webpack_require__(7),plain_request=__webpack_require__(81),actions=__webpack_require__(2213),auth_actions=__webpack_require__(362),state_provider_actions=__webpack_require__(155),_marked=regeneratorRuntime.mark(logout),_marked2=regeneratorRuntime.mark(saga);function logout(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,Object(effects.call)(plain_request.c,"/api/v1/users/logout");case 3:return _context.next=5,Object(effects.put)(Object(auth_actions.o)());case 5:return _context.next=7,Object(effects.put)(Object(state_provider_actions.b)({type:"root.landing"}));case 7:_context.next=12;break;case 9:_context.prev=9,_context.t0=_context.catch(0),console.log(_context.t0);case 12:case"end":return _context.stop()}},_marked,this,[[0,9]])}function saga(){return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(effects.takeEvery)(actions.a,logout);case 2:case"end":return _context2.stop()}},_marked2,this)}__webpack_require__.d(__webpack_exports__,"default",function(){return container.default}),__webpack_require__.d(__webpack_exports__,"watchUserLogout",function(){return saga})},2305:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var container=__webpack_require__(707),login_username_container=__webpack_require__(706),login_policy_container=__webpack_require__(705),login_proceed=__webpack_require__(736),view=__webpack_require__(735),react=__webpack_require__(0),react_default=__webpack_require__.n(react),lib=__webpack_require__(59),with_translation=__webpack_require__(8),actions=__webpack_require__(2066);function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}var landing_form_View=function(_React$Component){function View(){var _ref,_this,self,call,obj,key,value;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return self=this,_this=!(call=(_ref=View.__proto__||Object.getPrototypeOf(View)).call.apply(_ref,[this].concat(args)))||"object"!==_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):call,obj=_assertThisInitialized(_this),value={email:""},(key="state")in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,react_default.a.Component),Constructor=View,(protoProps=[{key:"render",value:function(){var _this2=this,email=this.state.email,_this$props=this.props,requestLoginFromLanding=_this$props.requestLoginFromLanding;return _this$props.isLoggedIn?null:react_default.a.createElement("form",{className:"form login-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),requestLoginFromLanding({email:email})}},react_default.a.createElement("div",{className:"remi-hero-block-get-started form-inline"},react_default.a.createElement("input",{name:"email",type:"email",className:"form-control",value:email,placeholder:Object(with_translation.b)("email_prompt"),onChange:function(e){console.log(e.target.value),_this2.setState({email:e.target.value})}}),react_default.a.createElement("button",{className:"btn btn-primary",type:"submit"},Object(with_translation.b)("startNow"))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}(),landing_form=Object(lib.connect)(function(state){return{isLoggedIn:state.getIn(["currentUserReducer","isLoggedIn"])}},{requestLoginFromLanding:actions.i})(landing_form_View),effects=__webpack_require__(7),flash_messages_actions=__webpack_require__(154),auth_actions=__webpack_require__(362),cache_flash_message=__webpack_require__(389),state_provider_actions=__webpack_require__(155),sagas=__webpack_require__(497),login_username_actions=__webpack_require__(2169),_marked=regeneratorRuntime.mark(handleLoginUserName),_marked2=regeneratorRuntime.mark(saga);function handleLoginUserName(_ref){var payload,response,errorMessage;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,_context.prev=1,_context.next=4,Object(sagas.b)({payload:payload});case 4:if(!((response=_context.sent)instanceof Error)){_context.next=7;break}throw response;case 7:if("user_required"!==response.status){_context.next=12;break}return _context.next=10,Object(effects.put)(Object(flash_messages_actions.a)({type:"info",message:Object(with_translation.b)("account_username_required")}));case 10:_context.next=14;break;case 12:return _context.next=14,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login_policy",payload:payload}));case 14:_context.next=29;break;case 16:return _context.prev=16,_context.t0=_context.catch(1),errorMessage=_context.t0.message||Object(with_translation.b)("other_internal_server_error"),_context.next=21,Object(effects.put)(Object(login_username_actions.b)({message:errorMessage}));case 21:if(422===_context.t0.status){_context.next=27;break}return Object(cache_flash_message.a)({type:"danger",text:errorMessage}),_context.next=25,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login",payload:{}}));case 25:_context.next=29;break;case 27:return _context.next=29,Object(effects.put)(Object(flash_messages_actions.a)({type:"danger",message:errorMessage}));case 29:return _context.next=31,Object(effects.put)(Object(actions.d)());case 31:case"end":return _context.stop()}},_marked,this,[[1,16]])}function saga(){return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(effects.takeEvery)(login_username_actions.a,handleLoginUserName);case 2:case"end":return _context2.stop()}},_marked2,this)}var login_policy_actions=__webpack_require__(2168),sagas_marked=regeneratorRuntime.mark(handleLoginPolicy),sagas_marked2=regeneratorRuntime.mark(sagas_saga);function handleLoginPolicy(_ref){var payload,response,errorMessage;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,_context.prev=1,_context.next=4,Object(sagas.b)({payload:payload});case 4:if(!((response=_context.sent)instanceof Error)){_context.next=7;break}throw response;case 7:return _context.next=9,Object(effects.put)(Object(flash_messages_actions.a)({type:"info",message:Object(with_translation.b)("account_logged_in")}));case 9:return _context.next=11,Object(effects.put)(Object(auth_actions.m)());case 11:_context.next=26;break;case 13:return _context.prev=13,_context.t0=_context.catch(1),errorMessage=_context.t0.message||Object(with_translation.b)("other_internal_server_error"),_context.next=18,Object(effects.put)(Object(login_policy_actions.b)({message:errorMessage}));case 18:if(422===_context.t0.status){_context.next=24;break}return Object(cache_flash_message.a)({type:"danger",text:errorMessage}),_context.next=22,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login",payload:{}}));case 22:_context.next=26;break;case 24:return _context.next=26,Object(effects.put)(Object(flash_messages_actions.a)({type:"danger",message:errorMessage}));case 26:return _context.next=28,Object(effects.put)(Object(actions.d)());case 28:case"end":return _context.stop()}},sagas_marked,this,[[1,13]])}function sagas_saga(){return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(effects.takeEvery)(login_policy_actions.a,handleLoginPolicy);case 2:case"end":return _context2.stop()}},sagas_marked2,this)}var jstorage=__webpack_require__(62),jstorage_default=__webpack_require__.n(jstorage),gtm_wrapper=__webpack_require__(415),plain_request=__webpack_require__(81),store_provider=__webpack_require__(83),socket_wrapper=__webpack_require__(494),mobile_app=__webpack_require__(113),redux_form_lib=__webpack_require__(526);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"===typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){sagas_defineProperty(target,key,source[key])})}return target}function sagas_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var login_sagas_marked=regeneratorRuntime.mark(handleRequestLogin),login_sagas_marked2=regeneratorRuntime.mark(requestLoginAlternate),_marked3=regeneratorRuntime.mark(socialAuth),_marked4=regeneratorRuntime.mark(handleRequestLoginGoogle),_marked5=regeneratorRuntime.mark(handleRequestLoginFacebook),_marked6=regeneratorRuntime.mark(handleGoogleInit),_marked7=regeneratorRuntime.mark(handleLandingLogin),_marked8=regeneratorRuntime.mark(login_sagas_saga),fbLogin=function(){return new Promise(function(resolve,reject){FB.login(function(response){response.authResponse?resolve(response.authResponse):reject({response:response})},{scope:"email",return_scopes:!0})})};function handleRequestLogin(_ref){var payload,email,message;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,email=payload.email,_context.prev=2,_context.next=5,Object(effects.call)(plain_request.c,"/api/v1/users/request_login",payload);case 5:return gtm_wrapper.a.addEvent("userRequestLoginSuccess"),jstorage_default.a.set("login_email",email),_context.next=9,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login_proceed",payload:{email:email}}));case 9:_context.next=18;break;case 11:return _context.prev=11,_context.t0=_context.catch(2),message=_context.t0.message||Object(with_translation.b)("other_internal_server_error"),_context.next=16,Object(effects.put)(Object(flash_messages_actions.a)({type:"danger",message:message}));case 16:return _context.next=18,Object(effects.put)(Object(actions.e)({message:message}));case 18:return _context.next=20,Object(effects.put)(Object(actions.d)());case 20:case"end":return _context.stop()}},login_sagas_marked,this,[[2,11]])}function initClient(){gapi.client.init({clientId:REACT_RAILS_ENV.google_client_id,scope:"profile email"}).then(function(){Object(store_provider.b)(Object(actions.b)())})}function googleSignInPromise(){return new Promise(function(resolve,reject){gapi.auth2.getAuthInstance().signIn().then(function(response){resolve(response)}).catch(function(error){reject(error)})})}function requestLoginAlternate(_ref2){var payload,data,token,user;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return payload=_ref2.payload,_context2.next=3,Object(effects.call)(mobile_app.p);case 3:return _context2.next=5,Object(effects.call)(plain_request.c,"/api/v1/users/login_with_social_network",payload);case 5:if("username_required"!==(data=_context2.sent).status){_context2.next=12;break}return Object(cache_flash_message.a)({type:"info",text:Object(with_translation.b)("account_username_required")}),_context2.next=10,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login_username",payload:_objectSpread({},data)}));case 10:_context2.next=25;break;case 12:if("policy_agreement_required"!==data.status){_context2.next=17;break}return _context2.next=15,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login_policy",payload:_objectSpread({},data)}));case 15:_context2.next=25;break;case 17:return token=data.token,user=data.user,_context2.next=20,Object(effects.put)(Object(auth_actions.s)({token:token,user:user}));case 20:return socket_wrapper.a.reconnect(),_context2.next=23,Object(effects.put)(Object(flash_messages_actions.a)({type:"info",message:Object(with_translation.b)("account_logged_in")}));case 23:return _context2.next=25,Object(effects.put)(Object(auth_actions.m)());case 25:case"end":return _context2.stop()}},login_sagas_marked2,this)}function socialAuth(provider){var response,payload;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!mobile_app.f()){_context3.next=11;break}return _context3.prev=1,_context3.next=4,Object(effects.call)(mobile_app.x,provider);case 4:return payload=_context3.sent,_context3.abrupt("return",payload);case 8:throw _context3.prev=8,_context3.t0=_context3.catch(1),_context3.t0;case 11:_context3.t1=provider.toUpperCase(),_context3.next="GOOGLE"===_context3.t1?14:"FACEBOOK"===_context3.t1?18:22;break;case 14:return _context3.next=16,Object(effects.call)(googleSignInPromise,{});case 16:return response=_context3.sent,_context3.abrupt("return",{google_token:response.Zi.id_token});case 18:return _context3.next=20,Object(effects.call)(fbLogin,{});case 20:return response=_context3.sent,_context3.abrupt("return",{facebook_token:response.accessToken});case 22:throw new Error("Unknown OAuth Provider");case 23:case"end":return _context3.stop()}},_marked3,this,[[1,8]])}function handleRequestLoginGoogle(){var _payload,message;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,_context4.next=3,Object(effects.call)(socialAuth,"GOOGLE");case 3:return _payload=_context4.sent,_context4.next=6,requestLoginAlternate({payload:_payload});case 6:_context4.next=17;break;case 8:if(_context4.prev=8,_context4.t0=_context4.catch(0),console.warn(_context4.t0),"popup_closed_by_user"===_context4.t0.error){_context4.next=17;break}return message=_context4.t0.message||Object(with_translation.b)("other_internal_server_error"),_context4.next=15,Object(effects.put)(Object(flash_messages_actions.a)({type:"danger",message:message}));case 15:return _context4.next=17,Object(effects.put)(Object(actions.l)({message:message}));case 17:return _context4.next=19,Object(effects.put)(Object(actions.k)());case 19:case"end":return _context4.stop()}},_marked4,this,[[0,8]])}function handleRequestLoginFacebook(){var _payload2,message;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.prev=0,_context5.next=3,Object(effects.call)(socialAuth,"FACEBOOK");case 3:return _payload2=_context5.sent,_context5.next=6,requestLoginAlternate({payload:_payload2});case 6:_context5.next=16;break;case 8:return _context5.prev=8,_context5.t0=_context5.catch(0),console.warn(_context5.t0),message=_context5.t0.message||Object(with_translation.b)("other_internal_server_error"),_context5.next=14,Object(effects.put)(Object(flash_messages_actions.a)({type:"danger",message:message}));case 14:return _context5.next=16,Object(effects.put)(Object(actions.h)({message:message}));case 16:return _context5.next=18,Object(effects.put)(Object(actions.g)());case 18:case"end":return _context5.stop()}},_marked5,this,[[0,8]])}function handleGoogleInit(){return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(window.gapi&&!window.gapi.client){_context6.next=5;break}return console.warn("No GAPI or it loaded",window.gapi),_context6.next=4,Object(effects.put)(Object(actions.b)());case 4:return _context6.abrupt("return");case 5:gapi.load("client:auth2",{callback:initClient,onerror:function(){Object(store_provider.b)(Object(flash_messages_actions.a)({type:"danger",message:"Google api loaded error"}))},timeout:5e3,ontimeout:function(){Object(store_provider.b)(Object(flash_messages_actions.a)({type:"danger",message:"Google api loaded timeout"}))}});case 6:case"end":return _context6.stop()}},_marked6,this)}function handleLandingLogin(_ref3){var payload;return regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return payload=_ref3.payload,_context7.next=3,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login"}));case 3:return _context7.next=5,Object(effects.put)(Object(redux_form_lib.initialize)("login",payload));case 5:return _context7.next=7,Object(effects.put)(Object(actions.c)(_objectSpread({},payload)));case 7:case"end":return _context7.stop()}},_marked7,this)}function login_sagas_saga(){return regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,Object(effects.takeEvery)(actions.c,handleRequestLogin);case 2:return _context8.next=4,Object(effects.takeEvery)(actions.f,handleRequestLoginFacebook);case 4:return _context8.next=6,Object(effects.takeEvery)(actions.j,handleRequestLoginGoogle);case 6:return _context8.next=8,Object(effects.takeEvery)(actions.a,handleGoogleInit);case 8:return _context8.next=10,Object(effects.takeEvery)(actions.i,handleLandingLogin);case 10:case"end":return _context8.stop()}},_marked8,this)}var login_token_actions=__webpack_require__(2215),login_token_sagas_marked=regeneratorRuntime.mark(handleLoginToken),login_token_sagas_marked2=regeneratorRuntime.mark(login_token_sagas_saga);function handleLoginToken(_ref){var payload,response,message;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,_context.next=3,Object(effects.put)(Object(flash_messages_actions.b)());case 3:return _context.prev=3,_context.next=6,Object(sagas.b)({payload:payload});case 6:if(!((response=_context.sent)instanceof Error)){_context.next=9;break}throw response;case 9:if("username_required"!==response.status){_context.next=16;break}return Object(cache_flash_message.a)({type:"info",text:Object(with_translation.b)("account_username_required")}),gtm_wrapper.a.addEvent("registerComplete"),_context.next=14,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login_username",payload:payload}));case 14:_context.next=26;break;case 16:if("policy_agreement_required"!==response.status){_context.next=21;break}return _context.next=19,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login_policy",payload:payload}));case 19:_context.next=26;break;case 21:return gtm_wrapper.a.addEvent("userLogin"),_context.next=24,Object(effects.put)(Object(flash_messages_actions.a)({type:"info",message:Object(with_translation.b)("account_logged_in")}));case 24:return _context.next=26,Object(effects.put)(Object(auth_actions.m)());case 26:_context.next=36;break;case 28:return _context.prev=28,_context.t0=_context.catch(3),message=_context.t0.message||Object(with_translation.b)("other_internal_server_error"),Object(cache_flash_message.a)({type:"danger",text:message}),_context.next=34,Object(effects.put)(Object(state_provider_actions.b)({type:"root.login",payload:{email:payload.email}}));case 34:return _context.next=36,Object(effects.put)(Object(login_token_actions.b)({message:message}));case 36:case"end":return _context.stop()}},login_token_sagas_marked,this,[[3,28]])}function login_token_sagas_saga(){return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(effects.takeEvery)(login_token_actions.a,handleLoginToken);case 2:case"end":return _context2.stop()}},login_token_sagas_marked2,this)}var _handleActions,redux_actions_lib=__webpack_require__(12),immutable=__webpack_require__(54);function reducer_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var initialState=Object(immutable.fromJS)({loginSubmitting:!1,usernameSubmitting:!1,loginGoogleSubmitting:!1,loginFacebookSubmitting:!1,googleApiInitiating:!1}),login_reducer=Object(redux_actions_lib.handleActions)((reducer_defineProperty(_handleActions={},actions.a,function(state){return state.set("googleApiInitiating",!0)}),reducer_defineProperty(_handleActions,actions.b,function(state){return state.set("googleApiInitiating",!1)}),reducer_defineProperty(_handleActions,actions.j,function(state){return state.set("loginGoogleSubmitting",!0)}),reducer_defineProperty(_handleActions,actions.c,function(state){return state.set("loginSubmitting",!0)}),reducer_defineProperty(_handleActions,actions.f,function(state){return state.set("loginFacebookSubmitting",!0)}),reducer_defineProperty(_handleActions,login_username_actions.a,function(state){return state.set("usernameSubmitting",!0)}),reducer_defineProperty(_handleActions,login_policy_actions.a,function(state){return state.set("policyAgreementSubmitting",!0)}),reducer_defineProperty(_handleActions,Object(redux_actions_lib.combineActions)(actions.g,actions.k,actions.d),function(state){return state.set("loginSubmitting",!1).set("loginFacebookSubmitting",!1).set("loginGoogleSubmitting",!1).set("usernameSubmitting",!1)}),_handleActions),initialState);__webpack_require__.d(__webpack_exports__,"Login",function(){return container.default}),__webpack_require__.d(__webpack_exports__,"LoginUsername",function(){return login_username_container.default}),__webpack_require__.d(__webpack_exports__,"LoginPolicy",function(){return login_policy_container.default}),__webpack_require__.d(__webpack_exports__,"LoginProceed",function(){return login_proceed.default}),__webpack_require__.d(__webpack_exports__,"LoginToken",function(){return view.default}),__webpack_require__.d(__webpack_exports__,"LoginLanding",function(){return landing_form}),__webpack_require__.d(__webpack_exports__,"watchLoginUsername",function(){return saga}),__webpack_require__.d(__webpack_exports__,"watchLoginPolicy",function(){return sagas_saga}),__webpack_require__.d(__webpack_exports__,"watchLogin",function(){return login_sagas_saga}),__webpack_require__.d(__webpack_exports__,"watchLoginToken",function(){return login_token_sagas_saga}),__webpack_require__.d(__webpack_exports__,"login",function(){return login_reducer})},705:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var lib=__webpack_require__(59),Recompose=__webpack_require__(63),to_js=__webpack_require__(111),actions=__webpack_require__(154),login_policy_actions=__webpack_require__(2168),react=__webpack_require__(0),react_default=__webpack_require__.n(react),with_translation=(__webpack_require__(14),__webpack_require__(8)),icons=__webpack_require__(49),sidebar=(__webpack_require__(152),function(props){var currentPage=props.currentPage,isCollapsed=props.isCollapsed,onCollapseToggle=props.onCollapseToggle,onChangePolicyPage=props.onChangePolicyPage,countryCode=window.REACT_RAILS_ENV.current_country;return react_default.a.createElement("div",{className:"sidebar-container"},react_default.a.createElement("div",{className:"nav-button"},react_default.a.createElement("div",{className:"navbar-default"},react_default.a.createElement("button",{className:"navbar-toggle",type:"button",onClick:onCollapseToggle},react_default.a.createElement(icons.c,{icon:"menu"}))),react_default.a.createElement("div",{className:"clearfix"})),react_default.a.createElement("div",{className:"list-group navbar-collapse collapse ".concat(isCollapsed&&"in"),id:"sidebar_nav"},react_default.a.createElement("a",{className:"list-group-item ".concat("terms_of_service"===currentPage&&"active"),onClick:function(){return onChangePolicyPage("terms_of_service")}},react_default.a.createElement("span",null,Object(with_translation.b)("cano_title_root_terms_of_service"))),react_default.a.createElement("a",{className:"list-group-item ".concat("privacy_policy"===currentPage&&"active"),onClick:function(){return onChangePolicyPage("privacy_policy")}},react_default.a.createElement("span",null,Object(with_translation.b)("cano_title_root_privacy_policy"))),react_default.a.createElement("a",{className:"list-group-item ".concat("trading_policy"===currentPage&&"active"),onClick:function(){return onChangePolicyPage("trading_policy")}},react_default.a.createElement("span",null,Object(with_translation.b)("cano_title_root_trading_policy"))),react_default.a.createElement("a",{className:"list-group-item ".concat("api_terms_of_service"===currentPage&&"active"),onClick:function(){return onChangePolicyPage("api_terms_of_service")}},react_default.a.createElement("span",null,Object(with_translation.b)("cano_title_root_api_terms_of_service"))),"ng"===countryCode&&react_default.a.createElement("a",{className:"list-group-item ".concat("aml"===currentPage&&"active"),onClick:function(){return onChangePolicyPage("aml")}},react_default.a.createElement("span",null,Object(with_translation.b)("cano_title_root_aml")))))});function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var view=function(_Component){function View(){var _ref,_this,self,call;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return self=this,call=(_ref=View.__proto__||Object.getPrototypeOf(View)).call.apply(_ref,[this].concat(args)),_defineProperty(_assertThisInitialized(_this=!call||"object"!==_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):call),"state",{isCollapsed:!0,currentPage:"terms_of_service"}),_defineProperty(_assertThisInitialized(_this),"handleClick",function(){var _this$props=_this.props,clearFlashMessages=_this$props.clearFlashMessages,loginPolicy=_this$props.loginPolicy,match=_this$props.match;clearFlashMessages(),loginPolicy({login_token:match.params.login_token,policy_agreement:!0,device_identifier:window.DEVICE_IDENTIFIER})}),_defineProperty(_assertThisInitialized(_this),"handleCollapseToggle",function(){_this.setState(function(prevState){return{isCollapsed:!prevState.isCollapsed}})}),_defineProperty(_assertThisInitialized(_this),"handleChangePolicyPage",function(policyPage){_this.setState({currentPage:policyPage})}),_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,react["Component"]),Constructor=View,(protoProps=[{key:"render",value:function(){var _this$props2=this.props,match=_this$props2.match,policyAgreementSubmitting=_this$props2.policyAgreementSubmitting,isLoggedIn=_this$props2.isLoggedIn,currentPage=this.state.currentPage,countryCode=match.params.country;return countryCode="vn"===countryCode?"vi":countryCode,react_default.a.createElement("section",{className:"container policy-container"},react_default.a.createElement("div",{className:"row"},react_default.a.createElement("div",{className:"title-accent title-decorated text-center"},react_default.a.createElement("h1",null,Object(with_translation.b)("cano_title_root_".concat(currentPage)))),react_default.a.createElement("div",{className:"block-20 title-accent text-center"},react_default.a.createElement("span",null,Object(with_translation.b)("version",{version:window.REACT_RAILS_ENV.current_policy_version}))," - ",react_default.a.createElement("span",null,Object(with_translation.b)("effective_date",{effectiveDate:window.REACT_RAILS_ENV.policy_updated_at}))),react_default.a.createElement("div",{className:"col-sm-3"},react_default.a.createElement(sidebar,{currentPage:currentPage,isCollapsed:this.state.isCollapsed,onCollapseToggle:this.handleCollapseToggle,onChangePolicyPage:this.handleChangePolicyPage})),react_default.a.createElement("div",{className:"col-sm-9"},react_default.a.createElement("div",{className:"well well-transparent"},react_default.a.createElement("div",{className:"content pre-scrollable"},Object(with_translation.b)(currentPage))))),match.params.login_token&&react_default.a.createElement("div",{className:"block-20 text-center"},react_default.a.createElement("button",{className:"btn btn-primary",disabled:policyAgreementSubmitting,onClick:this.handleClick},policyAgreementSubmitting&&react_default.a.createElement(icons.c,{icon:"spin4",className:"animate-spin"}),react_default.a.createElement("span",null,Object(with_translation.b)("i_have_read_and_agree")))),isLoggedIn&&react_default.a.createElement("div",{className:"block-20 text-center"},react_default.a.createElement("span",null,Object(with_translation.b)("i_have_read_and_agree")),"\xa0",react_default.a.createElement(icons.c,{icon:"check"})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}(),Container=Object(Recompose.compose)(Object(lib.connect)(function(state){var isLoggedIn=!!state.getIn(["currentUserReducer","user"]);return{policyAgreementSubmitting:state.getIn(["login","policyAgreementSubmitting"]),isLoggedIn:isLoggedIn}},{clearFlashMessages:actions.b,loginPolicy:login_policy_actions.a}),to_js.a)(view);Container.displayName="LandingContainer";__webpack_exports__.default=Container},706:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var lib=__webpack_require__(59),Recompose=__webpack_require__(63),to_js=__webpack_require__(111),actions=__webpack_require__(154),login_username_actions=__webpack_require__(2169),react=__webpack_require__(0),react_default=__webpack_require__.n(react),with_translation=__webpack_require__(8),immutable=__webpack_require__(402),icons=__webpack_require__(49),redux_form_extensions=__webpack_require__(372);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var inputs_Username=function(_ref){var input=_ref.input,meta=_ref.meta,placeholder=_ref.placeholder;return react_default.a.createElement(redux_form_extensions.b,{meta:meta},react_default.a.createElement("input",_extends({className:"form-control"},input,{placeholder:placeholder})),react_default.a.createElement(redux_form_extensions.c,{meta:meta},react_default.a.createElement("span",{className:"help-block","data-when":"invalid"},Object(with_translation.b)("account_username_error"))))};function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}var view_View=function(_Component){function View(){var _ref,_this,self,call,obj,key,value;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return self=this,call=(_ref=View.__proto__||Object.getPrototypeOf(View)).call.apply(_ref,[this].concat(args)),_this=!call||"object"!==_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):call,obj=_assertThisInitialized(_this),value=function(immutableValues){var _this$props=_this.props,clearFlashMessages=_this$props.clearFlashMessages,loginUserName=_this$props.loginUserName,valid=_this$props.valid,match=_this$props.match,values=immutableValues.toJS();clearFlashMessages(),valid&&loginUserName({login_token:match.params.login_token,username:values.username,device_identifier:window.DEVICE_IDENTIFIER})},(key="handleSubmit")in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,react["Component"]),Constructor=View,(protoProps=[{key:"render",value:function(){var _this$props2=this.props,handleSubmit=_this$props2.handleSubmit,usernameSubmitting=_this$props2.usernameSubmitting;return react_default.a.createElement("section",{className:"page-content login-username-page revamp-section"},react_default.a.createElement("div",{className:"container"},react_default.a.createElement("div",{className:"row"},react_default.a.createElement("div",{className:"col-sm-4 col-sm-push-4"},react_default.a.createElement("form",{onSubmit:handleSubmit(this.handleSubmit)},react_default.a.createElement("div",{className:"form-group"},react_default.a.createElement("div",{className:"help-block"},Object(with_translation.b)("account_please_enter_username"))),react_default.a.createElement("div",{className:"form-group form-grop__icon"},react_default.a.createElement(icons.c,{icon:"user"}),react_default.a.createElement(immutable.Field,{name:"username",component:inputs_Username,placeholder:Object(with_translation.b)("account_username"),type:"text"})),react_default.a.createElement("div",null,react_default.a.createElement("button",{className:"btn btn-block btn-primary btn-continue",type:"submit",disabled:usernameSubmitting},usernameSubmitting&&react_default.a.createElement(icons.a,null),react_default.a.createElement("span",null,Object(with_translation.b)("continue")))))))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}(),view=Object(immutable.reduxForm)({form:"login-username",validate:function(immutableValues){var username,errors={},values=immutableValues.toJS();return values.username&&(username=values.username,String(username).length>=3&&String(username).length<=22)||(errors.username="invalid"),errors},enableReinitialize:!0,keepDirtyOnReinitialize:!0})(view_View),Container=Object(Recompose.compose)(Object(lib.connect)(function(state){return{usernameSubmitting:state.getIn(["login","usernameSubmitting"])}},{clearFlashMessages:actions.b,loginUserName:login_username_actions.a}),to_js.a)(view);Container.displayName="LandingContainer";__webpack_exports__.default=Container},707:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var lib=__webpack_require__(59),Recompose=__webpack_require__(63),to_js=__webpack_require__(111),actions=__webpack_require__(154),auth_actions=__webpack_require__(362),login_actions=__webpack_require__(2066),react=__webpack_require__(0),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(14),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__(37),classnames_default=__webpack_require__.n(classnames),root_link=__webpack_require__(152),immutable=__webpack_require__(402),with_translation=__webpack_require__(8),icons=__webpack_require__(49),mobile_app=__webpack_require__(113),email_ext=__webpack_require__(930),redux_form_extensions=__webpack_require__(372);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var inputs_Email=function(_ref){var input=_ref.input,meta=_ref.meta,placeholder=_ref.placeholder;return react_default.a.createElement(redux_form_extensions.b,{meta:meta},react_default.a.createElement("div",{className:"mail-input"},react_default.a.createElement(icons.c,{icon:"mail",className:"icon-24 align-right"}),react_default.a.createElement("input",_extends({className:"form-control"},input,{placeholder:placeholder,type:Object(mobile_app.f)()?"email":"text"}))),react_default.a.createElement(redux_form_extensions.c,{meta:meta},react_default.a.createElement("span",{className:"help-block","data-when":"required"},Object(with_translation.b)("account_email_is_required")),react_default.a.createElement("span",{className:"help-block","data-when":"invalid"},Object(with_translation.b)("account_invalid_email"))))};function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var view_SocialLoginButton=function(_ref){var loading=_ref.loading,handleOnClick=_ref.onClick,className=_ref.className,disabled=_ref.disabled,value=_ref.value,iconClass=_ref.iconClass,iconName=_ref.iconName,iconBaseClass="icon-30 no-baseline mr-8 ".concat(iconClass);return react_default.a.createElement("button",{className:classnames_default()("btn ".concat(className),{submitting:loading}),type:"button",disabled:disabled,onClick:handleOnClick},loading?react_default.a.createElement(icons.a,{className:iconBaseClass}):react_default.a.createElement(icons.c,{icon:iconName,className:iconBaseClass}),value)},view_View=function(_Component){function View(){var _ref2,_this,self,call;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return self=this,call=(_ref2=View.__proto__||Object.getPrototypeOf(View)).call.apply(_ref2,[this].concat(args)),_defineProperty(_assertThisInitialized(_this=!call||"object"!==_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):call),"handleSubmit",function(immutableValues){var values=immutableValues.toJS(),_this$props=_this.props,clearFlashMessages=_this$props.clearFlashMessages,requestLogin=_this$props.requestLogin,valid=_this$props.valid;clearFlashMessages(),valid&&requestLogin({email:values.email,ref:window.REACT_RAILS_ENV.ref,source_url:window.REACT_RAILS_ENV.source_url})}),_defineProperty(_assertThisInitialized(_this),"facebookLogin",function(){_this.props.requestLoginFacebook()}),_defineProperty(_assertThisInitialized(_this),"googleLogin",function(){_this.props.requestLoginGoogle()}),_defineProperty(_assertThisInitialized(_this),"isSocialLoginSupported",function(){return!mobile_app.f()||Boolean(window.isOauthOnMobileSupported)}),_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,react["Component"]),Constructor=View,(protoProps=[{key:"componentWillMount",value:function(){this.props.isLoggedIn&&this.props.goToAfterLoginState(),this.isSocialLoginSupported()&&this.props.initGoogleApi()}},{key:"render",value:function(){var _this$props2=this.props,handleSubmit=_this$props2.handleSubmit,loginSubmitting=_this$props2.loginSubmitting,loginFacebookSubmitting=_this$props2.loginFacebookSubmitting,loginGoogleSubmitting=_this$props2.loginGoogleSubmitting,isChina=_this$props2.isChina,googleApiInitiating=_this$props2.googleApiInitiating,prevLocation=_this$props2.prevLocation,actionToPrevPage={type:prevLocation.type||"root.landing",payload:prevLocation.payload};return react_default.a.createElement("section",{className:"page-content login-page revamp-section"},react_default.a.createElement("div",{className:"container"},react_default.a.createElement("div",{className:"row"},react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"login-instruction"},react_default.a.createElement("h3",{className:"text-center"},Object(with_translation.b)("account_email")),react_default.a.createElement("div",{className:"text-center"},Object(with_translation.b)("login_instruction"))),react_default.a.createElement("div",{className:"login-panel"},react_default.a.createElement("h3",{className:"login-panel-header text-center"},Object(with_translation.b)("login_or_register")),react_default.a.createElement("form",{className:"form login-form",onSubmit:handleSubmit(this.handleSubmit)},react_default.a.createElement("div",{className:"form-group form-grop__icon login-form-email"},react_default.a.createElement(immutable.Field,{name:"email",component:inputs_Email,placeholder:Object(with_translation.b)("account_email"),type:"email"})),react_default.a.createElement("div",{className:"form-group login-form-continue"},react_default.a.createElement("button",{className:"btn btn-block btn-primary btn-continue",type:"submit",disabled:loginSubmitting},react_default.a.createElement(icons.a,{className:classnames_default()("icon-white mr-8",{hidden:!loginSubmitting})}),react_default.a.createElement("span",null,Object(with_translation.b)("continue"))," ",react_default.a.createElement(icons.c,{icon:"right",className:"icon-white"})))),!isChina&&react_default.a.createElement("div",{className:"another-sign-in"},react_default.a.createElement("div",{className:"another-sign-in-header"},react_default.a.createElement("span",{className:"header-text"},Object(with_translation.b)("account_or_sign_in_with"))),this.isSocialLoginSupported()&&react_default.a.createElement("div",{className:"btn-group"},react_default.a.createElement(view_SocialLoginButton,{className:"btn-social-google",iconName:"google",loading:loginGoogleSubmitting,disabled:loginSubmitting||googleApiInitiating&&!window.isOauthOnMobileSupported,onClick:this.googleLogin,value:"Google"}),react_default.a.createElement(view_SocialLoginButton,{className:"btn-social-facebook",iconClass:"icon-white",iconName:"facebook-squared",loading:loginFacebookSubmitting,disabled:loginSubmitting,onClick:this.facebookLogin,value:"Facebook"})))),react_default.a.createElement("h3",{className:"login-back text-center"},react_default.a.createElement(root_link.a,{to:actionToPrevPage},react_default.a.createElement(icons.c,{icon:"left-open"}),Object(with_translation.b)("back")))))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}();_defineProperty(view_View,"propTypes",{handleSubmit:prop_types_default.a.func.isRequired,goToAfterLoginState:prop_types_default.a.func.isRequired,clearFlashMessages:prop_types_default.a.func.isRequired,requestLogin:prop_types_default.a.func.isRequired,requestLoginFacebook:prop_types_default.a.func.isRequired,requestLoginGoogle:prop_types_default.a.func.isRequired,valid:prop_types_default.a.bool,isLoggedIn:prop_types_default.a.bool.isRequired,loginSubmitting:prop_types_default.a.bool.isRequired,loginFacebookSubmitting:prop_types_default.a.bool,loginGoogleSubmitting:prop_types_default.a.bool,initGoogleApi:prop_types_default.a.func.isRequired,isChina:prop_types_default.a.bool.isRequired}),_defineProperty(view_View,"defaultProps",{valid:!1,loginGoogleSubmitting:!1,loginFacebookSubmitting:!1});var view=Object(immutable.reduxForm)({form:"login",validate:function(immutableValues){var email,errors={},values=immutableValues.toJS();return values.email?(email=values.email,email_ext.a.test(email)||(errors.email="invalid")):errors.email="required",errors},enableReinitialize:!0,keepDirtyOnReinitialize:!0})(view_View);function container_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var socialLogin={},container_isChina="cn"===window.REACT_RAILS_ENV.real_ip_country;container_isChina||(socialLogin={requestLoginFacebook:login_actions.f,requestLoginGoogle:login_actions.j});var Container=Object(Recompose.compose)(Object(lib.connect)(function(state){var _state$get;return{isLoggedIn:!!state.getIn(["currentUserReducer","user"]),loginSubmitting:state.getIn(["login","loginSubmitting"]),loginGoogleSubmitting:state.getIn(["login","loginGoogleSubmitting"]),loginFacebookSubmitting:state.getIn(["login","loginFacebookSubmitting"]),googleApiInitiating:state.getIn(["login","googleApiInitiating"]),isChina:container_isChina,prevLocation:null===(_state$get=state.get("location"))||void 0===_state$get?void 0:_state$get.prev}},function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"===typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){container_defineProperty(target,key,source[key])})}return target}({clearFlashMessages:actions.b,requestLogin:login_actions.c},socialLogin,{goToAfterLoginState:auth_actions.m,initGoogleApi:login_actions.a,addFlashMessage:actions.a,isChina:container_isChina})),to_js.a)(view);Container.displayName="LandingContainer";__webpack_exports__.default=Container},733:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_node_modules_react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_react__WEBPACK_IMPORTED_MODULE_0__),_node_modules_react_redux_lib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59),_node_modules_recompose_cjs_Recompose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63),_shared_mobile_app__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(113),_actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2213);function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!==typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var View=function(_React$PureComponent){function View(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View),_possibleConstructorReturn(this,(View.__proto__||Object.getPrototypeOf(View)).apply(this,arguments))}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,_node_modules_react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent),Constructor=View,(protoProps=[{key:"componentWillMount",value:function(){this.props.userLogout(),setTimeout(function(){_shared_mobile_app__WEBPACK_IMPORTED_MODULE_3__.r()},1e3)}},{key:"render",value:function(){return _node_modules_react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"loading"},_node_modules_react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"loading-container text-center"},_node_modules_react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"loading-bar"})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}(),Container=Object(_node_modules_recompose_cjs_Recompose__WEBPACK_IMPORTED_MODULE_2__.compose)(Object(_node_modules_react_redux_lib__WEBPACK_IMPORTED_MODULE_1__.connect)(null,{userLogout:_actions__WEBPACK_IMPORTED_MODULE_4__.b}))(View);__webpack_exports__.default=Container},735:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"View",function(){return View});var _lib_util_ext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2167),_node_modules_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_react__WEBPACK_IMPORTED_MODULE_1__),_node_modules_recompose_cjs_Recompose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63),_node_modules_react_redux_lib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(59),_services_current_user__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(404),_shared_auth_actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(362),_utils_with_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(377),_shared_mobile_app__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(113),_actions__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2215);function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!==typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var View=function(_React$PureComponent){function View(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View),_possibleConstructorReturn(this,(View.__proto__||Object.getPrototypeOf(View)).apply(this,arguments))}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.PureComponent),Constructor=View,(protoProps=[{key:"componentWillMount",value:function(){var _this$props=this.props,match=_this$props.match,redirect=_this$props.redirect,goToAfterLoginState=_this$props.goToAfterLoginState,loginToken=_this$props.loginToken,user={login_token:match.params.login_token};if(user.login_token){var path=decodeURIComponent(window.location.pathname),href=decodeURIComponent(window.location.href),host=decodeURIComponent(window.location.host);if(_shared_mobile_app__WEBPACK_IMPORTED_MODULE_7__.f()||!Object(_lib_util_ext__WEBPACK_IMPORTED_MODULE_0__.anyIOS)()||match.params.noapp)Object(_services_current_user__WEBPACK_IMPORTED_MODULE_4__.b)()?goToAfterLoginState():loginToken(user);else{window.location.assign("remitano://".concat(host).concat(path));var composedhref=match.search?"".concat(href,"&noapp=1"):"".concat(href,"?noapp=1");setTimeout(function(){window.location.assign(composedhref)},3e3)}}else Object(_services_current_user__WEBPACK_IMPORTED_MODULE_4__.b)()?goToAfterLoginState():redirect("root.login",{})}},{key:"render",value:function(){return _node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"loading"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"loading-container text-center"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"loading-bar"})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}(),Container=Object(_node_modules_recompose_cjs_Recompose__WEBPACK_IMPORTED_MODULE_2__.compose)(_utils_with_router__WEBPACK_IMPORTED_MODULE_6__.a,Object(_node_modules_react_redux_lib__WEBPACK_IMPORTED_MODULE_3__.connect)(null,{goToAfterLoginState:_shared_auth_actions__WEBPACK_IMPORTED_MODULE_5__.m,loginToken:_actions__WEBPACK_IMPORTED_MODULE_8__.a}))(View);__webpack_exports__.default=Container},736:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _lib_jstorage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62),_lib_jstorage__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_lib_jstorage__WEBPACK_IMPORTED_MODULE_0__),_node_modules_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_react__WEBPACK_IMPORTED_MODULE_1__),_utils_with_translation__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(14),__webpack_require__(8)),_utils_with_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(377);function _typeof(obj){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!==typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var View=function(_Component){function View(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,View),_possibleConstructorReturn(this,(View.__proto__||Object.getPrototypeOf(View)).apply(this,arguments))}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(View,_node_modules_react__WEBPACK_IMPORTED_MODULE_1__["Component"]),Constructor=View,(protoProps=[{key:"componentWillMount",value:function(){this.email||this.props.redirect("root.login")}},{key:"render",value:function(){return _node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("section",{className:"page-content login-proceed-page"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"container"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"row"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"col-sm-12"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"alert alert-info fade-and-collapsen"},_node_modules_react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span",null,Object(_utils_with_translation__WEBPACK_IMPORTED_MODULE_3__.b)("account_request_login_success",{email:this.email})))))))}},{key:"email",get:function(){return _lib_jstorage__WEBPACK_IMPORTED_MODULE_0___default.a.get("login_email")}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),View}();__webpack_exports__.default=Object(_utils_with_router__WEBPACK_IMPORTED_MODULE_4__.a)(View)}}]);