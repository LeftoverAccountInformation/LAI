var CAnalytics;(function(e){var t=function(){function e(e,t){if(t===void 0){t=[]}this.MakeBrowsersCompatible();this._executeCommandClass=new o(e);this.ExecuteCommandsInArray(t);var n=this;_cInfo.push=function(){n.ExecuteCommandsInArray(arguments);return Array.prototype.push.apply(this,arguments)};this.ConfigurePanelMeasurement(e);this.InsertCookieSyncScript(e)}e.prototype.ConfigurePanelMeasurement=function(e){switch(e.MeasureType){case a.PanelOnly:{if(document.cookie.match(i._doNotTrackCookieName)===null&&document.cookie.match(i._panelCookieName)===null){(function(){var t=document.createElement("script");t.type="text/javascript";t.async=true;t.src=e.PanelOnlyAddress;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)})()}break}}};e.prototype.InsertCookieSyncScript=function(e){if(document.cookie.match(i._doNotSyncPnlData)===null){var t=document.createElement("script");t.type="text/javascript";t.async=true;t.src=e.PanelDataSyncAddress;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)}};e.prototype.ExecuteCommandsInArray=function(e){var t;for(t=0;t<e.length;t++){this._executeCommandClass.RunCommand(e[t])}};e.prototype.MakeBrowsersCompatible=function(){if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}};return e}();e.Measure=t;var o=function(){function e(e){this._baseUrl=e.BaseUrl;this._siteId=e.SiteId;this._MeasureType=e.MeasureType;this._cookieExpirationDays=e.CookieExpirationDays;this._cookieDomain=e.CookieDomain;this._callBackFunction=null;this._videoPingInterval=e.VideoPingInterval}e.prototype.RunCommand=function(e){switch(e.cmd){case"_executeTracking":this.ExecuteTracking();this.ResetTrackingValuesToDefault();break;case"_trackContentPath":this._contentPath=e.val;break;case"_trackContentTags":this._contentTags=e.val;break;case"_trackCustomVar":this._customVars=e.val;break;case"_siteId":this._siteId=e.val;break;case"_setDeviceType":this._deviceType=e.val;break;case"_trackSectionPath":if(e.val&&(e.val.toLowerCase().match("sektion")!==null||e.val.toLowerCase().match("sajt=")!==null)){this._contentPath=this.ConvertToContentPath(e.val)}else{this._contentPath=e.val}break;case"_setCallback":this._callBackFunction=e.val;break;case"_setCookieDomain":this._cookieDomain=e.val;break;case"_setCookieExpirationDays":this._cookieExpirationDays=e.val;break;case"_setDoNotTrack":i.SetDoNotTrackCookie(e.val,this._cookieDomain);break;case"_setOiInfo":var t=this._cookieDomain;i.SetDoNotPanelSyncCookie(1,t);var o=i.GetPanelValue();if(o!==null&&!e.val){var a=new Image;a.src=this.GetSifoComscoreSiteUrl(o,"pnlSyncRedir");this.TestAdblocker(o);this.UpdateComscoreCookie(o)}else if(e.val){i.SetPanelValue(e.val);var a=new Image;a.src=this.GetSifoComscoreSiteUrl(e.val,"pnlSync");this.TestAdblocker(e.val);this.UpdateComscoreCookie(e.val)}break;case"_refreshCsCookie":var r=e.val;document.location.href="https://sifopanelen.research-int.se/Redirect/SetCookieSuccess?csp_pid=km-se&csp_bid="+r+"&csp_sid="+n.GetLocation()+"&onlyComscoreCookie=true";break;case"_setPanelMember":i.SetIsPanelMemberCookie(e.val,this._cookieDomain);break;default:throw"Bad cmd"}};e.prototype.UpdateComscoreCookie=function(e){if(e.substr(0,1)==="b"){this.InsertCsCookieSyncScript(e)}};e.prototype.InsertCsCookieSyncScript=function(e){var t=document.createElement("script");t.type="text/javascript";t.async=true;t.src="https://trafficgateway.research-int.se/PanelInfo/CsSync/"+e;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)};e.prototype.TestAdblocker=function(e){var t=this;var o=function(){var o=new Image;o.src=t.GetSifoComscoreSiteUrl(e,"comError")};var n=new Image;n.onerror=o;n.src="https://panel.scorecardresearch.com/favicon.ico?rnd="+i.GetGuid()};e.prototype.GetSifoComscoreSiteUrl=function(e,t){return"https://trafficgateway.research-int.se/TrafficCollector?rnr=958052&siteId=0e8f2f4c-ac0a-4f07-95cb-4097d1fc20c6&pnlId="+e+"&cp="+t+"%2F"};e.prototype.PingVideo=function(e,t){if(e.action===c.play){var o=new Object;o.action=c.ping;o.duration=e.duration;o.videoId=e.videoId;var n=this;var a=i.GetTrafficCookieValue();window["_videoPingObj"+o.videoId]=setInterval(function(){n.ExecutePing(o,n._siteId,a,n.AddToTrackerUrl,n._baseUrl,n.getRandomInt(1e3,1e7),n.ExecuteServerCall,t)},t)}else{clearInterval(window["_videoPingObj"+o.videoId])}};e.prototype.ExecutePing=function(e,t,o,n,i,a,r,c){e.duration+=c;var s="";s+=n("siteId",t);s+=n("clientId",o);r(s,null,i,a)};e.prototype.ConvertToContentPath=function(e){var t=new RegExp("sektion(\\d*)=(.*?)&","ig");var o=[];var n;while((n=t.exec(e+"&"))!=null){if(!n[1]){o[0]=n[2]}else{o[n[1]]=n[2]}}return"/"+o.join("/")};e.prototype.ResetTrackingValuesToDefault=function(){this._customVars=null;this._contentPath="";this._callBackFunction=null;this._videoEvent=null};e.prototype.BasicJsonStringify=function(e){if(typeof JSON!=="undefined"&&typeof JSON.stringify==="function"){t=JSON.stringify(e)}else{if(typeof e==="string"){t='"'+e+'"'}else{var t="[";for(var o=0;o<e.length;o++){t+='{"'+e[o].name+'":"'+e[o].val+'"}';if(o<e.length-1){t+=","}}t+="]"}}return t};e.prototype.SafeToString=function(e){if(e===undefined||e===null)return"";return e.toString()};e.prototype.ExecuteTracking=function(){i.SetTrafficCookie(this._cookieExpirationDays,this._cookieDomain);var e="";e+=this.AddToTrackerUrl("siteId",this._siteId);e+=this.AddToTrackerUrl("clientId",i.GetTrafficCookieValue());e+=this.AddToTrackerUrl("pnlId",i.GetPanelValue());e+=this.AddToTrackerUrl("dt",this.SafeToString(this._deviceType));e+=this.AddToTrackerUrl("cv",this.GetCustomVariable(this._customVars));e+=this.AddToTrackerUrl("cp",this._contentPath);e+=this.AddToTrackerUrl("ct",this.GetContentTags(this._contentTags));e+=this.AddToTrackerUrl("mst",this._MeasureType.toString());e+=this.AddToTrackerUrl("topLoc",n.GetLocation());e+=this.AddToTrackerUrl("referrer",n.GetReferrer());e+=this.AddToTrackerUrl("wh",n.GetBrowserResolutionHeight().toString());e+=this.AddToTrackerUrl("ww",n.GetBrowserResolutionWidth().toString());this.ExecuteServerCall(e,this._callBackFunction)};e.prototype.GetCustomVariable=function(e){if(e&&e.name&&e.val){return'{"'+e.name+'"'+":"+this.BasicJsonStringify(this._customVars.val)+"}"}else if(e!=null){return this.BasicJsonStringify(this._customVars)}};e.prototype.GetContentTags=function(e){if(e&&e.length){if(typeof JSON.stringify!=="function"){return JSON.stringify(e)}else{var t="[";for(var o=0;o<e.length;o++){t+='"'+e[o]+'"';if(o<e.length-1){t+=","}}t+="]";return t}}else{return null}};e.prototype.ExecuteServerCall=function(e,t,o,n){if(o===void 0){o=null}if(n===void 0){n=null}var i=new Image;if(this._callBackFunction){i.onload=this._callBackFunction}o=o?o:this._baseUrl;n=n?n:this.getRandomInt(1e3,1e7);i.src=o+"/TrafficCollector?rnr="+n+e};e.prototype.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};e.prototype.AddToTrackerUrl=function(e,t){if(t){return"&"+e+"="+this.encodeUriWithFallback(t)}else{return""}};e.prototype.encodeUriWithFallback=function(e){if(typeof encodeURIComponent=="function"){return encodeURIComponent(e)}return window["escape"](e)};return e}();e.ExecuteCommandClass=o;var n=function(){function e(){}e.IsSafari=function(){if(navigator){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}else{return false}};e.GetBrowserResolutionHeight=function(){return window.screen&&window.screen.height||0};e.GetBrowserResolutionWidth=function(){return window.screen&&window.screen.width||0};e.GetReferrer=function(){return this._d.referrer||""};e.GetLocation=function(){return this._d.location.href||""};e._d=document;e._w=window;e._de=document.documentElement;e._bodyTag=document.getElementsByTagName("body")[0];return e}();var i=function(){function e(){}e.SetDoNotTrackCookie=function(e,t){this.SetCookie(this._doNotTrackCookieName,"_",e,t)};e.SetDoNotPanelSyncCookie=function(e,t){this.SetCookie(this._doNotSyncPnlData,"",e,t)};e.SetIsPanelMemberCookie=function(e,t){this.SetCookie(this._panelCookieName,"",e,t)};e.SetStopCSRedirectCookie=function(e,t){this.SetCookie(this._csStopCookieName,"",e,t)};e.GetStopCSRedirectCookieValue=function(){return this.GetCookieValue(this._csStopCookieName)};e.GetPanelValue=function(){try{return localStorage.getItem(this._panelLocalStorageName)}catch(e){}return null};e.SetPanelValue=function(e){try{localStorage.setItem(this._panelLocalStorageName,e)}catch(t){}};e.GetTrafficCookieValue=function(){try{var e=localStorage.getItem(this._cookieName);if(e!==null){return e}}catch(t){}return this.GetCookieValue(this._cookieName)};e.SetTrafficCookie=function(e,t){var o=this.GetTrafficCookieValue()||this.GetGuid();try{localStorage.setItem(this._cookieName,o)}catch(n){}this.SetCookie(this._cookieName,o,e,t);return o};e.GetGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,o=e=="x"?t:t&3|8;return o.toString(16)})};e.SetCookie=function(e,t,o,n,i){if(i===void 0){i="/"}var a=new Date;a.setTime(a.getTime()+o*24*60*60*1e3);var r="expires="+a.toUTCString();var i="path="+i;var n="domain="+n;document.cookie=e+"="+t+"; "+r+";"+i+";"+n};e.GetCookieValue=function(e){var t=e+"=";var o=document.cookie.split(";");for(var n=0;n<o.length;n++){var i=o[n].trim();if(i.match(t)!==null){return i.substring(t.length,i.length)}}return null};e._cookieName="__couid";e._doNotTrackCookieName="__codnt";e._doNotSyncPnlData="__codnp";e._panelCookieName="__coipm";e._csStopCookieName="__coscs";e._panelLocalStorageName="__copnl";return e}();var a;(function(e){e[e["PanelOnly"]=0]="PanelOnly";e[e["TrafficOnly"]=1]="TrafficOnly";e[e["TrafficAndPanel"]=2]="TrafficAndPanel";e[e["PanelHits"]=3]="PanelHits"})(a=e.MeasureType||(e.MeasureType={}));var r;(function(e){e[e["Unknown"]=0]="Unknown";e[e["Desktop"]=1]="Desktop";e[e["Tablet"]=2]="Tablet";e[e["Mobile"]=3]="Mobile"})(r=e.DeviceType||(e.DeviceType={}));var c;(function(e){e[e["play"]=0]="play";e[e["pause"]=1]="pause";e[e["stop"]=2]="stop";e[e["ended"]=3]="ended";e[e["ping"]=4]="ping"})(c=e.VideoCommandType||(e.VideoCommandType={}))})(CAnalytics||(CAnalytics={}));
_cInfo = _cInfo || []; new CAnalytics.Measure({ BaseUrl: "https://trafficgateway.research-int.se", PanelOnlyAddress: "https://trafficgateway.research-int.se/PanelInfo/OiDnt", PanelDataSyncAddress: "https://trafficgateway.research-int.se/PanelInfo/OiPnl", SiteId: "c07e5947-c9b3-4922-b1e5-b884cf08532c", MeasureType: 3, CookieExpirationDays: 700, CookieDomain: typeof window != "undefined" && typeof location != "undefined" && typeof window.location.hostname != "undefined" ? "." + window.location.hostname.split(".").slice(-2).join(".") : "hemnet.se", VideoPingInterval: 1e4 }, _cInfo);