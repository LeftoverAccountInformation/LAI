function configureIcons(e){var n=ionic.Platform.isIOS();e.backicon=n?"ion-ios-arrow-left":"ion-android-arrow-back",e.refreshicon=n?"ion-ios-refresh-empty":"ion-android-refresh",e.addicon=n?"ion-ios-plus-empty":"ion-android-add",e.searchicon=n?"ion-ios-search-strong":"ion-android-search",e.closeicon=n?"ion-ios-close-empty":"ion-android-close"}var ioncmtCommonModules=["CoreModule","CoreUiModule","AccountModule","AuthModule","AnalyticsModule","aCarousel"],commonModule=angular.module("CommonModule",ioncmtCommonModules.concat("ionic"));commonModule.constant("IONCMT_COMMON_MODULES_LIST",ioncmtCommonModules),commonModule.constant("IONCMT_DEFAULT_LANG","en"),commonModule.constant("IONCMT_SUPPORTED_LANGS",getContext("applicationConfig.supportedLanguages",["de","en","es","fr","it","ja","pt-BR","pt-PT","ru","sv","zh-CN"])),commonModule.constant("IONCMT_LOCALE_TO_LANG_MAPPING",{"de_*":"de","en_*":"en","es_*":"es","fr_*":"fr","it_*":"it","ja_*":"ja",pt_BR:"pt_BR","pt_*":"pt_PT","ru_*":"ru","sv_*":"sv","zh_*":"zh_CN"}),commonModule.config(["$httpProvider","$compileProvider","$translateProvider","$localeProvider","$translatePartialLoaderProvider","$ionicConfigProvider","$sceDelegateProvider","I18nConfigProvider","$logProvider","IONCMT_DEFAULT_LANG","IONCMT_SUPPORTED_LANGS","IONCMT_LOCALE_TO_LANG_MAPPING","$locationProvider",function(e,n,o,t,a,i,r,l,s,d,c,u,g){if(document.body.className=document.body.className.replace("no-javascript",""),g.hashPrefix(""),getContext("applicationConfig.remoteLogEnabled",!1)){var m=window._LTracker||[];m.push({logglyKey:getContext("applicationConfig.remoteLogKey"),sendConsoleErrors:!1,tag:"CheckMyTrip-Mobile-"+getContext("featureConfig.loggly.TAG")+"-"+getContext("OCTX","TCPROD"),forceHTTPS:!0})}var p=getContext("applicationConfig.angularDebugEnabled",!0),f=5===getContext("applicationConfig.logLevel",5);s.debugEnabled(p);var v=angular.injector(["ng"]).get("$log");f&&v.debug("Configuring debug settings"),n.debugInfoEnabled(p),n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|geo|market):/),f&&v.debug("Configuring HTTP headers and interceptors"),getContext("isMobileApp")&&e.interceptors.push("AppUpgradeResponseInterceptor"),e.interceptors.push("TimeoutRequestInterceptor"),e.interceptors.push("AuthenticationRequestInterceptor"),e.interceptors.push("AuthenticationResponseInterceptor"),e.interceptors.push("RequestInterceptor"),e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",f&&v.debug("Configuring Strict Contextual Escaping");var w=r.resourceUrlWhitelist();w.push(getContext("server")+"**"),r.resourceUrlWhitelist(w),f&&v.debug("Configuring translations/localizations"),l.detectAndConfigureLanguagesAndLocales({IONCMT_DEFAULT_LANG:d,IONCMT_SUPPORTED_LANGS:c,IONCMT_LOCALE_TO_LANG_MAPPING:u}),a.addPart("common"),f&&v.debug("Configuring ionic"),i.backButton.text(""),i.tabs.position("bottom"),i.navBar.positionPrimaryButtons("right"),window.adjustIonicFunctionalitiesForIE();var b=(new UrlService).parseQueryString(window.location.search);b.ST&&(v.warn("Overriding SITECODE from URL to "+b.ST),setContext("SITECODE",b.ST)),b.LN&&(v.warn("Overriding LANGUAGE from URL to "+b.LN),setContext("LANGUAGE",b.LN)),b.OCTX&&(v.warn("Overriding OCTX from URL to "+b.OCTX),setContext("OCTX",b.OCTX))}]),commonModule.run(["$log","$rootScope","$state",function(e,n,o){e=e.getInstance("CommonModule"),e.info("Module started"),configureIcons(n),n.$state=o,ApplicationContext.config=ApplicationContext.config||{}}]),commonModule.provider("CommonRouting",["$stateProvider","$urlRouterProvider",function(e,n){var o=angular.injector(["ng"]).get("$log"),t=this;t.overriddenRoute={},t.MODULES_LIST=[];var a=function(e,n,o,t){var a=angular.extend({},e);return o&&t&&(a.parent=o,a.views={},a.views[t]={templateUrl:e.templateUrl,controller:e.controller},delete a.controller,delete a.templateUrl),n&&(a=angular.extend(a,n)),a},i=function(e,n){for(var o=null,t=0;t<e.length;t++){var a=angular.module(e[t]);if(o=safeAccess(a,"routes."+n,!1)?a.routes[n]:i(a.requires,n))break}return o};t.overrideRoute=function(e,n,r,l){var s=i(t.MODULES_LIST,e);isDefined(s)?t.overriddenRoute[e]=a(s,n,r,l):o.warn("[CommonRoutingProvider] "+e+" not found in any module")},t.duplicateRoute=function(e,n,r,l,s){var d=i(t.MODULES_LIST,e);isDefined(d)?t.overriddenRoute[n]=a(angular.copy(d),r,l,s):o.warn("[CommonRoutingProvider] "+e+" not found in any module")},t.applyRoute=function(o,a){var i={};i=angular.extend(i,o);for(var r=0;r<t.MODULES_LIST.length;r++){var l=angular.module(t.MODULES_LIST[r]);isDefined(l.routes)&&(i=angular.extend(i,l.routes)),i=t.updateRouteDependencies(l,i)}i=angular.extend(i,t.overriddenRoute);for(var s in i)e.state(s,i[s]);n.otherwise(a)},t.updateRouteDependencies=function(e,n){return e.requires.map(function(e){return angular.module(e)}).filter(function(e){return isDefined(e.routes)}).map(function(e){n=angular.extend(n,e.routes),n=t.updateRouteDependencies(e,n)}),n},t.$get=function(){return t}}]),commonModule.controller("DefaultRoutingController",["$log","$timeout","AuthenticationService","OrchestratorChiefService",function(e,n,o,t){e=e.getInstance("DefaultRoutingController"),e.info("Controller Started..."),n(function(){t.next({islogged:o.isLogged()})},0)}]);var ioncmtWebLandingModules=["CoreModule","CoreUiModule","AccountModule","AnalyticsModule"];window.webLandingModule=angular.module("WebLandingModule",ioncmtWebLandingModules.concat(["CommonModule"])),window.webLandingModule.constant("IONCMT_WEB_LANDING_MODULES_LIST",ioncmtWebLandingModules),window.webLandingModule.constant("IONCMT_MODULES_LIST",ioncmtCommonModules.concat(ioncmtWebLandingModules)),window.webLandingModule.config(["$ionicConfigProvider","$translatePartialLoaderProvider",function(e,n){var o=getContext("applicationConfig.dataManagerKeyPrefix","");setContext("applicationConfig.dataManagerKeyPrefix",getContext("SITECODE",o)+":"),e.views.transition("none"),e.scrolling.jsScrolling(!1),n.addPart("web-landing")}]),window.webLandingModule.run(["$log","AnalyticsService","GoogleWebAnalyticsService","WebLandingOrchestratorService","$location","$rootScope","OneTrustCookiesService",function(e,n,o,t,a,i,r){e=e.getInstance("WebLandingModule"),e.info("Module started"),r.init(),n.init({sendTime:!0,registerOnException:!0}),o.init(),t.init(),i.redirectionUrl=a.absUrl().replace("web-landing","web-desktop").replace(/#.*/,"#/triplist")}]),webLandingModule.service("WebLandingOrchestratorService",["$state","$log","OrchestratorChiefService","$location","$window","LayoutService","AuthenticationService",function(e,n,o,t,a,i,r){n=n.getInstance("WebLandingOrchestratorService"),n.info("Service Started...");var l={init:function(){o.register(l),r.hasLandedPage()&&window.toggleLoginForm&&window.toggleLoginForm()},_navigateToInMainOrchestrator:function(e){n.method("_navigateToInMainOrchestrator");var t=o.navigateTo(e);return n.returns(t)},_navigateToTripList:function(e){a.location.href=t.absUrl().replace("web-landing","web-desktop").replace(/#.*/,isDefined(e)?"#"+e:"#/triplist")},_navigateToLogin:function(){return l._navigateToInMainOrchestrator("login")},next:function(e){n.method("next");var t=l.process(e);return isUndefined(t)&&(t=o.check(e)),n.returns(t)},process:function(e){if("default-routing"===e.page)return l._navigateToLogin();if(e.forgotPassword)return i.hideModal(),l._navigateToLogin();if(e.registered)return i.hideModal(),l._navigateToLogin();if(e.islogged){var o=r.getAndRemoveLandedPage();if(isDefined(o)){n.warn("User landed on a secured page before login; overriding navigation"),n.warn('Will go to: "'+o.state.name+'" with params: ',o.params);var t=o.state.url.replace("?","");"trip-expanded"===o.state.name&&!isDefined(o.params.lastName)&&!isDefined(o.params.firstName)&&o.params.tripId.length>10?(t=t.replace(":tripId",o.params.tripId),t=t.replace("/:lastName/:firstName","")):Object.keys(o.params).forEach(function(e){t=t.replace(":"+e,o.params[e])}),l._navigateToTripList(t)}else l._navigateToTripList();return function(){}}},toString:function(){return"WebLandingOrchestratorService"}};return l}]),webLandingModule.directive("welcomeMessage",["AuthenticationService","WebLandingOrchestratorService",function(e,n){var o={restrict:"E",scope:{},controller:["$scope",function(o){n.next({islogged:e.isLogged()})}]};return o}]),webLandingModule.directive("modalLink",["$log","$ionicModal","LayoutService","AnalyticsService",function(e,n,o,t){e=e.getInstance("modalLink");var a={restrict:"E",templateUrl:"web-landing/directives/ModalLinkDirective.html",scope:{page:"@",label:"@",screenView:"@"},controller:["$scope",function(a){e.info("Controller Started..."),a.close=function(){a.modal.hide()},a.show=function(){a.screenView&&t.screenView(a.screenView),n.fromTemplateUrl("web-landing/templates/partial/"+a.page+".html",{scope:a}).then(function(e){a.modal=e,o.showModal(e)}),a.$on("$destroy",function(){o.removeModal(a.modal)}),a.$on("modal.hidden",function(){o.removeModal(a.modal)}),a.$on("modal.removed",function(){o.cleanModal(a.modal)})}}]};return a}]),webLandingModule.controller("WebLandingFooterController",["$scope",function(e){e.currentYear=(new Date).getFullYear()}]),webLandingModule.config(["CommonRoutingProvider","IONCMT_MODULES_LIST",function(e,n){var o={"default-routing":{url:"/default-routing",controller:"DefaultRoutingController"},registration:{url:"/registration",controller:"RegisterController"},home:{url:"/home",secured:!0,templateUrl:"web-landing/templates/HomeView.html"}};e.MODULES_LIST=n,e.overrideRoute("login",{templateUrl:"web-landing/templates/LoginView.html"}),e.applyRoute(o,"/default-routing")}]),webLandingModule.run(["$templateCache",function(e){e.put("web-landing/directives/ModalLinkDirective.html",'<a ng-click="show()" debug-file-path="ModalLinkDirective.html">{{label|translate}}</a>'),e.put("web-landing/templates/HomeView.html",'<ion-view debug-file-path="HomeView.html">\n    <ion-content>\n        <div class="login-welcome-container">\n            <welcome-message></welcome-message>\n            <a id="go-to-triplist" href="{{redirectionUrl}}">\n                <i class="icon-share"></i>\n            </a>\n        </div>\n    </ion-content>\n</ion-view>'),e.put("web-landing/templates/LoginView.html",'<ion-view debug-file-path="LoginView.html">\n    <ion-content>\n        <span ng-show="isLoginToSeeYourTripMessageDisplayed" class="validation log-in-to-see-trip-message ng-hide" translate>\n          account.login.error.logInToSeeYourTrip\n        </span>\n        <form id="login-form" name="forms.loginform" role="form" novalidate>\n            <div class="login-form-container">\n                <div>\n\n                    <cmt-input-email name="email" placeholder="{{&apos;account.login.label.email&apos;|translate}}" model-container="loginInputs" model-key="&apos;email&apos;" required></cmt-input-email>\n\n                    <cmt-input-password name="password" placeholder="{{&apos;account.login.label.password&apos;|translate}}" data="loginInputs.password" required novalidate></cmt-input-password>\n\n                    <modal-link ng-if="isForgotPasswordEnabled" label="account.login.link.forgotPassword" page="ForgotPasswordModal" screen-view="Forgot password" class="forgot-password"></modal-link>\n                </div>\n                <div>\n                    <button type="submit" id="login-submit" ng-click="login()" translate>\n                        account.login.button.login\n                    </button>\n                    <modal-link page="RegistrationModal" label="account.login.link.createAccount" screen-view="Create account" class="register-link"></modal-link>\n                </div>\n            </div>\n        </form>\n    </ion-content>\n</ion-view>'),e.put("web-landing/templates/partial/ForgotPasswordModal.html",'<ion-modal-view class="forgot-password-modal" debug-file-path="ForgotPasswordModal.html">\n    <ion-header-bar class="bar-light bar bar-header">\n        <h1 translate>account.forgotPassword.title.forgotPassword</h1>\n    </ion-header-bar>\n    <ion-content ng-controller="ForgotPasswordController">\n        <form role="form" name="forms.forgotpasswordform" novalidate>\n            <div class="forgotpassword-form-container">\n                <div>\n                    <cmt-input-email name="email" label="{{&apos;account.forgotPassword.label.email&apos;|translate}}" model-container="formInputs" model-key="&apos;email&apos;" required></cmt-input-email>\n\n                    <cmt-input-password ng-if="isPasswordFieldDisplayedInForgotPasswordFlow" name="password" label="{{&apos;account.forgotPassword.label.password&apos;|translate}}" data="formInputs.password" required></cmt-input-password>\n                </div>\n\n                <div class="action-buttons">\n                    <a class="cancel-action" ng-click="close()" translate>core.button.cancel</a>\n                    <button type="submit" id="forgotpassword-submit" ng-click="forgotPassword()" translate>account.forgotPassword.button.submit\n                    </button>\n                </div>\n            </div>\n        </form>\n    </ion-content>\n</ion-modal-view>'),e.put("web-landing/templates/partial/RegistrationModal.html",'<ion-modal-view class="registration-modal" debug-file-path="RegistrationModal.html">\n    <ion-header-bar class="bar-light bar bar-header">\n        <h1 translate>account.registration.title.createAccount</h1>\n    </ion-header-bar>\n    <ion-content ng-controller="RegistrationController">\n        <form role="form" name="forms.registerform" novalidate>\n\n            <div class="first-and-last-name">\n                <cmt-input-text id="registrationFirstname" name="firstname" use-pattern="firstName" label="{{&apos;account.registration.label.firstName&apos;|translate}}" data="registerInputs.firstName" required></cmt-input-text>\n\n                <cmt-input-text id="registrationLastname" name="lastname" use-pattern="lastName" label="{{&apos;account.registration.label.lastName&apos;|translate}}" data="registerInputs.lastName" required></cmt-input-text>\n\n            </div>\n            <cmt-input-email id="registrationEmail" name="email" label="{{&apos;account.registration.label.email&apos;|translate}}" model-container="registerInputs" model-key="&apos;email&apos;" required></cmt-input-email>\n\n            <cmt-input-password id="registrationPassword" name="password" label="{{&apos;account.registration.label.password&apos;|translate}}" data="registerInputs.password" required></cmt-input-password>\n\n            <div class="action-buttons">\n                <a class="cancel-action" ng-click="close()" translate>core.button.cancel</a>\n                <button id="registration-submit" type="submit" ng-click="register()" translate>\n                    account.registration.button.createAccount\n                </button>\n            </div>\n        </form>\n    </ion-content>\n</ion-modal-view>\n')}]);