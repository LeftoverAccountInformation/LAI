(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{104:function(e,t,i){"use strict";var a=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e};function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=i(1);i(0),i(12),i(2),i(7);var o=_(i(454)),s=_(i(455)),c=_(i(456)),l=_(i(457)),u=_(i(458)),g=_(i(463)),d=_(i(464)),h=_(i(465));function _(e){return e&&e.__esModule?e:{default:e}}var p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,Wego.Mixin(r.PolymerElement).with(Wego.NotificationMixin,Wego.LocalizationMixin,Wego.SiteMixin)),a(f,[{key:"baseUrl",value:function(e){return{production:"https://srv.wego.com",staging:"https://srv.wegostaging.com"}[e||"staging"]}}],[{key:"is",get:function(){return"wego-tracking"}},{key:"properties",get:function(){return{page:{type:String,observer:"_onPageChanged"},appName:String,isServiceWorkerRegistered:Boolean,isBot:Boolean,webEngageTrackingQueue:{type:Array,value:[]}}}},{key:"observers",get:function(){return["_pageChange(page, appName)","_webEngageTrackingQueueChanged(webEngageTrackingQueue.*, isServiceWorkerRegistered)"]}}]),a(f,[{key:"connectedCallback",value:function(){(function e(t,i,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,a)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(a):void 0})(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"connectedCallback",this).call(this);try{(window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&window.Wego.app.set("queryParams.wg_campaign","homescreen")}catch(e){}}},{key:"_onPageChanged",value:function(e,t){e&&t&&this.cookieBot.revalidate(),"root"===e&&(this.gtm._trackPage("homepage"),this.genzo._visit("homepage"),this.genzoV2.pageView("homepage"))}},{key:"_pageChange",value:function(e,t){if("home"===e){var i="flights"===t?"flightsHomepage":"hotelsHomepage";this.gtm._trackPage(i),this.genzo._visit(i),this.genzoV2.pageView(i)}"search"!==e||"flights"!==t&&"hotels"!==t||this.gtm.trackEvent(t,"view-result")}},{key:"_webEngageTrackingQueueChanged",value:function(e,t){if(t)for(var i=this.webEngage;0<this.webEngageTrackingQueue.length;){var a=this.webEngageTrackingQueue.shift();switch(a.trackingType){case"flight-search-created":i.trackFlightSearch(a.data);break;case"flight-view":i.trackFlightView(a.data);break;case"flight-click":i.trackFlightClick(a.data);break;case"facilitated-booking":i.trackFacilitatedBooking(a.data);break;case"hotel-search-created":case"hotel-search-created-map":i.trackHotelSearch(a.data);break;case"hotel-view":i.trackHotelView(a.data);break;case"hotel-click":i.trackHotelClick(a.data);break;case"login":i.login(a.data);break;case"logout":i.logout();break;case"gdpr":i.gdprRequest(a.data);break;case"load-script":i.initializeWebEngageScript()}}}},{key:"getHomepageTitle",value:function(){var e=this.page;return"root"===e?"homepage":"home"===e?this.appName+"Homepage":void 0}},{key:"onNotify",value:function(e,t,i){var a=this;switch(t){case"flight-search-created":a.push("webEngageTrackingQueue",{trackingType:"flight-search-created",data:i}),a.genzo._search("flights",i),a.genzoV2.pageView("flightsSearch",i);break;case"flight-view":a.genzoV2.pageView("flightsDetail",Object.assign({},i.search,{flightId:i.flight.id})),a.push("webEngageTrackingQueue",{trackingType:"flight-view",data:i});break;case"flight-click":a.push("webEngageTrackingQueue",{trackingType:"flight-click",data:i});break;case"facilitated-booking":a.push("webEngageTrackingQueue",{trackingType:"facilitated-booking",data:i});break;case"flight-results-created":a.gtm._trackPage("flightsSearch",i);break;case"hotel-search-created":a.push("webEngageTrackingQueue",{trackingType:"hotel-search-created",data:i}),a.genzo._search("hotels",i),a.genzoV2.pageView("hotelsSearch",i);break;case"hotel-search-created-map":a.push("webEngageTrackingQueue",{trackingType:"hotel-search-created-map",data:i});break;case"shortlist-hotel":a.gtm.trackEvent("hotels","shortlist","toggle");break;case"share-shortlist-hotel":a.gtm.trackEvent("hotels","shortlist","share");break;case"hotel-view":a.push("webEngageTrackingQueue",{trackingType:"hotel-view",data:i});break;case"hotel-click":a.push("webEngageTrackingQueue",{trackingType:"hotel-click",data:i});break;case"hotel-results-created":a.gtm._trackPage("hotelsSearch",i);break;case"hotel-details-created":a.gtm._trackPage("hotelsDetail",i),a.genzo._visit("hotelsDetail",i),a.genzoV2.pageView("hotelsDetail",i);break;case"hotel-search-views":a.genzo._searchView("hotels",i);break;case"flight-search-views":a.genzo._searchView("flights",i);break;case"external-visit":a.genzo._externalVisit(i);break;case"ga-home-event":case"ga-users-event":case"ga-flights-event":case"ga-hotels-event":var n=t.replace(/^ga\-([a-z]+?)\-event/i,"$1"),r=i||{},o=r.action,s=r.label;a.gtm.trackEvent(n,o,s||("home"===n?this.getHomepageTitle():""));break;case"ga-hotels-timing-event":case"ga-flights-timing-event":var c=t.replace(/^ga\-([a-z]+?)\-timing\-event/i,"$1"),l=i||{},u=l.variable,g=l.value,d=l.label;a.gtm.trackTimingEvent(c,u,g,d);break;case"login":a.push("webEngageTrackingQueue",{trackingType:"login",data:i});break;case"logout":a.push("webEngageTrackingQueue",{trackingType:"logout"});break;case"request-user-data":a.genzo._userEvent(i),a.push("webEngageTrackingQueue",{trackingType:"gdpr",data:Object.assign({},i,{locale:a.locale})});break;case"new-session":a.genzoV2.newSession();break;case"reset-cookie-policy":a.cookieBot.renew()}}}]),f);function f(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this)),t=e,i=new d.default,a=new h.default,n=window.Wego.ENV;document.addEventListener("newSession",function(){t.postNotification("new-session")}),t.cookieBot=new o.default(t.locale,t.currentSite.code,t.isBot,"b546dcce-d571-46f7-bf59-1bb4babd242c");new s.default(i);return t.gtm=new c.default(n,t.baseUrl(n),t.currentSite,t.locale,i,t.isBot),t.genzo=new l.default(n,t.baseUrl(n),t.currentSite,t.locale,i,a,t.isBot),t.genzoV2=new u.default(n,t.baseUrl(n),t.currentSite,t.locale,i,a,t.isBot),t.webEngage=new g.default(n,t.rtl,t.isBot),t.push("webEngageTrackingQueue",{trackingType:"load-script"}),t.addObservers("flight-search-created","flight-view","flight-click","facilitated-booking","flight-results-created","hotel-search-created","hotel-search-created-map","hotel-view","hotel-click","hotel-results-created","hotel-details-created","shortlist-hotel","share-shortlist-hotel","hotel-search-views","flight-search-views","external-visit","ga-home-event","ga-users-event","ga-flights-event","ga-hotels-event","ga-hotels-timing-event","ga-flights-timing-event","login","logout","request-user-data","new-session","reset-cookie-policy"),e}window.customElements.define(p.is,p)},285:function(e,t,i){"use strict";e.exports=function(e,t){var i="000000000"+e;return i.substr(i.length-t)}},454:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"insertCookieBotScript",value:function(e,t,i,a){var r=0<arguments.length&&void 0!==e?e:"en",n=i,o=a;return/FR|DE|IE|IT|NL|PL|PT|ES|SE|GB/.test(t)?n||!o?Promise.reject(n?"Is bot.":"Invalid cookie bot Id."):new Promise(function(e){var t="cookieBot",i=document,a=i.getElementsByTagName("script")[0];if(!i.getElementById(t)){var n=i.createElement("script");return n.id=t,n.src="https://consent.cookiebot.com/uc.js",n.dataset.cbid=o,n.dataset.blockingmode="auto",n.dataset.culture=r.toUpperCase(),window.addEventListener("CookiebotOnDialogInit",function(){e(window.cookieBot)}),a.parentNode.insertBefore(n,a)}e(window.cookieBot)}):Promise.reject("Cookie bot not supported.")}},{key:"revalidate",value:function(){var e=this;return e.insertCookieBotScript(e.locale,e.currentSiteCode,e.isBot,e.cookieBotId).then(function(e){e.runScripts()})}},{key:"renew",value:function(){var e=this;return e.insertCookieBotScript(e.locale,e.currentSiteCode,e.isBot,e.cookieBotId).then(function(e){e.renew()})}}]),r);function r(e,t,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"1949307b-b5e0-4b47-9f06-95d797fd3d76";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=this;n.locale=e,n.currentSiteCode=t,n.isBot=i,n.cookieBotId=a,n.insertCookieBotScript(e,t,i,a)}t.default=n},455:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"initializeIdentifierCookies",value:function(){var e=this,t=e.cookieHelper.getCookie("wego_analytics_client_id");e.wegoAnalyticsClientIdCookie=e.cookieHelper.setPredefinedCookie("wego_analytics_client_id",t.value),e.cookieHelper.getCookie("wego_visitor_id"),e.cookieHelper.getCookie("wego_ts_code");var i=e.cookieHelper.getCookie("wego_visits_cnt").value;e.cookieHelper.setCookies({wego_visits_cnt:(parseInt(i,10)+1).toString()});var a=e.cookieHelper.getCookie("wego_analytics_client_session_id");e.wegoAnalyticsClientSessionIdCookie=e.cookieHelper.setPredefinedCookie("wego_analytics_client_session_id",a.value),a.expiry&&e.notifyNewSession();var n=e.cookieHelper.getCookie("wego_session_id");e.wegoSessionIdCookie=e.cookieHelper.setPredefinedCookie("wego_session_id",n.value)}},{key:"handleClickEvent",value:function(){var e=this,t=Date.now(),i=e.wegoAnalyticsClientIdCookie,a=(i.expiry.getTime()-t)/6e4;e.wegoAnalyticsClientIdCookie=0<a?e.cookieHelper.setPredefinedCookie("wego_analytics_client_id",i.value):e.cookieHelper.setPredefinedCookie("wego_analytics_client_id");var n=e.wegoAnalyticsClientSessionIdCookie;0<(n.expiry.getTime()-t)/6e4?e.wegoAnalyticsClientSessionIdCookie=e.cookieHelper.setPredefinedCookie("wego_analytics_client_session_id",n.value):(e.wegoAnalyticsClientSessionIdCookie=e.cookieHelper.setPredefinedCookie("wego_analytics_client_session_id"),e.notifyNewSession());var r=e.wegoSessionIdCookie,o=(r.expiry.getTime()-t)/6e4;e.wegoSessionIdCookie=0<o?e.cookieHelper.setPredefinedCookie("wego_session_id",r.value):e.cookieHelper.setPredefinedCookie("wego_session_id")}},{key:"notifyNewSession",value:function(){document.dispatchEvent(new CustomEvent("newSession",{detail:null,bubbles:!0,composed:!0}))}}]),r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);this.cookieHelper=e,this.initializeIdentifierCookies(),document.addEventListener("click",this.handleClickEvent.bind(this))}t.default=n},456:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e};function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=(a(c,[{key:"gtmAuth",get:function(){return{production:"JhTkGQKxflcbelVyldTavg",staging:"obU596jZkQ8pXq1df8v0OA"}[this.env]}},{key:"gtmPreview",get:function(){return{production:"env-2",staging:"env-5"}[this.env]}}]),a(c,[{key:"trackEvent",value:function(e,t,i){this._pushData({event:"eventTracked",eventCategory:e,eventAction:t,eventLabel:i})}},{key:"trackTimingEvent",value:function(e,t,i,a){var n={event:"eventTiming",timingCategory:e,timingVar:t,timingValue:i};a&&(n.timingLabel=a),this._pushData(n)}},{key:"_initializeGTMScript",value:function(){var s=this;return s.isBot?Promise.resolve(null):new Promise(function(e){var t=window,i=document,a="dataLayer",n=i.getElementsByTagName("script")[0],r="gtmScript";if(!i.getElementById(r)){t[a]=t[a]||[],t[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var o=i.createElement("script");return o.id=r,o.async=!0,o.dataset.cookieconsent="ignore",o.src="https://www.googletagmanager.com/gtm.js?id=GTM-K5FWXG4&gtm_auth="+s.gtmAuth+"&gtm_preview="+s.gtmPreview+"&gtm_cookies_win=x",o.onload=function(){e(t.dataLayer)},n.parentNode.insertBefore(o,n)}e(t.dataLayer)})}},{key:"_getGaPushdata",value:function(){var e="ga:pushdata";try{var t=window.sessionStorage.getItem(e);return window.sessionStorage.removeItem(e),JSON.parse(t)}catch(e){return null}}},{key:"_trackPage",value:function(e,t){var i=this,a=void 0;switch(e){case"homepage":a={page_name:"Main Homepage",page_type:"homepage",product:"home"},t=Object.assign({},a,i._defaultData());break;case"hotelsHomepage":a={page_name:"Hotels Homepage",page_type:"hotels_homepage",product:"hotels"},t=Object.assign({},a,i._defaultData());break;case"hotelsSearch":var n=t.search;a={page_name:"Hotels Results|"+n.country.name+"|"+(n.city&&n.city.name)||!1,page_type:"hotels_search_results",product:"hotels"};var r=t.hotel.images,o={hotel_id:t.hotel.id,image_url_hotels:r&&r[0]&&r[0].url||"",rates:t.hotel.rates[0]?t.hotel.rates[0].price.amount:""};t=Object.assign({},a,i._hotelsSearchData(t.search),i._defaultData(),o);break;case"hotelsDetail":a={page_name:"Hotels Details|"+t.city.countryName+"|"+t.city.name+"|"+t.id+"|"+t.name+", "+t.city.name,page_type:"hotels_detail_page_live",product:"hotels"};var s=t.reviews?t.reviews.find(function(e){return"ALL"===e.reviewerGroup}):t.reviews;t=Object.assign({},a,i._hotelsDetailData(t,s),i._defaultData());break;case"flightsHomepage":a={page_name:"Flights Homepage",page_type:"flights_homepage",product:"flights"},t=Object.assign({},a,i._defaultData());break;case"flightsSearch":a={page_name:"Flights Results|"+i._flightsSearchName(t.search),page_type:"flights_search_results",product:"flights"};var c={airline_codes:t.flight.code,image_url_flights_outbound:t.flight.legs[0]?"https://res.cloudinary.com/wego/image/upload/c_fit,w_100,h_100/v20170726/flights/airlines_square/"+t.flight.legs[0].airlineCodes[0]:"",rates:t.flight.fares[0]?t.flight.fares[0].price.amount:""};2===t.flight.legs.length&&(c.image_url_flights_inbound="https://res.cloudinary.com/wego/image/upload/c_fit,w_100,h_100/v20170726/flights/airlines_square/"+t.flight.legs[1].airlineCodes[0]),t=Object.assign({},a,i._flightSearchData(t.search),i._defaultData(),c)}t&&i._pushData(t)}},{key:"_pushData",value:function(t){this._initializeGTMScript().then(function(e){e&&e.push(t)})}},{key:"_defaultData",value:function(){var e=this,t=e.cookieHelper.getCookie("wego_ts_code"),i=e.cookieHelper.getCookie("wego_user_id");return{client_type:"WEB_APP",device_type:"DESKTOP",url:window.location.href,domain:window.location.hostname,locale:e.locale,site_code:e.currentSite.code,user_country_code:e.geoCountryCode,session_id:e.cookieHelper.getCookie("wego_session_id").value,ts_code:t?t.value:null,visitor_id:e.cookieHelper.getCookie("wego_visitor_id").value,user_id:i?i.value:null,event:"pageChanged"}}},{key:"_hotelsSearchData",value:function(e){var t={check_in:e.checkIn,check_out:e.checkOut,district_id:e.district?e.district.id:"",guest_count:e.guestsCount,children_count:e.rooms.reduce(function(e,t){return e.childrenCount+t.childrenCount}),country_code:e.country.code,rooms_count:e.roomsCount,search_id:e.id,currency_code:e.currencyCode};if("REGION"===e.searchType){var i=[],a=[],n=[];e.region.cities.forEach(function(e){i.push(e.code),a.push(e.name),n.push(e.code)}),t.location_id=i.join(":"),t.location_name=a.join(":"),t.location_code=n.join(":")}else t.location_id=e.city.code,t.location_name=e.city.name,t.location_code=e.city.code;return t}},{key:"_hotelsDetailData",value:function(e,t){return{hotel_id:e.id,hotel_name:e.name,hotel_star:e.star,hotel_review_score:t&&t.score?t.score:""}}},{key:"_flightsSearchName",value:function(e){var t=e.legs[0];return(t.departureAirportCode||t.departureCityCode)+"|"+(t.arrivalAirportCode||t.arrivalCityCode)+"|"+t.departureCity.enName+", "+t.departureCity.countryEnName+" to "+t.arrivalCity.enName+", "+t.arrivalCity.countryEnName}},{key:"_flightSearchData",value:function(e){var t,i,a=e.legs[0],n={legs:e.legs.map(function(e){return{departure_airport_code:e.departureAirport?e.departureAirport.code:"",departure_city_code:e.departureCity.code,departure_city_name:e.departureCity.enName,departure_country_code:e.departureCity.countryCode,departure_country_name:e.departureCity.countryEnName,departure_continent_name:e.departureCity.worldRegionEnName,departure_continent_code:e.departureCity.worldRegionCode,arrival_airport_code:e.arrivalAirport?e.arrivalAirport.code:"",arrival_city_code:e.arrivalCity.code,arrival_city_name:e.arrivalCity.enName,arrival_country_code:e.arrivalCity.countryCode,arrival_country_name:e.arrivalCity.countryEnName,arrival_continent_name:e.arrivalCity.worldRegionEnName,arrival_continent_code:e.arrivalCity.worldRegionCode,outbound_date:e.outboundDate}}),outbound_date:a.outboundDate,cabin_class:e.cabin,adults_count:e.adultsCount,children_count:e.childrenCount,infants_count:e.infantsCount,search_id:e.id,currency_code:e.currencyCode};if(1===e.legs.length)n.trip_type="oneway";else if(2===e.legs.length){var r=e.legs[1],o=["departureCityCode","departureAirportCode","arrivalCityCode","arrivalAirportCode"];(t=a)===(i=r)||t[o[0]]===i[o[2]]&&t[o[1]]===i[o[3]]&&t[o[2]]===i[o[0]]&&t[o[3]]===i[o[1]]?(n.trip_type="roundtrip",n.inbound_date=r.outboundDate):n.trip_type="multiCity"}else n.trip_type="multiCity";if("multiCity"===n.trip_type){var s=e.legs[e.legs.length-1];a.departureCityCode!==s.arrivalCityCode&&a.departureAirportCode!==s.arrivalAirportCode||(n.inbound_date=s.outboundDate)}return n}},{key:"_loadGeoCountryCode",value:function(e){var i=this,t=i.cookieHelper.getCookie("user_country_code"),a=t?t.value:null;a?i.geoCountryCode=a:fetch(e+"/analytics/v2/context",{method:"GET"}).then(function(e){e.ok&&e.json().then(function(e){var t=e.geo.country_code;i.geoCountryCode=t,i.cookieHelper.setCookies({user_country_code:t})})})}}]),c);function c(e,t,i,a,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var o=this;o.env=e,o.currentSite=i,o.locale=a,o.cookieHelper=n,o.isBot=r,o._loadGeoCountryCode(t);var s=o._getGaPushdata();s&&o._pushData(s)}t.default=r},457:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n={1:"ONE_STAR",2:"TWO_STAR",3:"THREE_STAR",4:"FOUR_STAR",5:"FIVE_STAR"},r=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(c,[{key:"_clientData",value:function(){var e=this,t=e.localStorageHelper.localStorageGet("auth",!0),i={app_type:"WEB_APP",resolution:window.screen.availHeight+"x"+window.screen.availWidth,id:e.cookieHelper.getCookie("wego_analytics_client_id").value,session_id:e.cookieHelper.getCookie("wego_analytics_client_session_id").value,wego_visitor_id:e.cookieHelper.getCookie("wego_visitor_id").value,wego_session_id:e.cookieHelper.getCookie("wego_session_id").value};return t&&(i.user_hash=t.userHash),i}},{key:"_pageData",value:function(e,t){var i={locale:this.locale,site_code:this.currentSite.code,url:window.location.href,referrer_url:document.referrer},a=void 0,n=void 0;switch(e){case"homepage":a="Main Homepage",n="homepage";break;case"hotelsHomepage":a="Hotels Homepage",n="hotels_homepage";break;case"hotelsSearch":case"hotelsSearchViews":a="Hotels Results|"+t.country.name+"|"+(t.city&&t.city.name)||!1,n="hotels_search_results";break;case"hotelsDetail":a="Hotels Details|"+t.city.countryName+"|"+t.city.name+"|"+t.id+"|"+t.name+", "+t.city.name,n="hotels_detail_page_live";break;case"flightsHomepage":a="Flights Homepage",n="flights_homepage";break;case"flightsSearch":a="Flights Results|"+this._flightsSearchName(t),n="flights_search_results";break;case"preferences":a="Preferences",n="preferences_homepage"}return a&&(i.name=a),n&&(i.base_type=n),i}},{key:"_userData",value:function(){var e=this.localStorageHelper.localStorageGet("auth",!0);return e&&e.userHash?{email:e.email}:null}},{key:"_campaignData",value:function(e){var t=this.cookieHelper.getCookie("wego_ts_code"),i={source:this.cookieHelper.getQueryParam("wg_source"),ts_code:t?t.value:null};return e&&(i.sub_id=e.id),i}},{key:"_searchData",value:function(e,t){switch(e){case"hotels":var i={id:t.id,check_in:t.checkIn,check_out:t.checkOut,country_code:t.country.code,guests_count:t.guestsCount,rooms_count:t.roomsCount};return"REGION"===t.searchType?(i.region_id=t.region.id,i.region_name=t.region.name):(i.city_code=t.city.code,i.city_name=t.city.name),i;case"flights":var a=t.legs.map(function(e,t){var i={departure_city_code:e.departureCity.code,departure_country_code:e.departureCity.countryCode,arrival_city_code:e.arrivalCity.code,arrival_country_code:e.arrivalCity.countryCode,outbound_date:e.outboundDate,order:t};return e.departureAirport&&(i.departure_airport_code=e.departureAirport.code),e.arrivalAirport&&(i.arrival_airport_code=e.arrivalAirport.code),i});return{id:t.id,adults_count:t.adultsCount,children_count:t.childrenCount,infants_count:t.infantsCount,cabin:t.cabin.toUpperCase(),legs:a}}}},{key:"_flightsSearchName",value:function(e){var t=e.legs[0];return(t.departureAirportCode||t.departureCityCode)+"|"+(t.arrivalAirportCode||t.arrivalCityCode)+"|"+t.departureCity.enName+", "+t.departureCity.countryEnName+" to "+t.arrivalCity.enName+", "+t.arrivalCity.countryEnName}},{key:"_genzoHttpClient",value:function(e,t){return this.isBot?Promise.resolve(null):fetch(""+this.baseUrl+e,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",body:JSON.stringify(t)})}},{key:"_buildVisitData",value:function(e,t){var i=this;return{id:i.cookieHelper.generateUUID(),user:i._userData(),client:i._clientData(),campaign:i._campaignData(),page:i._pageData(e,t),created_at:(new Date).toISOString()}}},{key:"_visit",value:function(e,t){var i=this._buildVisitData(e,t);"hotelsDetail"===e&&(i.hotel_id=t.id),this._genzoHttpClient("/analytics/v2/visits",i)}},{key:"_externalVisit",value:function(e){for(var t=["name","base_type","subtype","url"],i=this._buildVisitData(e.pageType),a=i.page,n=t.length;n--;){var r=t[n];e[r]&&(a[r]=e[r])}a.referrer_url=location.href,this._genzoHttpClient("/analytics/v2/visits/external",i)}},{key:"_userEvent",value:function(e){var t=this._buildUserEventData(e);this._genzoHttpClient("/analytics/v3/users",t)}},{key:"_buildUserEventData",value:function(e){return{id:this.cookieHelper.generateUUID(),user_event_type:e.eventName,client:this._clientData(),campaign:this._campaignData(),page:this._pageData("preferences",e),created_at:(new Date).toISOString()}}},{key:"_search",value:function(e,t){var i=this,a={id:t.id,user:i._userData(),client:i._clientData(),campaign:i._campaignData(t),created_at:(new Date).toISOString(),search_mode:t.autoSearch?"AUTOMATIC":"MANUAL"};switch(e){case"hotels":a.page=i._pageData("hotelsSearch",t),a.search=i._searchData("hotels",t);break;case"flights":a.page=i._pageData("flightsSearch",t),a.search=i._searchData("flights",t)}i._genzoHttpClient("/analytics/v2/"+e+"/searches",a)}},{key:"_searchView",value:function(e,t){var i=this,a=new Date,n={id:i.cookieHelper.generateUUID(),search_id:t.search.id,user:i._userData(),client:i._clientData(),campaign:i._campaignData(t),page:i._pageData("hotels"===e?"hotelsSearchViews":"flightsSearchViews",t.search),action:t.actionType,created_at:a.toISOString()};"hotels"===e&&t.hotels?(n.viewing_hotels=i._viewingHotelsData(t.fromIndex,t.hotels,t.isNightlyAverage),n=Object.assign({},n,i._hotelFilterData(t.filter,t.displayedFilter,t.isNightlyAverage),i._hotelSortData(t.sort))):"flights"===e&&t.flights&&(n.viewing_flights=i._viewingFlightsData(t.fromIndex,t.flights,t.search,t.isPriceTypeTotal),n=Object.assign({},n,i._flightFilterData(t.filter,t.displayedFilter,t.isPriceTypeTotal),i._flightSortData(t.sort))),i._genzoHttpClient("/analytics/v2/"+e+"/search_views",n)}},{key:"_viewingFlightsData",value:function(i,e){if(e&&0<e.length)return e.map(function(e,t){return{position:i+t+1,id:e.id}})}},{key:"_flightFilterData",value:function(e,i,t){var a=this,n={selected_price_option:t?"total_price":"per_person"};if(e.priceRange&&(n.selected_amount_min_usd=e.priceRange.min,n.selected_amount_max_usd=e.priceRange.max),e.stopCodes&&0<e.stopCodes.length&&(n.selected_stop_types=e.stopCodes),e.departureTimeMinutesRanges&&0<e.departureTimeMinutesRanges.length)for(var r=0;r<e.departureTimeMinutesRanges.length;r++){var o=e.departureTimeMinutesRanges[r];0===o.legIndex?(n.selected_outbound_departure_day_time_min=o.min,n.selected_outbound_departure_day_time_max=o.max):1===o.legIndex&&(n.selected_inbound_departure_day_time_min=o.min,n.selected_inbound_departure_day_time_max=o.max)}if(e.arrivalTimeMinutesRanges&&0<e.arrivalTimeMinutesRanges.length)for(r=0;r<e.arrivalTimeMinutesRanges.length;r++){var s=e.arrivalTimeMinutesRanges[r];0===s.legIndex?(n.selected_outbound_arrival_day_time_min=s.min,n.selected_outbound_arrival_day_time_max=s.max):1===s.legIndex&&(n.selected_inbound_arrival_day_time_min=s.min,n.selected_inbound_arrival_day_time_max=s.max)}if(e.airlineCodes&&0<e.airlineCodes.length&&i.airlines&&0<i.airlines.length&&(n.selected_airline_codes=e.airlineCodes,n.selected_airline_names=e.airlineCodes.map(function(t){return i.airlines.find(function(e){return e.code===t}).name})),e.allianceCodes&&0<e.allianceCodes.length&&i.alliances&&0<i.alliances.length&&(n.selected_alliance_codes=e.allianceCodes,n.selected_alliance_names=e.allianceCodes.map(function(e){return a.t(e)})),e.providerTypes&&0<e.providerTypes.length&&(n.selected_booking_option=e.providerTypes.map(function(e){return"instant"===e?"instant_book":"book_direct"})),(e.originAirportCodes&&0<e.originAirportCodes.length||e.destinationAirportCodes&&0<e.destinationAirportCodes.length)&&(n.selected_origin_destination=[].concat(e.originAirportCodes).concat(e.destinationAirportCodes).filter(function(e){return e})),e.stopoverAirportCodes&&0<e.stopoverAirportCodes.length&&i.stopoverAirports&&0<i.stopoverAirports.length&&(n.selected_stopover_airport_codes=e.stopoverAirportCodes,n.selected_stopover_airport_names=e.stopoverAirportCodes.map(function(t){return i.stopoverAirports.find(function(e){return e.code===t}).name})),e.durationMinutesRanges&&0<e.durationMinutesRanges.length)for(r=0;r<e.durationMinutesRanges.length;r++){var c=e.durationMinutesRanges[r];0===c.legIndex?(n.selected_outbound_duration_min=c.min,n.selected_outbound_duration_max=c.max):1===c.legIndex&&(n.selected_inbound_duration_min=c.min,n.selected_inbound_duration_max=c.max)}return e.stopoverDurationMinutesRange&&(n.selected_stopover_duration_min=e.stopoverDurationMinutesRange.min,n.selected_stopover_duration_max=e.stopoverDurationMinutesRange.max),e.itineraryOptions&&0<e.itineraryOptions.length&&(n.selected_flight_experience=e.itineraryOptions.map(function(e){return"NOT_OVERNIGHT"===e?"no_overnight_flight":"no_long_stopover"})),e.fareTypes&&0<e.fareTypes.length&&(n.selected_fare_types=e.fareTypes),n}},{key:"_flightSortData",value:function(e){var t={selected_order_type:e.by};return"PRICE"===e.by&&(t.selected_order_type="ASC"===e.order?"MIN_PRICE_FIRST":"MAX_PRICE_FIRST"),"DURATION"===e.by&&(t.selected_order_type="MIN_DURATION_FIRST"),"OUTBOUND_DEPARTURE_TIME"===e.by&&(t.selected_order_type="ASC"===e.order?"MIN_OUTBOUND_DEPARTURE_DAY_TIME_FIRST":"MAX_OUTBOUND_DEPARTURE_DAY_TIME_FIRST"),"INBOUND_DEPARTURE_TIME"===e.by&&(t.selected_order_type="ASC"===e.order?"MIN_INBOUND_DEPARTURE_DAY_TIME_FIRST":"MAX_INBOUND_DEPARTURE_DAY_TIME_FIRST"),t}},{key:"_viewingHotelsData",value:function(i,e){if(e&&0<e.length)return e.map(function(e,t){return{position:i+t+1,id:e.id.toString()}})}},{key:"_hotelFilterData",value:function(e,i,t){var a={selected_price_option:t?"nightly_average":"trip_total",selected_hotel_deal:!!e.deals};return e.name&&(a.selected_hotel_name=e.name),e.stars&&(a.selected_star_types=e.stars.map(function(e){return n[e]})),e.priceRange&&(a.selected_amount_min_usd=e.priceRange.min,a.selected_amount_max_usd=e.priceRange.max),e.reviewScoreRange&&(a.selected_review_score_min=e.reviewScoreRange.min,a.selected_review_score_max=e.reviewScoreRange.max),e.reviewerGroups&&0<e.reviewerGroups.length&&(a.selected_guest_rate_type=e.reviewerGroups),e.districtIds&&0<e.districtIds.length&&i.districts&&0<i.districts.length&&(a.selected_district_codes=e.districtIds,a.selected_district_names=e.districtIds.map(function(t){return i.districts.find(function(e){return e.code===t}).name})),e.rateAmenityIds&&0<e.rateAmenityIds.length&&i.rateAmenities&&0<i.rateAmenities.length&&(a.selected_free_amenity_codes=e.rateAmenityIds,a.selected_free_amenity_names=e.rateAmenityIds.map(function(t){return i.rateAmenities.find(function(e){return e.code===t}).name})),e.amenityIds&&0<e.amenityIds.length&&i.amenities&&0<i.amenities.length&&(a.selected_amenity_codes=e.amenityIds,a.selected_amenity_names=e.amenityIds.map(function(t){return i.amenities.find(function(e){return e.code===t}).name})),e.chainIds&&0<e.chainIds.length&&i.chains&&0<i.chains.length&&(a.selected_chains_codes=e.chainIds,a.selected_chains_names=e.chainIds.map(function(t){return i.chains.find(function(e){return e.code===t}).name})),e.brandIds&&0<e.brandIds.length&&i.brands&&0<i.brands.length&&(a.selected_brand_codes=e.brandIds,a.selected_brand_names=e.brandIds.map(function(t){return i.brands.find(function(e){return e.code===t}).name})),e.propertyTypeIds&&0<e.propertyTypeIds.length&&i.propertyTypes&&0<i.propertyTypes.length&&(a.selected_hotel_type_codes=e.propertyTypeIds,a.selected_hotel_type_names=e.propertyTypeIds.map(function(t){return i.propertyTypes.find(function(e){return e.code===t}).name})),a}},{key:"_hotelSortData",value:function(e){var t={selected_order_type:e.by};return"PRICE"===e.by&&(t.selected_order_type="ASC"===e.order?"MIN_PRICE_FIRST":"MAX_PRICE_FIRST"),"STAR"===e.by&&(t.selected_order_type="ASC"===e.order?"MIN_STAR_FIRST":"MAX_STAR_FIRST"),t}},{key:"t",value:function(e,t){if(!(window.Wego&&window.Wego.strings&&arguments&&arguments.length))return"";var i=window.Wego.strings[e];if(!i)return e;if(i===Object(i)){var a=[i.zero,i.one];i=a[t]||i.other||a[1]||a[0]}for(var n=1;n<arguments.length;n++){var r="{"+(n-1)+"}";i=i.replace(r,this._n(arguments[n]))}return i}}]),c);function c(e,t,i,a,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var s=this;s.env=e,s.baseUrl=t,s.currentSite=i,s.locale=a,s.cookieHelper=n,s.localStorageHelper=r,s.isBot=o}t.default=r},458:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e};function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,o=i(459),s=(r=o)&&r.__esModule?r:{default:r},c=i(462);var l="genzoTrackingQueue",u=(a(g,[{key:"triggerMissedTracking",value:function(){for(var e=this.trackingQueue;0<e.length;){this.isRunning=!0;var t=e.shift();this.localStorageHelper.localStorageSave(l,e,!0),this.genzoHttpClientWithRetries(t.url,t.data)}}},{key:"trackingQueueChangedHandler",value:function(){this.localStorageHelper.localStorageSave(l,this.trackingQueue,!0)}},{key:"genzoHttpClient",value:function(e,t){return this.isBot?Promise.resolve(null):fetch(e,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",body:JSON.stringify(t)}).then(function(e){if(!e.ok&&422!==e.status)throw""})}},{key:"genzoHttpClientWithRetries",value:function(i,a,e){var n=2<arguments.length&&void 0!==e?e:3,r=this;if(0===n||!navigator.onLine)return r.trackingQueue.push({url:i,data:a}),document.dispatchEvent(new CustomEvent("trackingQueueChanged"));r.genzoHttpClient(i,a).catch(function(e){var t=--n;setTimeout(function(){return r.genzoHttpClientWithRetries(i,a,t)},0!=t?3e3:0)})}},{key:"isMultiCity",value:function(e){if(e.length<2)return!1;var t=["departureCityCode","departureAirportCode","arrivalCityCode","arrivalAirportCode"],i=e[0],a=e[1];return!(2===e.length&&i[t[0]]===a[t[2]]&&i[t[1]]===a[t[3]]&&i[t[2]]===a[t[0]]&&i[t[3]]===a[t[1]])}},{key:"clientData",value:function(){var e={id:this.cookieHelper.getCookie("wego_analytics_client_id").value,session_id:this.cookieHelper.getCookie("wego_analytics_client_session_id").value},t=this.localStorageHelper.localStorageGet("auth",!0);return t&&(e.user_hash=t.userHash),e}},{key:"flightsName",value:function(e,t){var i=e.legs[0],a=t?"Flights Results":"Flights Details";return this.isMultiCity(e.legs)?a+"|"+e.legs.map(function(e){return(e.departureAirportCode||e.departureCityCode)+"-"+(e.arrivalAirportCode||e.arrivalCityCode)}).join("|"):a+"|"+(i.departureAirportCode||i.departureCityCode)+"|"+(i.arrivalAirportCode||i.arrivalCityCode)+"|"+i.departureCity.enName+", "+i.departureCity.countryEnName+" to "+i.arrivalCity.enName+", "+i.arrivalCity.countryEnName}},{key:"pageData",value:function(e,t){var i=this,a=void 0,n=void 0,r=void 0,o=void 0;switch(e){case"homepage":a="Main Homepage",o=r=n="homepage";break;case"flightsHomepage":a="Flights Homepage",n="flights",o=r="flights_homepage";break;case"flightsSearch":a=i.flightsName(t,!0),n="flights",r="flights_search_results",o=(i.isMultiCity(t.legs)?"multicity_":"")+"flights_search_results";break;case"flightsDetail":a=i.flightsName(t),n="flights",r="flights_detail_page",o=(i.isMultiCity(t.legs)?"multicity_":"")+"flights_detail_page";break;case"hotelsHomepage":a="Hotels Homepage",n="hotels",o=r="hotels_homepage";break;case"hotelsSearch":var s=t||{},c=s.country,l=s.city,u=void 0===l?{}:l,g=s.region,d=void 0===g?{}:g;a="Hotels Results|"+(void 0===c?{}:c).name+"|"+(u&&u.name||d&&d.name),n="hotels",o=r="hotels_search_results";break;case"hotelsDetail":a="Hotels Details|'"+t.city.countryName+"|"+t.city.name+"|"+t.id+"|"+t.name+", "+t.city.name,n="hotels",o=r="hotels_detail_page_live";break;default:o=r=n=a=""}return{name:a,product:n,base_type:r,sub_type:o,locale:i.locale,site_code:i.currentSite.code,url:window.location.href,referrer_url:document.referrer}}},{key:"pageView",value:function(e,t){var i={id:(0,s.default)(),client:this.clientData(),page:this.pageData(e,t),created_at:(0,c.toISOStringWithTimezone)(new Date)};/flightsSearch|hotelsSearch|hotelsDetail/.test(e)&&(i.event_id=t.id.toString()),"flightsDetail"===e&&(i.event_id=t.flightId),this.genzoHttpClientWithRetries(this.baseUrl+"/analytics/v3/pages/view",i)}},{key:"newSession",value:function(){var e=this,t={id:e.cookieHelper.generateUUID(),client:Object.assign({},e.clientData(),{app_type:"WEB_APP"}),page:e.pageData("newSession"),created_at:(0,c.toISOStringWithTimezone)(new Date)};e.genzoHttpClientWithRetries(e.baseUrl+"/analytics/v3/sessions/event",t)}}]),g);function g(e,t,i,a,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var s=this;s.env=e,s.baseUrl=t,s.currentSite=i,s.locale=a,s.cookieHelper=n,s.localStorageHelper=r,s.isBot=o,s.trackingQueue=r.localStorageGet(l,!0)||[],document.addEventListener("trackingQueueChanged",s.trackingQueueChangedHandler.bind(s)),window.addEventListener("online",s.triggerMissedTracking.bind(s)),s.triggerMissedTracking()}t.default=u},459:function(e,t,i){"use strict";var n=i(460),a=i(285),r=i(461),o=0,s=4,c=36,l=Math.pow(c,s);function u(){return a((r()*l<<0).toString(c),s)}function g(){return o=o<l?o:0,++o-1}function d(){return"c"+(new Date).getTime().toString(c)+a(g().toString(c),s)+n()+(u()+u())}d.slug=function(){var e=(new Date).getTime().toString(36),t=g().toString(36).slice(-4),i=n().slice(0,1)+n().slice(-1),a=u().slice(-2);return e.slice(-2)+t+i+a},d.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},d.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return 7<=t&&t<=10},d.fingerprint=n,e.exports=d},460:function(e,t,i){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=i(285),r="object"===("undefined"==typeof window?"undefined":a(window))?window:self,o=Object.keys(r).length,s=n(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+o.toString(36),4);e.exports=function(){return s}},461:function(e,t,i){"use strict";var a,n=window.crypto||window.msCrypto;if(n){var r=Math.pow(2,32)-1;a=function(){return Math.abs(n.getRandomValues(new Uint32Array(1))[0]/r)}}else a=Math.random;e.exports=a},462:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toISOStringWithTimezone=function(e){var t=e.getDate(),i=e.getMonth()+1,a=e.getFullYear(),n=e.getHours(),r=e.getMinutes(),o=e.getSeconds(),s=a+"-"+(i=i<10?"0"+i:i)+"-"+(t=t<10?"0"+t:t)+"T"+(n=n<10?"0"+n:n)+":"+(r=r<10?"0"+r:r)+":"+(o=o<10?"0"+o:o),c=e.toString().match(/(?:GMT)([-+]\d*)/)[1];return(c=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(c))).splice(3,0,":"),s+(c=c.join(""))}},463:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"numDays",value:function(e,t){var i=new Date(e).getTime(),a=new Date(t).getTime();return i&&a?parseInt(Math.abs(a-i)/864e5):""}},{key:"isWeekend",value:function(e,t,i){for(var a=new Date(e),n=new Date(t),r=!1;a<n;){var o=a.getDay();if(r=/AE|SA|KW|QA|JO|OM|EG|BH|MA|DZ|TN|IQ|SY|PS|LB|SD|LY|US/.test(i.toUpperCase())?5===o||6===o:"IR"===i.toUpperCase()?4===o||5===o:6===o||0===o,r)return!0;a.setDate(a.getDate()+1)}return!1}},{key:"leadtime",value:function(e){var t=new Date;t.setHours(0,0,0,0);var i=this.numDays(t,e);return i<2?"lastminute":i<8?"sameweek":i<31?"samemonth":"advance"}},{key:"initializeWebEngageScript",value:function(){var e=this;return e.isBot?Promise.reject("Is bot."):e.hasInitializeWebEngage?Promise.resolve(null):i.e(2).then(i.t.bind(null,82,7)).then(function(){e.hasInitializeWebEngage||(webengage.init("staging"===Wego.ENV?"d3a4ab3a":"~10a5cabbb"),webengage.options("webpush.registerServiceWorker",!1),e.hasInitializeWebEngage=!0,webengage.onReady(function(){webengage.webpush.prompt()}))})}},{key:"login",value:function(e){return this.initializeWebEngageScript().then(function(){webengage.user.login(e),webengage.user.setAttribute("we_email",e)})}},{key:"logout",value:function(){return this.initializeWebEngageScript().then(function(){webengage.user.logout()})}},{key:"constructDefaultFlightInfo",value:function(e){return{language:e.locale,passengers:e.adultsCount+e.childrenCount+e.infantsCount,adults:e.adultsCount,children:e.childrenCount,infants:e.infantsCount,class:e.cabin}}},{key:"constructFlightSearchLegsInfo",value:function(e,t){var a=this,i=e.length,n={legs:i,is_roundtrip:1<i&&e[0].departureCity.code===e[i-1].arrivalCity.code,leadtime:a.leadtime(e[0].outboundDate),is_domestic:!0};if(1<i){var r=a.numDays(e[0].outboundDate,e[i-1].outboundDate);n.duration=r,n.is_weekend=5<r||a.isWeekend(e[0].outboundDate,e[e.length-1].outboundDate,t)}var o=[],s=[],c=[];return e.forEach(function(e,t){var i=t+1;n["leg"+i+"_origin_code"]=e.departureAirport?e.departureAirport.code:e.departureCity.code,n["leg"+i+"_origin_country"]=e.departureCity.countryName,n["leg"+i+"_depart_date"]=new Date(e.outboundDate),n["leg"+i+"_dest_code"]=e.arrivalAirport?e.arrivalAirport.code:e.arrivalCity.code,n["leg"+i+"_dest_country"]=e.arrivalCity.countryName,n["leg"+i+"_info"]={origin_city_name:e.departureCity.name,origin_city_code:e.departureCity.code,dest_city_name:e.arrivalCity.name,dest_city_code:e.arrivalCity.code},n.is_domestic&&(n.is_domestic=e.departureCity.countryEnName===e.arrivalCity.countryEnName),a.isRTL?(o.splice(0,0,e.arrivalCity.name+" - "+e.departureCity.name),s.splice(0,0,e.arrivalCity.code+" - "+e.departureCity.code),c.splice(0,0,e.arrivalCity.code+"-"+e.departureCity.code+"-"+e.outboundDate)):(o.push(e.departureCity.name+" - "+e.arrivalCity.name),s.push(e.departureCity.code+" - "+e.arrivalCity.code),c.push(e.departureCity.code+"-"+e.arrivalCity.code+"-"+e.outboundDate))}),n.route_info={city_name:o.join(", "),dest_code:s.join(", "),route:c.join(":")},n}},{key:"constructFlightViewLegsInfo",value:function(a,n){return n.alliance=a.legs.map(function(e){return e.allianceCodes}).reduce(function(e,t){return e.concat(t)}).filter(function(e,t,i){return 0<e.length&&i.indexOf(e)===t}).join(","),a.legs.forEach(function(e,t){var i=t+1;n["leg"+i+"_info"].airline=e.airlines[0].name,n["leg"+i+"_info"].air_code=e.airlineCodes[0],a.code&&(n["leg"+i+"_info"].flight_number=a.code.split("=")[t])}),a.code&&(n.route_info.flight_number=a.code.replace("=",":")),n}},{key:"constructFacilitatedBookingInfo",value:function(e){var t={contact_email:e.email,booking_status:e.state,booking_info:{contact_fullname:e.info.contactFullName,payment_type:e.info.paymentType}};return"successful"===e.state&&(t.booking_info.booking_confirmation=e.info.referenceNumber),t}},{key:"trackFlightSearch",value:function(t){var i=this;return i.initializeWebEngageScript().then(function(){var e=Object.assign({},i.constructDefaultFlightInfo(t),i.constructFlightSearchLegsInfo(t.legs,t.siteCode));webengage.track("flight_search",e)})}},{key:"trackFlightView",value:function(g){var d=this;return d.initializeWebEngageScript().then(function(){var e=g||{},t=e.search,i=e.flight,a=e.bestRate,n=void 0===a?{}:a,r=t||{},o=r.legs,s=r.siteCode,c=r.currencyCode,l=d.constructFlightSearchLegsInfo(o,s),u=Object.assign({},d.constructDefaultFlightInfo(t),d.constructFlightViewLegsInfo(i,l),{viewed_rate:n.amount,currency:c});webengage.track("flight_view",u)})}},{key:"trackFlightClick",value:function(m){var k=this;return k.initializeWebEngageScript().then(function(){var e=m||{},t=e.search,i=e.flight,a=t||{},n=a.legs,r=a.siteCode,o=a.currencyCode,s=e.fare||{},c=s.ecpc,l=s.provider,u=void 0===l?{}:l,g=s.price,d=void 0===g?{}:g,h=k.constructFlightSearchLegsInfo(n,r),_=k.constructFlightViewLegsInfo(i,h),p=k.constructDefaultFlightInfo(t),f=i.fares||[],v=f[0]||{},y=Object.assign({},p,_,{best_rate:v.price.amount,currency:o,partner:u.name,br:d.amount,gbv:d.totalAmount,revenue:c,has_facilitated_option:f.some(function(e){return e&&e.provider.instant}),is_facilitated:u.instant});webengage.track("flight_click",y)})}},{key:"trackFacilitatedBooking",value:function(b){var w=this;return w.initializeWebEngageScript().then(function(){var e=b||{},t=e.search,i=e.flight,a=e.facilitatedBooking,n=t||{},r=n.legs,o=n.siteCode,s=n.currencyCode,c=e.fare||{},l=c.ecpc,u=c.provider,g=void 0===u?{}:u,d=c.price,h=void 0===d?{}:d,_=w.constructFlightSearchLegsInfo(r,o),p=w.constructFlightViewLegsInfo(i,_),f=w.constructDefaultFlightInfo(t),v=w.constructFacilitatedBookingInfo(a),y=i.fares||[],m=y[0]||{},k=Object.assign({},f,p,v,{best_rate:m.price.amount,currency:s,partner:g.name,br:h.amount,gbv:h.totalAmount,revenue:l,has_facilitated_option:y.some(function(e){return e&&e.provider.instant}),is_facilitated:g.instant});webengage.track("booking_fb",k)})}},{key:"buildGuestsParam",value:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].childrenAges;t+=e[i].adultsCount;for(var n=0;n<a.length;n++)t+=":"+a[n];i!==e.length-1&&(t+="-")}return t}},{key:"getUserGeoCityCode",value:function(){var i=this;return i.userGeoCityCode?Promise.resolve(i.userGeoCityCode):fetch("https://srv."+("production"===i.env?"wego":"wegostaging")+".com/places/search/nearest",{method:"GET"}).then(function(e){if(e.ok)return e.json()}).then(function(e){var t=e[0].cityCode;return i.userGeoCityCode=t})}},{key:"getRating",value:function(e){var t=e?e.score:0;return 85<t?"excellent":79<t?"superb":74<t?"verygood":67<t?"good":"fair"}},{key:"constructHotelSearchInfo",value:function(e,t){return{dest:e.city?e.city.name:e.region.name,dest_code:e.city?e.city.code:"q"+e.region.id,dest_country:e.country.name,in:new Date(e.checkIn),out:new Date(e.checkOut),nights:this.numDays(e.checkIn,e.checkOut),guests:e.guestsCount,rooms:e.roomsCount,link:{arrangement:this.buildGuestsParam(e.rooms),deeplink:window.location.href},is_weekend:this.isWeekend(e.checkIn,e.checkOut,e.siteCode),is_staycation:!!e.city&&e.city.code===t,leadtime:this.leadtime(e.checkIn)}}},{key:"constructHotelViewInfo",value:function(e,t){var i={hotel_name:e.name,hotel_id:e.id};t&&(i.viewed_rate=t.price.taxInclusive?t.price.amount-t.price.taxAmount:t.price.amount),e.brand&&(i.brand=e.brand.name),(e.amenityIds||e.amenities)&&(e.amenityIds?i.amenity=e.amenityIds:i.amenity=e.amenities.map(function(e){return e.id})),e.star&&(i.star=e.star);var a=e.reviews&&e.reviews[0];return a&&(i.rating=this.getRating(a)),e.district&&(i.district=e.district.id),e.propertyType&&(i.accom_type=e.propertyType.id),i}},{key:"trackHotelSearch",value:function(i){if(i){var a=this;return a.initializeWebEngageScript().then(function(){return a.getUserGeoCityCode()}).then(function(e){var t=Object.assign({},{language:i.locale},a.constructHotelSearchInfo(i,e));webengage.track("hotel_search",t)})}}},{key:"trackHotelView",value:function(s){var c=this;return c.initializeWebEngageScript().then(function(){return c.getUserGeoCityCode()}).then(function(e){var t=s||{},i=t.hotel,a=t.fare,n=t.search,r=void 0===n?{}:n,o=Object.assign({},{language:r.locale},c.constructHotelSearchInfo(r,e),c.constructHotelViewInfo(i,a));webengage.track("hotel_view",o)})}},{key:"trackHotelClick",value:function(w){var C=this;return C.initializeWebEngageScript().then(function(){return C.getUserGeoCityCode()}).then(function(e){var t=w||{},i=t.search,a=void 0===i?{}:i,n=t.fare,r=void 0===n?{}:n,o=t.hotel,s=a.locale,c=a.currencyCode,l=r.price,u=void 0===l?{}:l,g=r.provider,d=void 0===g?{}:g,h=u.taxInclusive,_=u.ecpc,p=u.amount,f=u.taxAmount,v=u.totalAmount,y=u.totalTaxAmount,m=C.constructHotelSearchInfo(a,e),k=C.constructHotelViewInfo(o),b=Object.assign({},m,k,{language:s,currency:c,partner:d.name,br:h?p-f:p,gbv:h?v-y:v,revenue:_});webengage.track("hotel_click",b)})}},{key:"gdprRequest",value:function(e){return this.initializeWebEngageScript().then(function(){webengage.track(("GDPR_"+e.eventName).toLowerCase(),{locale:e.locale})})}}]),r);function r(e,t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);this.env=e,this.isRTL=t,this.isBot=i}t.default=n},464:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"getCookie",value:function(e){for(var t=document.cookie.split("; "),i=0,a=t.length;i<a;i++){var n=t[i].split("="),r=n[0],o=n[1];if(r===e)return{value:o}}return this.setPredefinedCookie(e)}},{key:"setPredefinedCookie",value:function(e,t){var i=void 0;switch(e){case"wego_analytics_client_id":case"wego_analytics_client_session_id":i=t||this.generateUUID();break;case"wego_visits_cnt":i=t||"0";break;case"wego_session_id":case"wego_visitor_id":i=t||this.newUUID();break;case"wego_ts_code":var a=this.getQueryParam("ts_code");a&&(i=a)}return{value:i,expiry:i?this.setCookies(function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,i)):null}}},{key:"setCookies",value:function(e){if("[object Object]"===Object.prototype.toString.call(e))for(var t in e)if(this.isString(t)){var i=e[t];if(this.isString(i)){var a=0;switch(t){case"wego_analytics_client_id":case"wego_visitor_id":case"wego_visits_cnt":a=17520;break;case"wego_analytics_client_session_id":case"wego_session_id":a=.5;break;case"wego_referrer":case"wego_ts_code":a=720;break;case"user_country_code":a=24}return this.newCookie(t,i,a)}}}},{key:"newCookie",value:function(e,t,i){var a="",n=new Date;return i&&(n.setTime(n.getTime()+60*i*60*1e3),a=n.toUTCString()),document.cookie=e+"="+t+";expires="+a+";domain="+this.getDomain()+";path=/",n}},{key:"getDomain",value:function(){var e=location.hostname,t=e.match(/[\w\-]+\.((com?\.?)?(\w+)?)$/i);return null!==t?t[0]:e}},{key:"isString",value:function(e){return"string"==typeof e&&0<e.length}},{key:"getQueryParam",value:function(e,t){var i,a,n,r,o=null;if(this.isString(t)||(t="all"),!this.isString(o)&&("all"===t||"hash"===t))for(n=0,a=(i=location.hash.substring(1).split("&")).length;n<a;)2===(r=i[n].split("=")).length&&r[0]===e&&(o=r[1]),n++;if(!this.isString(o)&&("all"===t||"query"===t))for(n=0,a=(i=location.search.substring(1).split("&")).length;n<a;)2===(r=i[n].split("=")).length&&r[0]===e&&(o=r[1]),n++;return o}},{key:"generateUUID",value:function(){var i=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"==e?t:3&t|8).toString(16)})}},{key:"newUUID",value:function(){for(var e=(new Date).getTime(),t=[],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=i.length,n=0;n<6;n++)t.push(i.charAt(Math.floor(Math.random()*a)));return e+"-"+t.join("")}}]),r);function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}t.default=n},465:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"localStorageSave",value:function(e,t,i){var a=i?JSON.stringify(t):t;try{null==t?window.localStorage.removeItem(e):window.localStorage.setItem(e,a)}catch(e){}}},{key:"localStorageGet",value:function(e,t){try{var i=window.localStorage.getItem(e);return t?JSON.parse(i):i}catch(e){}}}]),r);function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}t.default=n}}]);