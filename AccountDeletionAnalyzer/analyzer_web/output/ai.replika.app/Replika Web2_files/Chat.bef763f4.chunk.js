(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{306:function(e,t,n){"use strict";n.d(t,"c",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"f",function(){return x}),n.d(t,"e",function(){return y});var o=n(10),r=n(7),a=n(15),i=n(62),c=n(27),l=n(332),s=n(292);function u(){var e=Object(o.a)(["\n    padding: 25px 16px;\n  "]);return u=function(){return e},e}function d(){var e=Object(o.a)(["\n    margin: 0;\n  "]);return d=function(){return e},e}function p(){var e=Object(o.a)(["\n    min-width: 4rem;\n  "]);return p=function(){return e},e}function f(){var e=Object(o.a)(["\n    justify-content: ",";\n  "]);return f=function(){return e},e}function m(){var e=Object(o.a)(["\n  display: flex;\n  margin-top: 20px;\n  justify-content: flex-end;\n\n  ","\n"]);return m=function(){return e},e}var h=Object(c.a)("div",["skipEnabled"])(m(),Object(a.a)(f(),function(e){return e.skipEnabled?"space-between":"flex-end"})),g=Object(r.default)(i.a).withConfig({displayName:"WidgetLayout__SendButton",componentId:"s1msl5-0"})(["width:auto;background-color:",";",";"],function(e){return e.disabled?e.theme.widgetButtonDisabledBgColor:e.theme.widgetButtonBgColor},Object(a.a)(p())),b=Object(r.default)(i.a).withConfig({displayName:"WidgetLayout__SkipButton",componentId:"s1msl5-1"})(["width:auto;color:",";background-color:transparent;min-width:0;text-decoration:none;padding:0;height:auto;align-self:center;margin-right:30px;&:hover{text-decoration:underline;}",";"],function(e){return e.disabled?e.theme.dimmedFgColor:e.theme.fgColor},Object(a.a)(d())),v=r.default.div.withConfig({displayName:"WidgetLayout__WidgetContainer",componentId:"s1msl5-2"})(["background-color:",";padding:25px 25px;flex:0 0 auto;",""],function(e){return e.theme.widgetBgColor},Object(a.a)(u())),x=Object(r.default)(l.a).withConfig({displayName:"WidgetLayout__WidgetTextArea",componentId:"s1msl5-3"})(["color:",";background-color:",";border:none;&::-webkit-input-placeholder{color:",";}&::-moz-placeholder{color:",";}&::-ms-input-placeholder{color:",";}"],function(e){return e.theme.fgColor},function(e){return e.theme.widgetInputBgColor},function(e){return e.theme.chatInputPlaceholderColor},function(e){return e.theme.chatInputPlaceholderColor},function(e){return e.theme.chatInputPlaceholderColor}),y=x.withComponent(s.a)},332:function(e,t,n){"use strict";var o=n(7),r=n(442);t.a=Object(o.default)(r.a).withConfig({displayName:"TextArea",componentId:"sc-1bdd87d-0"})(["padding:10px;font-size:16px;line-height:24px;resize:vertical;width:100%;border:1px solid ",";border-radius:4px;background-color:",";color:",";&:focus{outline:none;}&::-webkit-input-placeholder{color:",";opacity:1;transition:opacity 0.2s ease-out;}&:focus::-webkit-input-placeholder{opacity:0;}&::-moz-placeholder{color:",";opacity:1;transition:opacity 0.2s ease-out;}&:focus::-moz-placeholder{opacity:0;}&::-ms-input-placeholder{color:",";opacity:1;transition:opacity 0.2s ease-out;}&:focus::-ms-input-placeholder{opacity:0;}"],function(e){return e.theme.borderColor},function(e){return e.theme.chatBgColor},function(e){return e.theme.fgColor},function(e){return e.theme.placeholderColor},function(e){return e.theme.placeholderColor},function(e){return e.theme.placeholderColor})},399:function(e,t,n){"use strict";var o=n(28),r=n(63),a=n(10),i=n(1),c=n(2),l=n(7),s=n(441),u=n(288);function d(){var e=Object(a.a)(["\n  position: relative;\n"]);return d=function(){return e},e}var p=function(e,t){return{option:function(t,n){var o=n.isFocused;return Object(i.a)({},t,{color:o?e.bubbleOutFgColor:e.fgColor,backgroundColor:o?e.bubbleOutBgColor:e.chatBgColor})},menu:function(t){return Object(i.a)({},t,{backgroundColor:e.chatBgColor})},control:function(t,n){return Object(i.a)({},t,{color:e.fgColor,backgroundColor:e.inputBgColor,borderColor:e.inputBgColor,borderRadius:3,boxShadow:n.isFocused?"0 0 2px 2px ".concat(e.outlineColor):"none",":hover":{borderColor:e.inputBgColor}})},placeholder:function(t){return Object(i.a)({},t,{color:e.placeholderColor,margin:0,paddingTop:14})},input:function(t){return Object(i.a)({},t,{color:e.fgColor,height:"42px",marginTop:14,padding:"0 0 12px 0"})},valueContainer:function(e){return Object(i.a)({},e,{padding:"0 15px",height:55})},singleValue:function(n){return Object(i.a)({},n,{color:e.fgColor,transform:t?"translateY(0)":"translateY(-8px)",margin:0})},indicatorSeparator:function(){return{width:0}}}},f=l.default.div(d());t.a=Object(l.withTheme)(function(e){var t=e.theme,n=e.placeholder,a=e.id,i=e.value,l=Object(r.a)(e,["theme","placeholder","id","value"]),d=c.useState(""),m=Object(o.a)(d,2),h=m[0],g=m[1];return c.useState(i&&i.value||""),c.createElement(f,{className:l.className},c.createElement(s.a,Object.assign({inputId:a,value:i,placeholder:""},l,{styles:p(t,!!n),isSearchable:!1,onChange:function(e){g(e.value),l.onChange&&l.onChange(e)}})),c.createElement(u.a,{collapsed:!(!i||!i.value)||!!h,htmlFor:a},n))})},658:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(4),a=n.n(r),i=n(6),c=n(2),l=n.n(c),s=n(25),u=n(42),d=n(10),p=n(28),f=n(7),m=n(31),h=n(48),g=n(50),b=n(49),v=n(51),x=n(22);function y(e){return"current_mission"===e.meta.type}function w(e){return"recommended_mission"===e.meta.type}var C=n(81),k=n(105),E=f.default.div.withConfig({displayName:"Spinner__SpinnerRoot",componentId:"sc-1c9ztk4-0"})(["width:30px;text-align:center;> div{width:8px;height:8px;background-color:",";border-radius:100%;display:inline-block;animation:sk-bouncedelay 0.7s infinite ease-in-out both;}> div:nth-child(2){animation-delay:-0.32s;}> div:nth-child(3){animation-delay:-0.16s;}@-webkit-keyframes sk-bouncedelay{0%,80%,100%{-webkit-transform:scale(0);}40%{-webkit-transform:scale(1);}}@keyframes sk-bouncedelay{0%,80%,100%{transform:scale(0.5);}40%{transform:scale(0.7);}}"],function(e){return e.theme.chatBgColor}),j=function(){return c.createElement(E,null,c.createElement("div",null),c.createElement("div",null),c.createElement("div",null))},O=n(27),_=n(0);function I(){var e=Object(d.a)(["\n  position: absolute;\n  top: ",";\n  width: 100%;\n  height: 64px;\n  background-color: ",";\n  z-index: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n  font-weight: semibold;\n  font-size: 14px;\n  transition: top 0.2s ease-in;\n"]);return I=function(){return e},e}var S=Object(O.a)("div",["show"])(I(),function(e){return e.show?0:"-64px"},function(e){return e.theme.notificationBgColor},_.p.Popup,function(e){return e.theme.notificationFgColor}),N=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).hideTimeoutId=null,n.state={mode:"hidden",content:null,showSpinner:!1,hideTimeout:0},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this;"shown"===this.state.mode&&this.state.hideTimeout&&"shown"!==t.mode?this.hideTimeoutId=setTimeout(function(){n.setState({mode:"hiding"})},1e3*this.state.hideTimeout):this.hideTimeoutId&&clearTimeout(this.hideTimeoutId)}},{key:"componentWillUnmount",value:function(){this.hideTimeoutId&&clearTimeout(this.hideTimeoutId)}},{key:"render",value:function(){var e=this.state,t=e.content,n=e.showSpinner,o=e.mode;return c.createElement(S,{show:"shown"===o},c.createElement("div",null,t),n&&c.createElement(j,null))}}]),t}(c.PureComponent);N.getDerivedStateFromProps=function(e,t){var n=e.voiceModeEnabled,o=e.uploadError;return"hiding"===t.mode?{mode:"hidden"}:n?{mode:"shown",content:"Call in progress",showSpinner:!0,hideTimeout:0}:o?{mode:"shown",content:o,showSpinner:!1,hideTimeout:3}:{mode:"hidden"}};var M=Object(s.connect)(function(e){return{voiceModeEnabled:e.chat.voiceModeEnabled,uploadError:e.ui.imageUpload.uploadError}})(N),P=n(37),T=n.n(P),D=n(23),L=n(332),z=n(63),R=n(439),B=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=Object(z.a)(e,["className"]);return c.createElement(R.a,Object.assign({overlayClassName:t},n))}}]),t}(c.PureComponent),F=Object(f.default)(B).withConfig({displayName:"Tooltip",componentId:"sc-1knnm0k-0"})(["&&&{opacity:1;padding:0;}&.rc-tooltip-placement-top .rc-tooltip-arrow,&.rc-tooltip-placement-topLeft .rc-tooltip-arrow,&.rc-tooltip-placement-topRight .rc-tooltip-arrow{border-top-color:transparent;}&.rc-tooltip-placement-bottom .rc-tooltip-arrow,&.rc-tooltip-placement-bottomLeft .rc-tooltip-arrow,&.rc-tooltip-placement-bottomRight .rc-tooltip-arrow{border-bottom-color:transparent;}& .rc-tooltip-inner{padding:0;border:none;background-color:transparent;}"]),A=n(646);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var H=l.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.75 11.81l3.72 3.72a.75.75 0 0 0 1.06-1.06l-5-5a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 1.06 1.06l3.72-3.72v9.69h1.5v-9.69zM15 30C6.716 30 0 23.284 0 15 0 6.716 6.716 0 15 0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15z"}),q=function(e){return l.a.createElement("svg",W({viewBox:"0 0 30 30"},e),H)};n.p;function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var G=l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"currentColor",d:"M26 13c0 7.18-5.82 13-13 13S0 20.18 0 13 5.82 0 13 0s13 5.82 13 13 M18.68 12.086h-3.36a2 2 0 1 1 3.36 0zM10.68 12.086H7.32a2 2 0 1 1 3.36 0z M7 17.017c.777 1.526 3.576 3.069 6 3.069 2.43 0 5.223-1.543 6-3.086-1.684.254-3.684.382-6 .386-2.316.003-4.316-.12-6-.37z"})),V=function(e){return l.a.createElement("svg",U({viewBox:"0 0 26 26"},e),G)};n.p;function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Z=l.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:" M22,3c0,-1.6 -1.3,-3 -3,-3l-16,0c-1.6,0 -3,1.3 -3,3l0,18c0,1.6 1.3,3 3,3l16,0c1.6,0 3,-1.3 3,-3l0,-18Z M3 18.5L8 14l6 4.5 5-4.5v7H3zM18 7a3 3 0 1 1-5.999 0A3 3 0 0 1 18 7"}),K=(n.p,f.default.label.withConfig({displayName:"UploadImageButton__FileInputLabel",componentId:"qiwfgp-0"})(["position:absolute;width:100%;height:100%;z-index:1;cursor:pointer;"])),X=f.default.input.withConfig({displayName:"UploadImageButton__FileInput",componentId:"qiwfgp-1"})(["width:0.1px;height:0.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1;&:focus + label{outline-color:",";outline-style:auto;outline-width:5px;}"],function(e){return e.theme.outlineColor}),J=Object(f.default)(function(e){return l.a.createElement("svg",Y({viewBox:"0 0 22 24"},e),Z)}).withConfig({displayName:"UploadImageButton__StyledImageIcon",componentId:"qiwfgp-2"})(["width:100%;height:100%;z-index:0;"]),$=f.default.div.withConfig({displayName:"UploadImageButton__UploadImageButtonRoot",componentId:"qiwfgp-3"})(["position:relative;display:flex;align-items:center;transition:color 0.2s ease-out;color:",";"],function(e){return e.theme.dimmedFgColor}),Q=function(e){var t=e.className,n=e.onUpload,o=e.disabled,r=e.id,a=e["data-testid"];return c.createElement($,{role:"button",className:t,"data-testid":a},c.createElement(X,{accept:"image/*",type:"file",name:r,id:r,onChange:function(e){return n((t=e.target.files)?Array.from(t).filter(function(e){return/^image\//.test(e.type)}):[]);var t},disabled:o,"aria-label":"Send image to your Replika"}),c.createElement(K,{htmlFor:r}),c.createElement(J,null))};function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var te=l.a.createElement("g",null,l.a.createElement("circle",{cx:15,cy:14.9999,r:9,transform:"rotate(45 15 14.9999)",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),l.a.createElement("circle",{cx:15,cy:15.0001,r:4,transform:"rotate(45 15 15.0001)",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),l.a.createElement("line",{x1:12.1716,y1:12.1715,x2:8.63605,y2:8.63593,stroke:"currentColor",strokeWidth:2}),l.a.createElement("line",{x1:21.364,y1:21.3638,x2:17.8284,y2:17.8283,stroke:"currentColor",strokeWidth:2}),l.a.createElement("line",{x1:12.1716,y1:17.8282,x2:8.63605,y2:21.3637,stroke:"currentColor",strokeWidth:2}),l.a.createElement("line",{x1:21.364,y1:8.63582,x2:17.8284,y2:12.1714,stroke:"currentColor",strokeWidth:2})),ne=function(e){return l.a.createElement("svg",ee({width:30,height:30,viewBox:"0 0 30 30",fill:"none"},e),te)},oe=(n.p,n(291)),re=n(104),ae=n(15),ie=n(41),ce=n(32),le=(n(487),n(489),n(20));function se(){var e=Object(d.a)(["\n    margin-right: 16px;\n  "]);return se=function(){return e},e}function ue(){var e=Object(d.a)(["\n    padding: 16px 10px 16px 16px;\n  "]);return ue=function(){return e},e}function de(){var e=Object(d.a)(["\n    margin-left: 16px;\n  "]);return de=function(){return e},e}var pe=2e3,fe=function(e){return!e.hasOwnProperty("native")},me=f.default.div.withConfig({displayName:"ChatDefaultWidget__ChatDefaultWidgetRoot",componentId:"q6sj8t-0"})(["display:flex;flex:0 0 auto;flex-direction:row;position:relative;border-top:1px solid ",";align-items:center;background-color:",";"],function(e){return e.theme.chatInputBorderColor},function(e){return e.theme.chatInputBgColor}),he=f.default.div.withConfig({displayName:"ChatDefaultWidget__StyledTextareaWrapper",componentId:"q6sj8t-1"})(["position:relative;width:100%;& div{position:absolute;background-color:",";width:10px;height:100%;bottom:0;right:0;}"],function(e){return e.theme.chatInputBgColor}),ge=Object(f.default)(oe.a).withConfig({displayName:"ChatDefaultWidget__StyledIconButton",componentId:"q6sj8t-2"})(["width:35px;height:35px;flex-shrink:1;opacity:0.5;margin-left:20px;flex-shrink:0;color:",";&:hover{cursor:pointer;opacity:1;}",""],function(e){return e.theme.fgColor},Object(ae.a)(de())),be=Object(f.default)(L.a).withConfig({displayName:"ChatDefaultWidget__StyledTextarea",componentId:"q6sj8t-3"})(["flex:1 0 auto;padding:18px 10px 18px 6px;height:100%;max-height:150px;border:none;background-color:",";color:",";",""],function(e){return e.theme.chatInputBgColor},function(e){return e.theme.fgColor},Object(ae.a)(ue())),ve=Object(f.default)(oe.a).withConfig({displayName:"ChatDefaultWidget__TextfieldButton",componentId:"q6sj8t-4"})(["flex:0 0 auto;color:",";transition:color 0.2s ease-out,transform 0.2s ease-out;"],function(e){return e.active?e.theme.fgColor:e.theme.chatInputPlaceholderColor}),xe=Object(f.default)(ve).attrs({"aria-haspopup":!0}).withConfig({displayName:"ChatDefaultWidget__StyledEmojiButton",componentId:"q6sj8t-5"})(["width:25px;height:25px;"]),ye=Object(f.default)(ve).withConfig({displayName:"ChatDefaultWidget__StyledSendButton",componentId:"q6sj8t-6"})(["width:24px;height:24px;color:",";transform:scale(1.25);&:hover{transform:scale(1.35);}&:active{transform:scale(1.2);}"],function(e){return e.theme.fgColor}),we=Object(f.default)(Q).withConfig({displayName:"ChatDefaultWidget__StyledUploadImageButton",componentId:"q6sj8t-7"})(["flex:0 0 auto;width:24px;height:24px;color:",";"],function(e){return e.theme.chatInputPlaceholderColor}),Ce=f.default.div.withConfig({displayName:"ChatDefaultWidget__Buttons",componentId:"q6sj8t-8"})(["display:flex;margin-right:27px;& > * + *{margin-left:20px;}",""],Object(ae.a)(se())),ke=f.default.div.withConfig({displayName:"ChatDefaultWidget__PickerWrapper",componentId:"q6sj8t-9"})(["& .emoji-mart-preview-emoji > span.emoji-mart-emoji > span{background-position:92.1569% 50.9804%;}"]),Ee=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).throttledUpdateChatMessageText=Object(D.throttle)(n.props.updateChatMessageText,500),n.setMessageText=function(e){n.setState({text:e}),n.throttledUpdateChatMessageText(e)},n.uploadImage=function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.props.chatId){e.next=4;break}return e.next=4,n.props.uploadChatImage(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),Object(ie.a)(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),n.handleUpload=function(e){return n.uploadImage(e[0])},n.handleAppendEmoji=function(e){fe(e)||n.setMessageText(n.state.text+e.native)},n.handleTextInputDetected=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.chatId||n.props.sendMessageDisabled){e.next=8;break}return e.prev=1,e.next=4,n.props.textInputDetected();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,this,[[1,6]])})),n.throttledTextInputDetected=Object(D.throttle)(n.handleTextInputDetected,1e3),n.handleChange=function(e){n.throttledTextInputDetected(),n.setMessageText(e.target.value.substr(0,pe))},n.handleKeyDown=function(e){"Enter"===e.key&&n.props.chatId&&(e.metaKey||e.shiftKey||(e.preventDefault(),n.props.sendMessageDisabled||(n.props.onSendMessage(n.state.text),n.setMessageText(""))))},n.state={emojiOpened:!1,text:e.messageText},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.sendMessageDisabled,o=t.bot,r=this.state.text;return c.createElement(me,{"data-testid":"chat-controls"},c.createElement(ge,{"data-testid":"chat-controls-get-help-button",label:"Get help",onClick:function(){Object(le.b)(_.j.NeedHelpButtonClicked),e.props.setActiveDialog({type:_.e.GetHelp})}},c.createElement(ne,null)),c.createElement(he,null,c.createElement(be,{accessKey:"t",id:"send-message-textarea","data-testid":"chat-controls-message-textarea","aria-label":"Message for ".concat(o?"your Replika ".concat(o.name):"your Replika"),value:r,autoFocus:!0,placeholder:"Start typing",onChange:this.handleChange,onKeyDown:this.handleKeyDown}),c.createElement("div",null)),c.createElement(Ce,null,c.createElement(re.a,null,c.createElement(F,{placement:"top",trigger:["click"],overlay:c.createElement(ke,null,c.createElement(A.a,{autoFocus:!0,title:"Pick your Emoji...",onClick:this.handleAppendEmoji})),align:{offset:[0,-10]},onVisibleChange:function(t){e.setState({emojiOpened:!!t})}},c.createElement(xe,{active:this.state.emojiOpened,"data-testid":"chat-controls-emoji-keyboard-button","aria-label":"Open emoji keyboard popup"},c.createElement(V,null)))),r.length>0?!n&&c.createElement(ye,{"data-testid":"chat-controls-send-button",onClick:function(){e.props.onSendMessage(r),e.setMessageText("")}},c.createElement(q,null)):!n&&c.createElement(we,{id:"upload-image-to-chat","data-testid":"chat-controls-upload-image-button",onUpload:this.handleUpload,disabled:n})))}}]),t}(c.PureComponent),je={uploadChatImage:C.j,textInputDetected:C.h,updateChatMessageText:C.i,setActiveDialog:ce.d},Oe=Object(s.connect)(function(e){return{chatId:e.ws.persist.chatId,bot:e.profile.persist.bot,messageText:e.chat.persist.messageText}},je)(Ee),_e=n(294),Ie=n.n(_e),Se=n(62),Ne=c.forwardRef(function(e,t){var n=e.item,o=e.onClick,r=e.className,a=e.index,i=e.description,l=e.disabled;return c.createElement(Me,{tabIndex:0===a?0:-1,"data-testid":"chat-virtual-keyboard-button-"+a,className:r,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return o(n,e)}),ref:t,"aria-describedby":i||void 0,disabled:l},n.title)}),Me=Object(f.default)(Se.a).withConfig({displayName:"ChatSelectWidgetItem__ChatSelectWidgetItemRoot",componentId:"sc-1jbfkyg-0"})(["color:",";background-color:",";"],function(e){return e.theme.vkButtonFgColor},function(e){return e.theme.vkButtonBgColor}),Pe=f.default.div.withConfig({displayName:"ChatSelectWidget__SelectWidgetRoot",componentId:"qwqco8-0"})(["flex:0 0 auto;display:flex;flex-direction:column;margin:20px;justify-content:center;align-items:center;"]),Te=Object(f.default)(Ne).withConfig({displayName:"ChatSelectWidget__StyledSelectWidgetItem",componentId:"qwqco8-1"})(["margin-bottom:10px;&:last-child{margin-bottom:0;}"]),De=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).listRef=c.createRef(),n.focusGroup=Ie()({wrap:!0}),n.handleClick=function(e){n.props.onSelect(n.props.widget.id,e.id,e.title)},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.focusGroup.setMembers(this.getListElements()),this.focusGroup.activate(),this.focusGroup.focusNodeAtIndex(0)}},{key:"componentDidUpdate",value:function(e){e.widget!==this.props.widget&&this.focusGroup.setMembers(this.getListElements())}},{key:"componentWillUnmount",value:function(){this.focusGroup.deactivate()}},{key:"getListElements",value:function(){return this.listRef.current?this.listRef.current.getElementsByTagName("button"):[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.widget,o=t.message,r=t.disabled;return c.createElement(Pe,{ref:this.listRef,"aria-label":"Your answer",role:"group"},n.items.map(function(t,n){return c.createElement(Te,{index:n,item:t,key:t.id,onClick:e.handleClick,description:o&&"message-".concat(o.id,"-text"),disabled:r})}))}}]),t}(c.PureComponent),Le=n(647);function ze(){var e=Object(d.a)(["\n  &.rc-slider {\n    width: auto;\n    margin: 0 10px;\n  }\n\n  &.rc-slider .rc-slider-rail {\n    width: auto;\n    left: -10px;\n    right: -10px;\n\n    height: ",";\n    background: ",";\n  }\n\n  &.rc-slider-disabled {\n    background: none;\n  }\n\n  &.rc-slider .rc-slider-track {\n    background: none;\n  }\n\n  &.rc-slider-disabled .rc-slider-track {\n    background: none;\n  }\n\n  &.rc-slider .rc-slider-step {\n    height: 8px;\n  }\n\n  &.rc-slider .rc-slider-handle {\n    width: 24px;\n    height: 24px;\n    margin-left: -12px;\n    margin-top:",";\n    border: 0;\n    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.25);\n  }\n\n  &.rc-slider .rc-slider-handle:hover {\n    border: 0;\n  }\n\n  &.rc-slider .rc-slider-handle:focus {\n    border: 0;\n    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.25);\n  }\n"]);return ze=function(){return e},e}var Re=Object(O.a)(Le.a,[])(ze(),function(e){return e.gradient?"8px":"4px"},function(e){return e.disabled?e.theme.sliderRailDisabledColor:e.gradient?e.theme.sliderRailGradientColor:e.theme.sliderRailColor},function(e){return e.gradient?"-8px":"-10px"});function Be(e){var t,n,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e<.5?(n=[233,37,54],o=[249,213,0],t=2*e):(n=[249,213,0],o=[2,158,74],t=2*e-1);var a=[Math.floor(n[0]*(1-t)+o[0]*t),Math.floor(n[1]*(1-t)+o[1]*t),Math.floor(n[2]*(1-t)+o[2]*t)];return"rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat(r,")")}var Fe=n(306);n(396);function Ae(){var e=Object(d.a)(["\n    margin: 5px 0px 30px 0;\n  "]);return Ae=function(){return e},e}function We(){var e=Object(d.a)(["\n  flex: 0 0 auto;\n  color: ",";\n  font-size: 20px;\n  font-weight: bold;\n  margin: 5px 0 30px;\n  text-align: center;\n"]);return We=function(){return e},e}var He=Object(f.default)(Fe.d).withConfig({displayName:"ChatMoodMeterWidget__ChatMoodMeterWidgetRoot",componentId:"fzrytr-0"})(["display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;"]),qe=Object(O.a)("div",["percent"])(We(),function(e){return Be(e.percent)}),Ue=f.default.div.withConfig({displayName:"ChatMoodMeterWidget__SliderWrapper",componentId:"fzrytr-1"})(["flex:0 0 auto;display:flex;flex-direction:column;margin:5px 0px 30px 0;",";"],Object(ae.a)(Ae())),Ge=Object(f.default)(Re).withConfig({displayName:"ChatMoodMeterWidget__StyledSlider",componentId:"fzrytr-2"})(["flex:0 0 auto;"]),Ve=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleCaptionChange=function(e){n.setState({caption:e.target.value})},n.handleMoodChange=function(e){n.setState({score:e})};var o=Math.ceil(e.widget.items.length/2);return n.state={score:o,caption:""},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"getMoodTitle",value:function(e){var t=this.props.widget.items.find(function(t){return t.score===e});return t&&t.title}},{key:"render",value:function(){var e=this,t=this.props,n=t.widget,o=t.onSkip,r=t.onSubmit,a=t.disabled,i=this.getMoodTitle(this.state.score),l=this.state.score/(n.items.length-1);return c.createElement(He,{"data-testid":"mood-widget"},c.createElement(Ue,null,c.createElement(qe,{percent:l,"data-testid":"mood-widget-title"},i),c.createElement(Ge,{"data-testid":"mood-widget-slider",value:this.state.score,max:n.items.length-1,onChange:this.handleMoodChange,disabled:a,gradient:!0})),c.createElement(Fe.f,{"data-testid":"mood-widget-caption-textarea",autoFocus:!0,placeholder:"What made you feel this way?",onChange:this.handleCaptionChange,minRows:1}),c.createElement(Fe.c,{skipEnabled:!0},c.createElement(Fe.b,{"data-testid":"mood-widget-skip-button",disabled:a,size:"small",onClick:function(){Object(le.b)(_.j.MoodSliderSkipped),o(n.id)}},"Skip"),c.createElement(Fe.a,{size:"small","data-testid":"mood-widget-send-button",disabled:a,onClick:function(){return r(n.id,i||"",e.state.score,e.state.caption)}},"Send")))}}]),t}(c.Component),Ye=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleChange=function(e){n.setState({text:e.target.value})},n.isButtonDisabled=function(){return n.state.text.length<1},n.handleSubmit=function(){n.props.onSubmit({type:"text",text:n.state.text,widget:{widget_id:n.props.widget.id}})},n.handleKeyDown=function(e){"Enter"===e.key&&e.metaKey&&n.handleSubmit()},n.state={text:""},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=t.id,o=t.title,r=t.skip_enabled,a=e.onSkip;return c.createElement(Fe.d,null,c.createElement(Ke,{"data-testid":"titled-text-field-widget-title"},o),c.createElement(Ze,{value:this.state.text,onChange:this.handleChange,onKeyDown:this.handleKeyDown,placeholder:"Your answer","data-testid":"titled-text-field-widget-textarea"}),c.createElement(Fe.c,{skipEnabled:r},r&&c.createElement(Fe.b,{"data-testid":"titled-text-field-widget-skip-button",size:"small",onClick:function(){return a(n)}},"Skip"),c.createElement(Fe.a,{size:"small","data-testid":"titled-text-field-widget-send-button",disabled:this.isButtonDisabled(),onClick:this.handleSubmit},"Send")))}}]),t}(c.Component),Ze=Object(f.default)(Fe.f).withConfig({displayName:"ChatTitledTextFieldWidget__StyledTextArea",componentId:"sc-1vx115z-0"})(["padding:17px 16px;"]),Ke=f.default.h3.withConfig({displayName:"ChatTitledTextFieldWidget__Title",componentId:"sc-1vx115z-1"})(["font-weight:normal;font-size:16px;color:",";margin:2px 0 18px;"],function(e){return e.theme.fgColor}),Xe=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleSubmit=function(){var e={widget_id:n.props.widget.id,selected_item_id:n.props.widget.items[n.state.value].id};n.props.onSubmit({type:"text",text:n.props.widget.items[n.state.value].title,widget:e})},n.handleChange=function(e){n.setState({value:e})},n.state={value:0},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=t.id,o=t.items,r=t.skip_enabled,a=e.onSkip,i=e.skippedWidgetId;return c.createElement(Fe.d,null,c.createElement($e,null,o[this.state.value].title),c.createElement(Re,{"data-testid":"scale-widget-slider",value:this.state.value,max:o.length-1,onChange:this.handleChange,disabled:!1}),!i&&c.createElement(Je,{skipEnabled:r},r&&c.createElement(Fe.b,{"data-testid":"scale-widget-skip-button",size:"small",onClick:function(){return a(n)}},"Skip"),c.createElement(Fe.a,{size:"small","data-testid":"scale-widget-send-button",disabled:!1,onClick:this.handleSubmit},"Send")))}}]),t}(c.Component),Je=Object(f.default)(Fe.c).withConfig({displayName:"ChatScaleWidget__StyledSubmitContainer",componentId:"bk4onw-0"})(["margin-top:30px;"]),$e=f.default.div.withConfig({displayName:"ChatScaleWidget__Answer",componentId:"bk4onw-1"})(["padding:8px 0 20px;text-align:center;font-size:20px;color:",";"],function(e){return e.theme.fgColor}),Qe=n(315);function et(){var e=Object(d.a)(["\n    flex: 1 0 ",";\n    max-width: ",";\n  "]);return et=function(){return e},e}function tt(){var e=Object(d.a)(["\n  margin: ",";\n  flex: 1 0 auto;\n  width: 100%;\n  max-width: ",";\n  margin-bottom: 16px;\n  border-color: ",";\n\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow-x: hidden;\n\n  ","\n"]);return tt=function(){return e},e}function nt(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: ",";\n  margin: 0 -5px -6px;\n  flex-wrap: wrap;\n  align-items: ",";\n  flex: 1 1 100%;\n  justify-content: ",";\n"]);return nt=function(){return e},e}function ot(){var e=Object(d.a)(["\n    padding-bottom: 0;\n  "]);return ot=function(){return e},e}var rt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).onSelectItem=function(e){var t=n.props.widget,o=t.multiple_selection,r=t.max_item_selected,a=n.state.selectedItems;o?a.indexOf(e)>-1?n.setState({selectedItems:a.filter(function(t){return t!==e})}):a.length<r?n.setState({selectedItems:a.concat(e)}):1===r&&n.setState({selectedItems:[e]}):n.setState({selectedItems:[e]})},n.handleSubmit=function(){var e={widget_id:n.props.widget.id,selected_item_ids:n.state.selectedItems},t=n.state.selectedItems,o=n.props.widget.items.filter(function(e){return-1!==t.indexOf(e.id)}).map(function(e,t){return t>0?e.title.toLowerCase():e.title}).join(", ");n.props.onSubmit({type:"text",text:o,widget:e})},n.isButtonDisabled=function(){var e=n.state.selectedItems,t=n.props.widget,o=t.min_item_selected,r=t.max_item_selected;return e.length<o||e.length>r},n.state={selectedItems:[]},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.widget,o=n.id,r=n.items,a=n.skip_enabled,i=t.onSkip,c=this.state.selectedItems,s=r.find(function(e){return e.title.length>15})?"vertical":r.length<3?"horizontal":r.find(function(e){return e.title.length>10})?"horizontalGrid2":"horizontalGrid3";return l.a.createElement(at,null,l.a.createElement(it,{layoutType:s},r.map(function(t,n){return l.a.createElement(ct,{key:t.title,"data-testid":"multiselect-widget-".concat(n,"-item-button"),active:c.indexOf(t.id)>-1,layoutType:s,onClick:function(){return e.onSelectItem(t.id)}},t.title)})),l.a.createElement(Fe.c,{skipEnabled:a},a&&l.a.createElement(Fe.b,{"data-testid":"multiselect-widget-skip-button",size:"small",onClick:function(){return i(o)}},"Skip"),l.a.createElement(Fe.a,{size:"small","data-testid":"multiselect-widget-send-button",disabled:this.isButtonDisabled(),onClick:this.handleSubmit},"Send")))}}]),t}(l.a.Component),at=Object(f.default)(Fe.d).withConfig({displayName:"ChatMultiselectWidget__ChatMultiselectWidgetRoot",componentId:"sc-1fttdm4-0"})(["flex:1 0 auto;max-height:60vh;overflow-y:scroll;padding-bottom:0;"," &:after{content:'';height:25px;display:block;}"],Object(ae.a)(ot())),it=Object(O.a)("div",["layoutType"])(nt(),function(e){return"vertical"===e.layoutType?"column":"row"},function(e){return"vertical"===e.layoutType?"center":"flex-start"},function(e){return"vertical"===e.layoutType?"center":"flex-start"}),ct=Object(O.a)(Qe.a,["layoutType"])(tt(),function(e){return"vertical"===e.layoutType?0:"0 5px"},function(e){return"vertical"===e.layoutType?"360px":"horizontal"===e.layoutType?"250px":"horizontalGrid2"===e.layoutType?"calc(50% - 10px)":"calc(33% - 9px)"},function(e){return e.active?e.theme.borderButtonSelectedBorderColor:e.theme.widgetButtonBorderColor},Object(ae.a)(et(),function(e){return"vertical"===e.layoutType?"auto":"40%"},function(e){return"vertical"===e.layoutType?"400px":"calc(50% - 10px)"})),lt=function(e){var t=c.useState(""),n=Object(p.a)(t,2),o=n[0],r=n[1];return c.createElement(Fe.d,null,c.createElement(Fe.e,{value:o,onChange:function(e){return r(e.target.value)},placeholder:e.placeholder}),c.createElement(Fe.c,null,c.createElement(Fe.a,{onClick:function(){0!==o.length&&(e.onSubmit({type:"text",text:o,widget:{widget_id:e.widget.id}}),r(""))}},"Send")))},st=function(e){var t=e.className;return c.createElement(ut,{className:t},c.createElement(dt,null))},ut=Object(f.default)(Fe.d).withConfig({displayName:"LoadingWidget__LoadingWidgetRoot",componentId:"sc-1ml1fdg-0"})(["display:flex;align-items:center;justify-content:center;height:200px;"]),dt=Object(f.default)(k.a).withConfig({displayName:"LoadingWidget__StyledSpinner",componentId:"sc-1ml1fdg-1"})(["width:54px;height:54px;color:",";"],function(e){return e.theme.dimmedFgColor}),pt=T()({loading:st,loader:function(){return Promise.all([n.e(14),n.e(11)]).then(n.bind(null,660))},modules:["AI"]}),ft=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handleSubmitMood=function(e,t,o,r){var a={widget_id:e,widget_type:"mood_meter",selected_item_score:o,caption:r};Object(le.b)(_.j.MoodAdded,{mood:o,"comment length":r?r.length:0}),n.props.onSendMessage({type:"text",text:t,widget:a})},n.handleSendMessage=function(e){return n.props.onSendMessage({type:"text",text:e})},n.handleKeyboardSelect=function(e,t,o){var r={widget_id:e,selected_item_id:t};n.props.onSendMessage({type:"text",text:o,widget:r})},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lastMessage,n=e.onSkipWidget,o=e.skippedWidgetId;if(!t)return this.renderControls();var r=t&&t.widget,a=r&&r.type,i=t&&t.effects,l=i&&i.hideInput;if(this.props.experimentInProgress)return c.createElement(pt,{handleExperimentSkipped:this.props.handleExperimentSkipped,onSubmit:this.props.handleExperimentSkipped,disabled:this.props.voiceModeEnabled});if(o===(r&&r.id))return this.renderControls();switch(a){case"select":return c.createElement(De,{message:t,widget:r,onSelect:this.handleKeyboardSelect,disabled:this.props.voiceModeEnabled});case"mood_meter":return Object(le.b)(_.j.MoodSliderDisplayed),c.createElement(Ve,{widget:r,onSkip:n,onSubmit:this.handleSubmitMood,disabled:this.props.voiceModeEnabled});case"titled_text_field":return c.createElement(Ye,{widget:r,onSkip:n,onSubmit:this.props.onSendMessage,disabled:this.props.voiceModeEnabled,skippedWidgetId:this.props.skippedWidgetId});case"scale":return c.createElement(Xe,{widget:r,onSkip:n,onSubmit:this.props.onSendMessage,disabled:this.props.voiceModeEnabled,skippedWidgetId:this.props.skippedWidgetId});case"multiselect":return c.createElement(rt,{widget:r,onSkip:n,onSubmit:this.props.onSendMessage,disabled:this.props.voiceModeEnabled,skippedWidgetId:this.props.skippedWidgetId});case"user_name":return c.createElement(lt,{widget:r,onSkip:n,onSubmit:this.props.onSendMessage,disabled:this.props.voiceModeEnabled,skippedWidgetId:this.props.skippedWidgetId,placeholder:"My first name"});case"bot_name":return c.createElement(lt,{widget:r,onSkip:n,onSubmit:this.props.onSendMessage,disabled:this.props.voiceModeEnabled,skippedWidgetId:this.props.skippedWidgetId,placeholder:"Your name will be"});default:return l?null:this.renderControls()}}},{key:"renderControls",value:function(){var e=this.props,t=e.wsStatus,n=e.voiceModeEnabled;return c.createElement(Oe,{onSendMessage:this.handleSendMessage,sendMessageDisabled:n||"connected"!==t})}}]),t}(c.PureComponent),mt=n(24);function ht(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(0, -1, 1, 0, 0, 0);\n      "]);return ht=function(){return e},e}function gt(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(0, -1, -1, 0, 0, 0);\n      "]);return gt=function(){return e},e}function bt(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(0, 1, -1, 0, 0, 0);\n      "]);return bt=function(){return e},e}function vt(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(0, 1, 1, 0, 0, 0);\n      "]);return vt=function(){return e},e}function xt(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(1, 0, 0, -1, 0, 0);\n      "]);return xt=function(){return e},e}function yt(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(-1, 0, 0, -1, 0, 0);\n      "]);return yt=function(){return e},e}function wt(){var e=Object(d.a)(["\n        ",";\n        transform: matrix(-1, 0, 0, 1, 0, 0);\n      "]);return wt=function(){return e},e}function Ct(){var e=Object(d.a)(["\n    width: ",";\n    height: ",";\n  "]);return Ct=function(){return e},e}function kt(){var e=Object(d.a)(["\n    width: 100%;\n    height: 100%;\n  "]);return kt=function(){return e},e}var Et=function(e,t){var n=Object(f.css)(kt());if(!t||!e)return n;var o=Object(f.css)(Ct(),100/t+"%",100*t+"%");switch(e){case 2:return Object(f.css)(wt(),n);case 3:return Object(f.css)(yt(),n);case 4:return Object(f.css)(xt(),n);case 5:return Object(f.css)(vt(),o);case 6:return Object(f.css)(bt(),o);case 7:return Object(f.css)(gt(),o);case 8:return Object(f.css)(ht(),o);default:return""}};function jt(){var e=Object(d.a)(["\n  width: ",";\n  height: 25vh;\n  border: 1px solid ",";\n  color: ",';\n  border-radius: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n\n  &:before {\n    z-index: 0;\n    position: absolute;\n    content: "";\n    background-image: url(',");\n    background-size: cover;\n    background-position: center;\n    ",'\n  }\n\n  &:after {\n    z-index: 1;\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    background: #000;\n    opacity: ',";\n  }\n\n  & img {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n"]);return jt=function(){return e},e}var Ot=Object(O.a)("div",["previewUrl","previewRatio","orientation"])(jt(),function(e){return e.previewRatio?"calc(25vh * ".concat(e.previewRatio,")"):"300px"},function(e){return e.theme.borderColor},function(e){return e.theme.dimmedFgColor},function(e){return e.previewUrl||""},function(e){return Et(e.orientation,e.previewRatio)},function(e){return e.previewUrl?.5:.1}),_t=Object(f.default)(k.a).withConfig({displayName:"ImagePlaceholder__StyledCircleSpinner",componentId:"sc-1ixmwes-0"})(["z-index:2;width:70px;height:70px;"]),It=function(e){var t=e.previewUrl,n=e.previewRatio,o=e.orientation;return c.createElement(Ot,{previewUrl:t,previewRatio:n,orientation:o},c.createElement(_t,null))},St=n(106),Nt=n.n(St),Mt=function(e){return"service_message"===e.content.type},Pt=function(e){return"Customer"===e.meta.nature},Tt=function(e,t,n,o,r){var a=r[o-1],i=Nt()(n.meta.timestamp),c=!a||!Nt()(a.meta.timestamp).isSame(i,"day"),l=Pt(n),s=Mt(n),u=t[t.length-1];if(!u||c||a&&l!==Pt(a)||a&&s!==Mt(a))if(s)t.push({type:"service_messages",messages:[n]});else{var d=l?"right":"left",p=c?i.calendar(void 0,{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"LL",lastWeek:"LL",nextWeek:"LL",sameElse:"LL"}):void 0;t.push({type:"messages",messages:[n],timestamp:p,align:d})}else u.messages.push(n);return e&&o===r.length-1&&l&&t.push({type:"messages",messages:[],timestamp:void 0,align:"left"}),t},Dt=n(397);function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var zt=l.a.createElement("path",{d:"M11.92 16.062A19.91 19.91 0 0 1 0 20V0h20c0 7.668-.155 16.282 4 20-5.176-.054-9.12-1.727-12.08-3.938z"}),Rt=function(e){return l.a.createElement("svg",Lt({viewBox:"0 0 24 20",width:24,height:20,fill:"currentColor"},e),zt)},Bt=(n.p,n(26));function Ft(){return(Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var At=l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("g",{fill:"currentColor"},l.a.createElement("path",{d:"M12.09 22.2c.75 0 1.38.798 1.982.798L21.91 23c.909 0 1.364-.142 1.818-.96.454-.818 1.763-5.945 1.864-6.24.454-1.333-.417-2.4-1.227-2.4h-4.5c-.445 0-.91 0-.91-.889C19.046 10.6 19.245 7 17.819 7c-1.425 0-.606.645-2.382 4-.919 1.733-1.907 2.4-3.345 2.4v8.8zM10.455 13.4H8v8.8h2.455z"}))),Wt=function(e){return l.a.createElement("svg",Ft({viewBox:"1 1 30 30"},e),At)},Ht=(n.p,n(508)),qt=n.n(Ht);function Ut(){var e=Object(d.a)(["\n  background: ",";\n  border-radius: 8px;\n  box-shadow: 0px 8px 20px ",";\n  padding: ",";\n  text-align: center;\n"]);return Ut=function(){return e},e}function Gt(){var e=Object(d.a)(["\n    width: 90vw;\n    max-width: 360px;\n  "]);return Gt=function(){return e},e}var Vt=Object(f.default)(qt.a).withConfig({displayName:"Popover__PopoverRoot",componentId:"sc-1qwqmtp-0"})(["z-index:",";width:270px;& > .Popover-tip{fill:",";}",";"],_.p.Popup,function(e){return e.theme.chatBgColor},Object(ae.a)(Gt())),Yt=Object(O.a)("div",["size"])(Ut(),function(e){return e.theme.chatBgColor},function(e){return e.theme.shadowColor},function(e){return"small"===e.size?"15px 15px":"25px 20px"}),Zt=Object(f.default)(Se.a).withConfig({displayName:"Popover__StyledButton",componentId:"sc-1qwqmtp-1"})(["margin:15px 0 5px;width:auto;"]),Kt=function(e){return c.createElement(Zt,Object.assign({size:"small"},e))},Xt=Object(f.default)(Kt).withConfig({displayName:"Popover__PopoverCancelButton",componentId:"sc-1qwqmtp-2"})(["background-color:transparent;color:",";min-width:0;&:hover{text-decoration:underline;}"],function(e){return e.theme.fgColor}),Jt=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).renderContent=function(){var e=n.props,t=e.onClose,o=e.size,r=e.onRenderContent;return c.createElement(Yt,{size:o},r({onClose:t}))},n.handleOuterAction=function(){n.props.closeOnOuterAction&&n.props.onClose()},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.isOpen,r=e.place,a=e.preferPlace,i=e.offset,l=e.noTip;return c.createElement(Vt,Object.assign({tipSize:l?.01:void 0,isOpen:o,className:n,onOuterAction:this.handleOuterAction,body:this.renderContent(),place:r,preferPlace:a,enterExitTransitionDurationMs:300},{offset:i}),t)}}]),t}(c.Component),$t=f.default.div.withConfig({displayName:"Thumbs__ThumbsRoot",componentId:"khhgu2-0"})(["display:flex;align-items:center;"]),Qt=Object(f.default)(oe.a).withConfig({displayName:"Thumbs__ThumbButton",componentId:"khhgu2-1"})(["border:none;border-radius:30px;background-color:transparent;padding:0;width:32px;height:32px;margin-left:7px;color:",";transition:color 0.2s ease-out;&:hover{cursor:pointer;color:",";}&:focus{outline:none;box-shadow:0 0 2px 2px ",";}"],function(e){return e.active?e.theme.bubbleThumbSelectedColor:e.theme.bubbleExtraFgColor},function(e){return e.theme.fgColor},function(e){return e.theme.outlineColor}),en=Object(f.default)(Wt).withConfig({displayName:"Thumbs__StyledThumbUp",componentId:"khhgu2-2"})(["width:100%;height:100%;padding:4px 5px 4px 3px;"]),tn=Object(f.default)(Wt).withConfig({displayName:"Thumbs__StyledThumbDown",componentId:"khhgu2-3"})(["transform:rotate(180deg);width:100%;height:100%;padding:3px 5px 5px 3px;"]),nn=f.default.h3.withConfig({displayName:"Thumbs__HintTitle",componentId:"khhgu2-4"})(["line-height:23px;font-size:16px;font-weight:600;margin:0;color:",";"],function(e){return e.theme.fgColor}),on=f.default.p.withConfig({displayName:"Thumbs__HintDescription",componentId:"khhgu2-5"})(["line-height:23px;font-size:16px;margin:15px 0 5px;color:",";"],function(e){return e.theme.lightFgColor}),rn=function(){return"Keep the feedback coming!"},an=function(e){return"Feedback helps ".concat(e," improve, so let her know when messages look good or don\u2019t make sense.")},cn=function(e,t,n,o,r){switch(e){case"Upvote":return c.createElement(Qt,{"data-testid":"chat-message-upvote-button",label:"thumb up",tabIndex:-1,key:"upvote",onClick:function(){n(t?void 0:e)},onFocus:o,onBlur:r,active:t,"aria-pressed":t},c.createElement(en,{"aria-hidden":"true"}));case"Downvote":return c.createElement(Qt,{"data-testid":"chat-message-downvote-button",label:"thumb down",tabIndex:-1,key:"downvote",onClick:function(){n(t?void 0:e)},onFocus:o,onBlur:r,active:t,"aria-pressed":t},c.createElement(tn,{"aria-hidden":"true"}));default:return!1}},ln=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={isHintOpen:!0},n.renderThumb=function(e){var t=n.props,o=t.reaction,r=t.messageId,a=t.hintMessageReaction,i=t.enableHint,l=t.onFocus,s=t.onBlur,u=i&&a&&a.message_id===r&&a.reaction===e,d=cn(e,o===e,n.handleThumbClick,l,s);return u&&d?c.createElement(Jt,{preferPlace:"above",isOpen:n.state.isHintOpen,onClose:function(){return n.setState({isHintOpen:!1})},onRenderContent:n.renderHint},d):d},n.renderHint=function(){var e=n.props.bot;return c.createElement(c.Fragment,null,c.createElement(nn,null,rn()),c.createElement(on,null,an(e&&e.name||"your Replika")),c.createElement(Kt,{onClick:function(){return n.setState({isHintOpen:!1})}},"OK"))},n.handleThumbClick=function(e){var t=n.props.messageId;n.props.setMessageReaction(t,e)},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.permittedActions,o=e.reaction,r=e.hideInactive,a=n.filter(function(e){return!r||o===e}).map(this.renderThumb).filter(Boolean);return 0===a.length?null:c.createElement($t,{className:t},a)}}]),t}(c.PureComponent),sn=Object(s.connect)(function(e,t){return{bot:e.profile.persist.bot,hintMessageReaction:e.chat.hintMessageReaction,reaction:e.chat.messageReactions[t.messageId]}},{setMessageReaction:C.g})(ln);function un(){var e=Object(d.a)(["\n  width: 160px;\n  position: absolute;\n  ",": 0;\n  transform: translateX(",");\n\n  display: flex;\n  justify-content: ",";\n  align-items: center;\n  overflow: hidden;\n"]);return un=function(){return e},e}function dn(){var e=Object(d.a)(["\n  flex: 0 0 auto;\n  margin: 0 10px;\n  color: ",";\n  font-size: 12px;\n  white-space: nowrap;\n  transition: opacity 0.2s "," ease-out;\n  opacity: ",";\n"]);return dn=function(){return e},e}var pn=f.default.div.withConfig({displayName:"MessageHover__MessageHoverRoot",componentId:"sc-6lkiln-0"})(["display:flex;align-items:center;"]),fn=Object(O.a)("div",["visible"])(dn(),function(e){return e.theme.bubbleExtraFgColor},function(e){return e.visible?"0s":"0.3s"},function(e){return e.visible?1:0}),mn=Object(O.a)("div",["align"])(un(),function(e){return"right"===e.align?"left":"right"},function(e){return"right"===e.align?"-100%":"100%"},function(e){return"right"===e.align?"flex-end":"flex-start"}),hn=Object(f.default)(sn).withConfig({displayName:"MessageHover__StyledThumbs",componentId:"sc-6lkiln-1"})(["flex:0 0 auto;padding:5px;"]),gn=function(e){var t,n,o=e.className,r=e.actions,a=e.children,i=e.timestamp,l=e.align,s=e.label,u=e.messageId,d=e.isLastMessage,f=c.useRef(null),m=c.useState(!1),h=Object(p.a)(m,2),g=h[0],b=h[1],v=c.useState(!1),x=Object(p.a)(v,2),y=x[0],w=x[1],C=c.useState(!1),k=Object(p.a)(C,2),E=k[0],j=k[1],O=c.useState(!1),_=Object(p.a)(O,2),I=_[0],S=_[1];c.useEffect(function(){var e;return g||y||E?S(!0):e=setTimeout(function(){S(!1)},10),function(){return clearTimeout(e)}},[g,y,E]),c.useLayoutEffect(function(){if(t||(t=Ie()({keybindings:{next:{key:"ArrowRight"},prev:{key:"ArrowLeft"}}})),f.current){var e=[f.current].concat(Object(Bt.a)(Array.from(f.current.getElementsByTagName("button"))));t.setMembers(e),t.activate()}return function(){t.deactivate()}},[f.current,I]);return c.createElement(pn,{ref:f,id:"message-".concat(u),className:o,onMouseEnter:function(){clearTimeout(n),n=setTimeout(function(){return b(!0)},300)},onMouseLeave:function(){clearTimeout(n),n=setTimeout(function(){return b(!1)},100)},tabIndex:d?0:-1,onFocus:function(){return w(!0)},onBlur:function(){return w(!1)},"aria-label":"".concat(s,", at ").concat(i)},a,c.createElement(mn,{align:l},I?c.createElement(re.a,null,r&&u&&c.createElement(hn,{enableHint:!0,permittedActions:r,messageId:u,onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}}),i&&c.createElement(fn,{visible:I},i)):r&&u&&c.createElement(hn,{hideInactive:!0,permittedActions:r,messageId:u,onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}})))},bn=Object(f.default)(gn).withConfig({displayName:"BubbleText__BubbleTextRoot",componentId:"sc-1bng39n-0"})(["position:relative;max-width:100%;border-radius:20px;background-color:",";z-index:1;padding:10px 19px 11px;color:",";line-height:1.25;& > svg{color:",";}&:focus{background-color:",";}&:focus > svg{color:",";}"],function(e){return"right"===e.align?e.theme.bubbleOutBgColor:e.theme.bubbleInBgColor},function(e){return"right"===e.align?e.theme.bubbleOutFgColor:e.theme.bubbleInFgColor},function(e){return"right"===e.align?e.theme.bubbleOutBgColor:e.theme.bubbleInBgColor},function(e){return"right"===e.align?e.theme.bubbleSelectedOutBgColor:e.theme.bubbleSelectedInBgColor},function(e){return"right"===e.align?e.theme.bubbleSelectedOutBgColor:e.theme.bubbleSelectedInBgColor}),vn=Object(f.default)(Rt).withConfig({displayName:"BubbleText__StyledTail",componentId:"sc-1bng39n-1"})(["position:absolute;width:21px;height:18px;bottom:0px;transform:",";",":-3px;"],function(e){return"right"===e.align?"none":"rotateY(180deg)"},function(e){return e.align}),xn=f.default.div.withConfig({displayName:"BubbleText__BubbleTextContent",componentId:"sc-1bng39n-2"})(["white-space:pre-wrap;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;max-width:100%;"]),yn=c.memo(function(e){var t=e.messageId,n=e.className,o=e.children,r=e.align,a=e.hasTail,i=e.actions,l=e.timestamp,s=e.isLastMessage,u=e.botName,d=e.label,f=c.useRef(null),m=c.useState("auto"),h=Object(p.a)(m,2),g=h[0],b=h[1];c.useLayoutEffect(function e(){if(f.current){if(f.current.parentNode.parentNode.offsetWidth<100)return void setTimeout(e,100);var t=Array.from(f.current.childNodes).reduce(function(e,t){return Math.max(e,t.offsetWidth)},0);f.current.offsetHeight>20&&f.current.offsetWidth>0&&("auto"===g||Math.abs(t-g)>10)&&b(t)}},[f.current,g]),c.useEffect(function(){var e=Object(D.debounce)(function(){b("auto")},100);return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[b]);var v="left"===r?u?"".concat(u," says:"):"your Replika says:":"you say:";return c.createElement(bn,{messageId:t,className:n,align:r,actions:i,timestamp:l,isLastMessage:s,label:d?v+" "+d:void 0},a&&c.createElement(vn,{align:r}),c.createElement(xn,{ref:f,style:{width:g},"data-testid":"chat-message-text","data-author":"left"===r?"replika":"user"},o))}),wn=n(75),Cn=Object(s.connect)(function(e,t){return{signedUrl:t.src&&e.image.persist.signedUrlCache[t.src]}},{getImageSignedUrl:wn.a})(function(e){var t=e.src,n=e.signedUrl,o=e.children,r=c.useState(!1),a=Object(p.a)(r,2),i=a[0],l=a[1];return c.useEffect(function(){if(t&&n&&!i){var o=new Image;o.onload=function(){l(!0),o.src=""},o.src=n,o.complete||(o.onerror=function(n){console.error(n),e.getImageSignedUrl(t)})}},[t,n,i]),c.useEffect(function(){l(!1)},[t]),c.useEffect(function(){t&&!n&&e.getImageSignedUrl(t)},[t,n]),c.createElement(c.Fragment,null,o(n,i))}),kn=Object(f.default)(gn).withConfig({displayName:"BubbleImage__BubbleImageRoot",componentId:"p6dnrz-0"})(["position:relative;z-index:1;max-width:100%;cursor:pointer;&:focus{border-radius:17px;background-color:",";}&:focus img{box-shadow:0 0 0 2px ",";}"],function(e){return e.theme.bubbleImageSelectedBgColor},function(e){return e.theme.bubbleImageSelectedBgColor}),En=f.default.img.withConfig({displayName:"BubbleImage__StyledImage",componentId:"p6dnrz-1"})(["display:block;border:none;max-width:100%;max-height:25vh;border-radius:17px;overflow:hidden;height:",";"],function(e){return e.isEmpty?"25vh":"auto"}),jn=Object(f.default)(It).withConfig({displayName:"BubbleImage__StyledImagePlaceholder",componentId:"p6dnrz-2"})(["width:300px;"]),On=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.imageUrl,o=e.align,r=e.timestamp,a=e.actions,i=e.messageId,l=e.isLastMessage,s=e.botName,u=e.imagePreview,d=e.onClick,p="left"===o?s?"".concat(s," sent you an image"):"Replika sent you an image":"you sent an image",f=u?u.orientation>4&&u.orientation<9?u.height/u.width:u.width/u.height:0;return c.createElement(kn,{messageId:i,className:t,align:o,timestamp:r,actions:a,isLastMessage:l,label:p},c.createElement(Cn,{src:n},function(e,t){return t&&e?c.createElement(En,{alt:p,"data-testid":"chat-message-image","data-author":"left"===o?"replika":"user",src:e,isEmpty:!t,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return d(e)})}):u?c.createElement(jn,{previewUrl:u.src,previewRatio:f,orientation:u.orientation}):c.createElement(jn,null)}))}}]),t}(c.PureComponent),_n=/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[\/?#]\S*)?/i,In=function(e){var t=e.match(_n);return t&&t[0]},Sn=f.default.div.withConfig({displayName:"BubbleMediaPreview__PreviewTitle",componentId:"sc-7602nw-0"})(["margin-top:10px;font-weight:bold;line-height:1.18em;"]),Nn=f.default.a.withConfig({displayName:"BubbleMediaPreview__CoverLink",componentId:"sc-7602nw-1"})(["margin-top:10px;margin-bottom:8px;display:block;background-image:"," background-size:cover;background-position:center;height:25vh;max-height:300px;width:100%;"],function(e){return e.img?"url(".concat(e.img,");"):"linear-gradient(\n    to top,\n    #020024 0%,\n    #090979 40%,\n    #197dc0 100%\n  );"}),Mn=f.default.div.withConfig({displayName:"BubbleMediaPreview__EmptyImage",componentId:"sc-7602nw-2"})(["margin-top:10px;margin-bottom:8px;background-image:linear-gradient( to top,#020024 0%,#090979 40%,#197dc0 100% );height:25vh;width:100%;"]),Pn=f.default.div.withConfig({displayName:"BubbleMediaPreview__PreviewDescription",componentId:"sc-7602nw-3"})(["font-size:13px;line-height:1.54em;margin-top:5px;"]),Tn=f.default.a.withConfig({displayName:"BubbleMediaPreview__PreviewSiteName",componentId:"sc-7602nw-4"})(["color:inherit;opacity:0.4;font-size:13px;line-height:1.54em;margin-top:5px;&:focus{opacity:1;}"]),Dn=function(e){var t=e.mediaPreviewUrl,n=e.mediaPreview,o=e.className;if(!n)return c.createElement("div",{className:o},c.createElement(Mn,null),c.createElement(Sn,null,"..."),c.createElement(Tn,{href:t,target:"_blank",rel:"noopener noreferrer"},t));switch(n.type){case"object":case"video":return c.createElement("div",{className:o},c.createElement(Nn,{"aria-hidden":!0,tabIndex:-1,img:n.content.preview_image,href:n.content.url,target:"_blank",rel:"noopener noreferrer"}),c.createElement(Sn,null,n.content.title),c.createElement(Pn,null,n.content.description),c.createElement(Tn,{href:n.content.url,target:"_blank",rel:"noopener noreferrer","aria-label":n.content.description},n.content.site_name));case"image":return c.createElement("div",{className:o},c.createElement(Nn,{img:n.content.url,href:n.content.url,target:"_blank",rel:"noopener noreferrer"}));default:return Object(ie.a)("Unknown media: ".concat(JSON.stringify(n))),null}},Ln=f.default.a.withConfig({displayName:"TextWithLinks__LinkToPreview",componentId:"sc-1yeozua-0"})(["color:inherit;text-decoration:none;&:hover,&:focus{color:inherit;text-decoration:underline;}"]),zn=function(e,t){return e?t?"".concat(t," says:"):"your Replika says:":"you say:"},Rn=function(e){var t=e.text,n=e.isLast,o=e.isRobotMessage,r=e.botName,a=e.id;return c.createElement("span",{"aria-live":n?"polite":"off","aria-label":zn(o,r)},c.createElement("span",{id:a},function(e){for(var t=[],n=e.search(_n);-1!==n;){t.push(e.substr(0,n));var o=_n.exec(e);if(o){if(t.push(o[0]),n+o[0].length===0)break;e=e.substr(n+o[0].length)}n=e.search(_n)}return e.length>0&&t.push(e),t}(t).map(function(e,t){return t%2?c.createElement(Ln,{key:t,href:e,target:"_blank",rel:"noopener noreferrer"},e):c.createElement("span",{key:t},e)})))};function Bn(){var e=Object(d.a)(["\n  0% {\n    opacity: 0;\n    transform: scale(1);\n  }\n\n  10% {\n    opacity: 1;\n  }\n\n  80% {\n    opacity: 1;\n  }\n\n  100% {\n    transform: scale(1.3);\n    opacity: 0;\n  }\n"]);return Bn=function(){return e},e}function Fn(){var e=Object(d.a)(["\n    width: 100%;\n  "]);return Fn=function(){return e},e}var An=function(){Dt.PopupboxManager.close({config:{fadeIn:!0,fadeInSpeed:100,fadeOutSpeed:100}})},Wn=c.memo(function(e){var t=e.className,n=e.message,o=e.isLast,r=e.isLastGroup,a=e.align,i=e.mediaPreviews,l=e.imagePreviews,s=e.botName,u=e.messageScore,d=n.content,p="images"===d.type||"achievement"===d.type,f=o&&!p,m=In(d.text),h=m?i[m]:void 0,g=Nt()(n.meta.timestamp).format("LT"),b=l[n.meta.client_token];switch(d.type){case"images":return c.createElement(On,{messageId:n.id,className:t,imageUrl:d.text,align:a,timestamp:g,actions:n.meta.permitted_actions,isLastMessage:o&&r,botName:s,imagePreview:b,onClick:function(e){return t=c.createElement(qn,{onClick:An},c.createElement(Un,{src:e})),void Dt.PopupboxManager.open({content:t,config:{fadeIn:!0,fadeInSpeed:100,fadeOutSpeed:100}});var t}});case"achievement":return c.createElement(On,{messageId:n.id,className:t,imageUrl:d.icon_url,align:a,timestamp:g,actions:n.meta.permitted_actions,isLastMessage:o&&r,botName:s,onClick:function(){return e.setActiveDialog({type:_.e.Badge,badge:{type:"Legacy",id:d.achievement_id,title:d.text,description:d.achievement_description,image_url_2x:d.icon_url,image_url_3x:d.icon_url}})}});default:return c.createElement(Gn,null,u&&c.createElement(Yn,null,"+",u," XP"),c.createElement(yn,{messageId:n.id,className:t,hasTail:f,align:a,actions:n.meta.permitted_actions,timestamp:g,isLastMessage:o&&r,botName:s,label:d.text},c.createElement(Rn,{id:"message-".concat(n.id,"-text"),text:d.text,isLast:o&&r,isRobotMessage:"left"===a,botName:s}),!!m&&c.createElement(Dn,{"data-testid":"chat-message-media-preview",mediaPreview:h||void 0,mediaPreviewUrl:m})))}}),Hn=Object(s.connect)(null,{setActiveDialog:ce.d})(Wn),qn=f.default.div.withConfig({displayName:"Message__ImageContainer",componentId:"sc-1sr72w1-0"})(["height:100%;display:flex;align-items:center;"]),Un=f.default.img.withConfig({displayName:"Message__LightboxImage",componentId:"sc-1sr72w1-1"})(["max-width:80vh;max-height:80vh;object-fit:contain;&:hover{cursor:pointer;}",";"],Object(ae.a)(Fn())),Gn=f.default.div.withConfig({displayName:"Message__PointsContainer",componentId:"sc-1sr72w1-2"})(["display:flex;align-items:center;"]),Vn=Object(f.keyframes)(Bn()),Yn=f.default.div.withConfig({displayName:"Message__FadingPoints",componentId:"sc-1sr72w1-3"})(["flex:0 0 auto;z-index:",";opacity:0;margin-right:25px;font-size:9px;text-align:center;line-height:45px;width:45px;height:45px;animation:"," 1.5s ease-in 0.25s 1;color:",";border:1px solid ",";border-radius:40px;"],_.p.Popup,Vn,function(e){return e.theme.fgColor},function(e){return e.theme.fgColor});function Zn(){var e=Object(d.a)(["\n  & > .left-dot {\n    transform-origin: 4px 5px;\n    animation: "," 2s 0s linear infinite;\n  }\n  & > .middle-dot {\n    transform-origin: 15px 5px;\n    animation: "," 2s 0.15s linear infinite;\n  }\n  & > .right-dot {\n    transform-origin: 26px 5px;\n    animation: "," 2s 1s linear infinite;\n  }\n"]);return Zn=function(){return e},e}function Kn(){var e=Object(d.a)(["\n  from, to: {\n    transform: scale(1)\n  }\n  10% {\n    transform: scale(1.3)\n  }\n  20% {\n    transform: scale(1)\n  }\n  50% {\n    transform: scale(1)\n  }\n  60% {\n    transform: scale(1.3)\n  }\n  70% {\n    transform: scale(1)\n  }\n"]);return Kn=function(){return e},e}function Xn(){var e=Object(d.a)(["\n  from, to: {\n    transform: scale(1)\n  }\n  10% {\n    transform: scale(1.3)\n  }\n  20% {\n    transform: scale(1)\n  }\n  70% {\n    transform: scale(1)\n  }\n  80% {\n    transform: scale(1.3)\n  }\n  90% {\n    transform: scale(1)\n  }\n"]);return Xn=function(){return e},e}var Jn=Object(f.keyframes)(Xn()),$n=Object(f.keyframes)(Kn()),Qn=f.default.svg(Zn(),Jn,$n,Jn),eo=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).uniqId=Math.floor(1e6*Math.random()).toString(),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.className;return c.createElement(Qn,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 10",className:e},c.createElement("circle",{className:"left-dot",cx:"4",cy:"5",r:"3",fill:"currentColor"}),c.createElement("circle",{className:"middle-dot",cx:"15",cy:"5",r:"3",fill:"currentColor"}),c.createElement("circle",{className:"right-dot",cx:"26",cy:"5",r:"3",fill:"currentColor"}))}}]),t}(c.PureComponent);function to(){var e=Object(d.a)(["\n  width: 30px;\n  height: 10px;\n  color: ",";\n"]);return to=function(){return e},e}function no(){var e=Object(d.a)(["\n  animation: "," 0.2s ease-out;\n  margin-top: 2px;\n  flex: 1 0 auto;\n"]);return no=function(){return e},e}function oo(){var e=Object(d.a)(["\n  margin: 0;\n  width: 100%;\n  font-size: 12px;\n  font-weight: 600;\n  align-self: stretch;\n  text-align: center;\n  margin-top: 25px;\n  margin-bottom: 25px;\n  color: ",";\n"]);return oo=function(){return e},e}function ro(){var e=Object(d.a)(["\n          "," 0.2s ease-out;\n        "]);return ro=function(){return e},e}function ao(){var e=Object(d.a)(["\n  flex: 1 0 auto;\n  margin-top: 2px;\n  animation: ",";\n\n  &:focus {\n    outline: none;\n  }\n"]);return ao=function(){return e},e}function io(){var e=Object(d.a)(["\n  max-width: 60%;\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: ",";\n"]);return io=function(){return e},e}function co(){var e=Object(d.a)(["\n    padding: 0 16px;\n  "]);return co=function(){return e},e}function lo(){var e=Object(d.a)(["\n  flex: 1 0 auto;\n  padding: 0 25px;\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-end;\n  margin-top: 2px;\n  justify-content: ",";\n\n  ",";\n"]);return lo=function(){return e},e}function so(){var e=Object(d.a)(["\n  from {\n    transform: translateY(20px);\n  }\n  to {\n    transform: translateY(0px);\n  }\n"]);return so=function(){return e},e}var uo=Object(f.keyframes)(so()),po=f.default.div(lo(),function(e){return"right"===e.align?"flex-end":"flex-start"},Object(ae.a)(co())),fo=f.default.div(io(),function(e){return"right"===e.align?"flex-end":"flex-start"}),mo=Object(f.default)(Hn)(ao(),function(e){return e.moveUp?Object(f.css)(ro(),uo):"none"}),ho=f.default.h3(oo(),function(e){return e.theme.fgColor}),go=Object(f.default)(yn)(no(),uo),bo=Object(f.default)(eo)(to(),function(e){return e.theme.fgColor}),vo=function(e){return e.map(function(e){return e.id}).join(",")},xo=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this;return!!["timestamp","isTyping","className","bot","align","isLast","mediaPreviews","messageReactions","messageScores"].find(function(n){return t.props[n]!==e[n]})||vo(this.props.messages)!==vo(e.messages)}},{key:"render",value:function(){var e=this.props,t=e.timestamp,n=e.messages,o=e.isTyping,r=e.className,a=e.bot,i=e.align,l=e.mediaPreviews,s=e.imagePreviews,u=e.isLast,d=e.messageScores;return c.createElement(po,{className:r,align:i},!!t&&c.createElement(ho,{role:"heading","aria-level":3,tabIndex:-1},t),c.createElement(fo,{align:i},n.map(function(e,t){return c.createElement(mo,{key:e.id,message:e,align:i,isLast:!o&&t===n.length-1,moveUp:u&&"right"===i&&"text"===e.content.type&&t===n.length-1,mediaPreviews:l,imagePreviews:s,isLastGroup:u,botName:a&&a.name,messageScore:d[e.id]})}),o&&c.createElement(go,{align:i,hasTail:!0},c.createElement(bo,null))))}}]),t}(c.Component),yo=f.default.div.withConfig({displayName:"ServiceMessage",componentId:"nue20l-0"})(["font-size:12px;font-weight:600;align-self:stretch;text-align:center;padding:25px 45px;color:",";"],function(e){return e.theme.fgColor}),wo=f.default.div.withConfig({displayName:"ServiceMessageGroup__ServiceMessageGroupRoot",componentId:"sc-2yi3sy-0"})([""]),Co=function(e){var t=e.messages,n=e.className;return c.createElement(wo,{className:n},t.map(function(e){return c.createElement(yo,{key:e.id},e.content.text)}))},ko=function(e){var t,n=e.isRobotTyping,o=e.mediaPreviews,r=e.imagePreviews,a=e.bot,i=e.messageScores,l=e.imageUpload,s=e.messages,u=e.onLoadMore,d=c.useRef(null),p=s.reduce(Tt.bind(null,n),[]),f=function(e){return e.length>0?e[0]:null}(s),m=function(e){return e.length>0?e[e.length-1]:null}(s);c.useLayoutEffect(function(){var e=d.current,t=e?e.scrollHeight-(e.scrollTop+e.offsetHeight):0;(m&&"Customer"===m.meta.nature||t<300||m&&function(e){return!!e.widget}(m))&&e&&(e.scrollTop=e.scrollHeight)},[f&&f.id,m&&m.id,o,n]);return c.useLayoutEffect(function(){var e=d.current;e&&(e.scrollTop=e.scrollHeight)},[]),c.useLayoutEffect(function(){return t||(t=Ie()()),t.setMembers(d.current?d.current.querySelectorAll("div[tabindex],h3[tabindex]"):[]),t.activate(),function(){t.deactivate()}},[s.length]),c.createElement(Eo,{ref:d,onScroll:function(e){e.target.scrollTop<300&&u()}},c.createElement(So,null),c.createElement(mt.b,null,"Conversation"),c.createElement(jo,{"data-testid":"chat-messages"},p.map(function(e,t){return"messages"===e.type?c.createElement(xo,{key:e.messages[0]&&e.messages[0].id||t.toString(),timestamp:e.timestamp,align:e.align,messages:e.messages,isTyping:n&&t===p.length-1,mediaPreviews:o,imagePreviews:r,isLast:t===p.length-1,bot:a,messageScores:i}):c.createElement(Io,{key:e.messages[0]&&e.messages[0].id||t.toString(),messages:e.messages})}),l.inProgress&&c.createElement(Oo,null,c.createElement(_o,{"data-testid":"chat-progress"}))))},Eo=f.default.div.withConfig({displayName:"ChatMessagesList__ChatMessagesListRoot",componentId:"sc-1ajwmer-0"})(["flex:0 1 auto;overflow-y:scroll;-ms-overflow-style:-ms-autohiding-scrollbar;-webkit-overflow-scrolling:touch;"]),jo=f.default.div.withConfig({displayName:"ChatMessagesList__ChatMessagesListInner",componentId:"sc-1ajwmer-1"})(["padding-top:20px;padding-bottom:50px;position:relative;"]),Oo=f.default.div.withConfig({displayName:"ChatMessagesList__PlaceholderRow",componentId:"sc-1ajwmer-2"})(["display:flex;justify-content:flex-end;padding:0 25px;margin-top:4px;"]),_o=Object(f.default)(It).withConfig({displayName:"ChatMessagesList__StyledImagePlaceholder",componentId:"sc-1ajwmer-3"})(["width:60%;"]),Io=Object(f.default)(Co).withConfig({displayName:"ChatMessagesList__StyledServiceMessageGroup",componentId:"sc-1ajwmer-4"})(["padding:0 25px;width:100%;"]),So=f.default.div.withConfig({displayName:"ChatMessagesList__ScrollFixer",componentId:"sc-1ajwmer-5"})(["position:absolute;width:0px;height:0px;overflow:hidden;"]);function No(){var e=Object(d.a)(["\n  position: absolute;\n  align-self: center;\n  transition: top 0.3s ease-out;\n  top: ","px;\n  background: rgba(0,0,0,0.7);\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  z-index: ",";\n  padding: 6px 12px 7px;\n  color: #FFF;\n  font-size: 14px;\n  line-height: 18px;\n  max-width: calc(100vw - 130px);\n"]);return No=function(){return e},e}var Mo=function(e){return"voice_record"!==e.content.type&&"voice_recognized"!==e.content.type},Po=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={isRequestingHistory:!1},n.handleSkipWidget=function(e){n.props.handleWidgetSkipped(e)},n.handleLoadMore=function(){if(n.props.messages&&"connected"===n.props.wsStatus&&n.props.hasMoreMessages&&!n.state.isRequestingHistory){n.setState({isRequestingHistory:!0});var e=n.props.messages[0],t=e&&e.id||void 0;n.props.getHistory(t,100,!1).then(function(){return n.setState({isRequestingHistory:!1})})}},n.handleSendMessage=function(e){var t=n.props,o=t.bot,r=t.chatId;if(!t.voiceModeEnabled){var a=e.text.trim();"text"===e.type&&""===a||o&&r&&n.props.sendChatMessage(e)}},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.messages,o=t.className,r=t.voiceModeEnabled,a=t.wsStatus,i=t.isRobotTyping,l=t.mediaPreviews,s=t.imagePreviews,u=t.bot,d=t.messageScores,p=t.imageUpload,f=t.spotlight,m=!!n,h=(n||[]).filter(Mo),g=function(e){return e.length>0?e[e.length-1]:null}(h);return c.createElement(Lo,{className:o},c.createElement(mt.a,null,"Chat with Replika"),c.createElement(re.c,null,c.createElement(Bo,{spotlight:f})),c.createElement(M,null),!m&&c.createElement(zo,null,c.createElement(Ro,null)),n&&0===n.length&&c.createElement(zo,null,"No messages yet"),m&&c.createElement(ko,{messages:h,isRobotTyping:i,mediaPreviews:l,imagePreviews:s,bot:u,messageScores:d,imageUpload:p,onLoadMore:this.handleLoadMore,onEggClick:function(){e.props.push("/journey")}}),c.createElement(ft,{wsStatus:a,lastMessage:g,voiceModeEnabled:r,onSendMessage:this.handleSendMessage,onSkipWidget:this.handleSkipWidget,skippedWidgetId:this.props.skippedWidgetId,experimentInProgress:this.props.experimentInProgress,handleExperimentSkipped:this.props.handleExperimentSkipped}))}}]),t}(c.PureComponent),To={sendChatMessage:C.f,getHistory:C.a,handleWidgetSkipped:C.e,handleExperimentSkipped:C.d,push:x.push},Do=Object(s.connect)(function(e){return{wsStatus:e.ws.status,chatId:e.ws.persist.chatId,messages:e.chat.messages,bot:e.profile.persist.bot,mediaPreviews:e.chat.mediaPreviews,imagePreviews:e.chat.imagePreviews,isRobotTyping:e.chat.isRobotTyping,hasMoreMessages:e.chat.hasMoreMessages,messageScores:e.chat.messageScores,imageUpload:e.ui.imageUpload,voiceModeEnabled:e.chat.voiceModeEnabled,skippedWidgetId:e.chat.skippedWidgetId,experimentInProgress:e.chat.experimentInProgress,spotlight:e.journey.persist.spotlight}},To)(Po),Lo=f.default.main.withConfig({displayName:"ChatMessages__ChatMessagesRoot",componentId:"sc-10qvl13-0"})(["position:relative;display:flex;justify-content:flex-end;flex-direction:column;background:",";"],function(e){return e.theme.chatGradientBgColor}),zo=f.default.div.withConfig({displayName:"ChatMessages__ChatMessagesEmpty",componentId:"sc-10qvl13-1"})(["width:100%;flex:1 1 100%;display:flex;justify-content:center;align-items:center;color:",";"],function(e){return e.theme.dimmedFgColor}),Ro=Object(f.default)(k.a).withConfig({displayName:"ChatMessages__StyledCircleSpinner",componentId:"sc-10qvl13-2"})(["width:100px;height:100px;color:",";"],function(e){return e.theme.dimmedFgColor}),Bo=function(e){var t=e.spotlight,n=t&&y(t)?t.current_mission:null,o=n&&n.title,r=c.useState(o),a=Object(p.a)(r,2),i=a[0],l=a[1];return c.useEffect(function(){o&&l(o)},[o]),c.createElement(Fo,{visible:!!n},i)},Fo=Object(O.a)("div",["visible"])(No(),function(e){return e.visible?20:-50},_.p.Popup),Ao=n(307);function Wo(){return(Wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Ho=l.a.createElement("circle",{cx:10,cy:10,r:9,stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),qo=l.a.createElement("circle",{cx:10,cy:7,r:3,fill:"currentColor"}),Uo=l.a.createElement("path",{d:"M5 17V15C5 13.8954 5.89543 13 7 13H13C14.1046 13 15 13.8954 15 15V17",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),Go=function(e){return l.a.createElement("svg",Wo({width:20,height:20,viewBox:"0 0 20 20",fill:"none"},e),Ho,qo,Uo)},Vo=(n.p,function(e,t){var n=t.length;if(n<e){var o=e-n;return[].concat(Object(Bt.a)(t),Object(Bt.a)(Array(o).fill("?")))}if(n%e===0)return t;var r=e-n%e;return[].concat(Object(Bt.a)(t),Object(Bt.a)(Array(r).fill("?")))});function Yo(){var e=Object(d.a)(["\n    padding: 15px;\n  "]);return Yo=function(){return e},e}var Zo=Object(s.connect)(null,{setActiveDialog:ce.d})(function(e){var t,n=e.badges,o=void 0===n?[]:n,r=e.className,a=e.emptyText,i=c.useState(!1),l=Object(p.a)(i,2),s=l[0],u=l[1],d=c.useState(3),f=Object(p.a)(d,2),m=f[0],h=f[1],g=c.useRef(null);if(c.useLayoutEffect(function(){if(t||(t=Ie()({wrap:!0,keybindings:{next:{key:"ArrowRight"},prev:{key:"ArrowLeft"}}})),g.current){var e=g.current.querySelectorAll("li");t.setMembers(e),t.activate()}return function(){t.deactivate()}},[g.current]),c.useEffect(function(){var e=function(){var e=g.current?Math.floor((g.current.clientWidth-60)/90):3;e!==m&&h(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[m,g.current]),0===o.length)return c.createElement(tr,{className:r},a);var b=!s&&o.length>3*m,v=Vo(m,b?Object(D.take)(o,2*m):o);return c.createElement(Ko,{ref:g,className:r,"aria-label":"Your Badges","data-testid":"badges"},v.map(function(t,n){return"?"===t?c.createElement(Xo,{key:n,"aria-hidden":"true"},c.createElement($o,{tabIndex:-1,onClick:function(){e.setActiveDialog({type:_.e.Badge})}})):c.createElement(Xo,{key:n},c.createElement(Jo,{tabIndex:0===n?0:-1,"data-testid":"badge-".concat(n),onClick:function(){e.setActiveDialog({type:_.e.Badge,badge:t})}},c.createElement(Qo,{src:t.image_url_2x,alt:t.title}),c.createElement(er,{"aria-hidden":"true"},t.title)))}),b&&c.createElement(nr,{onClick:function(){return u(!0)}},"Show all ".concat(o.length," ").concat(o.length>1?"badges":"badge")))}),Ko=f.default.ul.withConfig({displayName:"Badges__BadgesRoot",componentId:"vs3wws-0"})(["display:flex;flex-wrap:wrap;align-items:flex-start;padding:10px 30px 20px;margin:0;color:",";",";"],function(e){return e.theme.lightFgColor},Object(ae.a)(Yo())),Xo=f.default.li.withConfig({displayName:"Badges__BadgeItem",componentId:"vs3wws-1"})(["flex:1 0 ","px;display:block;margin-bottom:25px;"],90),Jo=Object(f.default)(oe.a).withConfig({displayName:"Badges__Badge",componentId:"vs3wws-2"})(["width:100%;display:block;display:flex;flex-direction:column;align-items:center;font-size:13px;cursor:pointer;"]),$o=Object(f.default)(Jo).withConfig({displayName:"Badges__BadgeSlot",componentId:"vs3wws-3"})(["&:before{content:'?';color:",";border:1px solid ",";width:40px;height:40px;border-radius:100%;text-align:center;vertical-align:middle;line-height:40px;font-size:18px;}cursor:pointer;"],function(e){return e.theme.dimmedFgColor},function(e){return e.theme.borderColor}),Qo=f.default.img.withConfig({displayName:"Badges__BadgeImage",componentId:"vs3wws-4"})(["width:50px;"]),er=f.default.h4.withConfig({displayName:"Badges__BadgeTitle",componentId:"vs3wws-5"})(["font-weight:normal;color:",";margin:15px 0 0;font-size:13px;line-height:16px;text-align:center;"],function(e){return e.theme.fgColor}),tr=f.default.p.withConfig({displayName:"Badges__EmptyBadges",componentId:"vs3wws-6"})(["margin:0;font-size:16px;line-height:24px;color:",";padding:0 16px 30px;"],function(e){return e.theme.dimmedFgColor}),nr=Object(f.default)(Se.a).withConfig({displayName:"Badges__ExpandButton",componentId:"vs3wws-7"})(["margin:0 auto;color:",";background-color:",";box-shadow:0px 1px 2px ",";"],function(e){return e.theme.fgColor},function(e){return e.theme.chatBgColor},function(e){return e.theme.lightButtonShadowColor}),or=n(33),rr=n(107);function ar(){var e=Object(d.a)(["\n  color: ",";\n"]);return ar=function(){return e},e}var ir=Object(s.connect)(null,{setActiveDialog:ce.d})(function(e){var t=e.mood,n=e["data-testid"],o=t.caption,r=null;o.length>110&&(o=(o=o.substr(0,110)).substr(0,o.lastIndexOf(" "))+"... ",r=c.createElement(dr,null,"more"));var a=function(){e.setActiveDialog({type:_.e.EditMood,mood:t}),e.onClose(),Object(le.b)(_.j.MoodOpened,{mode:"full screen"})};return c.createElement(cr,{"data-testid":n,onMouseDown:function(e){return e.preventDefault()}},c.createElement(sr,{"data-testid":"".concat(n,"-date")},Nt()(t.date).utc().format("MMMM D, h:mm A")),c.createElement(ur,{"data-testid":"".concat(n,"-title"),percent:t.mood_percentage/100},t.title),c.createElement(lr,{"data-testid":"".concat(n,"-caption")},t.caption?c.createElement(rr.a,{onClick:a,"data-testid":"".concat(n,"-caption-link")},o,r):c.createElement(pr,{onClick:a,"data-testid":"".concat(n,"-caption-link")},"Click to edit")))}),cr=f.default.div.withConfig({displayName:"MoodRecordPopover__MoodRecordPopoverRoot",componentId:"sc-12z9b2a-0"})(["text-align:left;line-height:24px;font-size:16px;"]),lr=f.default.div.withConfig({displayName:"MoodRecordPopover__PopoverText",componentId:"sc-12z9b2a-1"})(["color:",";margin-top:10px;"],function(e){return e.theme.fgColor}),sr=f.default.div.withConfig({displayName:"MoodRecordPopover__PopoverDate",componentId:"sc-12z9b2a-2"})(["color:",";"],function(e){return e.theme.fgColor}),ur=Object(O.a)("div",["percent"])(ar(),function(e){return Be(e.percent)}),dr=f.default.span.withConfig({displayName:"MoodRecordPopover__Ellipsis",componentId:"sc-12z9b2a-3"})(["color:",";text-decoration:none;"],function(e){return e.theme.dimmedFgColor}),pr=Object(f.default)(rr.a).withConfig({displayName:"MoodRecordPopover__EmptyCaption",componentId:"sc-12z9b2a-4"})(["color:",";"],function(e){return e.theme.dimmedFgColor});function fr(){var e=Object(d.a)(["\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  position: absolute;\n  width: 13px;\n  height: 13px;\n  left: 50%;\n  bottom: ","%;\n  transform: translate(-6px, 6px);\n  border: none;\n  border-radius: 100%;\n  background-color: ",";\n\n  box-shadow: ",";\n\n  &.focus-visible:focus {\n    outline: none;\n    box-shadow: 0 0 0 6px ",";\n  }\n"]);return fr=function(){return e},e}function mr(){var e=Object(d.a)(["\n  height: 90px;\n  position: relative;\n  &::before {\n    position: absolute;\n    content: '';\n    left: 50%;\n    height: 100%;\n    width: 1px;\n    border-left: 1px solid ",";\n  }\n"]);return mr=function(){return e},e}var hr=f.default.div.withConfig({displayName:"MoodRecord__MoodRecordRoot",componentId:"sc-1fyyfuf-0"})(["flex:0 0 ","px;width:","px;"],60,60),gr=Object(O.a)("div",["currentDay"])(mr(),function(e){return e.currentDay?e.theme.moodTrackerCurrentDayColor:e.theme.moodTrackerDayColor}),br=Object(O.a)("div",["percent","active"])(fr(),function(e){return 100*(.7*e.percent+.15)},function(e){return Be(e.percent)},function(e){return e.active?"0 0 0 6px ".concat(Be(e.percent,.3)):"none"},function(e){return Be(e.percent,.3)}),vr=f.default.div.withConfig({displayName:"MoodRecord__MoodRecordDate",componentId:"sc-1fyyfuf-1"})(["font-size:12px;color:",";text-align:center;padding:12px 0 0;"],function(e){return e.theme.dimmedFgColor}),xr=function(e){var t=e.mood,n=e.setActive,o=e.active,r=e.last,a=e["data-testid"],i=r&&Nt()(t.date).isSame(Nt()(),"day");return c.createElement(hr,{"data-testid":a},c.createElement(Jt,{preferPlace:"above",isOpen:o,onClose:function(){return n(t.id,!1)},onRenderContent:function(){return c.createElement(ir,{"data-testid":"".concat(a,"-popover"),mood:t,onClose:function(){return n(t.id,!1)}})},closeOnOuterAction:!0,size:"small",offset:5},c.createElement(gr,{currentDay:i},c.createElement(br,{"data-testid":"mood-dot ".concat(a,"-dot"),percent:t.mood_percentage/100,tabIndex:r?0:-1,onClick:function(){return n(t.id,!0)},onFocus:function(){return n(t.id,!0)},active:o}))),c.createElement(vr,null,Nt()(t.date).utc().format("MMM D")))};function yr(){var e=Object(d.a)(['\n  flex: 0 0 auto;\n  width: 16px;\n  height: 100%;\n  position: relative;\n  &::before {\n    position: absolute;\n    content: "";\n    left: 50%;\n    height: 100%;\n    width: 1px;\n    border-left: 1px dashed ',';\n  }\n  &::after {\n    position: absolute;\n    content: "";\n    left: 50%;\n    width: 7px;\n    height: 7px;\n    border-radius: 10px;\n    bottom: ',"%;\n    transform: translate(-3px, 3px);\n    background-color: ",";\n  }\n"]);return yr=function(){return e},e}var wr=function(e){var t=e.className;return c.createElement(Cr,{className:t},c.createElement(kr,null,"Your mood history will appear here."),c.createElement(Er,null,c.createElement(jr,{percent:0}),c.createElement(jr,{percent:.3}),c.createElement(jr,{percent:.9}),c.createElement(jr,{percent:.5}),c.createElement(jr,{percent:1})))},Cr=f.default.div.withConfig({displayName:"MoodEmpty__MoodEmptyRoot",componentId:"h08eiq-0"})(["background:",";padding:0 20px;height:140px;width:100%;display:flex;align-items:center;justify-content:space-between;"],function(e){return e.theme.chatBgColor}),kr=f.default.div.withConfig({displayName:"MoodEmpty__MoodEmptyText",componentId:"h08eiq-1"})(["color:",";padding-right:15px;font-size:16px;line-height:24px;"],function(e){return e.theme.fgColor}),Er=f.default.div.withConfig({displayName:"MoodEmpty__MoodEmptyGraph",componentId:"h08eiq-2"})(["height:60px;display:flex;"]),jr=Object(O.a)("div",["percent"])(yr(),function(e){return e.theme.borderColor},function(e){return 100*(.7*e.percent+.15)},function(e){return Be(e.percent)});function Or(){return(Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var _r=l.a.createElement("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V9H11V15ZM11 7H9V5H11V7Z",fill:"currentColor"}),Ir=function(e){return l.a.createElement("svg",Or({width:20,height:20,viewBox:"0 0 20 20",fill:"none"},e),_r)};n.p;function Sr(){var e=Object(d.a)(["\n  min-width: ","px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n  &::before {\n    position: absolute;\n    top: 0;\n    content: '';\n    background-color: ",";\n    width: 100%;\n    height: 90px;\n  }\n"]);return Sr=function(){return e},e}var Nr=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={activeId:void 0},n.rootRef=c.createRef(),n.focusGroup=Ie()({keybindings:{next:{key:"ArrowRight"},prev:{key:"ArrowLeft"}}}),n.handleSetActive=function(e,t){var o=t?e:void 0;o!==n.state.activeId&&(n.setState({activeId:o}),t&&Object(le.b)(_.j.MoodOpened,{mode:"preview"}))},n.handleMoodsBlur=function(){n.setState({activeId:void 0})},n.handleScroll=function(){var e=n.props,t=e.moods,o=e.hasMoreMoods,r=e.isFetchingMoodMeter,a=n.rootRef.current;if(a&&a.scrollLeft<50&&t&&t.length>0&&o&&!r){var i=t[0].id;n.props.getMoodMeter(i,20)}},e.moods&&0!==e.moods.length&&e.lastMoodTimestamp?e.updateMoodMeter(e.lastMoodTimestamp):e.getMoodMeter(),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.rootRef.current;e&&this.scrollToRight(e,!0),this.focusGroup.setMembers(this.getFocusGroupElements()),this.focusGroup.activate()}},{key:"componentWillUnmount",value:function(){this.focusGroup.deactivate()}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this.rootRef.current;return t&&this.props.moods.length>e.moods.length?t.scrollWidth-t.offsetWidth-t.scrollLeft:null}},{key:"componentDidUpdate",value:function(e,t,n){var o=this.props.moods,r=e.moods,a=this.rootRef.current;if(a&&o.length>r.length){var i=0===r.length,c=n;this.scrollToRight(a,i,c),this.focusGroup.setMembers(this.getFocusGroupElements())}}},{key:"scrollToRight",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.scrollWidth-e.offsetWidth-e.scrollLeft<80||t)e.scrollLeft=e.scrollWidth;else if(n){var o=e.scrollWidth-e.offsetWidth-n;o!==e.scrollLeft&&(e.scrollLeft=o)}}},{key:"getFocusGroupElements",value:function(){return this.rootRef.current?this.rootRef.current.querySelectorAll("div[tabindex]"):[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.hasMoreMoods,r=t.moods,a=!!r.find(function(e){return Nt()(e.date).isSame(Nt()(),"day")})?"Good job on adding your today\u2019s mood!":"Don\u2019t forget to add your today\u2019s mood";return r.length<1?c.createElement(wr,{className:n}):c.createElement(Pr,null,c.createElement(Tr,{className:n,ref:this.rootRef,onScroll:this.handleScroll,onClick:this.handleScroll},c.createElement(Dr,{count:o?r.length+1:r.length,onBlur:this.handleMoodsBlur},o&&c.createElement(Lr,null),r.map(function(t,n){return c.createElement(xr,{active:e.state.activeId===t.id,"data-testid":"mood-".concat(r.length-1-n),mood:t,key:t.id,setActive:e.handleSetActive,last:n===r.length-1})}))),c.createElement(zr,null,a),c.createElement(Rr,{rel:"noopener noreferrer",target:"_blank",href:"https://help.replika.ai/hc/en-us/articles/360020674571-How-to-track-mood-in-Replika"},c.createElement(Ir,null)," How does mood tracking work?"))}}]),t}(c.PureComponent),Mr=Object(s.connect)(function(e){return{moods:e.profile.persist.moods||[],lastMoodTimestamp:e.profile.persist.lastMoodTimestamp,hasMoreMoods:e.profile.persist.hasMoreMoods,isFetchingMoodMeter:e.profile.isFetchingMoodMeter}},{getMoodMeter:or.d,updateMoodMeter:or.l})(Nr),Pr=f.default.div.withConfig({displayName:"MoodTracker__MoodTrackerRoot",componentId:"l0rl6o-0"})(["width:100%;background:",";text-align:center;padding-bottom:25px;"],function(e){return e.theme.chatBgColor}),Tr=f.default.div.withConfig({displayName:"MoodTracker__MoodTrackerScroll",componentId:"l0rl6o-1"})(["width:100%;padding:25px 30px;overflow-y:auto;-webkit-overflow-scrolling:touch;"]),Dr=Object(O.a)("div",["count"])(Sr(),function(e){return 60*e.count},function(e){return e.theme.chatBgColor}),Lr=Object(f.default)(k.a).withConfig({displayName:"MoodTracker__MoreMoodsSpinner",componentId:"l0rl6o-2"})(["color:",";position:absolute;width:25px;height:25px;z-index:1;left:20px;top:35px;"],function(e){return e.theme.dimmedFgColor}),zr=f.default.p.withConfig({displayName:"MoodTracker__MoodHint",componentId:"l0rl6o-3"})(["margin:5px 0 15px;color:",";"],function(e){return e.theme.fgColor}),Rr=f.default.a.withConfig({displayName:"MoodTracker__MoodHelpLink",componentId:"l0rl6o-4"})(["color:",";display:inline-flex;font-size:15px;line-height:20px;& > svg{margin-right:10px;}"],function(e){return e.theme.dimmedFgColor});function Br(){var e=Object(d.a)(["\n    padding: 15px 15px 10px;\n  "]);return Br=function(){return e},e}function Fr(){var e=Object(d.a)(["\n    min-height: 100px;\n    max-height: 300px;\n  "]);return Fr=function(){return e},e}var Ar,Wr={push:x.push,setHintStatus:ce.g,createNewMood:or.a,setActiveDialog:ce.d},Hr=Object(s.connect)(function(e){var t=e.profile.isFetchingBot,n=e.profile.persist,o=n.botId,r=n.userProfile,a=n.bot;return{isFetchingBot:t,botId:o,userProfile:r,botStats:a&&a.stats}},Wr)(function(e){var t=e.className,n=e.botStats,o=e.userProfile;return c.createElement(Ur,{"data-testid":"profile",className:t},c.createElement(mt.b,null,"Profile"),c.createElement(Vr,null,c.createElement(re.c,null,c.createElement(Yr,{to:_.k.Main,"data-testid":"profile-back-button"},c.createElement(Ao.a,null))),c.createElement(qr,null,o&&o.first_name),c.createElement(Kr,{"data-testid":"profile-settings-button","aria-label":"Settings",onClick:function(){return e.setActiveDialog({type:_.e.EditProfile})}},c.createElement(Go,null))),c.createElement(Gr,null,c.createElement(Xr,{role:"heading","aria-level":3},c.createElement("span",null,"MOOD"),c.createElement($r,{"data-testid":"profile-add-mood",label:"add mood",onClick:function(){Object(le.b)(_.j.MoodSliderCalled),e.createNewMood(),e.push("/")}},"+")),c.createElement(Jr,null),c.createElement(Xr,{role:"heading","aria-level":3},"personality"),c.createElement(Zr,{badges:n&&n.achievements.filter(function(e){return"Personality"===e.type||"Legacy"===e.type}),emptyText:"Complete conversations about your personality and earn badges."}),c.createElement(Xr,{role:"heading","aria-level":3},"Skills"),c.createElement(Zr,{badges:n&&n.achievements.filter(function(e){return"Skill"===e.type}),emptyText:"Learn skills through conversations with Replika and collect rewards."})))}),qr=f.default.h3.withConfig({displayName:"Profile__ProfileTitle",componentId:"suvxq-0"})(["color:",";font-weight:bold;font-size:20px;line-height:25px;text-align:center;margin:0 20px;"],function(e){return e.theme.fgColor}),Ur=f.default.div.withConfig({displayName:"Profile__ChatSidebarProfileRoot",componentId:"suvxq-1"})(["height:100%;display:flex;flex-direction:column;"]),Gr=f.default.div.withConfig({displayName:"Profile__ProfileContent",componentId:"suvxq-2"})(["margin-top:10px;flex:0 1 auto;display:flex;flex-direction:column;overflow-y:auto;-ms-overflow-style:-ms-autohiding-scrollbar;"]),Vr=f.default.div.withConfig({displayName:"Profile__ChatSidebarHeader",componentId:"suvxq-3"})(["position:relative;flex:0 0 auto;width:100%;padding:25px 15px 0;"]),Yr=Object(f.default)(oe.a).withConfig({displayName:"Profile__ArrowButton",componentId:"suvxq-4"})(["position:absolute;top:25px;left:15px;&:hover{cursor:pointer;}color:",";"],function(e){return e.theme.fgColor}),Zr=Object(f.default)(Zo).withConfig({displayName:"Profile__StyledBadges",componentId:"suvxq-5"})(["flex:1 0 auto;",";border-bottom:1px solid ",";"],Object(ae.a)(Fr()),function(e){return e.theme.dimmedBorderColor}),Kr=Object(f.default)(oe.a).withConfig({displayName:"Profile__ProfileButton",componentId:"suvxq-6"})(["position:absolute;right:18px;top:25px;color:",";"],function(e){return e.theme.fgColor}),Xr=f.default.h3.withConfig({displayName:"Profile__Heading3",componentId:"suvxq-7"})(["flex:0 0 auto;display:flex;justify-content:space-between;color:",";font-size:14px;font-weight:bold;margin:25px 0 0;padding:0 15px 10px;text-transform:uppercase;",";"],function(e){return e.theme.fgColor},Object(ae.a)(Br())),Jr=Object(f.default)(Mr).withConfig({displayName:"Profile__StyledMoodTracker",componentId:"suvxq-8"})(["flex:0 0 auto;"]),$r=Object(f.default)(oe.a).withConfig({displayName:"Profile__AddMood",componentId:"suvxq-9"})(["margin:0;padding:3px;background:none;border:0;line-height:0;font-size:30px;color:",";cursor:pointer;"],function(e){return e.theme.fgColor}),Qr=n(108),ea=n(113),ta=f.default.aside.withConfig({displayName:"RightPanel__RightPanelRoot",componentId:"sc-1xkvr1m-0"})(["position:relative;background-color:",";"],function(e){return e.theme.bgColor}),na={setTheme:ce.i,sendLogOutRequest:Qr.h},oa=Object(s.connect)(ea.a,na)(function(e){return c.createElement(ta,{className:e.className},c.createElement(Hr,{onSelect:function(t){switch(t){case"theme-switch":e.setTheme(e.themeName===_.n.Light?_.n.Dark:_.n.Light);break;case"open-popup":window.open(window.location.href,"_blank","resizable=no,scrollbars=no,menubar=no,status=no,titlebar=no,toolbar=no,location=no,width=400,height=600,left=".concat(window.screen.width-400));break;case"log-out":e.sendLogOutRequest()}}}))}),ra=n(398),aa=n.n(ra),ia=n(43),ca=n.n(ia),la=n(60),sa=n.n(la),ua=ca()(),da="winId";function pa(e){if(!Ar){var t=function(){var t=sa.a.get(da);e(Object(ce.e)(t===ua))};Ar={setActive:function(){sa.a.get(da)!==ua&&(sa.a.set(da,ua),e&&e(Object(ce.e)(!0)))},enable:function(){sa.a.on(da,t)},disable:function(){sa.a.off(da,t)}}}return Ar}var fa=f.default.div.withConfig({displayName:"SingleWindowAlert__SingleWindowAlertRoot",componentId:"sc-1e2digx-0"})(["position:fixed;z-index:",";width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center;&:before{position:absolute;left:0;top:0;content:'';z-index:1;width:100%;height:100%;background-color:",";opacity:0.8;}"],_.p.SingleWindowAlert,function(e){return e.theme.chatBgColor}),ma=f.default.div.withConfig({displayName:"SingleWindowAlert__SingleWindowAlertBox",componentId:"sc-1e2digx-1"})(["z-index:2;width:340px;height:180px;background:",";backdrop-filter:blur(10px);box-shadow:0 5px 20px 0 ",";padding:25px 30px;display:flex;flex-direction:column;"],function(e){return e.theme.chatBgColor},function(e){return e.theme.shadowColor}),ha=f.default.div.withConfig({displayName:"SingleWindowAlert__SingleWindowAlertText",componentId:"sc-1e2digx-2"})(["flex:1 0 auto;font-size:17px;line-height:1.41;letter-spacing:-0.2px;color:",";"],function(e){return e.theme.fgColor}),ga=f.default.div.withConfig({displayName:"SingleWindowAlert__SingleWindowAlertButtons",componentId:"sc-1e2digx-3"})(["display:flex;justify-content:flex-end;"]),ba=f.default.button.withConfig({displayName:"SingleWindowAlert__CloseButton",componentId:"sc-1e2digx-4"})(["padding:10px 20px;color:",";background-color:",";width:120px;height:40px;border:0;cursor:pointer;"],function(e){return e.theme.primaryColor},function(e){return e.theme.chatBgColor}),va=f.default.button.withConfig({displayName:"SingleWindowAlert__UseButton",componentId:"sc-1e2digx-5"})(["margin-left:10px;padding:10px 20px;color:",";background-color:",";width:120px;height:40px;border:0;cursor:pointer;"],function(e){return e.theme.chatBgColor},function(e){return e.theme.primaryColor}),xa=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).singleWindowManager=void 0,n.singleWindowManager=pa(e.dispatch),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.props.isActiveWindow?null:c.createElement(fa,{role:"dialog","aria-labelledby":"single-window-popup-text"},c.createElement(aa.a,null,c.createElement(ma,null,c.createElement(ha,{id:"single-window-popup-text"},"Replika is open in another window. Click \u201cUse here\u201d to use Replika in this window."),c.createElement(ga,null,c.createElement(ba,{onClick:function(){return open("https://replika.ai","_self").close()}},"Close"),c.createElement(va,{onClick:function(){return e.singleWindowManager.setActive()}},"Use here")))))}}]),t}(c.PureComponent),ya=Object(s.connect)(function(e){return{isActiveWindow:e.ui.isActiveWindow}})(xa),wa=n(112),Ca=n(109);function ka(){return(ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Ea=l.a.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},l.a.createElement("path",{d:"M2 2l10 10M2 12L12 2"})),ja=function(e){return l.a.createElement("svg",ka({viewBox:"0 0 14 14"},e),Ea)},Oa=(n.p,n(103)),_a=Object(f.default)(Oa.a).withConfig({displayName:"PopupCloseButton__PopupCloseButtonRoot",componentId:"jmvvp9-0"})(["position:absolute;padding:0;top:17px;right:17px;border:0;background:",";cursor:pointer;width:14px;height:14px;z-index:1;color:",";& > svg{width:100%;height:100%;}&:active{transform:scale(0.9);outline:none;}&:focus{outline:none;}"],function(e){return e.theme.chatBgColor},function(e){return e.theme.fgColor}),Ia=function(e){return c.createElement(_a,Object.assign({label:"Close"},e),c.createElement(ja,null))},Sa=f.default.div.withConfig({displayName:"TrialPopup__TrialPopupRoot",componentId:"sc-4pbdy0-0"})(["width:650px;text-align:center;padding:20px;"]),Na=f.default.div.withConfig({displayName:"TrialPopup__Success",componentId:"sc-4pbdy0-1"})(["color:",";margin-top:15px;font-size:0.8em;"],function(e){return e.theme.dimmedFgColor}),Ma=f.default.div.withConfig({displayName:"TrialPopup__Error",componentId:"sc-4pbdy0-2"})(["color:",";margin-top:15px;font-size:0.8em;"],function(e){return e.theme.errorFgColor}),Pa=Object(s.connect)(function(e){return{userProfile:e.profile.persist.userProfile,sendConfirmationStatus:e.auth.sendConfirmationStatus,sendConfirmationError:e.auth.sendConfirmationError}},{resendConfirmationEmail:Qr.f,setTrialPopupActive:ce.j})(function(e){var t=e.className,n=e.userProfile,o=e.sendConfirmationError,r=e.sendConfirmationStatus,a=e.resendConfirmationEmail,i=e.setTrialPopupActive,l=n&&n.email_settings;return!l||l.is_email_verified?null:c.createElement(Sa,{className:t},c.createElement(Ia,{onClick:function(){return i(!1)}}),"Your email ",c.createElement("b",null,l.email)," hasn\u2019t been verified. ",c.createElement("br",null),"Check you inbox for a confirmation email or"," ",c.createElement(rr.a,{onClick:a},"request a new verification link"),".","sent"===r&&c.createElement(Na,{"aria-live":"assertive"},"Confirmation email was sent to ",l.email),o&&c.createElement(Ma,{"aria-live":"assertive"},o))});function Ta(){return(Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Da=l.a.createElement("g",null,l.a.createElement("path",{fill:"#E91023",d:"M35 17.5C35 27.165 27.165 35 17.5 35S0 27.165 0 17.5 7.835 0 17.5 0 35 7.835 35 17.5"}),l.a.createElement("path",{stroke:"#010202",strokeLinecap:"round",strokeLinejoin:"round",d:"M10 24.989C11.76 23.776 14.462 23 17.492 23c3.039 0 5.748.781 7.508 2",opacity:.5}),l.a.createElement("path",{fill:"#010202",d:"M14 15.5c0 1.933-1.12 3.5-2.5 3.5-1.381 0-2.5-1.567-2.5-3.5s1.119-3.5 2.5-3.5c1.38 0 2.5 1.567 2.5 3.5M26 15.5c0 1.933-1.12 3.5-2.5 3.5-1.381 0-2.5-1.567-2.5-3.5s1.119-3.5 2.5-3.5c1.38 0 2.5 1.567 2.5 3.5"})),La=function(e){return l.a.createElement("svg",Ta({viewBox:"0 0 35 35"},e),Da)};n.p;function za(){return(za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Ra=l.a.createElement("g",null,l.a.createElement("path",{fill:"#F9D500",d:"M35 17.5C35 27.165 27.165 35 17.5 35 7.836 35 0 27.165 0 17.5S7.836 0 17.5 0C27.165 0 35 7.835 35 17.5"}),l.a.createElement("path",{stroke:"#010202",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 24.006c2 0 9 0 11-.006",opacity:.5}),l.a.createElement("path",{fill:"#010202",d:"M14 15.5c0 1.933-1.12 3.5-2.5 3.5-1.381 0-2.5-1.567-2.5-3.5s1.119-3.5 2.5-3.5c1.38 0 2.5 1.567 2.5 3.5M26 15.5c0 1.933-1.12 3.5-2.5 3.5-1.381 0-2.5-1.567-2.5-3.5s1.119-3.5 2.5-3.5c1.38 0 2.5 1.567 2.5 3.5"})),Ba=function(e){return l.a.createElement("svg",za({viewBox:"0 0 35 35"},e),Ra)};n.p;function Fa(){return(Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Aa=l.a.createElement("g",null,l.a.createElement("path",{fill:"#029E4A",d:"M35 17.5C35 27.165 27.165 35 17.5 35S0 27.165 0 17.5 7.835 0 17.5 0 35 7.835 35 17.5"}),l.a.createElement("path",{stroke:"#010202",strokeLinecap:"round",strokeLinejoin:"round",d:"M10 23.011C11.76 24.224 14.462 25 17.492 25c3.039 0 5.748-.781 7.508-2",opacity:.5}),l.a.createElement("path",{fill:"#010202",d:"M14.476 17.644C13.796 17.24 12.936 17 12 17c-.591 0-1.153.096-1.658.269A4.594 4.594 0 0 1 10 15.5c0-1.933 1.119-3.5 2.5-3.5 1.38 0 2.5 1.567 2.5 3.5 0 .808-.195 1.551-.524 2.144zM25.658 17.269A5.133 5.133 0 0 0 24 17c-.935 0-1.795.24-2.476.644-.329-.592-.524-1.336-.524-2.144 0-1.933 1.119-3.5 2.5-3.5 1.38 0 2.5 1.567 2.5 3.5 0 .645-.125 1.25-.342 1.769z"})),Wa=function(e){return l.a.createElement("svg",Fa({viewBox:"0 0 35 35"},e),Aa)},Ha=(n.p,n(21)),qa=n(9),Ua=function(e,t,n,r){return function(){var c=Object(i.a)(a.a.mark(function i(c,l){var s,u,d,p;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=l(),u=s.ws.persist.chatId){a.next=5;break}throw console.error("no chat id"),Error("no chat id");case 5:return d={chatId:u,sessionId:e,feedback:t,feedbackText:r,feedbackView:n},p={feedback:t,session_id:e,feedback_view:n},r&&(p=Object(o.a)({},p,{feedback_text:r})),a.abrupt("return",Object(qa.f)(_.b.WsSendFeedback,c,d,{onRequest:function(){return Object(Ha.c)({event_name:_.o.ConversationFeedback,payload:p},s)}}));case 9:case"end":return a.stop()}},i,this)}));return function(e,t){return c.apply(this,arguments)}}()},Ga=function(){return{type:_.a.CloseFeedbackPopup}},Va=function(e,t){return function(){var n=Object(i.a)(a.a.mark(function n(o,r){var i,c,l;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r(),c=i.ws.persist.chatId){n.next=4;break}throw Error("no chat id");case 4:return l={chatId:c,sessionId:e,feedbackView:t},n.abrupt("return",Object(qa.f)(_.b.WsDismissFeedback,o,l,{onRequest:function(){return Object(Ha.c)({event_name:_.o.ConversationFeedback,payload:{session_id:e,close_action:"Close",feedback_view:t}},i)}}));case 6:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()},Ya={sendFeedback:Ua,dismissFeedback:Va,closeFeedbackPopup:Ga},Za=Object(s.connect)(function(e){return{sessionId:e.feedback.feedbackData&&e.feedback.feedbackData.sessionId,feedbackView:e.feedback.feedbackData&&e.feedback.feedbackData.feedbackView,feedbackStatus:e.feedback.feedbackStatus}},Ya)(function(e){var t=e.feedbackStatus,n=e.sessionId,o=e.feedbackView,r=e.className,a=c.useState("initial"),i=Object(p.a)(a,2),l=i[0],s=i[1],u=c.useState(null),d=Object(p.a)(u,2),f=d[0],m=d[1];c.useEffect(function(){"active"===t&&s("initial")},[t]),c.useEffect(function(){"submitted"===l&&(f&&clearTimeout(f),m(setTimeout(function(){e.closeFeedbackPopup(),m(null)},1500)))},[l]);var h=function(t){n&&o&&(e.sendFeedback(n,t,o),s("submitted"))},g=c.createElement($a,null,c.createElement(Qa,{label:"Negative",onClick:function(){h("Negative")}},c.createElement(La,null)),c.createElement(Qa,{label:"Neutral",onClick:function(){h("Neutral")}},c.createElement(Ba,null)),c.createElement(Qa,{label:"Positive",onClick:function(){h("Positive")}},c.createElement(Wa,null)));return c.createElement(Ka,{className:r},c.createElement(Ia,{onClick:function(){n&&o?e.dismissFeedback(n,o):e.closeFeedbackPopup()}}),"submitted"===l?c.createElement(ei,null,"Thank you!"):c.createElement(c.Fragment,null,c.createElement(Xa,null,"How does this conversation make you feel?"),g,c.createElement(Ja,{target:"_blank",rel:"noopener noreferrer",href:"https://help.replika.ai/hc/en-us/articles/360000980172"},"Why do I see this?")))}),Ka=f.default.div.withConfig({displayName:"FeedbackPopup__FeedbackPopupRoot",componentId:"q5cbsd-0"})(["width:366px;height:127px;padding:12px;display:flex;flex-direction:column;align-items:center;"]),Xa=f.default.div.withConfig({displayName:"FeedbackPopup__FeedbackPopupTitle",componentId:"q5cbsd-1"})(["font-size:13px;font-weight:600;line-height:1.54;letter-spacing:-0.2px;color:",";"],function(e){return e.theme.fgColor}),Ja=f.default.a.withConfig({displayName:"FeedbackPopup__FeedbackPopupHelpLink",componentId:"q5cbsd-2"})(["color:",";font-size:13px;opacity:0.3;margin-top:10px;text-decoration:underline;"],function(e){return e.theme.fgColor}),$a=f.default.div.withConfig({displayName:"FeedbackPopup__FeedbackPopupReactions",componentId:"q5cbsd-3"})(["display:flex;"]),Qa=Object(f.default)(Oa.a).withConfig({displayName:"FeedbackPopup__FeedbackPopupButton",componentId:"q5cbsd-4"})(["border:0;padding:0;background:",";width:35px;height:35px;margin:13px 15px 0;cursor:pointer;& > svg{width:100%;height:100%;}&:active{transform:scale(0.9);outline:none;}&:focus{outline:none;}"],function(e){return e.theme.chatBgColor}),ei=f.default.div.withConfig({displayName:"FeedbackPopup__SubmittedMessage",componentId:"q5cbsd-5"})(["height:100%;display:flex;align-items:center;color:",";"],function(e){return e.theme.fgColor});function ti(){var e=Object(d.a)(["\n    font-size: 0.8em;\n    line-height: 1.5em;\n  "]);return ti=function(){return e},e}function ni(){var e=Object(d.a)(["\n  transform: translate(-50%, ",");\n  max-width: 100vw;\n  position: absolute;\n  top: 0;\n  transition: transform 0.5s ease-in-out;\n  background-color: ",";\n  box-shadow: 0 5px 20px 0 ",";\n  color: ",";\n  backdrop-filter: blur(10px);\n  border-radius: 3px;\n  ",";\n"]);return ni=function(){return e},e}var oi=f.default.div.withConfig({displayName:"ChatPopups__ChatPopupsRoot",componentId:"l0bzij-0"})([""]),ri=Object(O.a)(Pa,["isActive"])(ni(),function(e){return e.isActive?"20px":"-200px"},function(e){return e.theme.chatBgColor},function(e){return e.theme.shadowColor},function(e){return e.theme.fgColor},Object(ae.a)(ti())),ai=ri.withComponent(Za),ii=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.feedbackStatus,o=e.feedbackView,r=e.messages,a=e.isTrialPopupActive,i=r.filter(function(e){return"Customer"===e.meta.nature}).length,l="inactive"!==n&&"Popup"===o&&i>3,s=a&&!l;return c.createElement(oi,{className:t},c.createElement(ri,{isActive:s}),c.createElement(ai,{isActive:l}))}}]),t}(c.PureComponent),ci=Object(s.connect)(function(e){return{isTrialPopupActive:e.ui.isTrialPopupActive,feedbackStatus:e.feedback.feedbackStatus,feedbackView:e.feedback.feedbackData&&e.feedback.feedbackData.feedbackView,messages:e.chat.messages||[]}})(ii);function li(){var e=Object(d.a)(["\n    flex: 1 0 auto;\n  "]);return li=function(){return e},e}var si=Object(s.connect)(function(e){return{bot:e.profile.persist.bot}})(function(e){var t=e.bot&&e.bot.name||"your Replika";return l.a.createElement(l.a.Fragment,null,l.a.createElement(ui,null,l.a.createElement("p",null,"Thank you for your feedback!",l.a.createElement("br",null)," It helps improve conversation",l.a.createElement("br",null)," with ",t,".")),l.a.createElement(di,{size:"small",onClick:function(){return e.closeFeedbackPopup()}},"OK"))}),ui=f.default.div.withConfig({displayName:"SubmittedMessage__FeedbackMessage",componentId:"sc-1h6swug-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 0 30px;& p{line-height:22px;font-size:16px;text-align:center;color:",";}",""],function(e){return e.theme.popupFgColor},Object(ae.a)(li())),di=Object(f.default)(Se.a).withConfig({displayName:"SubmittedMessage__StyledButton",componentId:"sc-1h6swug-1"})(["width:unset;align-self:center;"]);function pi(){var e=Object(d.a)(["\n    padding: 9px 20px;\n\n    & + & {\n      margin-left: 10px;\n    }    \n  "]);return pi=function(){return e},e}function fi(){var e=Object(d.a)(["\n    width: 100%;\n    max-width: 300px;\n    justify-content: space-between;\n  "]);return fi=function(){return e},e}var mi=function(e){var t=e.setSubmittedFeedbackType,n=e.onSendFeedback;return l.a.createElement(hi,null,l.a.createElement(gi,{onClick:function(){return t("Negative")}},"Worse"),l.a.createElement(gi,{onClick:function(){return n("Neutral")}},"Same"),l.a.createElement(gi,{onClick:function(){return n("Positive")}},"Better"))},hi=f.default.div.withConfig({displayName:"FeedbackButtons__FeedbackButtonsRoot",componentId:"nzyowr-0"})(["display:flex;justify-content:center;",""],Object(ae.a)(fi())),gi=f.default.button.withConfig({displayName:"FeedbackButtons__FeedbackPopupButton",componentId:"nzyowr-1"})(["background:",";border-radius:35px;padding:9px 24px;cursor:pointer;border:1px solid #ccc;color:",";& + &{margin-left:16px;}font-weight:500;font-size:16px;line-height:22px;",""],function(e){return e.theme.chatBgColor},function(e){return e.theme.fgColor},Object(ae.a)(pi()));function bi(){var e=Object(d.a)(["\n    margin: 0;\n  "]);return bi=function(){return e},e}function vi(){var e=Object(d.a)(["\n    margin-bottom: 20px;\n    max-width: 280px;\n  "]);return vi=function(){return e},e}function xi(){var e=Object(d.a)(["\n    flex: 1 0 auto;\n  "]);return xi=function(){return e},e}var yi=function(e){return e.submittedFeedbackType?l.a.createElement(l.a.Fragment,null,l.a.createElement(wi,null,l.a.createElement("p",null,"Sorry to hear that.",l.a.createElement("br",null)," Can you tell us what went wrong?"),l.a.createElement(L.a,{minRows:3,placeholder:"Your message",onChange:function(t){return e.onTextChange(t.target.value)}})),l.a.createElement(Ei,null,l.a.createElement(Oi,{size:"small",onClick:function(){return e.submittedFeedbackType&&e.onSendFeedback(e.submittedFeedbackType)}},"Skip"),l.a.createElement(_i,{size:"small",onClick:function(){return e.submittedFeedbackType&&e.onSendFeedback(e.submittedFeedbackType,e.inputText)}},"Send"))):l.a.createElement(l.a.Fragment,null,l.a.createElement(Ci,null,l.a.createElement(ki,null,"How did this conversation make you feel?"),l.a.createElement(mi,{setSubmittedFeedbackType:e.setSubmittedFeedbackType,onSendFeedback:e.onSendFeedback})),l.a.createElement(ji,{size:"small",onClick:e.onDismiss},"Skip"))},wi=f.default.div.withConfig({displayName:"FeedbackForm__FeedbackMessage",componentId:"kmn245-0"})(["display:flex;flex-direction:column;justify-content:center;padding:0 0 20px;width:100%;& p{margin:0 0 20px;line-height:22px;font-size:16px;text-align:center;color:",";}"],function(e){return e.theme.popupFgColor}),Ci=f.default.div.withConfig({displayName:"FeedbackForm__FullscreenCenter",componentId:"kmn245-1"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;",""],Object(ae.a)(xi())),ki=f.default.h2.withConfig({displayName:"FeedbackForm__FeedbackPopupTitle",componentId:"kmn245-2"})(["line-height:26px;font-size:20px;text-align:center;font-weight:600;letter-spacing:-0.2px;color:",";margin:20px 10px 30px;",";"],function(e){return e.theme.fgColor},Object(ae.a)(vi())),Ei=f.default.div.withConfig({displayName:"FeedbackForm__ButtonWrapper",componentId:"kmn245-3"})(["display:flex;justify-content:space-between;width:100%;"]),ji=Object(f.default)(Se.a).withConfig({displayName:"FeedbackForm__SkipButton",componentId:"kmn245-4"})(["background-color:",";color:",";width:unset;min-width:unset;margin:50px 0 -10px;padding:0;",""],function(e){return e.theme.chatBgColor},function(e){return e.theme.fgColor},Object(ae.a)(bi())),Oi=Object(f.default)(Se.a).withConfig({displayName:"FeedbackForm__FeedbackSkipButton",componentId:"kmn245-5"})(["background-color:",";color:",";width:unset;min-width:unset;padding:0;"],function(e){return e.theme.chatBgColor},function(e){return e.theme.fgColor}),_i=Object(f.default)(Se.a).withConfig({displayName:"FeedbackForm__SendButton",componentId:"kmn245-6"})(["width:unset;"]);function Ii(){var e=Object(d.a)(["\n    width: 100vw;\n    margin: 0 auto;\n    height: 100vh;\n    justify-content: center;\n    align-items: center;\n    padding: 16px 24px;\n  "]);return Ii=function(){return e},e}var Si=function(e){var t=l.a.useState(null),n=Object(p.a)(t,2),o=n[0],r=n[1],a=l.a.useState(""),i=Object(p.a)(a,2),c=i[0],s=i[1];return l.a.useEffect(function(){"active"===e.feedbackStatus&&(r(null),s(""))},[e.feedbackStatus]),l.a.createElement(Ni,null,"submitted"===e.status?l.a.createElement(si,{closeFeedbackPopup:e.closeFeedbackPopup,submittedFeedbackType:o}):l.a.createElement(yi,{onSendFeedback:e.onSendFeedback,onDismiss:e.onDismiss,submittedFeedbackType:o,setSubmittedFeedbackType:r,inputText:c,onTextChange:s}))},Ni=f.default.div.withConfig({displayName:"PopupContent__PopupContentRoot",componentId:"sc-5cl65t-0"})(["width:386px;min-height:230px;padding:35px 50px;display:flex;flex-direction:column;justify-content:space-between;border-radius:8px;",";"],Object(ae.a)(Ii()));function Mi(){var e=Object(d.a)(["\n    border-radius: 0px;\n    margin: 0 auto;\n    padding: 0 20px 20px;\n    width: 100vw;\n    flex: 1 1 auto;\n  "]);return Mi=function(){return e},e}function Pi(){var e=Object(d.a)(["\n    padding: 0 0 20px;\n    border-bottom: 0;\n  "]);return Pi=function(){return e},e}function Ti(){var e=Object(d.a)(["\n    max-height: initial;\n    left: 0;\n    top: 0;\n    width: 100vw;\n    height: 100vh;\n    animation: none;\n    font-size: 0.8em;\n    line-height: 1.5em;\n    border-radius: 0;\n  "]);return Ti=function(){return e},e}function Di(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n\n  animation: "," ","ms ease-in-out both;\n  pointer-events: ",";\n  user-select: ",";\n\n  max-width: 100vw;\n  background-color: ",";\n  box-shadow: 0 5px 20px 0 ",";\n  color: ",";\n  backdrop-filter: blur(10px);\n  border-radius: 8px;\n\n  ",";\n"]);return Di=function(){return e},e}function Li(){var e=Object(d.a)(["\n  from {\n    transform: translate(0, 0);\n    opacity: 1;\n  }\n\n  to {\n    transform: translate(0, 20%);\n    opacity: 0;\n  }\n"]);return Li=function(){return e},e}function zi(){var e=Object(d.a)(["\n  from {\n    transform: translate(0, 20%);\n    opacity: 0;\n  }\n\n  to {\n    transform: translate(0, 0);\n    opacity: 1;\n  }\n"]);return zi=function(){return e},e}var Ri=Object(f.keyframes)(zi()),Bi=Object(f.keyframes)(Li()),Fi=Object(O.a)("div",["isActive"]).attrs({role:"dialog"})(Di(),function(e){return e.isActive?Ri:Bi},300,function(e){return e.isActive?"initial":"none"},function(e){return e.isActive?"inherit":"none"},function(e){return e.theme.dialogBgColor},function(e){return e.theme.shadowColor},function(e){return e.theme.fgColor},Object(ae.b)(Ti())),Ai=function(e){var t=e.onClose,n=e.mobileAction,o=e.title;return c.createElement(Hi,null,o&&c.createElement($i,null,o),t&&c.createElement(Wi,{onClose:t}),c.createElement(re.b,null,n))},Wi=function(e){var t=e.onClose,n=e.className;return c.createElement(qi,{className:n,onClick:t,label:"close popup"},c.createElement(Ui,null))},Hi=f.default.div.withConfig({displayName:"DialogLayout__DialogHeaderRoot",componentId:"sc-103t4c8-0"})(["flex:0 0 auto;font-size:20px;padding:30px;position:relative;align-items:center;"]),qi=Object(f.default)(oe.a).withConfig({displayName:"DialogLayout__StyledIconButton",componentId:"sc-103t4c8-1"})(["position:absolute;display:block;right:30px;top:33px;color:",";"],function(e){return e.theme.fgColor}),Ui=Object(f.default)(ja).withConfig({displayName:"DialogLayout__StyledCloseIcon",componentId:"sc-103t4c8-2"})(["display:block;width:16px;height:16px;"]),Gi=f.default.form.withConfig({displayName:"DialogLayout__FormContents",componentId:"sc-103t4c8-3"})(["width:100%;border-bottom:1px solid ",";padding:40px 0 20px;",""],function(e){return e.theme.borderColor},Object(ae.b)(Pi())),Vi=f.default.div.withConfig({displayName:"DialogLayout__DialogFooter",componentId:"sc-103t4c8-4"})(["flex:0 0 auto;display:flex;justify-content:center;align-items:center;padding:40px 0;"]),Yi=f.default.div.withConfig({displayName:"DialogLayout__DialogBody",componentId:"sc-103t4c8-5"})(["padding:0 45px;overflow-y:scroll;border-radius:8px;max-width:456px;display:flex;flex-direction:column;align-items:center;",";"],Object(ae.b)(Mi())),Zi=Object(f.default)(Yi).withConfig({displayName:"DialogLayout__CenteredDialogBody",componentId:"sc-103t4c8-6"})(["text-align:center;"]),Ki=Yi.withComponent("form"),Xi=f.default.h2.withConfig({displayName:"DialogLayout__ConfirmDialogTitle",componentId:"sc-103t4c8-7"})([""]),Ji=f.default.p.withConfig({displayName:"DialogLayout__ConfirmDialogDescription",componentId:"sc-103t4c8-8"})([""]),$i=f.default.h3.withConfig({displayName:"DialogLayout__Title",componentId:"sc-103t4c8-9"})(["margin:0;text-align:center;color:",";font-size:20px;line-height:20px;"],function(e){return e.theme.fgColor}),Qi=Object(f.default)(Se.a).withConfig({displayName:"DialogLayout__DialogButton",componentId:"sc-103t4c8-10"})(["background-color:",";"],function(e){return e.disabled?e.theme.dialogButtonDisabledBgColor:e.theme.dialogButtonBgColor}),ec=function(e){var t=e.title,n=e.description,o=e.confirmText,r=e.cancelText,a=void 0===r?"Cancel":r,i=e.onConfirm,l=e.onCancel;return c.createElement(Zi,null,c.createElement(Xi,null,t),c.createElement(Ji,null,n),c.createElement(Qi,{onClick:function(){return i}},o),c.createElement(rr.a,{onClick:l},a))},tc=l.a.memo(function(e){var t=e.feedbackStatus,n=e.sessionId,o=e.feedbackView,r=e.className,a=e.isActive,i=l.a.useState("initial"),c=Object(p.a)(i,2),s=c[0],u=c[1],d=l.a.useState(null),f=Object(p.a)(d,2),m=f[0],h=f[1];l.a.useEffect(function(){"active"===t&&u("initial")},[t]),l.a.useEffect(function(){"submitted"===s&&(m&&clearTimeout(m),h(setTimeout(function(){e.closeFeedbackPopup(),h(null)},5e3)))},[s]);return l.a.createElement(Fi,{isActive:a,className:r},l.a.createElement(Si,{status:s,feedbackStatus:t,closeFeedbackPopup:e.closeFeedbackPopup,onSendFeedback:function(t,r){n&&o&&(e.sendFeedback(n,t,o,r),u("submitted"))},onDismiss:function(){n&&o?e.dismissFeedback(n,o):e.closeFeedbackPopup()}}))}),nc={sendFeedback:Ua,dismissFeedback:Va,closeFeedbackPopup:Ga},oc=Object(s.connect)(function(e){return{sessionId:e.feedback.feedbackData&&e.feedback.feedbackData.sessionId,feedbackStatus:e.feedback.feedbackStatus,feedbackView:e.feedback.feedbackData&&e.feedback.feedbackData.feedbackView}},nc)(tc),rc=n(13),ac=n(288),ic=n(399),cc=n(538),lc=n.n(cc),sc=n(547),uc=n(292),dc=(n(548),f.default.div.withConfig({displayName:"DayPicker__DayPickerRoot",componentId:"sc-1cf6r9e-0"})(["margin-top:26px;position:relative;& > .DayPickerInput{display:block;width:100%;color:",";}& > .DayPickerInput > input{padding:26px 16px 12px;height:55px;}& .DayPickerInput-Overlay{border-radius:0 0 3px 3px;background:",";}& .DayPicker-NavButton{color:",";}& .DayPicker-Weekday{color:",";}& .DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside):hover{background-color:",";}& .DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:",";}.DayPickerInput > input{background:",";color:",";border:1px solid ",";}"],function(e){return e.theme.fgColor},function(e){return e.theme.chatBgColor},function(e){return e.theme.dimmedFgColor},function(e){return e.theme.dimmedFgColor},function(e){return e.theme.bgColor},function(e){return e.theme.outlineColor},function(e){return e.theme.inputBgColor},function(e){return e.theme.fgColor},function(e){return e.theme.inputBgColor})),pc=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleDayChange=function(e,t,o){var r=o.getInput();r.value.trim()?e&&n.props.onChange(e):n.props.onChange(void 0),n.setState({value:r.value})},n.state={value:e.value,isFocused:!1},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.placeholder,r=t.className;return c.createElement(dc,{className:r},c.createElement(lc.a,{inputProps:{id:n,"data-testid":this.props["data-testid"],onFocus:function(){return e.setState({isFocused:!0})},onBlur:function(){return e.setState({isFocused:!1})}},value:this.state.value,formatDate:sc.formatDate,parseDate:sc.parseDate,format:"MM/DD/YYYY",placeholder:"",component:uc.a,onDayChange:this.handleDayChange}),c.createElement(ac.a,{collapsed:!!this.state.value||this.state.isFocused,htmlFor:n},o||Object(sc.formatDate)(new Date,"MM/DD/YYYY")))}}]),t}(c.Component),fc=n(650),mc=n(368);function hc(){var e=Object(d.a)(["\n  cursor: pointer;\n  padding: 0;\n  border: 0;\n  background: transparent;\n  color: ",";\n  transition: color 0.2s ease-out;\n  &:hover {\n    color: ",";\n  }\n"]);return hc=function(){return e},e}function gc(){var e=Object(d.a)(["\n  text-decoration: none;\n  background: none;\n  border: 0;\n  padding: 0;\n  color: ",";\n\n  &:hover {\n    cursor: ",";\n  }\n"]);return gc=function(){return e},e}function bc(){var e=Object(d.a)(["\n  margin-top: 0;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.5;\n  letter-spacing: -0.1px;\n  text-align: left;\n  color: ",";\n  font-size: 16px;\n  max-height: 0px;\n  transition: max-height 0.2s ease-out, margin-top 0.2s ease-out;\n\n  &:not(:empty) {\n    margin-top: 20px;\n    max-height: 100px;\n  }\n"]);return bc=function(){return e},e}f.default.div.withConfig({displayName:"SidebarLayout__SidebarLayoutRoot",componentId:"p93irs-0"})(["height:100%;display:flex;flex-direction:column;"]),f.default.div.withConfig({displayName:"SidebarLayout__Content",componentId:"p93irs-1"})(["flex:1 1 auto;overflow-y:auto;padding:0 15px 30px;"]);var vc=Object(f.default)(fc.a).withConfig({displayName:"SidebarLayout__BackLink",componentId:"p93irs-2"})([""]),xc=f.default.div.withConfig({displayName:"SidebarLayout__Header",componentId:"p93irs-3"})(["flex:0 0 auto;height:70px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid ",";box-sizing:content-box;"],function(e){return e.theme.borderColor}),yc=Object(f.default)(Ao.a).withConfig({displayName:"SidebarLayout__StyledArrow",componentId:"p93irs-4"})(["&:hover{cursor:pointer;}color:",";"],function(e){return e.theme.fgColor}),wc=f.default.h2.withConfig({displayName:"SidebarLayout__Title",componentId:"p93irs-5"})(["flex:1 0 auto;margin:0;color:",";text-align:center;font-size:20px;line-height:20px;font-weight:600;"],function(e){return e.theme.fgColor}),Cc=function(e){var t=e.title,n=e.backTo,o=e.onClose,r=e["data-testid"],a=e.className,i=e.children;return c.createElement(xc,{className:a},n&&c.createElement(vc,{to:n,"data-testid":"".concat(r,"-back-button")},c.createElement(yc,null)),o&&c.createElement(oe.a,{onClick:o,"data-testid":"".concat(r,"-back-button")},c.createElement(yc,null)),t&&c.createElement(wc,null,t),i)},kc=(Object(f.default)(Cc).withConfig({displayName:"SidebarLayout__LayoutSidebarHeader",componentId:"p93irs-6"})(["margin:0 15px;"]),f.default.h3.withConfig({displayName:"SidebarLayout__SidebarSection",componentId:"p93irs-7"})(["margin:0;font-size:14px;font-weight:400;padding-top:20px;margin-top:20px;color:",";border-top:1px solid ",";text-transform:uppercase;"],function(e){return e.theme.dimmedFgColor},function(e){return e.theme.borderColor})),Ec=f.default.label.withConfig({displayName:"SidebarLayout__SidebarLabel",componentId:"p93irs-8"})(["display:block;color:",";font-size:0.8em;padding:20px 0 8px;"],function(e){return e.theme.dimmedFgColor}),jc=(Object(f.default)(Se.a).withConfig({displayName:"SidebarLayout__SidebarButton",componentId:"p93irs-9"})(["margin-top:40px;"]),Object(O.a)("div",["hasError"])(bc(),function(e){return e.hasError?e.theme.errorLightFgColor:e.theme.dimmedFgColor})),Oc=function(e){var t=e.hasError,n=e.scrollIntoView,o=e.children,r=Object(z.a)(e,["hasError","scrollIntoView","children"]),a=c.useRef(null);return c.useEffect(function(){t&&n&&o&&a.current&&a.current.scrollIntoView()},[t,n,o,a.current]),c.createElement(jc,Object.assign({ref:a,hasError:t},r),o)},_c=Object(O.a)(fc.a,["red"])(gc(),function(e){return e.disabled?e.theme.dimmedFgColor:e.red?e.theme.errorFgColor:"inherit"},function(e){return e.disabled?"initial":"pointer"}).withComponent(function(e){e.red;var t=Object(z.a)(e,["red"]);return c.createElement("button",t)}),Ic=f.default.div.withConfig({displayName:"SidebarLayout__SidebarSpinnerRoot",componentId:"p93irs-10"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;color:",";min-height:200px;& > svg{width:100px;}"],function(e){return e.theme.dimmedFgColor}),Sc=function(e){var t=e.className;return c.createElement(Ic,{className:t},c.createElement(k.a,null))},Nc=(Object(O.a)(mc.Button,["active"]).attrs({tag:"button"})(hc(),function(e){return e.active?e.theme.fgColor:e.theme.dimmedFgColor},function(e){return e.theme.fgColor}),Object(f.default)(mc.Wrapper).withConfig({displayName:"SidebarLayout__SidebarMenuWrapper",componentId:"p93irs-11"})(["position:relative;display:flex;justify-content:space-between;width:100%;"]),Object(D.values)(_.l)),Mc=function(e){var t=e.routines,n=e.onChange,r=e.hasCustomRoutine,a=e.className,i=t.find(function(e){return-1===Nc.indexOf(e)}),l=function(e){var n=t.filter(function(e){return-1!==Nc.indexOf(e)});return"undefined"===typeof e?{routines:n}:{routines:[].concat(Object(Bt.a)(n),[e])}};return c.createElement(Pc,{className:a},c.createElement(Tc,null,Nc.map(function(e){return c.createElement(Qe.a,{key:e,type:"button",active:-1!==t.indexOf(e),onClick:function(o){return function(e,o){o.preventDefault();var r=-1!==t.indexOf(e);n({routines:r?t.filter(function(t){return t!==e}):[].concat(Object(Bt.a)(t),[e])})}(e,o)},"data-testid":"edit-profile-".concat(e.replace(/\s/g,"-"),"-routine-button")},(o=e)?o[0].toUpperCase()+o.substr(1):"");var o}),c.createElement(Qe.a,{key:_.d,type:"button",active:r,onClick:function(e){e.preventDefault(),n(Object(o.a)({hasCustomRoutine:!r},l(r?void 0:"")))},"data-testid":"edit-profile-custom-routine-button"},_.d)),r&&c.createElement(Dc,{"data-testid":"edit-profile-custom-routine-input",type:"text",id:"other-activity",placeholder:"I usually...",value:i,onChange:function(e){n(l(e.target.value))}}))},Pc=f.default.div.withConfig({displayName:"EditProfileActivities__EditProfileActivitiesRoot",componentId:"sc-1q4r3my-0"})([""]),Tc=f.default.div.withConfig({displayName:"EditProfileActivities__Activities",componentId:"sc-1q4r3my-1"})(["display:flex;flex-direction:column;align-items:stretch;& > * + *{margin-top:16px;}"]),Dc=Object(f.default)(ac.b).withConfig({displayName:"EditProfileActivities__CustomRoutineInput",componentId:"sc-1q4r3my-2"})(["margin-top:16px;width:100%;margin-bottom:30px;"]);function Lc(){var e=Object(d.a)(["\n  flex: 1 0 auto;\n  padding: 0 15px;\n  min-width: 130px;\n  margin: 0 3px 20px;\n"]);return Lc=function(){return e},e}function zc(){var e=Object(d.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  margin-bottom: -20px;\n"]);return zc=function(){return e},e}function Rc(){var e=Object(d.a)(["\n    width: 100%;\n    min-width: initial;\n    max-width: initial;\n  "]);return Rc=function(){return e},e}function Bc(){var e=Object(d.a)(["\n  min-width: 320px;\n  max-width: 345px;\n\n  ",";\n"]);return Bc=function(){return e},e}var Fc=Object(D.values)(_.g),Ac=function(e){var t=e.goals,n=e.onChange,o=e.className;return c.createElement(Wc,{className:o},c.createElement(Hc,null,Fc.map(function(e){var o,r=t.indexOf(e)>-1;return c.createElement(qc,{type:"button",key:e,active:r,onClick:function(){return o=e,void n(-1===t.indexOf(o)?[].concat(Object(Bt.a)(t),[o]):t.filter(function(e){return e!==o}));var o},"data-testid":"set-goals-".concat(e.replace(/\s/g,"-"),"-goal-button")},(o=e)[0].toUpperCase()+o.substr(1))})))},Wc=f.default.div(Bc(),Object(ae.a)(Rc())),Hc=f.default.div(zc()),qc=Object(f.default)(Qe.a)(Lc()),Uc=Object(D.values)(_.f).map(function(e){return{label:e[0].toUpperCase().concat(e.slice(1)),value:e}}),Gc=Object(D.values)(_.l),Vc=function(e){return e?e[0].toUpperCase()+e.substr(1):""},Yc=function(e,t){return Object(o.a)({},e,t)},Zc=function(e){return e?{userProfile:e,firstName:e.first_name,lastName:e.last_name,gender:e.gender,birthday:e.birthday_iso||void 0,hasCustomRoutine:!!e.routines.find(function(e){return-1===Gc.indexOf(e)}),routines:e.routines?e.routines.map(Vc):e.routines,goals:e.goals||[]}:{userProfile:void 0,firstName:"",lastName:"",gender:void 0,birthday:void 0,hasCustomRoutine:!1,routines:[],goals:[]}},Kc=Object(s.connect)(function(e){return{userProfile:e.profile.persist.userProfile,bot:e.profile.persist.bot,isFetchingProfile:e.profile.isFetchingProfile,updateProfileProgress:e.profile.updateProfileProgress,serverError:e.profile.serverError}},{updateUserProfile:or.n,resetServerError:or.g})(function(e){var t=e.updateProfileProgress,n=e.serverError,o=e.userProfile,r=e.isActive,a=e.onClose,i=e.isFetchingProfile,l=e.bot,s=c.useReducer(Yc,Zc(o)),u=Object(p.a)(s,2),d=u[0],f=u[1];c.useEffect(function(){e.resetServerError()},[]),c.useEffect(function(){f(Zc(o))},[o]);var m=d.firstName,h=d.lastName,g=d.birthday,b=d.routines,v=d.hasCustomRoutine,x=d.gender,y=d.goals;if(!o)return c.createElement(Sc,null);var w=t===rc.a.sending?"Saving...":"Save",C=t===rc.a.success?"Updated successfully":"",k=b.find(function(e){return-1===Gc.indexOf(e)}),E=i||t===rc.a.sending||v&&!k,j=l&&l.name||"your Replika",O=function(){t!==rc.a.initial&&e.resetServerError()};return c.createElement(Fi,{isActive:r},c.createElement(Ai,{onClose:a,title:"My Profile"}),c.createElement(Yi,null,c.createElement(Gi,{onSubmit:function(t){t.preventDefault(),e.updateUserProfile({first_name:m,last_name:h,gender:x,birthday_iso:g,routines:b.filter(function(e){return""!==e}),goals:y}),O()}},c.createElement($c,{autoComplete:"off","data-testid":"edit-profile-firstName-input",type:"text",name:"firstName",id:"first-name",placeholder:"First name",value:m,onChange:function(e){f({firstName:e.target.value}),O()}}),c.createElement($c,{autoComplete:"off","data-testid":"edit-profile-lastName-input",type:"text",name:"lastName",id:"last-name",placeholder:"Last name",value:h,onChange:function(e){f({lastName:e.target.value}),O()}}),c.createElement(Qc,{placeholder:"Gender",id:"edit-profile-gender-select",options:Uc,onChange:function(e){f({gender:e.value}),O()},value:Uc.find(function(e){return e.value===x})}),c.createElement(el,{id:"edit-profile-birthday-input","data-testid":"edit-profile-birthday-input",name:"birthday",placeholder:"Birthday",onChange:function(e){f({birthday:Nt()(e).format("YYYY-MM-DD")}),O()},value:"undefined"!==typeof g?new Date(g):g}),c.createElement(tl,null,"My typical day"),c.createElement(nl,null,"Your Replika will keep this in mind during conversations."),c.createElement(Xc,{hasCustomRoutine:v,routines:b,onChange:function(e){f(e),O()}}),c.createElement(tl,null,"My goals"),c.createElement(nl,null,"Changing habits is never easy, but having support always help. Is there anything you\u2019d like to work through with ",j,"?"),c.createElement(Jc,{goals:y,onChange:function(e){f({goals:e}),O()}}),c.createElement(Oc,{scrollIntoView:!0,hasError:!!n,"data-testid":"edit-profile-status-message"},n||C),c.createElement(ol,null,c.createElement(Qi,{type:"submit",disabled:E,"data-testid":"edit-profile-submit-button"},w)))))}),Xc=Object(f.default)(Mc).withConfig({displayName:"EditProfileDialog__StyledActivities",componentId:"sc-109i6tv-0"})(["margin:30px auto 20px;max-width:260px;"]),Jc=Object(f.default)(Ac).withConfig({displayName:"EditProfileDialog__StyledGoals",componentId:"sc-109i6tv-1"})(["margin:30px auto 20px;"]),$c=Object(f.default)(ac.b).withConfig({displayName:"EditProfileDialog__StyledLabeledTextInput",componentId:"sc-109i6tv-2"})(["width:100%;margin-bottom:30px;"]),Qc=Object(f.default)(ic.a).withConfig({displayName:"EditProfileDialog__StyledDropdown",componentId:"sc-109i6tv-3"})(["width:100%;"]),el=Object(f.default)(pc).withConfig({displayName:"EditProfileDialog__StyledDayPicker",componentId:"sc-109i6tv-4"})(["width:100%;"]),tl=Object(f.default)(kc).withConfig({displayName:"EditProfileDialog__StyledSidebarSection",componentId:"sc-109i6tv-5"})(["text-align:center;font-weight:bold;color:",";border-top:0;margin-top:40px;"],function(e){return e.theme.fgColor}),nl=f.default.p.withConfig({displayName:"EditProfileDialog__Subtitle",componentId:"sc-109i6tv-6"})(["font-size:15px;line-height:20px;text-align:center;opacity:0.4;margin:16px 12px;"]),ol=Object(f.default)(Vi).withConfig({displayName:"EditProfileDialog__StyledDialogFooter",componentId:"sc-109i6tv-7"})(["padding-top:20px;"]),rl=n(440),al=n(406);function il(){var e=Object(d.a)(["\n    padding: 0 15px;\n  "]);return il=function(){return e},e}function cl(){var e=Object(d.a)(["\n    padding: 40px 0 50px;\n  "]);return cl=function(){return e},e}var ll=function(e,t){return Object(o.a)({},e,t)},sl=c.memo(function(e){var t=e.isActive,n=e.onClose,o=c.useReducer(ll,{replikaName:e.bot&&e.bot.name,replikaGender:e.bot&&e.bot.gender,iconUrl:e.bot&&e.bot.icon_url,iconFile:void 0,iconIndex:void 0}),r=Object(p.a)(o,2),l=r[0],s=r[1],u=function(){var t=Object(i.a)(a.a.mark(function t(o){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.preventDefault(),Object(le.b)(_.j.ReplikaImageSet,{image:0===l.iconIndex?"custom":l.iconIndex}),t.next=4,e.updateBot({name:l.replikaName,gender:l.replikaGender,icon_url:l.iconUrl},l.iconFile);case 4:n();case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return c.createElement(Fi,{isActive:t},c.createElement(Ai,{onClose:n,title:"Replika profile"}),c.createElement(pl,{onSubmit:u},c.createElement(dl,{defaultImageUrl:l.iconUrl,onSelectUrl:function(e,t){s({iconUrl:e||void 0,iconFile:void 0,iconIndex:t})},onBlobUpload:function(e){return s({iconUrl:void 0,iconFile:e})}}),c.createElement(fl,null,c.createElement(ml,{autoComplete:"off","data-testid":"edit-replika-replikaName-input",name:"replikaName",id:"replika-name",placeholder:"Replika\u2019s name",value:l.replikaName,onChange:function(e){return s({replikaName:e.target.value})}}),c.createElement(gl,{id:"edit-replika-gender-title"},l.replikaName||"Replika","\u2019s gender"),c.createElement(hl,{"aria-labelledby":"edit-replika-gender-title",value:l.replikaGender,onChange:function(e){return s({replikaGender:e})}}),c.createElement(Vi,null,c.createElement(Qi,{type:"submit"},"Save")))))}),ul=Object(s.connect)(function(e){return{bot:e.profile.persist.bot,isFetchingProfile:e.profile.isFetchingProfile,updateReplikaProgress:e.profile.updateReplikaProgress,serverError:e.profile.serverError}},{updateBot:or.i,resetServerError:or.g})(sl),dl=Object(f.default)(rl.a).withConfig({displayName:"EditReplikaDialog__StyledEggCarousel",componentId:"sc-2g6u66-0"})(["width:100%;margin:0 auto;flex:0 0 auto;background-color:",";"],function(e){return e.theme.dialogBgColor}),pl=Object(f.default)(Ki).withConfig({displayName:"EditReplikaDialog__StyledDialogBodyForm",componentId:"sc-2g6u66-1"})(["padding:40px 0 0;",""],Object(ae.b)(cl())),fl=f.default.div.withConfig({displayName:"EditReplikaDialog__FormContent",componentId:"sc-2g6u66-2"})(["width:100%;",""],Object(ae.b)(il())),ml=Object(f.default)(ac.b).withConfig({displayName:"EditReplikaDialog__ReplikaNameInput",componentId:"sc-2g6u66-3"})(["margin:60px auto 0;width:100%;max-width:320px;"]),hl=Object(f.default)(al.a).withConfig({displayName:"EditReplikaDialog__StyledGenderSelector",componentId:"sc-2g6u66-4"})(["margin:0 auto 20px;width:175px;"]),gl=f.default.h3.withConfig({displayName:"EditReplikaDialog__SelectGenderTitle",componentId:"sc-2g6u66-5"})(["margin-top:40px;text-transform:uppercase;font-size:14px;line-height:21px;text-align:center;letter-spacing:0.02em;"]),bl=n(11),vl=n(8),xl=function(){return function(){var e=Object(i.a)(a.a.mark(function e(t,n){var o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(bl.b)(n(),"GET"),e.abrupt("return",Object(qa.a)(_.b.GetTracks,t,{},{onRequest:function(){return fetch("".concat(vl.a,"/journey/tracks"),o)}}));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},yl=function(e){return function(){var t=Object(i.a)(a.a.mark(function t(n,o){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(bl.b)(o(),"GET"),t.abrupt("return",Object(qa.a)(_.b.GetTrack,n,{trackId:e},{onRequest:function(){return fetch("".concat(vl.a,"/journey/tracks/").concat(e),r)}}));case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},wl=function(e,t){return function(){var n=Object(i.a)(a.a.mark(function n(o,r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(qa.f)(_.b.WsStartMission,o,{missionId:e},{onRequest:function(){return Object(Ha.c)({event_name:_.o.StartMission,payload:{mission_id:e,current_mission_action:t}},r())},onSuccess:function(){kl()(o,r)}}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()},Cl=function(){return function(){var e=Object(i.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(qa.f)(_.b.WsDropMission,t,{},{onRequest:function(){return Object(Ha.c)({event_name:_.o.DropMission,payload:{}},n())},onSuccess:function(){kl()(t,n)}}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},kl=function(){return function(){var e=Object(i.a)(a.a.mark(function e(t,n){var o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(bl.b)(n(),"GET"),e.abrupt("return",Object(qa.a)(_.b.GetSpotlight,t,{},{onRequest:function(){return fetch("".concat(vl.a,"/journey/spotlight"),o)}}));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},El=Object(s.connect)(null,{dropMission:Cl})(function(e){var t=e.className,n=e.isActive,o=e.onClose;return c.createElement(Fi,{isActive:n,className:t},c.createElement(ec,{title:"Mission in progress",description:"You have a mission in progress. Do you want to just chat with Replika instead?",confirmText:"Chat",onConfirm:function(){o(),e.dropMission()},onCancel:o}))}),jl=n(3),Ol=n(319);function _l(){var e=Object(d.a)(["\n    font-size: 15px;\n  "]);return _l=function(){return e},e}var Il=function(e){switch(e){case"oldPassword":return"Current password";case"newPassword":return"New password";case"newPassword2":return"Repeat new password";default:return"Password"}},Sl=function(e){var t=e.newPassword,n=e.newPassword2,o=e.oldPassword;return 0===t.length||0===n.length||0===o.length},Nl=function(e){var t=e.password,n=e.newEmail;return!(t.length>0&&n.length>0)},Ml=function(e){return e.every(function(e){return e.length>0})},Pl=function(e,t,n,r){e.preventDefault();var a=t.oldPassword,i=t.newPassword,c=t.newPassword2,l=t.password,s=t.newEmail,u=[l,s];Ml([a,i,c])&&"change-password"===e.currentTarget.name&&(n.updatePassword(a,i),r(Object(o.a)({},t,{oldPassword:"",newPassword:"",newPassword2:"",lastSubmittedForm:"password"}))),Ml(u)&&"change-email"===e.currentTarget.name&&(n.updateEmail(l,s),r(Object(o.a)({},t,{oldPassword:"",newPassword:"",newPassword2:"",buttonText:"",lastSubmittedForm:"email"})))},Tl=c.memo(function(e){var t=c.useState({oldPassword:"",newPassword:"",newPassword2:"",password:"",newEmail:"",buttonText:"",lastSubmittedForm:null}),n=Object(p.a)(t,2),r=n[0],a=n[1],i=r.newPassword,l=r.newPassword2,s=r.password,u=r.newEmail,d=e.isActive,f=e.serverError,m=e.updatePasswordProgress,h=e.updateEmailProgress,g=e.onClose,b=function(e){var t=e.newPassword,n=e.newPassword2,o=null;return t.length>0&&n.length>0&&t!==n&&(o="New passwords do not match"),o}(r),v=function(e){switch(e){default:return"Change";case rc.a.sending:return"Sending..."}}(m),x=function(e){switch(e){case rc.a.success:return"Updated successfully";default:return""}}(m),y=function(e){switch(e){case rc.a.sending:return"Sending...";default:return"Save changes"}}(h),w=function(e){switch(e){case rc.a.success:return"Updated successfully";default:return""}}(h),C=function(t){var n=t.target,i=Object(o.a)({},r,Object(jl.a)({},n.name,n.value));a(i),e.resetServerError()};return c.createElement(Fi,{isActive:d},c.createElement(Ai,{onClose:g,title:"Account settings"}),c.createElement(Yi,null,c.createElement(Gi,{name:"change-password",onSubmit:function(t){return Pl(t,r,e,a)}},c.createElement(zl,null,"Change password"),["oldPassword","newPassword","newPassword2"].map(function(e){return c.createElement(Ll,{key:e},c.createElement(Ol.a,{labeled:!0,autoComplete:"new-password","data-testid":"change-password-".concat(e,"-input"),name:e,id:e,placeholder:Il(e),value:r[e],onChange:function(e){return C(e)}}))}),"password"===r.lastSubmittedForm&&c.createElement(Oc,{hasError:!(!f&&!b),"data-testid":"change-password-status-message"},f||b||x),c.createElement(Dl,{type:"submit",disabled:Sl(r)||0===i.length||i!==l||m===rc.a.sending,"data-testid":"change-password-submit-button"},v)),c.createElement(Gi,{name:"change-email",onSubmit:function(t){return Pl(t,r,e,a)}},c.createElement(zl,null,"Change email"),c.createElement(Ll,{key:"change-email"},c.createElement(ac.b,{autoComplete:"new-password","data-testid":"change-email-newEmail-input",type:"text",name:"newEmail",id:"newEmail",placeholder:"New email",value:u,onChange:function(e){return C(e)}})),c.createElement(Ll,{key:"change-mail-password"},c.createElement(Ol.a,{labeled:!0,autoComplete:"new-password","data-testid":"change-email-password-input",name:"password",id:"password",placeholder:"Current password",value:s,onChange:function(e){return C(e)}})),"email"===r.lastSubmittedForm&&c.createElement(Oc,{hasError:!!f,"data-testid":"change-email-status-message"},f||w),c.createElement(Dl,{type:"submit","data-testid":"change-email-submit-button",disabled:Nl(r)},y)),c.createElement(Rl,{to:"/delete-account",onClick:g},"Delete account")))}),Dl=Object(f.default)(Qi).withConfig({displayName:"EditAccountDialog__SubmitButton",componentId:"eft710-0"})(["display:block;margin:30px auto 0;"]),Ll=f.default.div.withConfig({displayName:"EditAccountDialog__Row",componentId:"eft710-1"})(["margin:15px 0;"]),zl=f.default.div.withConfig({displayName:"EditAccountDialog__Label",componentId:"eft710-2"})(["font-size:14px;font-weight:bold;text-transform:uppercase;"]),Rl=Object(f.default)(fc.a).withConfig({displayName:"EditAccountDialog__DeleteAccountLink",componentId:"eft710-3"})(["color:",";align-self:flex-start;padding:20px 0 40px;display:block;width:280px;",";"],function(e){return e.theme.errorLightFgColor},Object(ae.a)(_l())),Bl=Object(s.connect)(function(e){return{serverError:e.profile.serverError,updatePasswordProgress:e.profile.updatePasswordProgress,updateEmailProgress:e.profile.updateEmailProgress,userProfile:e.profile.persist.userProfile}},{updatePassword:or.m,updateEmail:or.j,resetServerError:or.g})(Tl),Fl=function(e){var t=e.className,n=e.isActive,o=e.badge,r=e.onClose,a=c.useMemo(function(){return o},[]);return a?c.createElement(Fi,{isActive:n,className:t},c.createElement(Ai,{onClose:r}),c.createElement(Zi,null,c.createElement(ql,{src:a.image_url_2x,alt:a.title}),c.createElement(Ul,null,a.title),c.createElement(Wl,{"data-testid":"badge-description-".concat(a.id)},a.description))):c.createElement(Fi,{isActive:n,className:t},c.createElement(Ai,{onClose:r}),c.createElement(Zi,null,c.createElement(Al,null),c.createElement(Hl,{"data-testid":"badge-description-slot"},"As you talk to Replika it will be giving away badges that reflect your personality. They will be displayed here.")))},Al=f.default.div.withConfig({displayName:"BadgeDialog__BadgeSlot",componentId:"sc-1xdla6h-0"})(["&:before{display:block;content:'?';color:",";border:1px solid ",";width:100px;height:100px;border-radius:100%;line-height:100px;font-size:50px;text-align:center;vertical-align:middle;}"],function(e){return e.theme.dimmedFgColor},function(e){return e.theme.borderColor}),Wl=f.default.p.withConfig({displayName:"BadgeDialog__Description",componentId:"sc-1xdla6h-1"})(["margin:30px auto 40px;max-width:320px;color:",";line-height:24px;font-size:16px;"],function(e){return e.theme.dimmedFgColor}),Hl=Object(f.default)(Wl).withConfig({displayName:"BadgeDialog__SlotDescription",componentId:"sc-1xdla6h-2"})(["margin:40px auto 40px;color:",";"],function(e){return e.theme.fgColor}),ql=f.default.img.withConfig({displayName:"BadgeDialog__BadgeImage",componentId:"sc-1xdla6h-3"})(["display:block;margin:20px auto 0;width:140px;"]),Ul=f.default.h2.withConfig({displayName:"BadgeDialog__Title",componentId:"sc-1xdla6h-4"})(["margin:30px 0 0;text-align:center;"]);function Gl(){return(Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Vl=l.a.createElement("g",{stroke:"currentColor"},l.a.createElement("path",{d:"M4.94696 22.1131L3.53924 3.5H20.4608L19.053 22.1131C18.9939 22.8954 18.3419 23.5 17.5573 23.5H6.44269C5.65814 23.5 5.00612 22.8954 4.94696 22.1131Z"}),l.a.createElement("line",{x1:2,y1:3.5,x2:22,y2:3.5}),l.a.createElement("path",{d:"M7.5 2C7.5 1.17157 8.17157 0.5 9 0.5H15C15.8284 0.5 16.5 1.17157 16.5 2V3.5H7.5V2Z"}),l.a.createElement("line",{x1:12,y1:6,x2:12,y2:21}),l.a.createElement("path",{d:"M16 6L15 21"}),l.a.createElement("path",{d:"M8 6L9 21"})),Yl=function(e){return l.a.createElement("svg",Gl({viewBox:"0 0 24 24",fill:"none",width:24,height:24},e),Vl)},Zl=(n.p,f.default.div.withConfig({displayName:"DeleteMoodPopover__DeleteMoodPopoverRoot",componentId:"fjx8rp-0"})(["color:",";text-align:center;line-height:24px;font-size:16px;"],function(e){return e.theme.fgColor})),Kl=f.default.h3.withConfig({displayName:"DeleteMoodPopover__DeleteMoodPopoverTitle",componentId:"fjx8rp-1"})(["margin:0;line-height:23px;font-size:16px;"]),Xl=f.default.p.withConfig({displayName:"DeleteMoodPopover__DeleteMoodPopoverText",componentId:"fjx8rp-2"})(["color:",";"],function(e){return e.theme.dimmedFgColor}),Jl=f.default.div.withConfig({displayName:"DeleteMoodPopover__DeleteMoodPopoverButtons",componentId:"fjx8rp-3"})(["display:flex;justify-content:space-between;"]),$l=Object(f.default)(Kt).withConfig({displayName:"DeleteMoodPopover__DeleteButton",componentId:"fjx8rp-4"})(["background-color:",";"],function(e){return e.theme.errorBgColor}),Ql=function(e){var t=e.mood,n=e.onClose,o=e.onDelete,r=e["data-testid"],a=e.className;return c.createElement(Zl,{className:a,"data-testid":r},c.createElement(Kl,null,"Delete this mood record?"),c.createElement(Xl,null,"This action cannot be undone."),c.createElement(Jl,null,c.createElement(Xt,{"data-indialog":!0,onClick:n,"data-testid":"".concat(r,"-cancel-button")},"Cancel"),c.createElement($l,{"data-indialog":!0,onClick:function(){return o(t.id)},"data-testid":"".concat(r,"-delete-button")},"Delete")))};function es(){var e=Object(d.a)(["\n  color: ",";\n"]);return es=function(){return e},e}var ts=function(e){var t=e.mood,n=e.progress;return c.createElement(ns,{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},c.createElement(Ec,null,"Date"),c.createElement(os,{"data-testid":"edit-mood-date"},Nt()(t.date).utc().format("MMMM D, h:mm A")),c.createElement(Ec,null,"Mood"),c.createElement(as,{percent:t.mood_percentage/100,"data-testid":"edit-mood-title"},t.title),c.createElement(Ec,{id:"edit-mood-details-label"},"Details"),c.createElement(rs,{"data-testid":"edit-mood-caption-textarea",defaultValue:t.caption,"aria-labelledby":"edit-mood-details-label",minRows:5,onChange:function(n){e.onChange(Object(o.a)({},t,{caption:n.target.value}))},placeholder:"What made you feel this way?"}),c.createElement(Oc,{hasError:n===rc.a.error,"data-testid":"edit-mood-status-message"},e.serverError))},ns=Object(f.default)(Ki).withConfig({displayName:"EditMoodDialogContent__StyledDialogBodyForm",componentId:"sc-1cin1tk-0"})(["align-items:flex-start;"]),os=f.default.div.withConfig({displayName:"EditMoodDialogContent__MoodDate",componentId:"sc-1cin1tk-1"})(["color:",";"],function(e){return e.theme.fgColor}),rs=Object(f.default)(L.a).withConfig({displayName:"EditMoodDialogContent__StyledTextarea",componentId:"sc-1cin1tk-2"})(["flex:1 0 auto;"]),as=Object(O.a)("div",["percent"])(es(),function(e){return Be(e.percent)}),is=n(35);function cs(){var e=Object(d.a)(["\n    padding: 40px 20px;\n  "]);return cs=function(){return e},e}var ls=Object(s.connect)(null,{updateMood:or.k,deleteMood:or.b})(function(e){var t=e.mood,n=e.className,o=e.isActive,r=e.onClose,l=c.useState(!1),s=Object(p.a)(l,2),u=s[0],d=s[1],f=c.useState(void 0),m=Object(p.a)(f,2),h=m[0],g=m[1],b=c.useState(rc.a.initial),v=Object(p.a)(b,2),x=v[0],y=v[1],w=c.useState(e.mood),C=Object(p.a)(w,2),k=C[0],E=C[1];c.useEffect(function(){t&&E(t)},[t]);var j=function(){var t=Object(i.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(k){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(rc.a.sending),t.next=6,e.updateMood(k);case 6:g("Updated successfully"),Object(le.b)(_.j.MoodEdited),y(rc.a.success),r(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),t.t0 instanceof is.a&&(g(t.t0.message),y(rc.a.error));case 15:case"end":return t.stop()}},t,this,[[2,12]])}));return function(){return t.apply(this,arguments)}}();return c.createElement(ss,{isActive:o,className:n},c.createElement(Ai,{onClose:r,title:"Your mood"}),k&&c.createElement(ts,{mood:k,onChange:E,onSubmit:j,progress:x,serverError:h}),c.createElement(ds,null,k&&c.createElement(ps,{preferPlace:"below",isOpen:u,onClose:function(){return d(!1)},onRenderContent:function(t){return c.createElement(Ql,Object.assign({"data-testid":"edit-mood-delete-popover",mood:k,onDelete:function(){var t=Object(i.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d(!1),Object(le.b)(_.j.MoodDeleted),t.next=4,e.deleteMood(n);case 4:r();case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},t))},closeOnOuterAction:!0,size:"small"},c.createElement(us,{label:"delete mood",type:"button","data-testid":"edit-mood-delete-button",onClick:function(){return d(!u)}},c.createElement(Yl,{"aria-hidden":"true"}))),c.createElement(Qi,{type:"submit","data-testid":"edit-mood-submit-button",disabled:x===rc.a.sending,onClick:j},x===rc.a.sending?"Saving...":"Save changes")))}),ss=Object(f.default)(Fi).withConfig({displayName:"EditMoodDialog__StyledDialog",componentId:"sc-5zy0ie-0"})(["width:400px;"]),us=Object(f.default)(oe.a).withConfig({displayName:"EditMoodDialog__DeleteButton",componentId:"sc-5zy0ie-1"})(["margin-right:15px;"]),ds=Object(f.default)(Vi).withConfig({displayName:"EditMoodDialog__StyledDialogFooter",componentId:"sc-5zy0ie-2"})(["justify-content:space-between;padding:40px;",""],Object(ae.a)(cs())),ps=Object(f.default)(Jt).withConfig({displayName:"EditMoodDialog__StyledPopover",componentId:"sc-5zy0ie-3"})(["z-index:",";"],_.p.Dialog+1),fs=function(e){var t=e.className,n=e.isActive,o=e.onClose;return c.useEffect(function(){Object(le.b)(_.j.MeetButtonShown)},[]),c.createElement(Fi,{isActive:n,className:t},c.createElement(Ai,null),c.createElement(Zi,{style:{width:250}},"Meet your Replika first to unlock all conversations",c.createElement(Vi,null,c.createElement(Qi,{onClick:function(){Object(le.b)(_.j.MeetButtonPressed),o()}},"Done"))))};function ms(){var e=Object(d.a)(["\n  width: 200px;\n  margin: 24px 0 48px;\n  text-align: center;\n  font-size: 24px;\n  line-height: 32px;\n"]);return ms=function(){return e},e}function hs(){var e=Object(d.a)(["\n    width: 100%;\n    flex: 1 1 auto;\n    padding: 20px 0;\n  "]);return hs=function(){return e},e}function gs(){var e=Object(d.a)(["\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  ","\n"]);return gs=function(){return e},e}function bs(){var e=Object(d.a)(["\n    width: 100%;\n    height: 270px;\n    flex: 0 0 auto;\n  "]);return bs=function(){return e},e}function vs(){var e=Object(d.a)(["\n  position: relative;\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #FFF;\n  background-image: url('",'/Journey.jpg\');\n  padding: 0 20px;\n  &:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    opacity: 0.5;\n    background-color: #000;\n    z-index: 1;\n  }\n  & > * {\n    position: relative;\n    z-index: 2;\n  }\n  ',"\n"]);return vs=function(){return e},e}function xs(){var e=Object(d.a)(["\n  font-size: 10px;\n  text-transform: uppercase;\n  line-height: 21px;\n  color: #000;\n  background-color: #fff;\n  padding: 3px 5px;\n  border-radius: 2px;\n  vertical-align: text-bottom;\n"]);return xs=function(){return e},e}function ys(){var e=Object(d.a)(["\n  font-size: 20px;\n  font-weight: bold;\n"]);return ys=function(){return e},e}function ws(){var e=Object(d.a)(["\n    flex-direction: column;\n    height: 100vh;\n    overflow: hidden scroll;\n  "]);return ws=function(){return e},e}function Cs(){var e=Object(d.a)(["\n  display: flex;\n  overflow-y: scroll;\n  align-items: stretch;\n  height: 100%;\n  border-radius: 8px;\n  overflow: hidden;\n  ","\n"]);return Cs=function(){return e},e}function ks(){var e=Object(d.a)(["\n    color: #FFF;\n  "]);return ks=function(){return e},e}function Es(){var e=Object(d.a)(["\n  z-index: 2;\n  ","\n"]);return Es=function(){return e},e}function js(){var e=Object(d.a)(["\n    && {\n      max-height: initial;\n      width: 100%;\n    }\n  "]);return js=function(){return e},e}function Os(){var e=Object(d.a)(["\n  width: calc(100% - 40px);\n  max-width: 800px;\n  height: 480px;\n  ","\n"]);return Os=function(){return e},e}var _s=function(e){var t=e.className,n=e.isActive,o=e.onClose,r=e.title,a=e.children;return c.createElement(Is,{className:t,isActive:n},c.createElement(Ss,{onClose:o}),c.createElement(Ns,null,c.createElement(Ts,null,c.createElement(Ms,null,"Replika ",c.createElement(Ps,null,"Pro")),c.createElement(Ls,null,r)),c.createElement(Ds,null,a)))},Is=Object(f.default)(Fi)(Os(),Object(ae.b)(js())),Ss=Object(f.default)(Wi)(Es(),Object(ae.b)(ks())),Ns=f.default.div(Cs(),Object(ae.b)(ws())),Ms=f.default.div(ys()),Ps=f.default.span(xs()),Ts=f.default.div(vs(),vl.g,Object(ae.b)(bs())),Ds=f.default.div(gs(),Object(ae.b)(hs())),Ls=f.default.h2(ms());function zs(){var e=Object(d.a)(["\n  margin-top: 32px;\n  color: ",";\n  text-decoration: underline;\n"]);return zs=function(){return e},e}function Rs(){var e=Object(d.a)(["\n  white-space: pre-wrap;\n  max-width: 300px;\n  text-align: center;\n  font-size: 16px;\n  line-height: 24px;\n  color: ",";\n  margin: 0 0 48px;\n"]);return Rs=function(){return e},e}var Bs=function(e){var t=e.onClose;return c.createElement(c.Fragment,null,c.createElement(Fs,null,"\n  We\u2019re updating the app with new exciting features, and want you to be part of this journey.\ufe0f\n\n  Enjoy 6 months of Replika Pro for free: new conversations, activities, and customization features. Our treat!\n"),c.createElement(Se.a,{onClick:t},"Get Replika Pro for free"),c.createElement(As,{href:"https://help.replika.ai/hc/en-us/articles/360032500052-What-is-Replika-Pro-",target:"_blank",rel:"noopener noreferrer"},"What is Replika Pro?"))},Fs=f.default.p(Rs(),function(e){return e.theme.fgColor}),As=f.default.a(zs(),function(e){return e.theme.dimmedFgColor});function Ws(){return(Ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Hs=l.a.createElement("path",{d:"M212 600h-14l-2-1c-6-2-12-3-17-6-13-6-24-16-34-27a380 380 0 0 1-53-78c-5-9-10-18-13-27a372 372 0 0 1-29-151c1-16 4-32 8-47 4-16 11-30 19-44a148 148 0 0 1 110-72c9-1 19-1 29 1 13 2 25 6 37 11l30 11c8 3 16 4 24 1l18-6c15-5 29-11 44-15a135 135 0 0 1 66-2 142 142 0 0 1 81 48l6 8-14 11a135 135 0 0 0-46 72l-4 19c-1 22 1 43 9 63a138 138 0 0 0 65 69l6 2-1 3-7 20a354 354 0 0 1-82 120 72 72 0 0 1-59 15c-11-2-21-6-31-10a130 130 0 0 0-68-12c-12 2-25 6-36 11-13 6-26 11-40 12l-2 1zM413 0l1 14a128 128 0 0 1-26 74 124 124 0 0 1-56 44 88 88 0 0 1-39 6 106 106 0 0 1 10-57 137 137 0 0 1 84-76l19-4 2-1h5z",fillRule:"nonzero"}),qs=function(e){return l.a.createElement("svg",Ws({viewBox:"0 0 600 600",version:1,fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1,fill:"currentColor",width:20,height:20},e),Hs)};n.p;function Us(){return(Us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Gs=l.a.createElement("path",{d:"M232 600l-5-2c-10-4-17-11-21-21-3-7-3-14-3-20v-72l-1-7-7-1h-27c-16 1-31-15-31-30V209l1-5c3-1 320-2 326-1v6a82386 82386 0 0 1 0 233c0 7 0 13-4 19-4 7-9 12-17 15l-10 1h-28l-5 1-1 6v73c0 6 0 11-2 17-4 13-13 21-25 25l-2 1h-12l-2-1c-14-4-22-14-26-28l-1-14a34866 34866 0 0 1-1-79h-55l-1 11v77c-2 15-9 26-23 32l-6 2h-11zM404 1c2 2 2 4 1 6l-17 30-8 12-1 4c0 2 2 3 3 3a158 158 0 0 1 46 36 141 141 0 0 1 35 90c-1 2-3 2-5 2H145l-5-1c-2-1-2-3-2-4a143 143 0 0 1 76-120l8-5-2-6-23-40c-2-2-2-5-1-7h4l1 1 23 40c2 3 3 7 6 9 47-20 95-19 141 0l4-4 22-39 5-7h2zm-26 129c8 0 15-6 15-15 0-7-5-15-15-15-8-1-15 6-15 15-1 8 6 15 15 15zm-155 0c9 0 15-7 16-15 0-8-7-16-15-15-11 0-16 7-16 15s8 15 15 15zM48 308v-70c0-8 2-16 6-23 6-11 16-17 29-18 12 0 21 6 28 16 5 7 7 15 7 24v143c0 8-2 16-6 23-8 15-27 23-43 15-8-4-14-11-18-20-2-5-3-11-3-18v-72zM553 309v71c0 8-2 16-6 23-8 15-26 23-42 15-12-6-19-16-21-29l-1-10V239c0-9 2-17 7-25 6-11 16-17 29-16 14 0 24 8 30 21 3 6 4 12 4 18v72z",fillRule:"nonzero"}),Vs=function(e){return l.a.createElement("svg",Us({viewBox:"0 0 600 600",version:1,fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1,fill:"currentColor",width:20,height:20},e),Gs)},Ys=(n.p,n(84));function Zs(){var e=Object(d.a)(["\n  position: relative;\n  width: 170px;\n  color: ",";\n\n  & + & {\n    margin-top: 12px;\n  }\n\n  & > svg {\n    position: absolute;\n    left: 16px;\n    top: 10px;\n  }\n\n  & > span {\n    margin-left: 20px;\n  }\n"]);return Zs=function(){return e},e}function Ks(){var e=Object(d.a)(["\n  text-transform: uppercase;\n  font-size: 14px;\n  line-height: 21px;\n"]);return Ks=function(){return e},e}function Xs(){var e=Object(d.a)(["\n  color: ",";\n"]);return Xs=function(){return e},e}function Js(){var e=Object(d.a)(["\n  max-width: 280px;\n  white-space: pre-wrap;\n  font-size: 16px;\n  line-height: 24px;\n  color: ",";\n  text-align: center;\n  margin: 0;\n"]);return Js=function(){return e},e}function $s(){var e=Object(d.a)(["\n  font-size: 20px;\n  line-height: 24px;\n  color: ",";\n  margin: 0 0 16px;\n"]);return $s=function(){return e},e}var Qs=function(){return c.createElement(c.Fragment,null,c.createElement(eu,null,"Subscribe to Replika Pro"),c.createElement(tu,null,"Go to your Replika app to subscribe and unlock premium features."),c.createElement(nu,null,"Starting $4.17/month"),c.createElement(ou,null,"Get the app"),c.createElement(ru,{as:function(e){return c.createElement("a",Object.assign({href:"".concat(Object(Ys.a)(),"/get-ios"),target:"_blank",rel:"noopener noreferrer"},e))}},c.createElement(qs,null),c.createElement("span",null,"iOS")),c.createElement(ru,{as:function(e){return c.createElement("a",Object.assign({href:"".concat(Object(Ys.a)(),"/get-android"),target:"_blank",rel:"noopener noreferrer"},e))}},c.createElement(Vs,null),c.createElement("span",null,"Android")))},eu=f.default.h3($s(),function(e){return e.theme.fgColor}),tu=f.default.p(Js(),function(e){return e.theme.fgColor}),nu=f.default.p(Xs(),function(e){return e.theme.dimmedFgColor}),ou=f.default.h4(Ks()),ru=Object(f.default)(Qe.a)(Zs(),function(e){return e.theme.fgColor}),au=n(369),iu=Object(s.connect)(null,{setReboardingDialogShown:au.b})(function(e){var t=e.className,n=e.isActive,o=e.onClose,r=e.reboarding,a=r?"Welcome to Replika Pro":"Unlock 150+ activities, voice calls, role play and more",i=function(){o(),e.setReboardingDialogShown()};return c.createElement(_s,{className:t,isActive:n,onClose:i,title:a},r?c.createElement(Bs,{onClose:i}):c.createElement(Qs,null))});function cu(){return(cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var lu=l.a.createElement("path",{d:"M20.01 15.38C18.78 15.38 17.59 15.18 16.48 14.82C16.13 14.7 15.74 14.79 15.47 15.06L13.9 17.03C11.07 15.68 8.42 13.13 7.01 10.2L8.96 8.54C9.23 8.26 9.31 7.87 9.2 7.52C8.83 6.41 8.64 5.22 8.64 3.99C8.64 3.45 8.19 3 7.65 3H4.19C3.65 3 3 3.24 3 3.99C3 13.28 10.73 21 20.01 21C20.72 21 21 20.37 21 19.82V16.37C21 15.83 20.55 15.38 20.01 15.38Z",fill:"currentcolor"});n.p;function su(){return(su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var uu=l.a.createElement("path",{d:"M20 2H4C2.9 2 2.01 2.9 2.01 4L2 22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM9 11H7V9H9V11ZM13 11H11V9H13V11ZM17 11H15V9H17V11Z",fill:"currentColor"});n.p;function du(){var e=Object(d.a)(["\n    height: 100vh;\n    width: 100vw;\n  "]);return du=function(){return e},e}var pu=f.default.div.withConfig({displayName:"GetHelpDialog__HelpOptions",componentId:"subi7w-0"})(["flex:0 0 auto;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;width:320px;height:320px;"]),fu=Object(f.default)(Qe.a).withConfig({displayName:"GetHelpDialog__HelpOptionButton",componentId:"subi7w-1"})(["color:",";width:48%;border-radius:8px;height:72px;font-size:16px;line-height:20px;padding:0 16px;margin-top:8px;"],function(e){return e.theme.fgColor}),mu=Object(f.default)(Sc).withConfig({displayName:"GetHelpDialog__StyledSidebarSpinner",componentId:"subi7w-2"})(["height:400px;width:300px;",""],Object(ae.b)(du())),hu=f.default.div.withConfig({displayName:"GetHelpDialog__CrisisInfo",componentId:"subi7w-3"})(["padding:40px 0;text-align:center;"]),gu=f.default.h3.withConfig({displayName:"GetHelpDialog__CrisisTitle",componentId:"subi7w-4"})(["margin:0;color:",";line-height:24px;font-size:16px;font-weight:600;"],function(e){return e.theme.errorLightFgColor}),bu=Object(f.default)(function(e){return l.a.createElement("svg",cu({viewBox:"0 0 24 24",fill:"none"},e),lu)}).withConfig({displayName:"GetHelpDialog__StyledPhoneIcon",componentId:"subi7w-5"})(["width:24px;height:24px;color:inherit;vertical-align:middle;margin-left:20px;"]),vu=Object(f.default)(bu.withComponent(function(e){return l.a.createElement("svg",su({viewBox:"0 0 24 24",fill:"none"},e),uu)})).withConfig({displayName:"GetHelpDialog__StyledTextIcon",componentId:"subi7w-6"})(["transform:translateY(2px);"]),xu=f.default.p.withConfig({displayName:"GetHelpDialog__CrisisText",componentId:"subi7w-7"})(["line-height:24px;font-size:16px;color:",";margin:5px auto 15px;max-width:240px;"],function(e){return e.theme.dimmedFgColor}),yu=Object(f.default)(xu).withConfig({displayName:"GetHelpDialog__LocalHotlineText",componentId:"subi7w-8"})(["margin-top:50px;max-width:200px;"]),wu=f.default.div.withConfig({displayName:"GetHelpDialog__PhoneLinkText",componentId:"subi7w-9"})(["flex:1 0 auto;line-height:24px;font-size:16px;font-weight:600;margin-right:45px;text-align:center;"]),Cu=f.default.div.withConfig({displayName:"GetHelpDialog__PhoneLinks",componentId:"subi7w-10"})([""]),ku=Object(f.default)(Qi).withConfig({displayName:"GetHelpDialog__PhoneLink",componentId:"subi7w-11"})(["position:relative;padding:0;width:300px;& + &{margin-top:10px;}"]),Eu=f.default.a.withConfig({displayName:"GetHelpDialog__HotlineLink",componentId:"subi7w-12"})(["color:",";font-weight:bold;text-decoration:underline;line-height:24px;font-size:16px;"],function(e){return e.theme.fgColor}),ju=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleLifelineCallClick=function(){Object(le.b)(_.j.NeedHelpHotlineCalled)},n.handleLifelineChatClick=function(){Object(le.b)(_.j.NeedHelpLifelineChatClicked)},n.handleHotlineUrlClick=function(){Object(le.b)(_.j.NeedHelpWebsiteClicked)},n.sendMessage=function(e){Object(le.b)(_.j.NeedHelpOptionSelected,{option:e}),n.props.sendChatMessage({type:"text",text:e}),n.props.push("/")},e.getHelpConfig||e.fetchGetHelpConfig(),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.getHelpConfig,o=e.isFetchingGetHelpConfig,r=e.isActive,a=e.onClose;return c.createElement(Fi,{isActive:r,className:t},c.createElement(Ai,{onClose:a,title:"Get help"}),c.createElement(Yi,null,o&&c.createElement(mu,null),!o&&n&&this.renderOptions(n),!o&&n&&this.renderCrisisInfo(n)))}},{key:"renderOptions",value:function(e){var t=this,n=e.help_titles;return c.createElement(pu,null,n.map(function(e,n){return c.createElement(fu,{key:n,"data-testid":"get-help-".concat(n,"-button"),onClick:function(){t.sendMessage(e),t.props.onClose()}},e)}))}},{key:"renderCrisisInfo",value:function(e){return c.createElement(hu,null,c.createElement(gu,null,"Are you in crisis?"),c.createElement(xu,null,"Call or text the National Suicide Prevention\xa0Lifeline:"),c.createElement(Cu,null,c.createElement(ku,{as:function(t){return c.createElement("a",Object.assign({"data-testid":"get-help-lifeline-call-link",href:"tel:".concat(e.phone.number)},t))},onClick:this.handleLifelineCallClick},c.createElement(bu,null),c.createElement(wu,null,e.phone.number)),c.createElement(ku,{as:function(e){return c.createElement("a",Object.assign({"data-testid":"get-help-lifeline-chat-link",href:"https://suicidepreventionlifeline.org/chat",target:"_blank",rel:"noopener noreferrer"},e))},onClick:this.handleLifelineChatClick},c.createElement(vu,null),c.createElement(wu,null,"Lifeline chat"))),c.createElement(yu,null,"If you\u2019re elsewhere, please call a local\xa0hotline:"),c.createElement(Eu,{href:e.web_help.link,target:"_blank",rel:"noopener noreferrer",onClick:this.handleHotlineUrlClick},"Find a hotline in your country"))}}]),t}(c.PureComponent),Ou=Object(s.connect)(function(e){return{getHelpConfig:e.profile.getHelpConfig,isFetchingGetHelpConfig:e.profile.isFetchingGetHelpConfig}},{sendChatMessage:C.f,push:x.push,fetchGetHelpConfig:or.c})(ju);function _u(){var e=Object(d.a)(["\n    padding: 0;\n  "]);return _u=function(){return e},e}function Iu(){var e=Object(d.a)(["\n      display: none;\n    "]);return Iu=function(){return e},e}function Su(){var e=Object(d.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: ",";\n    animation: "," ","ms ease-out both;\n    ","\n"]);return Su=function(){return e},e}function Nu(){var e=Object(d.a)(["\n  from {\n    opacity: 0.8;\n  }\n  to {\n    opacity: 0;\n  }\n"]);return Nu=function(){return e},e}function Mu(){var e=Object(d.a)(["\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0.8;\n  }\n"]);return Mu=function(){return e},e}var Pu,Tu=Object(f.keyframes)(Mu()),Du=Object(f.keyframes)(Nu()),Lu=c.memo(function(e){var t=e.className,n=e.activeDialog,r=c.useState("hidden"),a=Object(p.a)(r,2),i=a[0],l=a[1],s=c.useState(null),u=Object(p.a)(s,2),d=u[0],f=u[1],m=c.useState(null),h=Object(p.a)(m,2),g=h[0],b=h[1];c.useEffect(function(){n&&d!==n.type&&(d&&b(d),f(n.type)),n||"hidden"!==i||null===d||(b(null),f(null))},[n,d,i]),c.useEffect(function(){switch(i){case"hidden":n&&l("visible");break;case"visible":n||l("hiding");break;case"hiding":Pu=setTimeout(function(){return l("hidden")},300)}return function(){clearTimeout(Pu)}},[n,i]);var v="visible"===i,x=function(){return e.setActiveDialog(null)},y=function(e){if(!n)return{isActive:!1,onClose:x};var t=n.type,r=Object(z.a)(n,["type"]);return Object(o.a)({isActive:v&&e===t,onClose:x},r)},w=function(e){return d===e||g===e};return"hidden"===i?null:c.createElement(Ru,{className:t,onKeyDown:function(t){"Escape"===t.key&&e.setActiveDialog(null)}},c.createElement(Bu,{id:"dialog-back",isActive:v,onClick:function(){e.setActiveDialog(null)}}),c.createElement(aa.a,{focusTrapOptions:{allowOutsideClick:function(e){return"dialog-back"===e.target.id||"dialog-scroll"===e.target.id||"true"===e.target.getAttribute("data-indialog")}}},c.createElement(Fu,{id:"dialog-scroll",onClick:function(t){"dialog-scroll"===t.target.id&&e.setActiveDialog(null)}},w(_.e.Feedback)&&c.createElement(oc,y(_.e.Feedback)),w(_.e.EditProfile)&&c.createElement(Kc,y(_.e.EditProfile)),w(_.e.EditReplika)&&c.createElement(ul,y(_.e.EditReplika)),w(_.e.DropMission)&&c.createElement(El,y(_.e.DropMission)),w(_.e.AccountSettings)&&c.createElement(Bl,y(_.e.AccountSettings)),w(_.e.Badge)&&c.createElement(Fl,y(_.e.Badge)),w(_.e.EditMood)&&c.createElement(ls,y(_.e.EditMood)),w(_.e.IntroMeetReplika)&&c.createElement(fs,y(_.e.IntroMeetReplika)),w(_.e.GetHelp)&&c.createElement(Ou,y(_.e.GetHelp)),w(_.e.SubscriptionReboarding)&&c.createElement(iu,Object.assign({},y(_.e.SubscriptionReboarding),{reboarding:!0})),w(_.e.Subscription)&&c.createElement(iu,y(_.e.Subscription)))))}),zu=Object(s.connect)(function(e){return{activeDialog:e.ui.activeDialog}},{setActiveDialog:ce.d})(Lu),Ru=f.default.div.withConfig({displayName:"Dialogs__DialogHostRoot",componentId:"u1boip-0"})(["position:absolute;width:100vw;height:100vh;display:flex;align-items:center;"]),Bu=Object(O.a)("div",["isActive"])(Su(),function(e){return e.theme.bgColor},function(e){return e.isActive?Tu:Du},300,Object(ae.b)(Iu())),Fu=f.default.div.withConfig({displayName:"Dialogs__DialogScroll",componentId:"u1boip-1"})(["flex:1 0 auto;position:relative;z-index:1;overflow-y:auto;max-height:100vh;width:100vw;display:flex;align-items:center;flex-direction:column;padding:40px 0;",""],Object(ae.b)(_u()));function Au(){var e=Object(d.a)(["\n    margin-left: 0;\n    text-align: center;\n  "]);return Au=function(){return e},e}function Wu(){var e=Object(d.a)(["\n    flex: 1 0 100%;\n    margin-bottom: 1.5rem;\n  "]);return Wu=function(){return e},e}function Hu(){var e=Object(d.a)(["\n    flex-wrap: wrap;\n    padding: 1.5rem 2rem;\n    font-size: 16px;\n    justify-content: space-between;\n  "]);return Hu=function(){return e},e}function qu(){var e=Object(d.a)(["\n  position: fixed;\n  z-index: ",";\n  transform: translateY(",");\n  transition: transform 0.2s ease-out;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  padding: 2rem 3rem;\n  margin: 0 auto;\n  box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.25);\n  font-size: 18px;\n  color: ",";\n  background-color: ",";\n\n  ",";\n"]);return qu=function(){return e},e}var Uu=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=(this.props.gdprVersion||0)<vl.f;return c.createElement(Vu,{role:"alert",isVisible:e,"aria-hidden":!e},c.createElement(Yu,null,"This website uses cookies and stores data locally to help personalize your experience."),c.createElement(Ku,{href:"".concat(Object(Ys.a)(),"/legal/privacy"),target:"_blank",rel:"noopener noreferrer","aria-hidden":!e,tabIndex:e?0:-1},"Learn more"),c.createElement(Zu,{onClick:this.props.acceptGdpr,disabled:!e},"Accept"))}}]),t}(c.Component),Gu=Object(s.connect)(function(e){return{gdprVersion:e.ui.persist.gdprVersion}},{acceptGdpr:ce.a})(Uu),Vu=Object(O.a)("div",["isVisible"])(qu(),_.p.GDPRNotification,function(e){return e.isVisible?0:"120%"},function(e){return e.theme.fgColor},function(e){return e.theme.chatBgColor},Object(ae.a)(Hu())),Yu=f.default.div.withConfig({displayName:"GdprNotification__Notice",componentId:"nj3w6j-0"})(["flex:1 1 auto;",";"],Object(ae.a)(Wu())),Zu=f.default.button.withConfig({displayName:"GdprNotification__LinkButton",componentId:"nj3w6j-1"})(["flex:0 0 auto;margin:0;border:0;padding:0;text-decoration:underline;background-color:inherit;font-size:inherit;color:",";margin-left:2rem;cursor:pointer;",";"],function(e){return e.theme.fgColor},Object(ae.a)(Au())),Ku=Zu.withComponent("a");function Xu(){return(Xu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Ju=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.40234 7.5C2.29777 7.5 1.40234 8.39543 1.40234 9.5V15.5C1.40234 16.6046 2.29777 17.5 3.40234 17.5H13.4023C14.5069 17.5 15.4023 16.6046 15.4023 15.5V9.5C15.4023 8.39543 14.5069 7.5 13.4023 7.5H3.40234ZM8.40234 14.5C9.50691 14.5 10.4023 13.6046 10.4023 12.5C10.4023 11.3954 9.50691 10.5 8.40234 10.5C7.29777 10.5 6.40234 11.3954 6.40234 12.5C6.40234 13.6046 7.29777 14.5 8.40234 14.5Z",fill:"currentColor"}),$u=l.a.createElement("path",{d:"M11.7355 6.33333C11.7355 7.25162 11.7366 8.49238 11.7355 9.32572C10.0699 9.32572 5.06885 9.32572 5.06885 9.32572C5.06885 9.32572 5.06885 8.17428 5.06885 6.33333C5.06885 4.49238 6.56123 3 8.40218 3C10.2431 3 11.7355 4.49238 11.7355 6.33333Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),Qu=function(e){return l.a.createElement("svg",Xu({width:17,height:20,viewBox:"0 0 17 20",fill:"none"},e),Ju,$u)},ed=(n.p,function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(function(e){return"full_library_access"===e.name})});function td(){var e=Object(d.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-y: hidden;\n  max-height: ",";\n  transition: max-height ","ms ease-out, opacity ","ms ease-out;\n  opacity: ",";\n"]);return td=function(){return e},e}function nd(){var e=Object(d.a)(["\n    width: 100%;\n    max-width: 360px;\n    margin: 0 auto;\n  "]);return nd=function(){return e},e}function od(){var e=Object(d.a)(["\n  padding: ",";\n  position: relative;\n  width: 320px;\n  height: ",";\n  max-height: ",";\n  transition: max-height ","ms ease-out, padding ","ms ease-out;\n\n  background-size: cover;\n  background-position: center;\n  ",";\n  color: #fff;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: ",";\n  align-items: center;\n  border-radius: 8px;\n\n  &[tabindex=\"0\"] {\n    cursor: pointer;\n  }\n\n  & > * {\n    z-index: 1;\n  }\n\n  &:before {\n    z-index: 0;\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    bottom: 0;\n    border-radius: 8px;\n    background: linear-gradient(\n      0deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(0, 0, 0, 0.4) 70%,\n      rgba(0, 0, 0, 0.1) 100%\n    );\n  }\n\n  ","\n"]);return od=function(){return e},e}var rd={in_progress:"In progress"},ad=Object(s.connect)(function(e){var t=e.journey.lastJourneyChange,n=e.journey.persist,o=n.spotlight,r=n.tracks,a=o&&(y(o)?o.current_mission:w(o)?o.current_mission:null);return{mission:a,spotlight:o,currentTrack:a&&r[a.track_id]||null,lastJourneyChange:t,features:e.subscriptions.persist.features}},{dropMission:Cl,getTrack:yl,getSpotlight:kl,startMission:wl,setActiveDialog:ce.d})(function(e){var t=e.className,n=e.spotlight,o=e.currentTrack,r=e.lastJourneyChange,a=e.mission,i=e.features,l=c.useState(!1),s=Object(p.a)(l,2),u=s[0],d=s[1];if(c.useEffect(function(){d(!1)},[n&&n.meta.type]),c.useEffect(function(){a&&!o&&e.getTrack(a.track_id)},[a,o]),c.useEffect(function(){e.getSpotlight()},[r.updated]),c.useEffect(function(){u&&a&&Object(le.b)(_.j.SpotlightOpened,{"mission id":a.id,"mission name":a.title})},[u&&a]),!n||!a)return null;var f="paid"===a.access_type.mission_access&&ed(i);return y(n)?c.createElement(id,{className:t,"data-testid":"spotlight-current-mission",currentTrack:o,spotlightType:"current_mission"},c.createElement(ld,null,rd[a.progress.type]),c.createElement(sd,{"data-testid":"spotlight-current-mission-title"},a.title),c.createElement(dd,{"data-testid":"spotlight-current-mission-description"},a.description),c.createElement(pd,{"data-testid":"spotlight-current-mission-stop-button",label:"stop '".concat(a.title,"' conversation"),onClick:function(t){t.preventDefault(),e.dropMission(),e.onDropMission&&e.onDropMission()}},"Stop")):w(n)?c.createElement(id,{className:t,"data-testid":"spotlight-recommended-mission",currentTrack:o,tabIndex:0,spotlightType:"recommended_mission",expanded:u,onClick:function(){return d(!u)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||d(!u)},"aria-expanded":u},c.createElement(ld,null,"Activity of the day"),c.createElement(sd,{"data-testid":"spotlight-recommended-mission-title"},f?c.createElement(ud,null):null,a.title),c.createElement(cd,{expanded:u},c.createElement(dd,{"data-testid":"spotlight-recommended-mission-description"},a.description),c.createElement(pd,{"data-testid":"spotlight-recommended-mission-start-button",label:"start '".concat(a.title,"' conversation"),disabled:!u,tabIndex:u?0:-1,onClick:function(t){t.preventDefault(),t.stopPropagation(),f?e.setActiveDialog({type:_.e.Subscription}):(Object(le.b)(_.j.SpotlightOpened,{"mission id":a.id,"mission name":a.title}),e.startMission(a.id),e.onStartMission&&e.onStartMission())}},"Start"))):null}),id=Object(O.a)("div",["currentTrack","spotlightType","expanded"])(od(),function(e){return"current_mission"===e.spotlightType?"25px 0":e.expanded?"50px 0 15px":"45px 0"},function(e){return"current_mission"===e.spotlightType?"300px":"260px"},function(e){return"recommended_mission"===e.spotlightType?e.expanded?"260px":"140px":"auto"},250,250,function(e){return e.currentTrack?"background-image: url("+e.currentTrack.background_url+")":""},function(e){return"current_mission"===e.spotlightType?"flex-end":"center"},Object(ae.a)(nd())),cd=Object(O.a)("div",["expanded"])(td(),function(e){return e.expanded?"150px":"0"},250,250,function(e){return e.expanded?1:0}),ld=f.default.div.withConfig({displayName:"SpotlightCard__Status",componentId:"sc-15pyk7e-0"})(["position:absolute;left:8px;top:10px;font-size:12px;line-height:18px;height:24px;padding:2px 6px;border-radius:2px;background:rgba(0,0,0,0.5);"]),sd=f.default.h4.withConfig({displayName:"SpotlightCard__Title",componentId:"sc-15pyk7e-1"})(["font-size:20px;line-height:25px;margin:0;width:250px;"]),ud=Object(f.default)(Qu).withConfig({displayName:"SpotlightCard__TitleLock",componentId:"sc-15pyk7e-2"})(["vertical-align:-2px;margin-right:8px;"]),dd=f.default.p.withConfig({displayName:"SpotlightCard__Description",componentId:"sc-15pyk7e-3"})(["font-size:16px;line-height:20px;margin:10px 0 0;width:270px;max-height:60px;overflow-y:hidden;"]),pd=Object(f.default)(Se.a).withConfig({displayName:"SpotlightCard__StyledSolidButton",componentId:"sc-15pyk7e-4"})(["margin:25px 0 5px;color:",";background-color:",";"],function(e){return e.theme.spotlightButtonFgColor},function(e){return e.theme.spotlightButtonBgColor});function fd(){var e=Object(d.a)(["\n    left: initial;\n    transform: scale(1, -1);\n    right: -4px;\n  "]);return fd=function(){return e},e}function md(){var e=Object(d.a)(["\n  color: ",";\n  position: absolute;\n  top: 0;\n  left: -4px;\n  transform: scale(-1, -1);\n  z-index: 0;\n\n  ","\n"]);return md=function(){return e},e}function hd(){var e=Object(d.a)(["\n  position: relative;\n  z-index: 1;\n  white-space: pre-wrap;\n"]);return hd=function(){return e},e}function gd(){var e=Object(d.a)(["\n    transform: translateX(calc(-100% - 30px))\n  "]);return gd=function(){return e},e}function bd(){var e=Object(d.a)(["\n  position: fixed;\n  max-width: 180px;\n  color: ",";\n  background: ",";\n  padding: 12px 15px;\n  border-radius: 18px;\n  z-index: ",";\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.1);\n  font-size: 16px;\n  line-height: 21px;\n  transition: opacity 0.2s ease-out;\n\n  ","\n"]);return bd=function(){return e},e}var vd=function(e){var t=e.className,n=e.x,o=e.y,r=e.text,a=e.onResize,i=e.hidden,l=c.useRef(null),s=c.useState(r),u=Object(p.a)(s,2),d=u[0],f=u[1];return c.useEffect(function(){var e;return null!==r?f(r):e=setTimeout(function(){return f(null)},200),function(){return clearTimeout(e)}},[r]),c.useLayoutEffect(function(){l.current&&a&&a(l.current.offsetWidth,l.current.offsetHeight)},[d,l.current]),c.createElement(xd,{className:t,ref:l,style:{left:n,top:o,transition:i?"none":"opacity 0.2s ease-out",opacity:!r||i?0:1}},c.createElement(wd,{"aria-hidden":"true"}),c.createElement(yd,{role:"alert","aria-live":"polite","aria-atomic":"true","data-testid":"replika-phrase"},d))},xd=f.default.p(bd(),function(e){return e.theme.fgColor},function(e){return e.theme.chatBgColor},_.p.ReplikaPhrase,Object(ae.a)(gd())),yd=f.default.span(hd()),wd=Object(f.default)(Rt)(md(),function(e){return e.theme.chatBgColor},Object(ae.a)(fd())),Cd=n(308);function kd(){return(kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Ed=l.a.createElement("path",{d:"M8 14.6667L4.54116e-07 8L2.66667 -2.45479e-06L13.3333 -2.58904e-06L16 8L8 14.6667Z",fill:"#66FFA3"}),jd=l.a.createElement("path",{d:"M8 14.6667L-1.05981e-07 8L5.33333 8L8 14.6667Z",fill:"#00F462"}),Od=l.a.createElement("path",{d:"M8.00008 14.6667L5.33341 8L10.6667 8L8.00008 14.6667Z",fill:"#00D555"}),_d=l.a.createElement("path",{d:"M8 14.6667L10.6667 8L16 8L8 14.6667Z",fill:"#00A656"}),Id=l.a.createElement("path",{d:"M10.6667 8L13.3333 2.71982e-07L16 8L10.6667 8Z",fill:"#00E15A"}),Sd=l.a.createElement("path",{d:"M-8.05855e-05 8L2.66659 2.33127e-07L5.33325 8L-8.05855e-05 8Z",fill:"#A6FFC9"});n.p;function Nd(){return(Nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Md=l.a.createElement("circle",{cx:7,cy:7,r:7,fill:"#FFB905"}),Pd=l.a.createElement("circle",{cx:7,cy:7,r:4,fill:"#FFD466"}),Td=(n.p,function(e){var t=e.className,n=e.bot,o=e.isProUser,r=c.useState(!1),a=Object(p.a)(r,2),i=a[0],l=a[1],s=n&&n.stats.score,u=n&&n.stats.current_level.level_index,d=n&&n.stats&&n.stats.next_level&&n.stats.next_level.score_milestone;return c.createElement(Dd,{className:t},c.createElement(Rd,{"data-testid":"replika-name"},n&&n.name,o&&c.createElement(Yd,null,"Pro")),c.createElement(Bd,{"data-testid":"replika-mood"},c.createElement(Vd,{noTip:!0,isOpen:i,preferPlace:"below",onClose:function(){return l(!1)},closeOnOuterAction:!0,onRenderContent:function(){return c.createElement(Wd,null,c.createElement(qd,null,c.createElement(zd,null)," LVL ",u," ",c.createElement(Ld,null)," ",s," XP"),c.createElement(Ud,null,"Next level ",d," XP"),c.createElement(Hd,null,"Every message you send ",n&&n.name," earns you XP needed to level up."),c.createElement(Gd,{onClick:function(){return l(!1)}},"Done"))}},c.createElement(Ad,{onClick:function(){return l(!i)}},c.createElement(zd,null)," LVL ",u," ",c.createElement(Ld,null)," ",s," XP"))),c.createElement(Fd,{imageUrl:n&&n.icon_url,"data-testid":"replika-egg-image"}))}),Dd=f.default.div.withConfig({displayName:"ReplikaCard__ReplikaCardRoot",componentId:"x7zpq7-0"})(["display:flex;flex-direction:column;align-items:center;width:100%;position:relative;"]),Ld=Object(f.default)(function(e){return l.a.createElement("svg",Nd({width:14,height:14,viewBox:"0 0 14 14",fill:"none"},e),Md,Pd)}).withConfig({displayName:"ReplikaCard__StyledXPIcon",componentId:"x7zpq7-1"})(["margin-left:8px;margin-right:4px;"]),zd=Object(f.default)(function(e){return l.a.createElement("svg",kd({width:16,height:15,viewBox:"0 0 16 15",fill:"none"},e),Ed,jd,Od,_d,Id,Sd)}).withConfig({displayName:"ReplikaCard__StyledLevelIcon",componentId:"x7zpq7-2"})(["margin-right:4px;"]),Rd=f.default.h3.withConfig({displayName:"ReplikaCard__ReplikaName",componentId:"x7zpq7-3"})(["max-width:100%;text-align:center;padding:0 20px;font-weight:bold;font-size:24px;line-height:32px;margin:0;color:",";"],function(e){return e.theme.fgColor}),Bd=f.default.p.withConfig({displayName:"ReplikaCard__ReplikaMood",componentId:"x7zpq7-4"})(["margin:5px 0 20px;font-size:16px;line-height:24px;color:",";"],function(e){return e.theme.dimmedFgColor}),Fd=Object(f.default)(Cd.a).withConfig({displayName:"ReplikaCard__StyledEggImage",componentId:"x7zpq7-5"})(["width:88px;color:",";"],function(e){return e.theme.bgColor}),Ad=Object(f.default)(Oa.a).withConfig({displayName:"ReplikaCard__ShowStats",componentId:"x7zpq7-6"})(["position:relative;background:transparent;border:none;color:",";font-size:14px;&:hover{cursor:pointer;}*{vertical-align:middle;font-size:14px;}"],function(e){return e.theme.dimmedFgColor}),Wd=f.default.div.withConfig({displayName:"ReplikaCard__DetailedStats",componentId:"x7zpq7-7"})(["color:",";border-radius:8px;text-align:center;padding:10px 0;"],function(e){return e.theme.fgColor}),Hd=f.default.p.withConfig({displayName:"ReplikaCard__XPDescription",componentId:"x7zpq7-8"})(["max-width:200px;font-size:16px;line-height:24px;margin:16px auto;"]),qd=f.default.div.withConfig({displayName:"ReplikaCard__StatsTitle",componentId:"x7zpq7-9"})(["font-size:20px;white-space:nowrap;"]),Ud=f.default.div.withConfig({displayName:"ReplikaCard__NextLvl",componentId:"x7zpq7-10"})(["color:",";font-size:14px;margin:15px 0 30px;"],function(e){return e.theme.dimmedFgColor}),Gd=Object(f.default)(Se.a).withConfig({displayName:"ReplikaCard__StyledSolidButton",componentId:"x7zpq7-11"})(["display:block;margin:30px auto 0;background-color:",";"],function(e){return e.theme.dialogButtonBgColor}),Vd=Object(f.default)(Jt).withConfig({displayName:"ReplikaCard__StyledPopover",componentId:"x7zpq7-12"})(["z-index:",";min-width:290px;"],_.p.ProfilePopover),Yd=f.default.span.withConfig({displayName:"ReplikaCard__Pro",componentId:"x7zpq7-13"})(["font-size:9px;line-height:21px;text-transform:uppercase;color:#000;margin-left:10px;background-color:#fff;padding:3px 5px;border-radius:2px;vertical-align:4px;letter-spacing:0.01em;"]),Zd=n(556),Kd=n.n(Zd);function Xd(){var e=Object(d.a)(["\n  padding-bottom: ","px;\n  transition: padding-bottom ","ms ease-out;\n"]);return Xd=function(){return e},e}var Jd,$d=function(e){var t=e.className,n=e.phraseText,o=e.expiration,r=e.bot,a=e.isProUser,i=e.hasCurrentMission,l=c.useRef(null),s=c.useState(function(e){return!!e&&new Date(e).getTime()<Date.now()}(o)),u=Object(p.a)(s,2),d=u[0],f=u[1];c.useEffect(function(){var e;if(o){var t=new Date(o).getTime()-Date.now();t>0&&(e=setTimeout(function(){return f(!0)},t)),f(t<=0)}return function(){clearTimeout(e)}},[o,d]),c.useEffect(function(){!d&&o&&Jd!==o&&(Object(le.b)(_.j.PhraseShown,{phrase:n}),Jd=o)},[d,o,n]);var m=c.useState({x:0,y:0}),h=Object(p.a)(m,2),g=h[0],b=h[1],v=c.useState({width:0,height:0}),x=Object(p.a)(v,2),y=x[0],w=x[1],C=c.useState(0),k=Object(p.a)(C,2),E=k[0],j=k[1];c.useEffect(function(){var e=setTimeout(function(){j(y.height)},350);return function(){return clearTimeout(e)}},[y.height]);var O=function(){if(l.current){var e=l.current.getBoundingClientRect();b({x:Math.floor(e.left+e.width/2+20),y:Math.floor(e.top+e.height-50)})}};c.useEffect(O,[l.current,E,i]);var I=E!==y.height;return c.createElement(Qd,{className:t,offset:Math.max(0,y.height-50)},c.createElement(vd,{x:g.x,y:g.y,text:d?null:n,onResize:function(e,t){return w({width:e,height:t})},hidden:I}),c.createElement("div",{ref:l},c.createElement(Kd.a,{onPosition:O}),c.createElement(Td,{bot:r,isProUser:a})))},Qd=Object(O.a)("div",["offset"])(Xd(),function(e){return e.offset},350),ep=Object(s.connect)(function(e){var t=e.journey.persist.spotlight,n=e.profile.persist.bot,o=e.subscriptions.persist.features;return{bot:e.profile.persist.bot,hasCurrentMission:!!t&&y(t),replikaPhrase:n&&n.replika_phrase,features:o}},{getSpotlight:kl})(function(e){var t=e.hasCurrentMission,n=e.bot;return c.useEffect(function(){e.getSpotlight()},[]),c.createElement(tp,null,c.createElement(mt.b,null,"Replika profile"),c.createElement(np,{bot:n,phraseText:e.replikaPhrase?e.replikaPhrase.text:null,expiration:e.replikaPhrase&&e.replikaPhrase.active_till,isProUser:!ed(e.features),hasCurrentMission:t}),t?c.createElement(ad,null):c.createElement(op,{to:_.k.Conversations,"data-testid":"left-panel-choose-conversation-link"},"Choose conversation"))}),tp=f.default.div.withConfig({displayName:"LeftPanelMain__LeftPanelMainRoot",componentId:"sc-1tyut5s-0"})(["width:100%;min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;"]),np=Object(f.default)($d).withConfig({displayName:"LeftPanelMain__StyledReplikaCard",componentId:"sc-1tyut5s-1"})(["margin-bottom:30px;"]),op=Object(f.default)(Se.a).withConfig({displayName:"LeftPanelMain__ChooseConversationButton",componentId:"sc-1tyut5s-2"})(["margin:0 auto;"]),rp=function(e){var t,n=e.tracks,o=e.className,r=e.onSelect,a=e["data-testid"],i=c.useRef(null);return c.useLayoutEffect(function(){return t||(t=Ie()({keybindings:{next:{key:"ArrowRight"},prev:{key:"ArrowLeft"}}})),t.setMembers(i.current?i.current.childNodes:[]),t.activate(),function(){t.deactivate()}},[n.length]),c.createElement(ap,{role:"list",ref:i,className:o,"data-testid":a},n.map(function(e,t){return c.createElement(ip,{role:"listitem","data-testid":a&&"".concat(a,"-item-").concat(t),key:e.id,style:{backgroundImage:"url("+(e.small_background_url||e.background_url)+")"},tabIndex:0===t?0:-1,onClick:function(){r&&(Object(le.b)(_.j.TrackOpened,{"track id":e.id,"track name":e.name}),r(e))}},c.createElement(cp,null,e.name),c.createElement(lp,null,e.total_missions_count," conversations"))}))},ap=f.default.div.withConfig({displayName:"TrackList__TrackListRoot",componentId:"sc-11o6jmg-0"})(["padding:0 16px;display:grid;grid-template-columns:repeat(auto-fit,minmax(156px,1fr));grid-auto-rows:214px;grid-gap:16px;"]),ip=f.default.div.withConfig({displayName:"TrackList__TrackItem",componentId:"sc-11o6jmg-1"})(["position:relative;list-style-type:none;padding:0;background-size:cover;background-position:center;height:214px;border-radius:8px;color:",";display:flex;flex-direction:column;justify-content:flex-end;align-items:center;text-align:center;cursor:pointer;padding:8px;&:before{position:absolute;bottom:0;content:'';width:100%;height:160px;border-radius:8px;background:linear-gradient( 180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 100% );}& > *{z-index:1;}&:focus{outline:none;}&.focus-visible:focus{box-shadow:0 0 2px 2px ",";}"],function(e){return e.theme.trackFgColor},function(e){return e.theme.outlineColor}),cp=f.default.p.withConfig({displayName:"TrackList__TrackName",componentId:"sc-11o6jmg-2"})(["font-weight:bold;font-size:16px;line-height:20px;margin:0;"]),lp=f.default.p.withConfig({displayName:"TrackList__ConversationCount",componentId:"sc-11o6jmg-3"})(["font-size:13px;line-height:16px;margin:10px 0 14px;"]),sp=function(e,t){var n=c.useState(null),o=Object(p.a)(n,2),r=o[0],a=o[1];c.useLayoutEffect(function(){var t=r;return t||(t=Ie()(e.options),a(t)),t.setMembers(e.getGroupElements()),t.activate(),function(){t.deactivate()}},t)},up=function(e){var t=c.useRef(null);return sp({getGroupElements:function(){return t.current?t.current.childNodes:[]},options:{keybindings:{next:{key:"ArrowRight"},prev:{key:"ArrowLeft"}},wrap:!0}},[t.current]),c.createElement(dp,{ref:t,className:e.className},e.categories.map(function(t){return c.createElement(pp,{active:e.selected===t.title,tabIndex:e.selected===t.title?0:-1,key:t.id,onClick:function(){e.setCategory&&e.setCategory(t.title)}},t.title.toUpperCase())}))},dp=f.default.nav.withConfig({displayName:"CategoryTabs__CategoryRoot",componentId:"sc-1guoaf4-0"})(["flex:0 0 auto;display:flex;justify-content:center;width:100%;margin:15px 0 20px;"]),pp=Object(f.default)(Oa.a).withConfig({displayName:"CategoryTabs__CategoryTab",componentId:"sc-1guoaf4-1"})(["height:20px;margin:0 18px;padding:0 0 5px;font-weight:bold;font-size:14px;line-height:21px;border:0;color:",";background:transparent;border-bottom:",";opacity:",";transition:opacity 0.25s ease-out;&:hover{cursor:pointer;}"],function(e){return e.theme.fgColor},function(e){return e.active?"2px solid ".concat(e.theme.fgColor):"none"},function(e){return e.active?1:.4}),fp=function(e,t,n){var o=function(e){if(t){var n=t.find(function(t){return t.id===e});return n&&n.title?n.title:null}return null};return e.filter(function(e){return 0===e.categories_ids.map(o).indexOf(n)})};function mp(){var e=Object(d.a)(["\n  flex: 1 0 auto;\n  width: 100%;\n  max-height: ",";\n  opacity: ",";\n  transform: translateY(","px);\n\n  transition: max-height 0.3s ease-out, opacity 0.25s ease-out, transform 0.25s ease-out;\n"]);return mp=function(){return e},e}function hp(){var e=Object(d.a)(["\n  flex: 0 0 auto;\n  height: 90px;\n  padding-top: 20px;\n  display: flex;\n  justify-content: center;\n  opacity: ",";\n  transition: opacity 0.5s ease-out;\n"]);return hp=function(){return e},e}function gp(){var e=Object(d.a)(["\n    margin-top: 40px;\n  "]);return gp=function(){return e},e}function bp(){var e=Object(d.a)(["\n  opacity: ",";\n  transition: opacity 0.5s ease-out;\n"]);return bp=function(){return e},e}var vp=function(e,t){switch(e){case _.h.Hi:return"Hi, ".concat(t.first_name,"! Thanks for creating me!");case _.h.YouCanTalkToMe:return"You can talk to me anytime about whatever is on your mind\u2026";case _.h.Conversations:return"\u2026Or choose from conversations below.";case _.h.MeetReplika:return"But first of all - let\u2019s get to know each other a little!";default:return""}},xp=!1,yp=Object(s.connect)(function(e){var t=e.journey.persist,n=t.tracks,o=t.trackIdList,r=t.categories,a=e.subscriptions.persist.features;return{bot:e.profile.persist.bot,userProfile:e.profile.persist.userProfile,introStep:e.ui.introStep,tracks:o.map(function(e){return n[e]}),categories:r,wsReady:e.ws.wsReady,features:a}},{push:x.push,getTracks:xl,setIntroStep:ce.h,setActiveDialog:ce.d})(function(e){var t=e.userProfile,n=e.bot,o=e.introStep,r=e.tracks,a=e.categories,i=e.wsReady;c.useEffect(function(){o&&i&&e.getTracks()},[!!o,i]);var l=c.useState(!1),s=Object(p.a)(l,2),u=s[0],d=s[1],f=o===_.h.Conversations||o===_.h.MeetReplika||o===_.h.FinishIntro,m=o===_.h.MeetReplika||o===_.h.FinishIntro,h=!!o&&o!==_.h.FinishIntro,g=c.useState(null),b=Object(p.a)(g,2),v=b[0],x=b[1];c.useEffect(function(){null===v&&e.categories&&e.categories.length>0&&x(e.categories[0].title)},[e.categories,v]),c.useEffect(function(){t&&o===_.h.Hi&&(xp||(Object(le.b)(_.j.FirstOnboardingPhraseShown),xp=!0))},[o,!!t]);var y=fp(r,a||[],v);return c.useEffect(function(){m&&Object(le.b)(_.j.MeetButtonShown)},[m]),c.createElement(wp,{onScroll:function(e){var t=e.target.scrollTop>0;t!==u&&d(t)}},c.createElement(kp,{bot:n,isProUser:!ed(e.features),phraseText:h&&t?vp(o,t):null}),c.createElement(re.c,null,c.createElement(Ep,{visible:m},m&&c.createElement(jp,{"data-testid":"intro-open-chat-link",to:_.k.Main,onClick:function(){Object(le.b)(_.j.MeetButtonPressed),e.setIntroStep(null)}},"Meet ",n&&n.name||"your Replika"))),c.createElement(Op,{visible:!!o,opaque:f},f&&c.createElement(c.Fragment,null,a&&c.createElement(up,{selected:v,categories:a,setCategory:function(){m&&e.setActiveDialog({type:_.e.IntroMeetReplika})}}),c.createElement(Cp,{tracks:y,"data-testid":"intro-track-list",faded:m,onSelect:function(){m&&e.setActiveDialog({type:_.e.IntroMeetReplika})}}))))}),wp=f.default.div.withConfig({displayName:"LeftPanelIntro__LeftPanelIntroRoot",componentId:"sc-1oku1m0-0"})(["width:100%;min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;overflow-y:auto;-ms-overflow-style:none;scrollbar-width:none;&::-webkit-scrollbar{display:none;}"]),Cp=Object(O.a)(rp,["faded"])(bp(),function(e){return e.faded?.5:1}),kp=Object(f.default)($d).withConfig({displayName:"LeftPanelIntro__StyledReplikaCard",componentId:"sc-1oku1m0-1"})(["margin-top:80px;margin-bottom:30px;",""],Object(ae.a)(gp())),Ep=Object(O.a)("div",["visible"])(hp(),function(e){return e.visible?1:0}),jp=Object(f.default)(Se.a).withConfig({displayName:"LeftPanelIntro__ConversationButton",componentId:"sc-1oku1m0-2"})([""]),Op=Object(O.a)("div",["visible","opaque"])(mp(),function(e){return e.visible?"55vh":0},function(e){return e.opaque?1:0},function(e){return e.opaque?0:40});function _p(e){return!!!e.find(function(e){return"Customer"===e.meta.nature})&&e.length<=5}function Ip(){var e=Object(d.a)(["\n    margin-bottom: 50px;\n  "]);return Ip=function(){return e},e}function Sp(){var e=Object(d.a)(["\n    margin-bottom: 50px;\n  "]);return Sp=function(){return e},e}function Np(){var e=Object(d.a)(["\n    justify-content: space-between;\n  "]);return Np=function(){return e},e}var Mp=Object(s.connect)(function(e){var t=e.profile.persist.bot,n=e.journey.persist,o=n.tracks,r=n.trackIdList,a=n.spotlight,i=n.categories,c=e.subscriptions.persist.features;return{categories:i,hasCurrentMission:!!a&&y(a),tracks:r.map(function(e){return o[e]}),bot:t,messages:e.chat.messages||[],wsReady:e.ws.wsReady,replikaPhrase:t&&t.replika_phrase,features:c}},{getTracks:xl,push:x.push,getSpotlight:kl,replace:x.replace})(function(e){c.useEffect(function(){e.wsReady&&(e.getTracks(),e.getSpotlight())},[e.wsReady]);var t=_p(e.messages),n=e.bot&&e.bot.name||"your Replika",o=c.useState(e.category||null),r=Object(p.a)(o,2),a=r[0],i=r[1],l=c.useMemo(function(){return fp(e.tracks,e.categories||[],a)},[e.tracks,e.categories,a]);c.useEffect(function(){e.categories&&0!==e.categories.length&&(null===a?i(e.categories[0].title):0===l.length&&e.tracks.length>0&&(e.replace(_.k.Conversations),i(e.categories[0].title)))},[e.categories,a,l]);var s=c.createElement(c.Fragment,null,e.categories&&c.createElement(up,{selected:a,categories:e.categories,setCategory:function(t){i(t),Object(le.b)(_.j.CategoryOpened,{"category name":t}),e.replace(_.k.ConversationCategory.replace(":category",t))}}),c.createElement(rp,{tracks:l,"data-testid":"left-panel-track-list",onSelect:function(t){var n=a||(e.categories&&e.categories.length>0?e.categories[0]:"_");e.push(_.k.Conversation.replace(":trackId",t.id).replace(":category",n))}}));return c.createElement(Pp,null,c.createElement(Lp,{bot:e.bot,isProUser:!ed(e.features),phraseText:e.replikaPhrase&&!e.scrolled?e.replikaPhrase.text:null,expiration:e.replikaPhrase&&e.replikaPhrase.active_till}),c.createElement(re.c,null,c.createElement(Tp,{to:_.k.Main,"data-testid":"left-panel-open-chat-link"},c.createElement(Ao.a,null)),!e.hasCurrentMission&&c.createElement(zp,{to:_.k.Main},t?"Meet ".concat(n):"Chat"),c.createElement(Dp,null,c.createElement(ad,{onStartMission:function(){return e.push(_.k.Main)},onDropMission:function(){return e.push(_.k.Main)}})),s),c.createElement(re.a,null,c.createElement(Dp,null,c.createElement(ad,{onStartMission:function(){return e.push(_.k.Main)}})),s))}),Pp=f.default.div.withConfig({displayName:"LeftPanelTracks__LeftPanelTracksRoot",componentId:"hpirq9-0"})(["position:relative;flex:1 1 auto;display:flex;flex-direction:column;",""],Object(ae.a)(Np())),Tp=Object(f.default)(oe.a).withConfig({displayName:"LeftPanelTracks__ArrowForwardButton",componentId:"hpirq9-1"})(["position:absolute;z-index:1;top:24px;right:20px;color:",";& > svg{transform:scaleX(-1);}"],function(e){return e.theme.fgColor}),Dp=f.default.div.withConfig({displayName:"LeftPanelTracks__SpotlightWrapper",componentId:"hpirq9-2"})(["width:100%;padding:0 20px 20px;"]),Lp=Object(f.default)($d).withConfig({displayName:"LeftPanelTracks__StyledReplikaCard",componentId:"hpirq9-3"})(["margin-top:50px;margin-bottom:40px;flex:0 0 auto;",""],Object(ae.a)(Sp())),zp=Object(f.default)(Se.a).withConfig({displayName:"LeftPanelTracks__GoToChatButton",componentId:"hpirq9-4"})(["margin:0 auto;",""],Object(ae.a)(Ip()));function Rp(){return(Rp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Bp=l.a.createElement("path",{d:"M8.54692 1.15311C8.72647 0.76838 9.27353 0.76838 9.45308 1.15311L11.5751 5.69999C11.7241 6.01925 11.9808 6.27588 12.3 6.42488L16.8469 8.54692C17.2316 8.72647 17.2316 9.27353 16.8469 9.45308L12.3 11.5751C11.9807 11.7241 11.7241 11.9807 11.5751 12.3L9.45308 16.8469C9.27353 17.2316 8.72647 17.2316 8.54692 16.8469L6.42488 12.3C6.27588 11.9807 6.01925 11.7241 5.69999 11.5751L1.15311 9.45308C0.76838 9.27353 0.76838 8.72647 1.15311 8.54692L5.69999 6.42488C6.01925 6.27588 6.27588 6.01925 6.42488 5.69999L8.54692 1.15311Z",stroke:"currentColor"}),Fp=function(e){return l.a.createElement("svg",Rp({width:18,height:18,viewBox:"0 0 18 18",fill:"none"},e),Bp)};n.p;function Ap(){return(Ap=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Wp=l.a.createElement("path",{d:"M8.20611 0.83156C8.38135 0.704238 8.61865 0.704238 8.79389 0.83156L15.7023 5.85081C15.8775 5.97814 15.9509 6.20382 15.8839 6.40983L13.2452 14.5312C13.1782 14.7372 12.9862 14.8766 12.7696 14.8766H4.23037C4.01375 14.8766 3.82178 14.7372 3.75484 14.5312L1.11606 6.40983C1.04912 6.20382 1.12245 5.97814 1.2977 5.85081L8.20611 0.83156Z",stroke:"currentColor"}),Hp=function(e){return l.a.createElement("svg",Ap({width:17,height:16,viewBox:"0 0 17 16",fill:"none"},e),Wp)};n.p;function qp(){return(qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Up=l.a.createElement("path",{d:"M1.88281 4.32703L4.23575 6.94141C4.23575 6.94141 7.8209 3.45845 10.1181 1.05905",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"});n.p;function Gp(){var e=Object(d.a)(["\n  max-height: ","px;\n  overflow: hidden;\n  transition: max-height 0.2s ease-in-out;\n"]);return Gp=function(){return e},e}var Vp=Object(s.connect)(function(e){var t=e.profile.persist.bot;return{badges:t&&t.stats.achievements||[],features:e.subscriptions.persist.features}})(function(e){var t=e.mission,n=e.tabIndex,o=e.onSelect,r=e.onShowSubscriptionDialog,a=e.badges,i=e["data-testid"],l=e.features,s=c.useState(!1),u=Object(p.a)(s,2),d=u[0],f=u[1],m=c.useRef(null),h=c.useState(0),g=Object(p.a)(h,2),b=g[0],v=g[1];c.useEffect(function(){m.current&&v(m.current.scrollHeight)},[m.current]);var x=t.awarded_skills.length>0?t.awarded_skills.map(function(e){return a.find(function(t){return t.id===e})}).filter(Boolean).map(function(e){return e&&c.createElement(nf,{key:e.id,alt:e.title,src:e.image_url_2x})}):t.gives_skill?c.createElement(Fp,null):null,y=t.awarded_personalities.length>0?t.awarded_personalities.map(function(e){return a.find(function(t){return t.id===e})}).filter(Boolean).map(function(e){return e&&c.createElement(nf,{key:e.id,alt:e.title,src:e.image_url_2x})}):t.gives_personality?c.createElement(Hp,null):null,w="paid"===t.access_type.mission_access&&ed(l),C=function(){w?r():o(t)};return c.createElement(Yp,{"data-testid":i,key:t.id,tabIndex:n,onFocus:function(){w||f(!0)},onBlur:function(){return f(!1)},onClick:function(){w&&C()},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||C()},"aria-labelledby":"mission-title-".concat(t.id)},!w&&c.createElement(Jp,{"aria-hidden":"true"},x,y),w&&c.createElement(Xp,null),c.createElement(Zp,{id:"mission-title-".concat(t.id)},t.title),c.createElement(Kp,null,function(){switch(t.progress.type){case"dropped":case"completed":return c.createElement(c.Fragment,null,c.createElement(tf,null)," Complete");default:return t.duration}}()),c.createElement(Qp,{"aria-hidden":!d,active:d,maxHeight:b,ref:m},c.createElement($p,null,t.description),c.createElement(ef,{tabIndex:-1,disabled:!d,type:"button",onClick:C,"data-testid":i&&"".concat(i,"-start-button")},"completed"===t.progress.type?"Restart":"Start")))}),Yp=f.default.li.withConfig({displayName:"MissionItem__MissionItemRoot",componentId:"sc-14kj8ze-0"})(["position:relative;list-style-type:none;padding:0;border-radius:8px;margin:8px;cursor:pointer;padding:16px;min-height:72px;background:",";&:focus{outline:none;}&.focus-visible:focus{box-shadow:0 0 2px 2px ",";}"],function(e){return e.theme.chatBgColor},function(e){return e.theme.outlineColor}),Zp=f.default.div.withConfig({displayName:"MissionItem__MissionTitle",componentId:"sc-14kj8ze-1"})(["font-size:16px;line-height:20px;color:",";"],function(e){return e.theme.fgColor}),Kp=f.default.div.withConfig({displayName:"MissionItem__MissionStatus",componentId:"sc-14kj8ze-2"})(["font-size:15px;line-height:20px;color:",";display:flex;align-items:center;margin-top:5px;"],function(e){return e.theme.dimmedFgColor}),Xp=Object(f.default)(Qu).withConfig({displayName:"MissionItem__StyledLock",componentId:"sc-14kj8ze-3"})(["color:",";position:absolute;top:29px;right:12px;"],function(e){return e.theme.fgColor}),Jp=f.default.div.withConfig({displayName:"MissionItem__MissionIcons",componentId:"sc-14kj8ze-4"})(["color:",";position:absolute;top:18px;right:12px;display:flex;"],function(e){return e.theme.dimmedFgColor}),$p=f.default.p.withConfig({displayName:"MissionItem__MissionDescription",componentId:"sc-14kj8ze-5"})(["color:",";"],function(e){return e.theme.fgColor}),Qp=Object(O.a)("div",["active","maxHeight"])(Gp(),function(e){return e.active?e.maxHeight:0}),ef=Object(f.default)(Se.a).withConfig({displayName:"MissionItem__StyledSolidButton",componentId:"sc-14kj8ze-6"})(["margin:20px auto 8px;display:block;"]),tf=Object(f.default)(function(e){return l.a.createElement("svg",qp({width:12,height:8,viewBox:"0 0 12 8",fill:"none"},e),Up)}).withConfig({displayName:"MissionItem__StyledDoneIcon",componentId:"sc-14kj8ze-7"})(["color:#04ce00;margin-right:5px;"]),nf=f.default.img.withConfig({displayName:"MissionItem__Badge",componentId:"sc-14kj8ze-8"})(["width:24px;height:24px;"]),of=function(e){var t,n=e.missions,o=e.className,r=e.onSelect,a=e.onShowSubscriptionDialog,i=e["data-testid"],l=c.useRef(null);return c.useLayoutEffect(function(){return t||(t=Ie()()),t.setMembers(l.current?l.current.childNodes:[]),t.activate(),function(){t.deactivate()}},[n.length]),c.createElement(rf,{ref:l,className:o,"data-testid":i},n.map(function(e,t){return c.createElement(Vp,{"data-testid":i&&"".concat(i,"-item-").concat(t),key:e.id,mission:e,tabIndex:0===t?0:-1,onSelect:r,onShowSubscriptionDialog:a})}))},rf=f.default.ul.withConfig({displayName:"MissionList__MissionListRoot",componentId:"sc-1nf14bj-0"})(["margin:0;padding:0 8px;"]),af=function(){var e=Object(i.a)(a.a.mark(function e(t,n){var o,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getMissions(t.trackId);case 3:o=e.sent,r=o.missions,n(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}(),cf=Object(s.connect)(function(e,t){return{track:e.journey.persist.tracks[t.trackId]}},{getMissions:function(e){return function(){var t=Object(i.a)(a.a.mark(function t(n,o){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(bl.b)(o(),"GET"),t.abrupt("return",Object(qa.a)(_.b.GetMissions,n,{},{onRequest:function(){return fetch("".concat(vl.a,"/journey/tracks/").concat(e,"/missions"),r)}}));case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},startMission:wl,push:x.push,getTrack:yl,setActiveDialog:ce.d})(function(e){var t=e.trackId,n=e.track,o=c.useState([]),r=Object(p.a)(o,2),a=r[0],i=r[1];return c.useEffect(function(){n||e.getTrack(t),0===a.length&&af(e,i)},[t,n,a.length]),c.createElement(lf,null,c.createElement(uf,{style:n?{backgroundImage:"url("+n.background_url+")"}:{}},c.createElement(df,{"data-testid":"left-panel-track-title"},n&&n.name),c.createElement(pf,{"data-testid":"left-panel-track-description"},n&&n.description)),0===a.length&&c.createElement(sf,null),c.createElement(ff,{"data-testid":"left-panel-mission-list",missions:a,onSelect:function(t){e.push(_.k.Main),e.startMission(t.id)},onShowSubscriptionDialog:function(){return e.setActiveDialog({type:_.e.Subscription})}}))}),lf=f.default.div.withConfig({displayName:"LeftPanelTrack__LeftPanelTrackRoot",componentId:"sc-1klam6e-0"})(["flex:1 1 auto;display:flex;flex-direction:column;"]),sf=Object(f.default)(k.a).withConfig({displayName:"LeftPanelTrack__StyledCircleSpinner",componentId:"sc-1klam6e-1"})(["flex:0 0 auto;margin:150px auto 0;width:50px;color:",";"],function(e){return e.theme.fgColor}),uf=f.default.div.withConfig({displayName:"LeftPanelTrack__TrackCard",componentId:"sc-1klam6e-2"})(["position:relative;flex:0 0 auto;height:360px;background-size:cover;background-position:center;display:flex;flex-direction:column;justify-content:flex-end;&:before{content:'';position:absolute;width:100%;height:150px;bottom:0;background:linear-gradient(360deg,#10142f 0%,rgba(0,0,0,0) 100%);}& > *{z-index:1;}"]),df=f.default.h3.withConfig({displayName:"LeftPanelTrack__TrackTitle",componentId:"sc-1klam6e-3"})(["font-weight:bold;font-size:20px;line-height:25px;text-align:center;color:",";margin:0 20px;"],function(e){return e.theme.trackFgColor}),pf=f.default.p.withConfig({displayName:"LeftPanelTrack__TrackDescription",componentId:"sc-1klam6e-4"})(["font-size:16px;line-height:20px;text-align:center;color:",";margin:10px 20px 20px;"],function(e){return e.theme.trackFgColor}),ff=Object(f.default)(of).withConfig({displayName:"LeftPanelTrack__StyledMissionList",componentId:"sc-1klam6e-5"})(["flex:1 1 auto;height:100%;"]),mf=function(){window.open(window.location.href,"_blank","resizable=no,scrollbars=no,menubar=no,status=no,titlebar=no,toolbar=no,location=no,width=400,height=600,left=".concat(window.screen.width-400))};function hf(){return(hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var gf=l.a.createElement("g",{fillRule:"evenodd"},l.a.createElement("path",{fill:"currentColor",d:"M18.272 4.21a9.84 9.84 0 0 1 1.51 1.512l-2.277 3.997 4.438 1.217a9.855 9.855 0 0 1-.002 2.145l-4.428 1.203 2.282 3.982c-.445.551-.95 1.06-1.51 1.512l-4.005-2.273-1.221 4.438a9.904 9.904 0 0 1-2.14-.002l-1.204-4.443-3.99 2.287a9.839 9.839 0 0 1-1.507-1.507l2.278-3.998-4.438-1.217a9.842 9.842 0 0 1 .001-2.144l4.434-1.201-2.287-3.984a9.903 9.903 0 0 1 1.516-1.516l3.999 2.276 1.215-4.438c.721-.076 1.44-.074 2.148.002l1.202 4.44 3.986-2.288zm-2.578 6.26a3.999 3.999 0 1 0-7.388 3.06 3.999 3.999 0 0 0 7.388-3.06z"}),l.a.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M10.086 7.382a5 5 0 0 0 3.828 9.236 5 5 0 0 0-3.828-9.236zm8.38 1.94a7 7 0 0 1-12.932 5.357A7 7 0 0 1 18.466 9.32l-.924.383.924-.383z"})),bf=function(e){return l.a.createElement("svg",hf({viewBox:"0 0 24 24"},e),gf)},vf=(n.p,n(557)),xf=n.n(vf);function yf(){var e=Object(d.a)(["\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    top: 0;\n    left: 0;\n    overflow-y: auto;\n    border-radius: 0px;\n  "]);return yf=function(){return e},e}var wf=Object(s.connect)(function(e){var t=e.profile.persist.userProfile;return{email:t&&t.email_settings&&t.email_settings.email}})(function(e){var t=e.className,n=e.items,o=e["data-testid"],r=e.onClose,a=e.email;return c.createElement(jf,{tag:"ul",className:t},c.createElement(re.b,null,c.createElement(Ef,{title:"Settings",onClose:r})),n.map(function(e){return e.component?c.createElement(c.Fragment,{key:e.name},c.createElement(If,{tag:"li",value:e.name,"aria-live":"assertive","data-testid":"".concat(o,"-").concat(e.name),"aria-label":e.label},e.icon&&c.createElement(Of,null,e.icon),e.component),e.bordered&&c.createElement(_f,null)):null}),a&&c.createElement(kf,null,"Logged in as: ",a),c.createElement(Cf,null,"\xa9 2019 Luka, Inc. All rights reserved."))}),Cf=f.default.div.withConfig({displayName:"SidebarMenu__Copy",componentId:"sc-448f7s-0"})(["color:",";font-size:13px;padding:10px 20px 0;"],function(e){return e.theme.dimmedFgColor}),kf=f.default.div.withConfig({displayName:"SidebarMenu__AuthInfo",componentId:"sc-448f7s-1"})(["color:",";font-size:13px;padding:40px 20px 0;"],function(e){return e.theme.dimmedFgColor}),Ef=Object(f.default)(Cc).withConfig({displayName:"SidebarMenu__StyledSidebarHeader",componentId:"sc-448f7s-2"})(["padding:0 20px;"]),jf=Object(f.default)(mc.Menu).withConfig({displayName:"SidebarMenu__StyledMenu",componentId:"sc-448f7s-3"})(["margin:0;padding:0px 0 23px;width:280px;border-radius:8px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:",";box-shadow:0 3px 10px 0 ",";padding-inline-start:0px;top:21px;left:16px;",""],function(e){return e.theme.bgColor},function(e){return e.theme.shadowColor},Object(ae.b)(yf())),Of=f.default.div.withConfig({displayName:"SidebarMenu__Icon",componentId:"sc-448f7s-4"})(["padding:4px 20px 0 0;"]),_f=f.default.div.withConfig({displayName:"SidebarMenu__Divider",componentId:"sc-448f7s-5"})(["border-bottom:1px solid ",";height:1px;margin:7px 0 5px;"],function(e){return e.theme.borderColor}),If=Object(f.default)(mc.MenuItem).withConfig({displayName:"SidebarMenu__StyledMenuItem",componentId:"sc-448f7s-6"})(["font-size:16px;height:50px;color:",";padding:0 20px;display:flex;align-items:center;&:last-child{border-radius:0 0 4px 4px;border-bottom:none;}"],function(e){return e.theme.fgColor}),Sf=f.default.div.withConfig({displayName:"SidebarMenu__SidebarMenuLinkText",componentId:"sc-448f7s-7"})(["cursor:pointer;:hover{text-decoration:underline;}"]);Object(f.default)(fc.a).withConfig({displayName:"SidebarMenu__SidebarMenuLink",componentId:"sc-448f7s-8"})(["color:inherit;&:visited{color:inherit;}&:hover{cursor:pointer;}"]);function Nf(){return(Nf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Mf=l.a.createElement("path",{clipRule:"evenodd",d:"m21.90186,12.43513l1.04592,0.09673a1.05012,1.0401 0 0 0 -1.84296,-0.77383l0.79809,0.6771l-0.00105,0zm-10.29327,-10.19501l0.68468,0.78943a1.05012,1.0401 0 0 0 -0.78234,-1.82537l0.09766,1.03593zm9.49623,9.51687a6.23246,6.17297 0 0 1 -4.74339,2.16132l0,2.08019a8.33375,8.2542 0 0 0 6.33747,-2.88626l-1.59303,-1.3542l-0.00105,-0.00104zm-4.74339,2.16132a6.24926,6.18961 0 0 1 -6.24926,-6.19065l-2.10024,0a8.3495,8.2698 0 0 0 8.34845,8.27084l0,-2.08019l0.00105,0zm-6.24926,-6.19065c0,-1.87841 0.84325,-3.56129 2.1811,-4.69811l-1.36831,-1.5799a8.3327,8.25316 0 0 0 -2.91303,6.27698l2.10024,0l0,0.00104zm-6.01193,3.82755a8.3978,8.31764 0 0 1 7.60601,-8.27916l-0.19532,-2.07187c-5.33461,0.49301 -9.51093,4.93837 -9.51093,10.35207l2.10024,0l0,-0.00104zm8.39675,8.3166a8.39675,8.3166 0 0 1 -8.39675,-8.3166l-2.10024,0c0,5.74237 4.69928,10.39679 10.49699,10.39679l0,-2.08019zm8.35895,-7.53341a8.3978,8.31764 0 0 1 -8.35895,7.53341l0,2.08019c5.46482,0 9.95303,-4.13542 10.45079,-9.42014l-2.09079,-0.19346l-0.00105,0z",fill:"currentColor",fillRule:"nonzero",id:"svg_1"}),Pf=function(e){return l.a.createElement("svg",Nf({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),Mf)};n.p;function Tf(){return(Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Df=l.a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5H5a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1"}),Lf=l.a.createElement("rect",{width:14,height:17,x:6,y:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,rx:2}),zf=function(e){return l.a.createElement("svg",Tf({width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Df,Lf)};n.p;function Rf(){return(Rf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Bf=l.a.createElement("circle",{cx:12,cy:12,r:9,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),Ff=l.a.createElement("circle",{cx:12,cy:9,r:3,fill:"currentColor"}),Af=l.a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 19v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"}),Wf=function(e){return l.a.createElement("svg",Rf({width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Bf,Ff,Af)};n.p;function Hf(){return(Hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var qf=l.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.859 1c-2.71 0-5.186 1.765-6.932 4.079C3.165 7.41 2 10.479 2 13.436 2 18.706 6.385 23 11.859 23s9.858-4.294 9.858-9.563c0-2.955-1.168-6.023-2.93-8.356C17.042 2.767 14.566 1 11.86 1z M18.14 7.186C16.62 4.764 14.346 3 12 3 7.884 3 4 8.409 4 13.287 4 17.515 7.534 21 12 21s8-3.485 8-7.713c0-1.968-.635-4.025-1.662-5.777l-1.47 1.927-2.417-1.218-2.034 1.005L10 7.861l2.383.57 2.126-1.33 2.127 1.151 1.505-1.066z",clipRule:"evenodd"}),Uf=function(e){return l.a.createElement("svg",Hf({width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),qf)};n.p;function Gf(){return(Gf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Vf=l.a.createElement("circle",{cx:7,cy:12,r:4,stroke:"currentColor",strokeWidth:2}),Yf=l.a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 12h8"}),Zf=l.a.createElement("path",{fill:"currentColor",d:"M16 14h4v2h-4z"}),Kf=function(e){return l.a.createElement("svg",Gf({width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Vf,Yf,Zf)};n.p;function Xf(){return(Xf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Jf=l.a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-2"}),$f=l.a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 15l3-3-3-3M17 12H9"}),Qf=function(e){return l.a.createElement("svg",Xf({width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Jf,$f)};n.p;function em(){var e=Object(d.a)(["\n  color: inherit;\n"]);return em=function(){return e},e}function tm(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return tm=function(){return e},e}function nm(){var e=Object(d.a)(["\n  text-decoration: none;\n  &:hover {\n    cursor: default;\n  }\n"]);return nm=function(){return e},e}function om(){var e=Object(d.a)(["\n  position: absolute;\n  background-color: ",";\n"]);return om=function(){return e},e}var rm=Object(f.withTheme)(Object(ea.b)(function(e){var t=e.themeName,n=e.theme,o=Object(z.a)(e,["themeName","theme"]),r=[{icon:c.createElement(Pf,null),name:"theme-switch",label:t===_.n.Dark?"Night mode enabled":"Night mode disabled",component:c.createElement(cm,null,c.createElement(im,{id:"theme-switch-label"},"Night mode"),c.createElement(xf.a,{id:"theme-switch",checked:t===_.n.Dark,height:25,width:50,offColor:n.themeSwitchBgColor,onColor:n.themeSwitchFgColor,offHandleColor:n.chatBgColor,onHandleColor:n.chatBgColor,uncheckedIcon:!1,checkedIcon:!1,onChange:function(){}}))},{icon:c.createElement(Wf,null),name:"edit-profile",label:"My profile",component:c.createElement(_c,null,"My profile")},{icon:c.createElement(Uf,null),name:"edit-replika",label:"Replika profile",component:c.createElement(_c,null,"Replika profile")},{icon:c.createElement(Kf,null),name:"account-settings",label:"Account settings",bordered:!0,component:c.createElement(_c,null,"Account settings")},{icon:c.createElement(Qf,null),name:"log-out",label:"Log out",bordered:!0,component:c.createElement(_c,null,"Log out")},{name:"help",label:"Help",component:c.createElement(lm,{onClick:function(){return Object(le.b)(_.j.HelpCenterOpened)},href:"https://help.replika.ai/hc/en-us",target:"_blank",rel:"noopener noreferrer"},"Help")},{name:"terms",label:"Terms of use",component:c.createElement(lm,{onClick:function(){return Object(le.b)(_.j.TermsOfServiceOpend)},href:"https://replika.ai/legal/terms",target:"_blank",rel:"noopener noreferrer"},"Terms")},{name:"privacy",label:"Privacy policy",component:c.createElement(lm,{onClick:function(){return Object(le.b)(_.j.PrivacyPolicyOpened)},href:"https://replika.ai/legal/privacy",target:"_blank",rel:"noopener noreferrer"},"Privacy policy")},{name:"credits",label:"Credits",component:c.createElement(lm,{onClick:function(){return Object(le.b)(_.j.CreditsOpened)},href:"https://replika.ai/replika/docs/embed/credits",target:"_blank"},"Credits")}];return window.hasOwnProperty("orientation")||r.unshift({icon:c.createElement(zf,null),name:"open-popup",label:"Open in popup",component:c.createElement(cm,null,c.createElement(Sf,null,"Open in popup"))}),c.createElement(am,Object.assign({},o,{"data-testid":"menu",items:r,backTo:"/"}))})),am=Object(f.default)(wf)(om(),function(e){return e.theme.sidebarMenuBackground}),im=f.default.label(nm()),cm=f.default.div(tm()),lm=f.default.a(em());function sm(){var e=Object(d.a)(["\n  cursor: pointer;\n  padding: 0;\n  border: 0;\n  background: transparent;\n  color: ",";\n  transition: color 0.2s ease-out;\n  border-radius: 4px;\n  box-shadow: ",";\n\n  &:focus {\n    0 0 2px 2px ",";\n  }\n\n  & svg {\n    width: 24px;\n    height: 24px;\n  }\n"]);return sm=function(){return e},e}var um={sendLogOutRequest:Qr.h,toggleTheme:ce.k,setActiveDialog:ce.d},dm=Object(s.connect)(function(e){return{introStep:e.ui.introStep}},um)(function(e){var t=e.className,n=e.onSetActive,o=c.useState(!1),r=Object(p.a)(o,2),a=r[0],i=r[1];if(e.introStep&&e.introStep!==_.h.MeetReplika)return null;return c.createElement(pm,{id:"settings-menu",className:t,closeOnSelection:!1,onSelection:function(t){switch(t){case"theme-switch":e.toggleTheme();break;case"open-popup":mf();break;case"log-out":e.sendLogOutRequest();break;case"edit-profile":Object(mc.closeMenu)("settings-menu"),e.setActiveDialog({type:_.e.EditProfile});break;case"edit-replika":Object(mc.closeMenu)("settings-menu"),e.setActiveDialog({type:_.e.EditReplika});break;case"account-settings":Object(mc.closeMenu)("settings-menu"),e.setActiveDialog({type:_.e.AccountSettings})}},onMenuToggle:function(e){var t=e.isOpen;i(!!t),t&&Object(le.b)(_.j.SettingsOpened),n&&n(t)}},c.createElement(fm,{active:a,"data-testid":"settings-menu-button"},c.createElement(mt.c,null,"settings"),c.createElement(bf,{"aria-hidden":"true"})),c.createElement(rm,{onClose:function(){i(!1),Object(mc.closeMenu)("settings-menu")}}))}),pm=Object(f.default)(mc.Wrapper).withConfig({displayName:"SettingsMenu__SettingsMenuRoot",componentId:"sc-1iiy7mp-0"})(["position:relative;"]),fm=Object(O.a)(mc.Button,["active"]).attrs({tag:"button"})(sm(),function(e){return e.theme.fgColor},function(e){return e.active?"0 0 2px 2px "+e.theme.shadowColor:"none"},function(e){return e.theme.shadowColor});function mm(){var e=Object(d.a)(["\n  position: relative;\n  background-color: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  overflow-y: ",";\n"]);return mm=function(){return e},e}function hm(){var e=Object(d.a)(["\n    padding: 20px 20px;\n  "]);return hm=function(){return e},e}var gm=function(e){var t=c.useState(!1),n=Object(p.a)(t,2),o=n[0],r=n[1],a=c.useState(!1),i=Object(p.a)(a,2),l=i[0],s=i[1];return c.createElement(ym,{className:e.className,onClick:e.onClick,menuOpen:o,onScroll:function(e){s(e.target.scrollTop>0)}},c.createElement(wa.a,null,c.createElement(Ca.a,{path:_.k.Conversation,exact:!0,render:function(e){var t=e.match.params.category;return c.createElement(xm,{to:t?_.k.ConversationCategory.replace(":category",t):_.k.Conversations},c.createElement(mt.c,null,"Back to conversations"),c.createElement(Ao.a,{"aria-hidden":"true"}))}}),c.createElement(Ca.a,{path:"*",render:function(){return c.createElement(bm,{onSetActive:r})}})),c.createElement(wa.a,null,c.createElement(Ca.a,{path:_.k.Conversations,exact:!0,render:function(){return c.createElement(Mp,{scrolled:l})}}),c.createElement(Ca.a,{path:_.k.ConversationCategory,exact:!0,render:function(e){var t=e.match;return c.createElement(Mp,{category:t.params.category,scrolled:l})}}),c.createElement(Ca.a,{path:_.k.Conversation,render:function(e){var t=e.match;return c.createElement(cf,{trackId:t.params.trackId})}}),c.createElement(Ca.a,{path:_.k.Intro,render:function(){return c.createElement(yp,null)}}),c.createElement(Ca.a,{path:"*",render:function(){return c.createElement(ep,null)}})))},bm=Object(f.default)(dm).withConfig({displayName:"LeftPanel__StyledSettingsMenu",componentId:"sc-17av3mw-0"})(["position:absolute;z-index:",";align-self:flex-start;color:",";padding:29px 24px;",""],_.p.Menu,function(e){return e.theme.fgColor},Object(ae.a)(hm())),vm=bm.withComponent(fc.a),xm=Object(f.default)(vm).withConfig({displayName:"LeftPanel__WhiteMenuButtonLink",componentId:"sc-17av3mw-1"})(["color:#fff;"]),ym=Object(O.a)("aside",["menuOpen"])(mm(),function(e){return e.theme.bgColor},function(e){return e.menuOpen?"hidden":"auto"}),wm=Object(s.connect)(function(e){return{bot:e.profile.persist.bot,messages:e.chat.messages||[],introStep:e.ui.introStep}},{setIntroStep:ce.h})(function(e){var t=e.className,n=e.bot,o=e.messages,r=e.introStep,a=n&&n.name||"your Replika",i=_p(o);switch(r){case _.h.Hi:case _.h.YouCanTalkToMe:case _.h.Conversations:return c.createElement(Cm,{className:t},c.createElement(km,null));case _.h.MeetReplika:case _.h.FinishIntro:return c.createElement(Cm,{className:t,"data-testid":"chat-overlay",role:"dialog"},c.createElement(km,null,c.createElement(Em,{"data-testid":"chat-overlay-description"},"Start chatting with ",a," to introduce yourself and learn more about the app"),c.createElement(Se.a,{"data-testid":"chat-overlay-open-chat-link",to:_.k.Main,onClick:function(){Object(le.b)(_.j.MeetButtonPressed),e.setIntroStep(null)}},"Meet ",a)));default:return c.createElement(Cm,{className:t,"data-testid":"chat-overlay",role:"dialog"},c.createElement(km,null,c.createElement(Em,{"data-testid":"chat-overlay-description"},i?"Choose a conversation from a right menu or start chatting with ".concat(a):"Choose a conversation from a right menu or continue chatting with ".concat(a)),c.createElement(Se.a,{"data-testid":"chat-overlay-open-chat-link",to:_.k.Main},i?"Meet ".concat(a):"Continue chatting")))}}),Cm=f.default.div.withConfig({displayName:"ChatOverlay__ChatOverlayRoot",componentId:"sc-1t949pm-0"})(["width:100%;height:100%;&:before{content:'';z-index:-1;position:absolute;width:100%;height:100%;background:",";opacity:0.9;}"],function(e){return e.theme.bgColor}),km=f.default.div.withConfig({displayName:"ChatOverlay__ChatOverlayContent",componentId:"sc-1t949pm-1"})(["opacity:1;width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity 0.5s ease-out;&:empty{opacity:0;}"]),Em=f.default.p.withConfig({displayName:"ChatOverlay__Description",componentId:"sc-1t949pm-2"})(["width:250px;margin:0 0 25px;font-weight:bold;font-size:16px;line-height:20px;text-align:center;color:",";"],function(e){return e.theme.fgColor});function jm(){return(jm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Om=l.a.createElement("rect",{x:4,y:3,width:16,height:18,rx:2,stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),_m=l.a.createElement("line",{x1:8,y1:18,x2:8,y2:12,stroke:"currentColor",strokeWidth:2}),Im=l.a.createElement("line",{x1:12,y1:18,x2:12,y2:10,stroke:"currentColor",strokeWidth:2}),Sm=l.a.createElement("line",{x1:16,y1:18,x2:16,y2:6,stroke:"currentColor",strokeWidth:2}),Nm=function(e){return l.a.createElement("svg",jm({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),Om,_m,Im,Sm)};n.p,n(559);function Mm(){var e=Object(d.a)(["\n    top: 0;\n  "]);return Mm=function(){return e},e}function Pm(){var e=Object(d.a)(["\n    top: 16px;\n  "]);return Pm=function(){return e},e}function Tm(){var e=Object(d.a)(["\n    top: 16px;\n  "]);return Tm=function(){return e},e}function Dm(){var e=Object(d.a)(["\n  position: absolute;\n  height: 100vh;\n  display: block;\n  z-index: 1;\n  width: 350px;\n  right: ","px;\n  transition: right 0.25s ease-out;\n"]);return Dm=function(){return e},e}function Lm(){var e=Object(d.a)(["\n    width: 100%;\n  "]);return Lm=function(){return e},e}function zm(){var e=Object(d.a)(["\n    justify-content: space-around;\n    height: 100vh;\n  "]);return zm=function(){return e},e}var Rm=c.memo(function(e){var t=c.useState(!1),n=Object(p.a)(t,2),o=n[0],r=n[1];return c.createElement(Fm,null,c.createElement(re.a,null,c.createElement(Xm,{href:"#send-message-textarea",onClick:function(e){e.preventDefault();var t=document.getElementById("send-message-textarea");t&&t.focus()}},"Jump to message field")),c.createElement("div",{role:"complementary"},c.createElement(Gu,null),c.createElement(Bm,{role:"dialog"}),c.createElement(ya,null),c.createElement(Km,null),c.createElement(Jm,null)),c.createElement(Am,{"aria-hidden":!e.isActiveWindow},c.createElement(re.c,null,c.createElement(wa.a,null,c.createElement(Ca.a,{exact:!0,path:_.k.Main,component:Gm}),c.createElement(Ca.a,{exact:!0,path:_.k.Stats,component:Um}),c.createElement(Ca.a,{path:"*",component:Wm})),c.createElement(Ca.a,{exact:!0,path:"/",render:function(){return c.createElement(eh,{bot:e.bot})}})),c.createElement(re.a,null,c.createElement(Wm,{onClick:function(){return r(!1)}}),c.createElement($m,{onClick:function(){return r(!1)}},c.createElement(wa.a,null,c.createElement(Ca.a,{path:_.k.Intro,component:Vm}),c.createElement(Ca.a,{path:"*",component:Gm})),c.createElement(wa.a,null,c.createElement(Ca.a,{path:_.k.Conversations,component:Qm})),c.createElement(wa.a,null,c.createElement(Ca.a,{path:_.k.Intro,component:Qm})),c.createElement(re.d,null,c.createElement(qm,null))),c.createElement(re.e,null,c.createElement(Ym,{onClick:function(){return r(!0)}},c.createElement(Nm,null)),c.createElement(re.a,null,c.createElement(Hm,{visible:o}))))))}),Bm=Object(f.default)(Dt.PopupboxContainer).withConfig({displayName:"ChatLayout__StyledPopupboxContainer",componentId:"ztbuvw-0"})(["&.popupbox-wrapper{min-width:0;-webkit-box-shadow:none;box-shadow:none;background-color:transparent;max-width:90%;height:100%;}& > .popupbox-content{padding:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;overflow:hidden;}"]),Fm=f.default.div.withConfig({displayName:"ChatLayout__ChatLayoutRoot",componentId:"ztbuvw-1"})(["position:relative;width:100%;height:100vh;"]),Am=f.default.div.withConfig({displayName:"ChatLayout__ChatContainer",componentId:"ztbuvw-2"})(["width:100vw;max-width:1600px;background-color:",";flex:1 0 50%;min-width:320px;margin:0 auto;display:flex;position:relative;",";"],function(e){return e.theme.bgColor},Object(ae.a)(zm())),Wm=Object(f.default)(gm).withConfig({displayName:"ChatLayout__StyledLeftPanel",componentId:"ztbuvw-3"})(["width:360px;height:100vh;flex:0 0 auto;",";"],Object(ae.a)(Lm())),Hm=Object(O.a)(oa,["visible"])(Dm(),function(e){return e.visible?0:-350}),qm=Object(f.default)(oa).withConfig({displayName:"ChatLayout__DesktopRightPanel",componentId:"ztbuvw-4"})(["height:100vh;flex:0 0 auto;width:360px;"]),Um=Object(f.default)(oa).withConfig({displayName:"ChatLayout__MobileRightPanel",componentId:"ztbuvw-5"})(["width:100%;"]),Gm=Object(f.default)(Do).withConfig({displayName:"ChatLayout__StyledChatMessages",componentId:"ztbuvw-6"})(["width:100%;height:100%;"]),Vm=f.default.div.withConfig({displayName:"ChatLayout__ChatPlaceholder",componentId:"ztbuvw-7"})(["background:",";width:100%;height:100%;"],function(e){return e.theme.chatGradientBgColor}),Ym=Object(f.default)(Se.a).withConfig({displayName:"ChatLayout__StatsButton",componentId:"ztbuvw-8"})(["position:absolute;z-index:1;top:20px;right:20px;height:40px;width:40px;padding:2px 5px 0;background:",";box-shadow:0px 0px 3px ",";color:",";",""],function(e){return e.theme.chatBgColor},function(e){return e.theme.shadowColor},function(e){return e.theme.fgColor},Object(ae.a)(Tm())),Zm=Object(f.default)(oe.a).withConfig({displayName:"ChatLayout__LogoButton",componentId:"ztbuvw-9"})(["position:absolute;z-index:2;top:20px;left:20px;width:36px;height:40px;& > svg{width:100%;height:100%;}",""],Object(ae.a)(Pm())),Km=Object(f.default)(ci).withConfig({displayName:"ChatLayout__StyledChatPopups",componentId:"ztbuvw-10"})(["position:fixed;z-index:",";left:50%;height:100%;",";"],_.p.Popup,Object(ae.a)(Mm())),Xm=f.default.a.withConfig({displayName:"ChatLayout__SkipLink",componentId:"ztbuvw-11"})(["position:absolute;z-index:1;padding:5px 10px;color:",";background-color:",";border:1px solid ",";border-radius:10px;top:-40px;transition:top 0.2s ease-out;&:focus{top:0px;}&:active{top:0px;}"],function(e){return e.theme.fgColor},function(e){return e.theme.chatBgColor},function(e){return e.theme.borderColor}),Jm=Object(f.default)(zu).withConfig({displayName:"ChatLayout__StyledDialogs",componentId:"ztbuvw-12"})(["z-index:",";"],_.p.Dialog),$m=f.default.div.withConfig({displayName:"ChatLayout__CenterPanel",componentId:"ztbuvw-13"})(["position:relative;flex:1 1 auto;display:flex;height:100vh;overflow-y:hidden;"]),Qm=Object(f.default)(wm).withConfig({displayName:"ChatLayout__StyledChatOverlay",componentId:"ztbuvw-14"})(["position:absolute;z-index:",";"],_.p.ChatOverlay),eh=c.memo(function(e){var t=e.bot;return c.createElement(c.Fragment,null,c.createElement(Zm,{to:_.k.Conversations,"data-testid":"header-logo-link"},c.createElement(Cd.a,{imageUrl:t&&t.icon_url})),c.createElement(Ym,{to:_.k.Stats,"data-testid":"header-stats-link"},c.createElement(Nm,null)))}),th=n(44),nh=n(38),oh={getHistory:C.a,initChatWithHistory:th.e,getMediaPreviewRequest:C.b,disconnectWebsocket:th.c,setTrialPopupActive:ce.j,getUserProfile:or.f,setIntroStep:ce.h,getSubscriptions:au.a,setActiveDialog:ce.d},rh=Object(s.connect)(function(e){return{messages:e.chat.messages,status:e.ws.status,chatId:e.ws.persist.chatId,mediaPreviews:e.chat.mediaPreviews,isActiveWindow:e.ui.isActiveWindow,connectedToInternet:e.ui.connectedToInternet,mobileProfileOpened:e.ui.mobileProfileOpened,userProfile:e.profile.persist.userProfile,bot:e.profile.persist.bot,introStep:e.ui.introStep,subscription:e.subscriptions.persist.subscription,reboardingDialogShown:e.subscriptions.persist.reboardingDialogShown}},function(e){return Object(o.a)({dispatch:e},Object(u.bindActionCreators)(oh,e))})(function(e){var t=e.status,n=e.messages,o=e.mediaPreviews,r=e.isActiveWindow,l=e.connectedToInternet,s=e.mobileProfileOpened,u=e.bot,d=e.introStep,p=e.subscription,f=e.reboardingDialogShown,m=function(){var t=Object(i.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initChatWithHistory();case 2:e.getSubscriptions();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();c.useEffect(function(){setTimeout(function(){return e.setTrialPopupActive(!0)},6e4)},[]),c.useEffect(function(){m();var t=pa(e.dispatch);return t.enable(),t.setActive(),function(){e.disconnectWebsocket(),t.disable()}},[]);var h=!f&&p&&"legacy"===p.source;return c.useEffect(function(){h&&e.setActiveDialog({type:_.e.SubscriptionReboarding})},[h]),c.useEffect(function(){r&&l&&"needReconnect"===t&&e.initChatWithHistory()},[t,l,r]),c.useEffect(function(){var t=(n||[]).filter(function(e){return"text"===e.content.type}).map(function(e){return In(e.content.text)}).filter(function(e){return e&&!o.hasOwnProperty(e)});t.length>0&&e.getMediaPreviewRequest(t)},[n]),c.useEffect(function(){if(u&&!h)switch(d){case _.h.Hi:setTimeout(function(){e.setIntroStep(_.h.YouCanTalkToMe)},3e3);break;case _.h.YouCanTalkToMe:setTimeout(function(){e.setIntroStep(_.h.Conversations)},3e3);break;case _.h.Conversations:setTimeout(function(){e.setIntroStep(_.h.MeetReplika)},3e3)}},[!!u,d,h]),u?c.createElement(Rm,{mobileProfileOpened:s,isActiveWindow:r,bot:u}):c.createElement(nh.a,null)});t.default=rh}}]);
//# sourceMappingURL=Chat.bef763f4.chunk.js.map