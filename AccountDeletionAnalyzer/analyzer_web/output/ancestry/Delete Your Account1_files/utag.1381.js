//tealium universal tag - utag.1381 ut4.0.201907181500, Copyright 2019 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
(function(){var getBannersUrl=function(){var bannersPath='/Banners/API/Get/21';var host=document.location.hostname;if(host.indexOf('www.')===0){return bannersPath;}
var parts=host.split('.');var ancestryIdx=0;for(ancestryIdx=0;ancestryIdx<parts.length;++ancestryIdx){if(parts[ancestryIdx].match(/ancestry/)){break;}}
if(ancestryIdx>parts.length)
return'https://www.ancestry.co.uk/Banners/API/Get/21';parts=parts.slice(ancestryIdx);parts.unshift('www');wwwHost=parts.join('.');return'https://'+wwwHost+bannersPath;};var loadCssIfNotPresent=function(url,regex){var ss=document.styleSheets;for(var i=0,max=ss.length;i<max;i++){if(regex.test(ss[i].href))
return;}
var link=document.createElement("link");link.rel="stylesheet";link.href=url;document.getElementsByTagName("head")[0].appendChild(link);}
var checkBanner=function(){var waitForExistingCall=false;var bannerDiv=document.getElementById('BannerRegion');if(bannerDiv){waitForExistingCall=true;}else{bannerDiv=document.createElement('div');bannerDiv.id='BannerRegion';document.body.insertBefore(bannerDiv,document.body.childNodes[0]);}
bannerDiv.style.position='relative';bannerDiv.style.zIndex='1';var dynamicLoadScript=function(url,loadCallback){var head=document.getElementsByTagName('head')[0];var script=document.createElement('script');script.onreadystatechange=loadCallback;script.onload=loadCallback;script.src=url;head.appendChild(script);};var dynamicLoadScriptsWithChecks=function(entries,loadCallback){var totalToLoad=0;var totalLoaded=0;entries.forEach(function(entry){if(!entry.check()){totalToLoad++;}});if(totalToLoad===0){loadCallback();return;}
entries.forEach(function(entry){if(!entry.check()){dynamicLoadScript(entry.url,function(){totalLoaded++;if(totalLoaded===totalToLoad){loadCallback();}});}});};var loadBanner=function(){AjaxManager.send({url:getBannersUrl()});};loadCssIfNotPresent('https://www.ancestrycdn.com/ui/2.0.6/css/core.css',/https:\/\/www\.ancestrycdn\.com\/ui\/\d+\.\d+\.\d+[^\/]*\/css\/core.css/);dynamicLoadScriptsWithChecks([{url:'https://www.ancestrycdn.com/ui-static/lib/ajax-manager/2.0.0/ajax-manager.js',check:function(){return window.AjaxManager;}},{url:'https://www.ancestrycdn.com/ui-static/lib/jquery/3.1.1/jquery.min.js',check:function(){return window.jQuery;}}],function(){dynamicLoadScriptsWithChecks([{url:'https://www.ancestrycdn.com/ui/2.0.6/js/core.js',check:function(){return window.ui;}}],function(){if(waitForExistingCall){window.setTimeout(function(){if(!window.ABS){loadBanner();}},500);}else{loadBanner();}});});};if(/comp|inter|loaded/.test(document.readyState)){checkBanner();}else{document.addEventListener('DOMContentLoaded',checkBanner,false);}})();}};utag.o[loader].loader.LOAD(id);})("1381","ancestry.main");}catch(error){utag.DB(error);}
