window.esw.defineFeature("Session",function(a){function e(){a.addMessageHandler("session.set",this.setSessionData.bind(this)),a.addMessageHandler("session.get",function(e,t){parent.postMessage({method:"session.sessionData",data:this.getSessionData(e,t)},a.parentOrigin)}.bind(this)),a.addMessageHandler("session.delete",this.deleteSessionData.bind(this))}e.prototype.getKeyName=function(e,t){if(null!=t&&"string"==typeof t)return e+t;throw new Error("key is a required parameter must be a string, cannot be undefined or null")},e.prototype.getSessionData=function(t,e,s){var n,a={};if(n=s?localStorage:sessionStorage,!t||!e)throw new Error("getSessionData requires two non-null arguments (domain, keys).");return e.forEach(function(e){a[e]=n.getItem(this.getKeyName(t,e))}.bind(this)),a},e.prototype.deleteSessionData=function(t,e,s){var n;if(n=s?localStorage:sessionStorage,!t||!e)throw new Error("deleteSessionData requires two non-null arguments (domain, keys).");e.forEach(function(e){n.removeItem(this.getKeyName(t,e)),"MASTER_DEPLOYMENT_ID"===e&&parent.postMessage({method:"session.updateMaster",data:{isMaster:!1}},a.parentOrigin)}.bind(this)),parent.postMessage({method:"session.deletedSessionData",data:e},a.parentOrigin)},e.prototype.setSessionData=function(t,s,e){var n;if(n=e?localStorage:sessionStorage,!t||!s)throw new Error("setSessionData requires two non-null arguments (domain, data).");Object.keys(s).forEach(function(e){n.setItem(this.getKeyName(t,e),s[e]),"MASTER_DEPLOYMENT_ID"===e&&parent.postMessage({method:"session.updateMaster",data:{isMaster:!0}},a.parentOrigin)}.bind(this))},a.sessionAPI=new e});