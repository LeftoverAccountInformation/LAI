if((!this["console"])||(!console.firebug)){this.console={}}$A(["assert","count","debug","dir","dirxml","error","group","groupEnd","info","log","profile","profileEnd","time","timeEnd","trace","warn"]).each(function(a){if(!console[a]){console[a]=function(){}}});var baseLink=window.staticBaseDomain||window.staticBaseLink||window.hotelBaseLink||window.airBaseLink||"//ui.cltpstatic.com";var ct={loginFb:function(){if(typeof FB!="undefined"){FB.init({appId:"293814704002168",cookie:true,xfbml:true});FB.getLoginStatus(function(b){if(typeof(b.authResponse)!="undefined"&&!(ct.cookies.read("userid"))){var a=b.authResponse.userID;console.log(b);new Ajax.Request("/fb/auto_login",{parameters:{caller:"fblogin",id:a,access_token:b.authResponse.accessToken,service:window.location.pathname},onSuccess:function(c){console.log(c);if(JSON.parse(c.responseText).url){window.location.href=JSON.parse(c.responseText).url}}})}})}},console:console,cookies:{create:function(c,f,g,e){var a;var d;if(g){var b=new Date();b.setTime(b.getTime()+(g*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=""}if(e){d="; domain="+e}else{d=""}document.cookie=c+"="+f+a+d+"; path=/"},read:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null},readCTAuthCookie:function(){var a=/dp.cleartirp.com|vegas.cleartrip.com/.test(window.location.hostname)?"dev-usermisc":"usermisc";if(ct.cookies.read(a)&&unescape(ct.cookies.read(a)).split("|")[0]=="SIGNED_IN"){return true}else{return false}},erase:function(a,b){ct.cookies.create(a,"",-1,b)}},merchandisingBanner:{templates:{appUpsell:function(){var a='<div id="appDownloadBanner" class="row"><table width="100%"><tbody><tr><td><i class="AppDownloadIcon"></i></td><td><a id="floatingBanner" class="#{class1}" href="#{link}" target="_blank" onClick="#{onclickEve}" rel="nofollow"><strong class="#{class}">#{heading}</strong>#{text}</a></td><td><a href="#{link}" target="_blank" class="downloadBtn">Download</a></td></tr></tbody></table></div>';return new Template(a)},offer:function(){var a='<div class="mobileOffer"><a href="#{link}" onClick="#{onclickEve}" target="_blank"><i class="i24 offerIcon"></i><span><strong>#{heading}</strong>#{text}</span></div>';return new Template(a)}},createMarkup:function(g,j){try{var f=g[0]||{};var d={heading:f.HEADING&&f.HEADING.trim()!="."?f.HEADING:"",text:f.DESC1&&f.DESC1.trim()!="."?f.DESC1:"",link:f.LINK1?f.LINK1:"",class1:f.CLASS1?f.CLASS1:"",onclickEve:""};if((f.TRACKERCAT&&f.TRACKERCAT!=null)||(f.TRACKER&&f.TRACKER!=null)){var k=f.TRACKERCAT&&f.TRACKERCAT!=null?f.TRACKERCAT:"";var c=f.TRACKER&&f.TRACKER!=null?f.TRACKER:"";d.onclickEve="_gaq.push(['_trackEvent', '"+k+"', '"+c+"']);"}if(d.heading!=""||d.text!=""){var b=ct.merchandisingBanner.templates[j]();var a=b.evaluate(d);return a}else{return false}}catch(h){return false}},create:function(a,c,b){var b=b||"offer";try{new Ajax.Request(a,{method:"get",onSuccess:function(e){var f=JSON.parse(e.responseText);var g=ct.merchandisingBanner.createMarkup(f,b);if(g){c.innerHTML=g}},onFailure:function(){return false}})}catch(d){return false}}},dates:{isValidDateString:function(b){var a=/[0-9]+\/[0-9]+\/([0-9][0-9][0-9][0-9])+/;return(a.test(b))},fromString:function(e){var c=e;var b=c.substring(0,c.indexOf("/"));var f=c.substring(c.indexOf("/")+1,c.indexOf("/",c.indexOf("/")+1));var d=c.substring(c.indexOf("/",c.indexOf("/")+1)+1,c.length);if(d.length==2){d="20"+d}var a=new Date();a.setFullYear(parseInt(d,10),parseInt(f,10)-1,parseInt(b,10));a.setHours(0,0,0,0);return a},toString:function(a,b){if(!b){return a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()}else{return a.getFullYear()+""+((a.getMonth()+1<10)?"0"+(a.getMonth()+1):(a.getMonth()+1))+((a.getDate()<10)?("0"+a.getDate()):a.getDate())}},convertDate:function(a){return ct.dates.dayShortNames[ct.dates.fromString(a).getDay()]+", "+ct.dates.fromString(a).getDate()+" "+ct.dates.monthShortNames[ct.dates.fromString(a).getMonth()]},diffDates:function(c,b){var a=1000*60*60*24;var e=c.split("/");var d=b.split("/");var h=new Date(e[2],(e[1]-1),e[0]);var f=new Date(d[2],(d[1]-1),d[0]);var j=e[1]-1;var g=d[1]-1;_Diff=Math.ceil((f.getTime()-h.getTime())/(a));return _Diff},trainDateFormt:function(f){var b=f.split(" ");var e=b[1];var d=b[0];var c=d.split("/");return e+", "+ct.dates.fromString(d).getDate()+" "+ct.dates.monthShortNames[ct.dates.fromString(d).getMonth()]+", "+c[2]},convertDateString:function(a){var b=a.split("/");return b[2]+b[1]+b[0]},getNextDate:function(e,h){var a=e.split("/");var c=a[0];var g=a[1];var d=a[2];function b(l,k){var j=new Date(k,l,0);return j.getDate()}var f=b(g,d);if(g==12&&c==31){d=parseInt(d)+1;g=1;c=h}else{if(c==f){if(h!=0){g++;c=h}else{c=parseInt(c)}}else{if(g==12){c=parseInt(c)+h;if(c>f){d=parseInt(d)+1;g=1}if(c>f){c=c-f}}else{c=parseInt(c)+h;if(c>f){c=c-f;g++}}}}return c+"/"+g+"/"+d},isPast:function(b,a){if(!a){return(ct.dates.compare(b,new Date())===1)}return(ct.dates.compare(b,a)===1)},compare:function(b,a){if(b.getYear()<a.getYear()){return 1}else{if((b.getYear()==a.getYear())&&(b.getMonth()<a.getMonth())){return 1}else{if((b.getYear()==a.getYear())&&(b.getMonth()==a.getMonth())&&(b.getDate()<a.getDate())){return 1}else{if(b.getDate()==a.getDate()&&b.getMonth()==a.getMonth()&&b.getYear()==a.getYear()){return 0}else{return -1}}}}},monthNames:[ct_i18n.month.January,ct_i18n.month.February,ct_i18n.month.March,ct_i18n.month.April,ct_i18n.month.May,ct_i18n.month.June,ct_i18n.month.July,ct_i18n.month.August,ct_i18n.month.September,ct_i18n.month.October,ct_i18n.month.November,ct_i18n.month.December],monthShortNames:[ct_i18n.monthShort.January,ct_i18n.monthShort.February,ct_i18n.monthShort.March,ct_i18n.monthShort.April,ct_i18n.monthShort.May,ct_i18n.monthShort.June,ct_i18n.monthShort.July,ct_i18n.monthShort.August,ct_i18n.monthShort.September,ct_i18n.monthShort.October,ct_i18n.monthShort.November,ct_i18n.monthShort.December],dayShortNames:[ct_i18n.weekNames.tlSu,ct_i18n.weekNames.tlM,ct_i18n.weekNames.tlTu,ct_i18n.weekNames.tlW,ct_i18n.weekNames.tlTh,ct_i18n.weekNames.tlF,ct_i18n.weekNames.tlSa],getTimestamp:function(){var a=new Date();var b=""+a.getHours()+a.getMinutes()+a.getSeconds()+a.getMilliseconds();return b},setMonth:function(b,c){var a=b.getMonth();b.setMonth(c);c%=12;var d=b.getMonth();if(d===c){return b}else{b.setDate(0);return b}},fromApacheDirective:function(c){var b=c.split(" ")[1].split("-");var a=$A([]);$A(ct.dates.monthNames).each(function(d){d=d.substr(0,3);a.push(d)});return new Date(b[2],$A(a).indexOf(b[1]),b[0])},smartHomePageformatDate:function(k,l){function m(q){var p=["th","st","nd","rd"],o=q%100;return q+(p[(o-20)%10]||p[o]||p[0])}function d(n){if(n<10){n="0"+n}n=(n=="0")?"0"+n:n;return n}var c="";var a=new Date(k);switch(l){case 1:c=d(a.getHours())+":"+d(a.getMinutes());break;case 2:var b=m(a.getDate());var e=ct.dates.monthShortNames[a.getMonth()];var g=a.getFullYear();c=b+" "+e+", "+g;break;case 3:c=ct.dates.convertDate(k).split(",")[1].trim().split(" ").reverse().join(" ");break;case 4:var h=ct.dates.dayShortNames[a.getDay()];var b=a.getDate();var e=ct.dates.monthShortNames[a.getMonth()];c=h+", "+b+" "+e;break;case 5:var h=ct.dates.dayShortNames[a.getDay()];var b=a.getDate();var e=ct.dates.monthShortNames[a.getMonth()];c=h+" "+b+" "+e;break;case 6:var j=a.getHours();var f=j>=12?"PM":"AM";c=(j>12?j-12:j)+f;break;default:c=ct.dates.toString(a);break}return c}},isDebug:(window.location.hash.toLowerCase()==="#debug"),validator:{_attachedFields:$A([]),attachValidation:function(c,b,d,a){ct.validator._attachedFields.push({field:$(c),errorMessage:b,condition:d,occuranceForms:a})},detachValidation:function(b){var a=-1;ct.validator._attachedFields.each(function(d,c){if(d.field===$(b)){a=c;return}});if(a>-1){ct.validator._attachedFields.splice(a,1)}},_initializeForms:function(){var a=$A(document.getElementsByTagName("form"));a.each(function(b){if(b.hasClassName&&b.hasClassName("noCTValidation")){return true}$(b).observe("submit",ct.validator._validateForm);b.ct_validationFailed=true});ct.validator.parseDomTree()},classNames:{required:"required",number:"number",parsenumber:"parsenumber",password:"password",passwordOnly:"passwordOnly",email:"email",creditCardNumber:"creditCardNumber",cvvCodeCredit:"cvvCodeCredit",cvvCodeDebit:"cvvCodeDebit",calendarControl:"datePicker",restictSplChars:"restictSplChars"},validationConditions:{specialCharCondtion:function(a){_invalidChars=/(<([-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>)|(<\/([-A-Za-z0-9_]+)[^>]*>)/;return !(_invalidChars.test(a.value))},requiredFieldCondition:function(a){if(a.readAttribute("selfLabel")!==null){return($F(a)!==a.labelText&&$F(a).length!==0)}else{return($F(a).length!==0)}},quotesCondition:function(c){var b=/([a-zA-Z]*["'][a-zA-Z]*)/;var a=b.test($F(c));return a?false:true},spaceCondition:function(c){var b=/^\s|\s$/;var a=b.test($F(c));return a?false:true},onlyZeroCondition:function(c){if($F(c)!=""&&$F(c)!=c.labelText){var b=/[^0]+/;var a=b.test($F(c));return a?true:false}else{return true}},onlyAlphaNumeric:function(c){if($F(c)!=""&&$F(c)!=c.labelText){var b=/^([a-zA-Z0-9_\-\/]*)$/;var a=b.test($F(c));return a?true:false}else{return true}},idFieldValidation:function(d){if($F(d)!=""&&$F(d)!=d.labelText){var e=$F(d);if(e.length>10){var c=e.substr(10,e.length-1);var b=/[^a-zA-Z]+/;var a=b.test(c);return a?false:true}return true}else{return true}},restictSplChars:function(c){if($F(c)!=""&&$F(c)!=c.labelText){var b=/[^a-zA-Z0-9]+/;var a=b.test($F(c));return a?false:true}else{return true}},validateNumber:function(b){if($F(b)!==""){if($(b).readAttribute("selfLabel")===$F(b)){return true}if(b.readAttribute("max")||b.readAttribute("min")){var a=true;if(b.readAttribute("max")){a=(parseFloat($F(b),10)<=parseFloat(b.readAttribute("max"),10))}if(a===true&&b.readAttribute("min")){a=($F(b)>=parseFloat(b.readAttribute("min"),10))}return a}else{return($F(b)>0)}}else{return true}},validateParseNumber:function(a){if($F(a)!==""){if($(a).readAttribute("selfLabel")===$F(a)){return true}return($F(a).replace(/[^0-9.]+/g,"").length==$F(a).length)}else{return true}},validateParseNumberDecimalLimit:function(c){if(($F(c)!=="")&&($(c).readAttribute("selfLabel")!==$F(c))&&($F(c).replace(/[^0-9.]+/g,"").length==$F(c).length)){var a=parseInt($(c).readAttribute("decimallimit"),10);var b=(($F(c).split(".")[1])?$F(c).split(".")[1]:"").length;return(b<=a)}else{return true}},emailCondition:function(e){if($F(e)!==""){if($F(e)===""){return false}var b=e.value=e.value.trim();var c=b.indexOf("@");var f=b.lastIndexOf(".");if(c<0||f<0){return false}var d=/^[A-Za-z0-9._%+-]+@(?:[A-Za-z0-9-]+\.)+[A-Za-z]{2,}$/;var a=d.test(b);return a?true:false}else{return true}},requiredDropdownCondition:function(a){return(a.selectedIndex!==0&&a.selectedIndex!==-1)},validCreditCardCondition:function(d){var b=$F(d),a;if(b!==""){if(cardtype=ct.helperFunctions.getCardType(b)){if(d.readAttribute("cardtyperadio")&&(d.readAttribute("cardtyperadio")=="true")){if(d.readAttribute("cardtyperadio")){var e=ct.dom.getParentByTagName(d,"form")[d.readAttribute("cardtypefieldname")];var c;$A(e).each(function(f){if(f.checked){c=f}});if(cardtype!=c){a=false}}}a=true}else{a=false}}else{a=true}return a},validateMobilePhoneNumberCondition:function(c){if($F(c)!==""){if(c.readAttribute("selfLabel")===$F(c)){return true}else{if(ct.stringFormatting.stripAlphaChars($F(c)).length<10||ct.stringFormatting.stripAlphaChars($F(c)).length>17){return false}else{var b=/[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9]/;var a=b.test($F(c));return(a)?true:false}}}else{return true}},validateCountryCodeCondition:function(c){var b=$F(c);if(b!==""&&b.length>=1&&b.length<=4){var a=/[1-9]+/g;return !!a.test(b)}else{return false}},validateLandLanePhoneNumberCondition:function(c){if($F(c)!==""){if(c.readAttribute("selfLabel")===$F(c)){return true}else{if(ct.stringFormatting.stripAlphaChars($F(c)).length>17){return false}else{var b=/[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9]/;var a=b.test($F(c));return(a)?true:false}}}else{return true}},validateCvvCodeForCreditCard:function(c,d){var a;$A(document.getElementsByName(d)).each(function(e){if(e.checked){a=$F(e)}});if($F(c)===""){return true}var b=null;if(a!=="0"){if(a=="3"){b=/^\d{4}$/}else{b=/^\d{3}$/}return b.test($F(c))}return true},validateCvvCodeForDebitCard:function(a){if($F(a)===""){return true}re=/^\d{3}$/;return re.test($F(a))},validateDate:function(g){if($F(g)!==""){if(g.readAttribute("selfLabel")===$F(g)){return true}else{if((ct.dates.isValidDateString($F(g)))){var k=true;var b,f,e,j;var a=g.value;var h="/";var d=a.indexOf(h);var c=a.lastIndexOf(h);f=parseInt(a.substring(0,d),10);b=parseInt(a.substring(d+1,c),10)-1;e=parseInt(a.substring(c+1),10);j=new Date(e,b,f);if(j.getDate()==f){if(j.getMonth()==b){if(!j.getFullYear()==e){k=false}}else{k=false}}else{k=false}return k}else{return false}}}else{return true}},validateMinDate:function(d,b){if($F(d)===""||d.readAttribute("selfLabel")===$F(d)){return true}else{if(!b){b=d.readAttribute("mindate")}if(b){var c=ct.dates.fromString(b);if(d.readAttribute("offsetdays")){c.setDate(c.getDate()+parseInt(d.readAttribute("offsetdays"),10))}var a=ct.dates.compare(ct.dates.fromString($F(d)),c);return(a===0)||(a===-1)}else{return true}}},validateMaxDate:function(c){if($F(c)===""||c.readAttribute("selfLabel")===$F(c)){return true}else{if(c.readAttribute("maxdate")){var b=ct.dates.fromString(c.readAttribute("maxdate"));var a=ct.dates.compare(ct.dates.fromString($F(c)),b);return(a===0)||(a===1)}else{return true}}}},parseDomTree:function(c){c=$(c?c:document.body);if(document.location.protocol==="https:"){$(document.body).select("a.forceHttp").each(function(f){f.href=f.href.replace("https:","http:")});$(document.body).select("form.forceHttp").each(function(f){f.action=f.action.replace("https:","http:")})}if(document.location.protocol==="http:"){$(document.body).select("a.forceHttps").each(function(f){f.href=f.href.replace("http:","https:")});$(document.body).select("form.forceHttps").each(function(f){f.action=f.action.replace("http:","https:")})}if($("offers_1")){var e=document.location.host.split(".");if(e[1]==="cleartripforbusiness"){$("offers_1").select("a").each(function(f){if(f.href.indexOf("javascript:void(0)")==-1){f.href=f.href.replace(/.*\.cleartripforbusiness/,"http://www.cleartrip");f.href=f.href+"?host="+document.location.host;f.target="_blank"}})}}var b=$A($(c).getElementsByTagName("input"));b.each(function(f){var l=ct.validator.attachValidation;var g=ct.validator.validationConditions;var k=ct.validator.classNames;f=$(f);if(f.type.toLowerCase()==="text"){l(f,"please enter valid characters.",g.specialCharCondtion)}if(((f.type.toLowerCase()==="text")||f.type.toLowerCase()==="email"||f.type.toLowerCase()==="password")&&f.hasClassName(k.required)){l(f,ct_i18n.validate.requiredMsg.replace("${field}",f.title),g.requiredFieldCondition)}if((f.type.toLowerCase()==="text")&&f.hasClassName("tagname")){l(f,ct_i18n.validate.quotesMsg,g.quotesCondition)}if(((f.type.toLowerCase()==="text")||f.type.toLowerCase()==="password")&&f.hasClassName(k.required)){l(f,ct_i18n.validate.spaceStartMsg.replace("${field}",f.title),g.spaceCondition)}if(((f.type.toLowerCase()==="text")||f.type.toLowerCase()==="password")&&f.hasClassName(k.number)){l(f,ct_i18n.validate.validNumberMsg.replace("${field}",f.title),g.validateNumber)}if(((f.type.toLowerCase()==="text")||f.type.toLowerCase()==="password")&&f.hasClassName(k.parsenumber)){l(f,ct_i18n.validate.validNumberMsg.replace("${field}",f.title),g.validateParseNumber);if($(f).readAttribute("decimallimit")){l(f,ct_i18n.validate.validNumberDecimalLimitMsg.replace("${field}",f.title).replace("${decimallimit}",$(f).readAttribute("decimallimit")),g.validateParseNumberDecimalLimit)}}if(f.type.toLowerCase()==="password"&&f.hasClassName(k.required)&&(f.hasClassName(k.password)||f.hasClassName(k.passwordOnly))){l(f,(f.hasClassName(k.passwordOnly)?(ct_i18n.validate.passwordLengthOnlyMsg):(ct_i18n.validate.passwordLengthMsg)).replace("${field}",f.title),function(m){if($F(m)===""){return true}return($F(m).length>=6)})}if((f.type.toLowerCase()==="text")&&f.hasClassName("onlyZeroCondition")){l(f,ct_i18n.validate.onlyZeroMsg,g.onlyZeroCondition)}if((f.type.toLowerCase()==="text")&&f.hasClassName("onlyAlphaNumeric")){l(f,ct_i18n.validate.onlyAlphaNumericMsg,g.onlyAlphaNumeric)}if((f.type.toLowerCase()==="text")&&f.hasClassName("idFieldValidation")){l(f,ct_i18n.validate.idFieldValidationMsg,g.idFieldValidation)}if((f.type.toLowerCase()==="text")&&f.hasClassName("restictSplChars")){l(f,ct_i18n.validate.restictSplCharsMsg.replace("${field}",f.title),g.restictSplChars)}if(f.hasClassName(k.cvvCodeCredit)){if(!f.readAttribute("cardtypefieldname")&&!$(f.readAttribute("cardtypefieldname"))){throw new Error("cardtypefieldname attribute not specified for the cvv field. Could not attach validation.")}else{f.setAttribute("autocomplete","off");l(f,ct_i18n.validate.ccvCodeMsg,function(m){return g.validateCvvCodeForCreditCard(m,m.readAttribute("cardtypefieldname"))})}}if(f.type.toLowerCase()==="password"&&f.hasClassName(k.cvvCodeDebit)){f.setAttribute("autocomplete","off");l(f,ct_i18n.validate.ccvCodeMsg,g.validateCvvCodeForDebitCard)}if((f.type.toLowerCase()==="text"||f.type.toLowerCase()==="email")&&f.hasClassName(k.email)){l(f,ct_i18n.validate.validEmailMsg.replace("${field}",f.title),g.emailCondition)}if(f.type.toLowerCase()==="text"&&f.hasClassName(k.creditCardNumber)){f.setAttribute("autocomplete","off");l(f,ct_i18n.validate.validCcMsg.replace("${field}",f.title),g.validCreditCardCondition)}if(f.type.toLowerCase()==="text"&&f.hasClassName(k.calendarControl)){l(f,ct_i18n.validate.validDateMsg.replace("${field}",f.title.toLowerCase()),g.validateDate);if(f.readAttribute("mindate")){var j=ct_i18n.validate.validMinDateMsg;j=j.replace("${field}",f.title.toLowerCase());j=j.replace("${date}",f.readAttribute("mindate"));l(f,j,g.validateMinDate)}else{if(f.readAttribute("mindatefieldid")){var j;var h=f.readAttribute("offsetDays");if(h){if(h==1){j=ct_i18n.validate.minDateWithOffset1Msg}else{j=ct_i18n.validate.minDateWithOffsetMsg.replace("${noOfDays}",h)}}else{j=ct_i18n.validate.validMinDateMsg}j=j.replace("${dateField1}",f.title.toLowerCase());j=j.replace("${dateField2}",$(f.readAttribute("mindatefieldid")).title.toLowerCase());j=j.replace("${field}",f.title.toLowerCase());j=j.replace("${date}",$(f.readAttribute("mindatefieldid")).value);if(f.readAttribute("skipmindatecheck")===undefined){l(f,j,function(m){return g.validateMinDate(m,$(f.readAttribute("mindatefieldid")).value)})}}}if(f.readAttribute("maxdate")){var j=ct_i18n.validate.validMaxDateMsg;j=j.replace("${field}",f.title.toLowerCase());j=j.replace("${date}",f.readAttribute("maxdate"));l(f,j,g.validateMaxDate)}}if((f.type.toLowerCase()==="file")&&f.hasClassName(k.required)){l(f,ct_i18n.validate.requiredMsg.replace("${field}",f.title),g.requiredFieldCondition)}});var d=$A(c.getElementsByTagName("select"));d.each(function(f){f=$(f);if(f.hasClassName(ct.validator.classNames.required)){ct.validator.attachValidation(f,ct_i18n.validate.requiredMsg.replace("${field}",f.title),ct.validator.validationConditions.requiredDropdownCondition)}});var a=$A(c.getElementsByTagName("textarea"));a.each(function(f){f=$(f);if(f.hasClassName(ct.validator.classNames.required)){ct.validator.attachValidation(f,ct_i18n.validate.requiredMsg.replace("${field}",f.title),ct.validator.validationConditions.requiredFieldCondition)}})},_validateForm:function(d,c){var g=[],f=ct.validator;if(c){var b=c}else{var b=$((this.nodeName.toLowerCase()==="form")?this:ct.dom.getParentByTagName(this,"form"))}var e=$(b).getAttribute("tuxedo")||false;$A(document.forms).each(function(h){Form.getElements(h).each(function(j){ct.validator._hideErrorArrow(j,e)})});b.ct_validationFailed=false;var a=b.getElements();ct.validator.errors=null;if($("autocompleteOptionsContainer")){d.stop();return}a.each(function(h){f._hideErrorArrow(h,e);f._attachedFields.each(function(m){if(m.field===h){if(m.field.disabled===true){return}if(!m.condition(m.field)){g.push({field:h,message:typeof m.errorMessage=="function"?m.errorMessage(m.field):m.errorMessage});b.ct_validationFailed=true;if(m.field.dependencyFields){for(var l=0,k=m.field.dependencyFields.length;l<k;l++){var j=m.field.dependencyFields[l];g.push({field:j.field,message:""});f._showErrorArrow(j.field,e);f.errors=g}}f._showErrorArrow(h,e);f.errors=g}}})});f._attachedFields.each(function(h){if(h.field&&h.field instanceof Array){if($(h.field[0]).up("form")&&$(h.field[0]).up("form")==b){if(h.field.disabled!==true){if(!h.condition(h.field)){g.push({field:h.field,message:typeof h.errorMessage=="function"?h.errorMessage(h.field):h.errorMessage});b.ct_validationFailed=true;h.field.each(function(j){f._showErrorArrow(j,e)});f.errors=g}}}}});if(b.foreignValidation){f._attachedFields.each(function(h){if(h.occuranceForms&&h.occuranceForms.indexOf(b)!==-1){f._hideErrorArrow(h.field,e);if(h.field.disabled!==true){if(!h.condition(h.field)){g.push({field:h.field,message:typeof h.errorMessage=="function"?h.errorMessage(h.field):h.errorMessage});b.ct_validationFailed=true;f._showErrorArrow(h.field,e);f.errors=g}}}})}if(b.ct_validationFailed){if(d.stop){d.stop()}b.errors=g;f._showFormErrors(b)}else{b.errors=null;f._hideFormErrors(b);if((b.defaultValidationSubmit=="true")||(b.readAttribute("defaultValidationSubmit")=="true")||b.hasClassName("removeSelflabels")){ct.selfLabels.parseDomTree(b,"remove")}}},_showFormErrors:function(d){if(d.readAttribute("errorblockid")&&$(d.readAttribute("errorblockid"))){var b=$(d.getAttribute("errorblockid")).getElementsByTagName("ol")[0];while(b.childNodes.length>0){b.removeChild(b.childNodes[0])}var c=[];var a=[];$A(d.errors).each(function(e){if(e.message&&e.message!==""){c.push(e.message)}});a=c.uniq();$A(a).each(function(e){b.appendChild((new Element("li")).update(e))});$(d.readAttribute("errorblockid")).style.display="block";if($(d).readAttribute("noerrorfocus")!="true"&&$(d.readAttribute("errorblockid")).positionedOffset&&$(d.readAttribute("errorblockid")).positionedOffset()[1]){window.scrollTo(0,$(d.readAttribute("errorblockid")).positionedOffset()[1])}}},_hideFormErrors:function(a){if(a.readAttribute("errorblockid")&&$(a.readAttribute("errorblockid"))){$(a.readAttribute("errorblockid")).style.display="none"}},_showErrorArrow:function(a,c){if(!a.previous()||!a.previous().hasClassName("err_arrow")){var b=document.createElement("span");$(b).addClassName("err_arrow");$(b).innerHTML="&nbsp;";a.parentNode.insertBefore(b,a);if(c){$(a).addClassName("ugly")}}},_hideErrorArrow:function(a,b){if(a.previous()&&a.previous().hasClassName("err_arrow")){a.previous().remove()}if(b){$(a).removeClassName("ugly")}}},smartHomePage:function(){var c={flight:"1",hotel:"2",train:"4"};function l(z){var z=z;z.isFlight=z.trip_type==c.flight?true:false;z.isHotel=z.trip_type==c.hotel?true:false;z.isTrain=z.trip_type==c.train?true:false;z.bookin_type="";if(z.isFlight){z.bookin_type="plane"}if(z.isHotel){z.bookin_type="hotel"}if(z.isTrain){z.bookin_type="train"}z.tripTitle=w(z);z.trip_date=b(z.trip_date);z.travellerMsg=h(z.travellers);return z}function b(z){var z=ct.dates.toString(new Date(z));var A=ct.dates.toString((new Date(window.serverCurrentDate)));var B=ct.dates.diffDates(A,z);switch(B){case 0:return"Today";case 1:return"Tomorrow";default:return ct.dates.smartHomePageformatDate(z,3)}}function s(B){var z=ct.dates.toString(new Date(B));var A=ct.dates.toString((new Date(window.serverCurrentDate)));var C=ct.dates.diffDates(A,z);switch(C){case 0:return"today, "+ct.dates.smartHomePageformatDate(B,6);case 1:return"tomorrow, "+ct.dates.smartHomePageformatDate(B,6);default:return ct.dates.smartHomePageformatDate(B,4)}}function t(A){var A=A,z={};switch(A.trip_type){case c.flight:z=j(A);break;case c.hotel:z=A.hotels[0].refund_details[0];break;case c.train:z=A.trains[0].refund_details[0];break;default:break}return z}function j(B){var A={};var z=B.journey_type.toUpperCase();switch(z){case"OW":A=B.flights[0].refund_details[0];A.tripCancellationMsg=m(A,B.partial_cancellation);break;case"RT":A=n(B);break;case"MC":A=n(B);break;default:break}return A}function n(N){var B={};var M=function(S,R){if(S.refund_details.length==0&&R.refund_details.length==0){return -1}else{if(S.refund_details.length==0){return 1}else{if(R.refund_details.length==0){return -1}else{S=new Date(S.refund_details[0].cancelled_time).getTime();R=new Date(R.refund_details[0].cancelled_time).getTime();return R-S}}}};N.flights=N.flights.sort(M);var I=new Date(N.flights[0].refund_details[0].cancelled_time).getTime();var D=N.flights.length;var F=[];for(var J=0;J<D;J++){if(N.flights[J].refund_details.length!=0&&I==new Date(N.flights[J].refund_details[0].cancelled_time).getTime()){F.push(N.flights[J])}}var C=F[0].refund_details[0].cancelled_travellers_names.toString();var Q=[];var z=F.length;for(var J=0;J<z;J++){if(C==F[J].refund_details[0].cancelled_travellers_names.toString()){Q.push(F[J])}}var H=0;H=N.travellers.ADT?(H+N.travellers.ADT):H;H=N.travellers.CHD?(H+N.travellers.CHD):H;H=N.travellers.INF?(H+N.travellers.INF):H;var E=Q.length;var G="";if(!N.partial_cancellation){G=("Trip cancelled on "+ct.dates.smartHomePageformatDate(F[0].refund_details[0].cancelled_time,5))}else{if(E==z){if(E==1){if(Q[0].refund_details[0].cancelled_travellers_names.length==H){G=Q[0].from+"→"+Q[0].to+" cancelled on "+ct.dates.smartHomePageformatDate(Q[0].refund_details[0].cancelled_time,5)}else{var O=Q[0].refund_details[0].cancelled_travellers_names;var K=O.length;G+=Q[0].from+"→"+Q[0].to+" cancelled for ";for(var J=0;J<K;J++){G+=((J>0?(J==(K-1)?" and ":", "):"")+O[J])}G+=(" on "+ct.dates.smartHomePageformatDate(Q[0].refund_details[0].cancelled_time,5))}}else{if(z==D){var P=Q[0].refund_details[0].cancelled_travellers_names.toString();var A=0;for(var J=0;J<E;J++){if(P==Q[J].refund_details[0].cancelled_travellers_names.toString()){A++}else{break}}if(A==E){var O=Q[0].refund_details[0].cancelled_travellers_names;var K=O.length;G+="Trip cancelled for ";for(var J=0;J<K;J++){G+=((J>0?(J==(K-1)?" and ":", "):"")+O[J])}G+=(" on "+ct.dates.smartHomePageformatDate(Q[0].refund_details[0].cancelled_time,5))}else{G+=("Part of this trip cancelled on "+ct.dates.smartHomePageformatDate(F[0].refund_details[0].cancelled_time,5))}}else{G+=("Part of this trip cancelled on "+ct.dates.smartHomePageformatDate(F[0].refund_details[0].cancelled_time,5))}}}else{G+=("Part of this trip cancelled on "+ct.dates.smartHomePageformatDate(F[0].refund_details[0].cancelled_time,5))}}var L=0;if(N.sp_rt_fare){L=F[0].refund_details[0].refund_amount}else{for(var J=0;J<z;J++){L+=Number(F[J].refund_details[0].refund_amount)}}B={step:F[0].refund_details[0].step,refund_status:F[0].refund_details[0].refund_status,cancelled_time:F[0].refund_details[0].cancelled_time,refund_not_recieved_url:F[0].refund_details[0].refund_not_recieved_url,refund_amount:L,refund_currency:N.currency,sla:F[0].refund_details[0].sla,tripCancellationMsg:G};return B}function h(A){var B="";var z=A.ADT==undefined?0:A.ADT;var D=A.CHD==undefined?0:A.CHD;var C=A.INF==undefined?0:A.INF;B+=z>0?(z+(z>1?" Adults":" Adult")):"";B+=D>0?((z>0?", ":"")+D+(D>1?" Childs":" Child")):"";B+=C>0?(((z>0||D>0)?", ":"")+C+(C>1?" Infants":" Infant")):"";return B}function y(z,B){var D="";switch(B.toUpperCase()){case"OW":D=z[0].from+" → "+z[z.length-1].to;break;case"RT":D=z[0].from+" ⇄ "+z[0].to;break;case"MC":var C=z.length;D=z[0].from;for(var A=0;A<C;A++){D+=" → "+z[A].to}break;default:break}return D}function w(z){var A="";switch(z.trip_type){case c.flight:A=y(z.flights,z.journey_type);break;case c.hotel:A=z.hotels[0].name;break;case c.train:A=z.trains[0].from_station+"  → "+z.trains[0].to_station;break;default:break}return A}function d(z){switch(z.toUpperCase()){case"INR":return"Rs.";default:return z}}function v(D,B){var A=new Date(D);var z=new Date(B);var C=A.getTime()-z.getTime();return C}function o(E){var A=[];var z=E.length;var B=window.serverCurrentDate;for(var C=0;C<z;C++){var D=v(E[C].departure_date_time,B);if(D<0){continue}else{A.push(E[C]);break}}return A[0]}function m(A,E){var D="";if(E){var C=A.cancelled_travellers_names;var z=C.length;D+="Trip cancelled for ";for(var B=0;B<z;B++){D+=((B>0?(B==(z-1)?" and ":", "):"")+C[B])}D+=(" on "+ct.dates.smartHomePageformatDate(A.cancelled_time,5))}else{D+=("Trip cancelled on "+ct.dates.smartHomePageformatDate(A.cancelled_time,5))}return D}function e(z){var E="";var B=window.serverCurrentDate;var A=v(z.sla,B)<0;var D=parseFloat(z.refund_amount);var C="There is no refund applicable for this trip";switch(z.step){case"1":E+=(!A?("We will update you with the refund amount by "+s(z.sla)):"We are sorry as we couldn't update you with refund amount in time. We'll keep you updated.");break;case"2":if(D<=0){E+=C}else{E+=(!A?("We will start the transfer of "+d(z.refund_currency)+" "+z.refund_amount+" to your payment method by "+s(z.sla)):("We are sorry as we couldn't start the transfer of "+d(z.refund_currency)+" "+z.refund_amount+" to your payment method by "+s(z.sla)+". We'll keep you updated about the progress."))}break;case"3":if(D<=0){E+=C}else{E+=(d(z.refund_currency)+" "+z.refund_amount+" should be credited in your original payment method by "+s(z.sla))}break;default:break}return E}function u(A){var A=A;A=l(A);if(A.isFlight){A.flights=o(A.flights);if(A.journey_type!="OW"){A.isTripDateShow=false;A.flights.mostUpcomingTripMSg="Flight from "+A.flights.from+" on "+ct.dates.smartHomePageformatDate(A.flights.departure_date_time,4)}A.flights.departure_date_time=ct.dates.smartHomePageformatDate(A.flights.departure_date_time,1)+"hrs"}if(A.isHotel){A.hotels=A.hotels[0];var z=A.hotels.full_city_name.split(",");A.hotels.cityName=z[0];A.hotels.country=z[2];A.hotels.check_in_time=ct.dates.smartHomePageformatDate(A.hotels.check_in_date,1)+"hrs";A.hotels.hotel_location_url="/hotels/details/"+A.hotels.hotel_id+"?c=&r=&mapOnly=#location";A.hotels.isRoom=A.hotels.room_count>1?false:true}if(A.isTrain){A.trains=A.trains[0]}A.isAmendAvailable=window.countryCode.toLowerCase()=="in"?true:false;return A}function p(z){var z=z;z=l(z);z.pending_payment_details.payment_due_date=ct.dates.smartHomePageformatDate(z.pending_payment_details.payment_due_date,2);z.pending_payment_details.disp_currency=d(z.pending_payment_details.currency);z.pending_payment_details.payment_url="https://"+window.location.host+z.pending_payment_details.payment_url;return z}function x(A){var A=A;A=l(A);A.refund_details=t(A);A.refund_details.is_step_one=A.refund_details.step=="1"?true:false;A.refund_details.is_step_two=A.refund_details.step=="2"?true:false;A.refund_details.is_step_three=A.refund_details.step=="3"?true:false;if(!A.isFlight){A.refund_details.tripCancellationMsg=m(A.refund_details,A.partial_cancellation)}A.refund_details.refund_currency=A.currency;A.refund_details.message=e(A.refund_details);var z=parseFloat(A.refund_details.refund_amount);A.refund_details.is_refund_not_recieved_link_show=(z<=0)?false:true;return A}function g(){$("smartHomePageTrip").select("a[appref='true']").each(function(z){z.observe("click",function(A){if($(A.target).readAttribute("target")!="_blank"){A.preventDefault();setTimeout(function(){window.location.href=A.target.href},200)}})})}function k(z){var B="";var A="";switch(z){case c.flight:B="AIR";break;case c.hotel:B="HOTEL";break;case c.train:B="TRAIN";break;default:break}A="SHP_"+B+"_LOADED";if(window._gaq){_gaq.push(["_trackEvent","account",A,window.location.pathname])}}if(window.product!="B2B"){var a=ct.cookies.readCTAuthCookie();var r=$$("body")[0].hasClassName("trains home");if(a&&window.smartHomePage&&r){var q=15000;var f="/partial/account/trips/priority?source=shp&t="+new Date().getTime();new Ajax.Request(f,{method:"get",timeout:q,onSuccess:function(C){var C=typeof(C)=="string"?JSON.parse(C):C;C=C.responseText;C=typeof(C)=="string"?JSON.parse(C):C;if(C&&Object.keys(C).length>0){switch(C.type.toLowerCase()){case"upcoming trips":var A=u(C);var B=Mustache.to_html($("smartHomePageUpcomingTrip").innerHTML,A);$("smartHomePageTrip").update(B).show();break;case"refunds":var z=x(C);var B=Mustache.to_html($("smartHomePageCancelTrip").innerHTML,z);$("smartHomePageTrip").update(B).show();break;case"part payment":var D=p(C);var B=Mustache.to_html($("smartHomePagePartPayTrip").innerHTML,D);$("smartHomePageTrip").update(B).show();break;default:break}ct.helperFunctions.forceHttpsLinks();$("smartHomePageTrip").addClassName("smartWidget");ct.helperFunctions.adjustHeight();g();k(C.trip_type)}},onFailure:function(z){}})}}},selfLabels:{addSelfLabel:function(a,b){a=$(a);a.labelText=b;a.writeAttribute("selfLabel",b);a.observe("focus",function(){if($F(this)===b){this.value="";$(this).removeClassName("selflabel")}});a.observe("blur",function(){if($F(this)===""){this.value=b;$(this).addClassName("selflabel")}});setTimeout(function(){if($F(a)===""||$F(a)===b){if(document.activeElement){if(document.activeElement!==a){a.value=b;$(a).addClassName("selflabel")}}else{a.value=b;$(a).addClassName("selflabel")}}},1000)},removeSelfLabel:function(a,b){if($F(a)===b){$(a).value="";$(a).removeClassName("selflabel")}},setSelfLabel:function(a,b){if($F(a)===""){$(a).value=b;if(!$(a).hasClassName("selflabel")){$(a).addClassName("selflabel")}}},parseDomTree:function(a,b){a=$(a?a:document.body);if(b){a.select("input[selfLabel]","textarea[selfLabel]","input[selflabel]","textarea[selflabel]").each(function(c){if(b==="set"){ct.selfLabels.setSelfLabel(c,c.getAttribute("selfLabel"))}else{ct.selfLabels.removeSelfLabel(c,c.getAttribute("selfLabel"))}})}else{a.select("input[selfLabel]","textarea[selfLabel]","input[selflabel]","textarea[selflabel]").each(function(c){ct.selfLabels.addSelfLabel(c,c.getAttribute("selfLabel"))})}}},bubbles:{addBehavior:function(b,d,a){a=a?a:{};b=$(b);b.href="javascript: void(0);";var c;b.observe("click",function(h){var g=false;if(h.target.getAttribute("popupShown")==null&&h.target.getAttribute("showPopupOnce")=="true"){h.target.setAttribute("popupShown","true")}else{if(h.target.getAttribute("popupShown")=="true"&&h.target.getAttribute("showPopupOnce")=="true"){g=true}}if($("ct_bubbleNode")){if($("ct_bubbleNode").associatedLink==b){g=true}ct.dom.removeIEIframeFix($("ct_bubbleNode"));$("ct_bubbleNode").remove()}if(!g){var j=new Element("a",{"class":"bubbleClose",href:"javascript: void(0);",title:ct_i18n.controls.close});j.observe("click",function(){ct.dom.removeIEIframeFix($("ct_bubbleNode"));$(c).remove()});c=new Element("div",{"class":"bubble",id:"ct_bubbleNode"});c.associatedLink=b;c.appendChild(new Element("div",{"class":"bubbleShadow"}));c.appendChild(new Element("div",{"class":"bubbleArrow"}));c.appendChild(j);var f=new Element("div",{"class":"bubbleContentFrame"});c.appendChild(f);f.innerHTML=(new Template(d)).evaluate(a);c=$(c);var k=b.cumulativeOffset();var e;if(self.innerWidth){e=self.innerWidth}else{if(document.documentElement&&document.documentElement.clientWidth){e=document.documentElement.clientWidth}else{if(document.body){e=document.body.clientWidth}}}if(parseInt(k[0],10)>(e/2)){c.addClassName("bubbleWrapperRight");c.removeClassName("bubbleWrapperLeft");c.setStyle({left:"auto",right:(e-parseInt(k[0],10)-5)+"px",top:(parseInt(k[1],10)-20)+"px"});document.body.appendChild(c);ct.dom.addIEIframeFix(c,[0,-10,0,10])}else{c.addClassName("bubbleWrapperLeft");c.removeClassName("bubbleWrapperRight");c.setStyle({right:"auto",left:(parseInt(k[0],10)+55)+"px",top:(parseInt(k[1],10)-20)+"px"});document.body.appendChild(c);ct.dom.addIEIframeFix(c,[0,-10,0,0])}if(window.amendments==true&&window.isRoundTripSearch==true){c.style.position="fixed"}c.observe("click",function(l){if(l.target.tagName.toLowerCase()!=="a"){l.stop()}})}h.stop()})},parseDomTree:function(rootNode){rootNode=$(rootNode?rootNode:document.body);rootNode.getElementsBySelector("a[bubbleBlock]","a[bubbleblock]").each(function(link){if($(link.getAttribute("bubbleBlock"))){var blockTemplateContainer=$(link.getAttribute("bubbleBlock"));var blockTemplate=blockTemplateContainer.innerHTML;blockTemplateContainer.style.display="none";ct.bubbles.addBehavior(link,blockTemplate,eval(link.readAttribute("substitutions")?"({"+link.readAttribute("substitutions")+"})":{}))}else{ct.console.error("Tried initializing a bubble block for link, but either the bubbleBlock attribute isn't specified, or it doesn't point to a valid block in the DOM.",link)}})}},dom:{getParentByTagName:function(c,b){var d=Element.ancestors(c);for(var a=0;a<d.length;a++){if(d[a].nodeName.toLowerCase()===b.toLowerCase()){return d[a]}}return null},addIEIframeFix:function(a,d){if(Prototype.Browser.IE&&!a._fixedIframe){var b=document.createElement("iframe");d=d||[0,0,0,0];a=$(a);b.frameBorder=0;b.scrolling="no";b.src=window.location.protocol==="https:"?"/blank.html":"about:blank";b.style.position="absolute";b.style.width=a.getWidth()+d[1]+"px";b.style.height=a.getHeight()+d[2]+"px";var c=a.cumulativeOffset();b.style.top=c[1]+d[0]+"px";b.style.left=c[0]+d[3]+"px";a._fixedIframe=b;document.body.appendChild(b)}},removeIEIframeFix:function(a){if(a._fixedIframe){document.body.removeChild(a._fixedIframe);a._fixedIframe=null}}},forms:{rememberCurrentValues:function(a){$(a).getElements().each(function(b){switch(b.nodeName.toLowerCase()){case"input":switch(b.type.toLowerCase()){case"text":b.oldValue=$F(b);break;case"checkbox":case"radio":b.oldValue=b.checked?"Y":"N";break;default:break}break;case"textarea":b.oldValue=$F(b);break;case"select":b.oldValue=b.selectedIndex;break}})},restoreOldValues:function(a){$(a).getElements().each(function(b){if(b.oldValue){switch(b.nodeName.toLowerCase()){case"input":switch(b.type.toLowerCase()){case"text":b.value=b.oldValue;break;case"checkbox":case"radio":b.checked=(b.oldValue==="Y")?true:false;break;default:break}break;case"textarea":b.value=b.oldValue;break;case"select":b.selectedIndex=b.oldValue;break}}})},populate:function(c,a){var b=Form.getElements(c);Object.keys(a).each(function(d){b.each(function(f){if(f.id===d&&a[d]){if(f.nodeName.toLowerCase()==="input"){switch(f.type.toLowerCase()){case"text":case"password":case"hidden":f.value=a[d];break;case"checkbox":case"radio":if(a[d].toString().toLowerCase()==="true"){f.checked=true}else{f.checked=false}break}}else{if(f.nodeName.toLowerCase()==="select"){for(var e=0;e<f.options.length;e++){if(f.options[e].value.toLowerCase()===a[d].toString().toLowerCase()){f.selectedIndex=e;break}}}else{if(f.nodeName.toLowerCase()==="textarea"){f.value=a[d]}}}if($(f).hasClassName("selflabel")){$(f).removeClassName("selflabel")}}})})},addHiddenField:function(b,a,c,d){if(b[a]&&d!="true"){b[a].value=c}else{b.appendChild(new Element("input",{type:"hidden",value:c,name:a}))}}},domIsLoaded:false,stringFormatting:{stripAlphaChars:function(a){var b=a+"";return b.replace(/[^0-9]/g,"")},formatForCurrency:function(f,e,m,l){var j="",g,d;var n="Rs.";var h=1;var c=1;var a={ds:".",ts:",",gp:[3,2]};var b=m?m:false;function k(){if(ct.currentCurrency.symbol){n=ct.currentCurrency.symbol}if(ct.currentCurrency.ds){a.ds=ct.currentCurrency.ds}if(ct.currentCurrency.ts){a.ts=ct.currentCurrency.ts}if(ct.currentCurrency.gp){a.gp=$A(ct.currentCurrency.gp.split(",")).each(function(o){o=parseInt(o,10)})}if(ct.currentCurrency.rate){h=ct.currentCurrency.rate}if(window.sell_currency&&window.currencies&&window.currencies.all){$A(window.currencies.all).each(function(o){if(o.code===window.sell_currency.code){c=o.rate}})}}k();f=(f*c)/h;if(l&&f<l){f=l}if(f<0){if(!b){f="0"}else{f=parseInt(f.toString().split("-")[1])}}if(e){g=parseFloat(f);g=parseInt(f*100,10)/100+"";d=g.split(".").length>1?g.split(".")[1]:"";g=g.split(".")[0];while(d.length<2){d+="0"}}else{g=parseInt(Math.round(f),10)+""}if(g.length>a.gp[0]){j=g.substring(g.length-a.gp[0],g.length);g=g.substring(0,g.length-a.gp[0]);while(g.length>a.gp[a.gp.length-1]){j=g.substring(g.length-a.gp[a.gp.length-1],g.length)+a.ts+j;g=g.substring(0,g.length-a.gp[a.gp.length-1])}g+=a.ts+j}if(e){g+=a.ds+d}return n+" "+(b?"-":"")+(g)}},stickyBlocks:{_definedStickyBlocks:$A([]),makeBlockSticky:function(a){ct.leftOffset=$(a).cumulativeOffset();ct.stickyBlocks._definedStickyBlocks.push(a);ct.stickyBlocks.recalculateTop(a);a.style.zIndex="2"},recalculateTop:function(a){a.startTop=$(a).cumulativeOffset().top},_calculateScrollTop:function(){if(self.pageYOffset){return self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}else{if(document.body){return document.body.scrollTop}else{return 0}}}},ifBlockIsAtTheBottom:function(b){var a=ct.stickyBlocks._calculateScrollTop();return a+b.getDimensions().height+10>Element.cumulativeOffset($("Wrapper")).top+$("Wrapper").getDimensions().height},blockAtFooterHandler:function(b,a){if(b.style.position!=="absolute"||a){if(!Prototype.Browser.IE){b.style.top=($("Wrapper").getDimensions().height-b.getDimensions().height-Element.cumulativeOffset($("Wrapper")).top)+"px"}else{b.style.top=($("Wrapper").getDimensions().height-b.getDimensions().height-Element.cumulativeOffset($("Wrapper")).top-25)+"px"}}b.style.position="absolute"},ifBlockIsAtTheTop:function(b){var a=ct.stickyBlocks._calculateScrollTop();return a+13<b.startTop},_previousBlockTop:0,parseDomTree:function(b){b=$(b?b:document.body);b=$(b?b:document.body);var a=(navigator.userAgent.indexOf("MSIE 6")>=0)?true:false;$A(b.select(".stickyBlock")).each(function(g){ct.stickyBlocks.makeBlockSticky(g);g.startTop=Element.cumulativeOffset(g).top;g.windowResizeFix=document.viewport.getDimensions().height;g.style.position="static";g.observe("sticky:resize",function(){if(ct.stickyBlocks.ifBlockIsAtTheBottom(this)){ct.stickyBlocks.blockAtFooterHandler(this,true);ct.stickyBlocks._previousBlockTop=(Element.cumulativeOffset(g).top)}});Event.observe(window,"resize",function(){if(g.windowResizeFix!==document.viewport.getDimensions().height){g.windowResizeFix=document.viewport.getDimensions().height;if(ct.stickyBlocks.ifBlockIsAtTheBottom(g)){ct.stickyBlocks.blockAtFooterHandler(g,true);ct.stickyBlocks._previousBlockTop=(Element.cumulativeOffset(g).top)}}});g.positionUpdate=function(){d()};d();c(g)});function c(g){if(ct.stickyBlocks.ifBlockIsAtTheBottom(g)){ct.stickyBlocks.blockAtFooterHandler(g);window.setTimeout(function(){ct.stickyBlocks._previousBlockTop=g.cumulativeOffset().top},20)}}function f(j){var h=($("Wrapper").cumulativeOffset().top+$("Wrapper").getDimensions().height);var g=(j.startTop+j.getDimensions().height);return(h<=g+25)}function e(g){return g.getDimensions().height+10<document.viewport.getHeight()}function d(){var g=ct.stickyBlocks._calculateScrollTop();$A(ct.stickyBlocks._definedStickyBlocks).each(function(h){if(ct.stickyBlocks.ifBlockIsAtTheTop(h)||f(h)){h.style.position="static"}else{if(e(h)){if(ct.stickyBlocks.ifBlockIsAtTheBottom(h)){ct.stickyBlocks.blockAtFooterHandler(h)}else{h.style.position="fixed";h.style.top="0px";if(h.hasClassName("bottomSticky")){h.style.left=ct.leftOffset[0]+"px"}if(a){h.style.position="absolute";h.style.top=(g-$("Wrapper").cumulativeOffset().top-50)+"px";h.style.left=(ct.leftOffset[0]-45)+"px"}}}else{if(h.style.position==="static"){}else{if(ct.stickyBlocks._previousBlockTop>g){ct.stickyBlocks._previousBlockTop=$("filter").cumulativeScrollOffset().top;h.style.top="0px";h.style.position="fixed";if(a){h.style.position="absolute";h.style.top=(g-$("Wrapper").cumulativeOffset().top-50)+"px";h.style.left=(ct.leftOffset[0]-45)+"px"}}else{if(h.style.position!=="absolute"){ct.stickyBlocks._previousBlockTop=(Element.cumulativeScrollOffset(h).top);h.style.top=(Element.cumulativeScrollOffset(h).top-Element.cumulativeOffset($("Wrapper")).top)+"px"}h.style.position="absolute"}}}}})}Event.stopObserving(window,"scroll",d);Event.observe(window,"scroll",d)}},helperFunctions:{getWindowTop:function(a){try{return(a)?window.top[a]:window.top}catch(b){try{return(a)?window.parent[a]:window.parent}catch(b){return(a)?window[a]:window}}},adjustHeight:function(){var c=document.viewport.getDimensions();if($$(".viewController")[0]){var a=$("Home").select("aside")[0].getDimensions().height,b=$("Home").select("aside")[1].getDimensions().height,d=c.height;$$(".viewController")[0].style.minHeight=Math.max(a,b,d-100)+"px"}},loadFlashSale:function(a){if(isNaN(parseInt(a))){a=new Date().getTime()}new Ajax.Request("/offermgmt/FSB2C_IN.json?v"+a,{method:"get",onSuccess:function(b){b=JSON.parse(b.responseText);for(var c=0;c<b.length;c++){var d="flashSaleEl-"+b[c].PRODUCT.toLowerCase();if(b[c].FLASHSALEACTIVE=="Y"){$(d).show()}else{$(d).hide()}}}})},disableRightClickOnElement:function(a){if(a!==undefined){a.setAttribute("oncontextmenu","return false")}},loadJS:function(c,d){var a=document.createElement("script"),b;a.setAttribute("src",c);if(d){a.onreadystatechange=a.onload=function(){if(!b){d()}b=true}}document.getElementsByTagName("head")[0].appendChild(a)},imageToDiv:function(d,g,c){var f=new Element("div").addClassName("thumbnail");for(var b=0,a=c.length;b<a;b++){f.setAttribute(c[b],g.getAttribute(c[b]))}var e=g.getAttribute("src").replace("(","\\(").replace(")","\\)");f.setStyle({backgroundImage:"url("+e+")"});$(g).remove();d.appendChild(f);ct.helperFunctions.disableRightClickOnElement(f)},paidChannelTracker:function(){var b={};var h=document.createElement("a");h.href=document.referrer;if(document.referrer!=""&&h.host.indexOf("cleartrip")==-1){var e=(ct.cookies.read("__utmz")||"").split("|");for(var f=0;f<e.length;f++){var g=e[f].split("=");if(e[f].indexOf("utmcsr")!=-1){b.utmcsr=g[1]}else{b[g[0]]=g[1]}}var a=b.utmcsr,d=b.utmccn,l=b.utmcmd,k=b.utmcct,j=["source_firstpaidsource","medium_firstpaidsource","campaign_firstpaidsource","content_firstpaidsource","lastchannel"];var c=ct.cookies.read("source_firstsource");if(!c){if(a){ct.cookies.create("source_firstsource",a,30)}if(d){ct.cookies.create("campaign_firstsource",d,30)}if(l){ct.cookies.create("medium_firstsource",l,30)}if(k){ct.cookies.create("content_firstsource",k,30)}for(var f=0;f<j.length;f++){ct.cookies.erase(j[f])}}if(a){ct.cookies.create("source_firstpaidsource",a)}if(l){ct.cookies.create("medium_firstpaidsource",l)}if(d){ct.cookies.create("campaign_firstpaidsource",d)}if(k){ct.cookies.create("content_firstpaidsource",k)}ct.cookies.create("noncleartrip","true")}else{ct.cookies.create("noncleartrip","false")}},store:function(){var a={setItem:function(b,c){if(this.db){this.db.setItem(b,c)}else{ct.cookies.create(b,c)}},getItem:function(b){if(this.db){return this.db.getItem(b)}else{return ct.cookies.read(b)}},removeItem:function(b){if(this.db){this.db.removeItem(b)}else{ct.cookies.erase(b)}},db:window.localStorage};return a},postAnalyticsDataViaAJAX:function(b){var d=window.logUiEvtTimeOut?parseInt(window.logUiEvtTimeOut):1000;var a=window.analyticsHost?window.analyticsHost:"";var c={"Content-type":"application/json"};if(a){c={"Content-Type":"application/x-www-form-urlencoded"}}if(b&&b.indexOf("Bus")==-1){new Ajax.Request(a+"/sink/loguievent",{postBody:b,method:"post",requestHeaders:c})}},formQueryStringHotel:function(h,f,e){var d;if(f===" "){d=""}switch(e){case"modify":if(f==="toggle_open"){d=1}else{d=0}break;case"star":if(f){d=1}else{d=0}break;case"currency":d=f;break;case"priceSlider":d=f;break;case"sortStar":if(f){d=1}else{d=0}break;case"sortByPrice":if(f){d=0}else{d=1}break;default:}var c=new Date().getTime();console.log(sid);var g=sid.substring(3,sid.length);var b="hsr|"+g+"|"+c+"|"+h+"|"+d;if(e==="priceSlider"){b="hsr|"+g+"|"+c+"|"+h+"|"+d[0]+"|"+d[1]}return b},clickToPost:function(f,c,b){var a=ct.helperFunctions.formQueryStringHotel(f,c,b);try{new Ajax.Request("/common/ctclk?c="+a+"",{method:"get"});console.log(a)}catch(d){console.log(d.message)}},showCVVHintCc:function(a,b){if($(b).readAttribute("tuxedo")=="true"){$(b).style.display="";$(b).removeClassName("cvv3 cvv4");$(b).addClassName((a.toLowerCase()=="3")?"cvv4":"cvv3")}else{$(b).style.display="block";switch(a.toLowerCase()){case"3":$(b).innerHTML="<img src='"+baseLink+"/images/cvv_images/cc_amex.gif' alt='American Express Verification Code' />";break;default:$(b).innerHTML="<img src='"+baseLink+"/images/cvv_images/cvv_help.gif' alt='Credit Card Verification Code' />";break}}},getCardType:function(l){var f=l;f=l.replace(/-/g,"");f=f.replace(/ /g,"");l=f.valueOf();if(l===null||l.length<13||l.search(/[a-zA-Z]+/)!=-1){return false}var m=l.split("");m.reverse();var h=0;var b=0;returnValue=true;if(returnValue){var c={1:{identifier:[4],length:[13,16]},2:{identifier:[51,52,53,54,55],length:[16]},3:{identifier:[34,37],length:[15]},4:{identifier:[300,301,302,303,304,305,309,36,38],length:[14]},5:{identifier:[62201],length:[16,19]},8:{identifier:[508,606,607,608,652,653],length:[16,19]}};if(typeof(maestro_bins)=="object"&&maestro_bins.length>0){c["5"]["identifier"]=maestro_bins}if(window.binsJson&&typeof(window.binsJson)=="object"&&window.binsJson.Maestro){c["5"]["identifier"]=window.binsJson.Maestro}if(window.binsJson&&typeof(window.binsJson)=="object"&&window.binsJson.Amex){card_type_amex_bins=new RegExp(window.binsJson.Amex.join("|"))}var k=false;var d=/^(300|301|302|303|304|305|36|38)/,e=d.test(l);for(var j in c){var g=c[j];if((!e&&g.length.indexOf(l.length)!==-1)||(e&&l.length>=14)){for(var a=0;a<g.identifier.length;a++){if(l.substr(0,(g.identifier[a]+"").length)==g.identifier[a]){if(j==3&&window.card_type_amex_bins&&window.card_type_amex_bins.test(l)){window.showAmexBillAddress=false}else{if(j==3){window.showAmexBillAddress=true}}return j;break}}if(j==5){k="others"}}}if(k){return k}else{return false}}return false},getUrlParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)");var b=c.exec(location.search);return b===null?"":decodeURIComponent(b[1].replace(/\+/g," "))},getBinServiceCardType:function(c,b,e,d){var a={VISA:{cardIndex:1,length:19,spacingPattern:[4,4,4,4]},MASTERCARD:{cardIndex:2,length:19,spacingPattern:[4,4,4,4]},"AMERICAN EXPRESS":{cardIndex:3,length:17,spacingPattern:[4,6,5]},"DINERS CLUB INTERNATIONAL":{cardIndex:4,length:16,spacingPattern:[4,6,4]},MAESTRO:{cardIndex:5,length:19,spacingPattern:""},RUPAY:{cardIndex:8,length:19,spacingPattern:[4,4,4,4]}};normalize=function(f){return f.replace(/[ -]/g,"").substr(0,6)};new Ajax.Request("/binmanager/v1/payment/cards?bin="+normalize(c),{method:"get",onSuccess:function(h){try{var k=h.responseJSON;var g=k.issuerType;var f=k.cardType;window.showAmexBillAddress=g=="AMERICAN EXPRESS";if((b&&(!f||b.id.match(RegExp(f,"i"))&&g))||(b&&g&&b.getAttribute("agnosticCardType"))){e.call(b,a[g]["cardIndex"])}else{e.call(b,"others")}}catch(j){e.call(b,d(c))}},onFailure:function(){e.call(b,d(c))}})},showCVVHintDc:function(a,b){if($(b).readAttribute("tuxedo")=="true"){$(b).addClassName("cvv3")}else{$(b).innerHTML="<img src='"+baseLink+"/images/cvv_images/cc_visa.gif' alt='Visa Verification Code' />"}},toHomeForm:function(a,b){ct.cookies.erase("tab");ct.cookies.create("tab",a,365);if(b){window.location.href="http://"+location.host+"/index.shtml"}return false},addRooms:function(q,d,c){if(window.hotelDir==true){var r=new Template('<div class="col col24 rm_info"><p><label class="roomCount">Room #{num}</label></p><p><select id="adults#{num}" name="adults#{num}" size="1" onchange="alterChildren(\'#{num}\')"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></p><p><select id="children#{num}" name="children#{num}" size="1" onchange="alterChildAge(this)"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></p></div>');var o=new Template('<p class="rm_info"><td colspan="2"><table><tr><td colspan="2" class="room_no"><label class="required">Room #{num}:</label></td></tr><tr><td><label for="adults1">Adults <span class="weak">(12+ yrs)</span></label><select id="adults#{num}" name="adults#{num}" size="1" onchange="alterChildren(\'#{num}\')"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></td><td><label for="children1">Children <span class="weak">(0-11 yrs)</span></label><select id="children#{num}" name="children#{num}" size="1" onchange="alterChildAge(this)"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></td></tr></table></td></tr>')}else{if(window.childAge==true){var r=new Template('<tr class="rm_info"><td><span class="roomCount" style="padding-top:0px;">Room #{num}:</span></td><td><select id="adults#{num}" name="adults#{num}" size="1" onchange="alterChildren(\'#{num}\')"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></td><td><select id="children#{num}" name="children#{num}" size="1" onchange="alterChildAge(this)"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></td></tr>');var o=new Template('<tr class="rm_info"><td colspan="2"><table><tr><td colspan="2" class="room_no"><label class="required">Room #{num}:</label></td></tr><tr><td><label for="adults1">Adults <span class="weak">(12+ yrs)</span></label><select id="adults#{num}" name="adults#{num}" size="1" onchange="alterChildren(\'#{num}\')"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></td><td><label for="children1">Children <span class="weak">(0-11 yrs)</span></label><select id="children#{num}" name="children#{num}" size="1" onchange="alterChildAge(this)"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></td></tr></table></td></tr>')}else{var r=new Template('<tr class="rm_info"><td><span class="roomCount" style="padding-top:0px;">Room #{num}:</span></td><td><select id="adults#{num}" name="adults#{num}" size="1" onchange="alterChildren(\'#{num}\')"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></td><td><select id="children#{num}" name="children#{num}" size="1" ><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></td></tr>');var o=new Template('<tr class="rm_info"><td colspan="2"><table><tr><td colspan="2" class="room_no"><label class="required">Room #{num}:</label></td></tr><tr><td><label for="adults1">Adults <span class="weak">(12+ yrs)</span></label><select id="adults#{num}" name="adults#{num}" size="1" onchange="alterChildren(\'#{num}\')"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></td><td><label for="children1">Children <span class="weak">(0-11 yrs)</span></label><select id="children#{num}" name="children#{num}" size="1" ><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></td></tr></table></td></tr>')}}var j=parseInt($F(q),10);var m=($(q).up("form")&&$($(q).up("form")).select(".dynamic_rooms")[0])||$("dynamic_rooms");m=$(m);var b,k,n,f,e;var l=$(q).id.match(/\d+$/);if(m.innerHTML!==""){var x=document.getElementsByClassName("rm_info",m)}else{var x=[]}var w=x.length+1;if(m.innerHTML!==""){var z=document.getElementsByClassName("child_age",m)}else{var z=[]}var p=z.length;var v;var y;if(d=="include"){y=o}else{y=r}if(j>w){for(var u=w+1;u<=j;u++){v=y.evaluate({num:u});if(c){var a="";for(var s=0;s<=c;s++){a+="<td></td>"}v=v.replace("<td></td>",a)}new Insertion.Bottom(m,v)}}else{if(j<w){for(var t=w;t>j;t--){Element.remove(x[t-2])}}}if(j<=p){for(var t=4;t>j;t--){if($$(".age_row"+t)[0]){Element.remove($$(".age_row"+t)[0])}}}},alterChildren:function(d){var b=$("children"+d);var c=b.getElementsByTagName("option");var h=parseInt($F("adults"+d),10);var a=$(b).id.match(/\d+$/);var e=c.length;for(var f=0;f<e;f++){if(parseInt(c[f].value,10)+h>4){b.options[f]=null;--e;--f}}var g;if((f-1)<=(g=4-h)){for(f;f<=g;f++){b.options[f]=new Option(f,f)}}if(window.childAge==true){if(b.options[0].selected==true){if($$(".age_row"+a)[0]){$$(".age_row"+a)[0].remove()}}}},alterChildAge:function(m){if($(m).up("tbody")&&$(m).up("tbody").select("td")){var f=$(m).up("tbody").select("td").length;if(f>6){f=f-1}else{f=3}}if(window.hotelDir==true){var o='<div class="child_age"><div class="childAge"></div></div>';var j=new Template('<p><label id="childLabel#{num}" for="childage#{num}" class="child">Child #{index}</label><select class="ageChild#{num} required" title="Child age" size="1" name="ca#{num}" tabindex="7" id="ageChild#{num}"><option value="0">Age</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option></select></p>')}else{var o='<tr class="child_age"><td colspan="'+f+'"><fieldset class="childrenAge"><table class="childAges"><tbody><tr class="childAgeRow"><td class="childAge" colspan="5"></td></tr></tbody></table></fieldset></td></tr>';var j=new Template('<label id="childLabel#{num}" for="childage#{num}" class="child"><span>Child #{index}</span><select class="ageChild#{num} required" title="Child age" size="1" name="ca#{num}" tabindex="7" id="ageChild#{num}"><option value="0">Age</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option></select></label>')}var b=document.getElementById("dynamic_rooms");var d=parseInt($F(m),10);var h;var g;var a=0;var l=0;var n=$(m).id.match(/\d+$/);var e=[];if($("ageChild"+n)){for(var k=$$(".ageChild1").length;k>=0;k--){if($$(".ageChild"+n)[k]){e.push($$(".ageChild"+n)[k].value)}}}if(d>0){a++;if($$(".rm_info").length==0){if($$(".child_age")[0]){$$(".child_age")[0].remove()}$(b).insert(o);for(var k=0;k<d;k++){a++;h=j.evaluate({num:n,index:(k+1)});$$(".child_age")[0].select(".childAge")[0].insert(h)}if($$(".child_age")[0].select("label").length==1){$($$(".child_age")[0].select("label").first()).addClassName("first");$($$(".child_age")[0].select("label").first()).addClassName("last");$$(".child_age")[0].addClassName("age_row"+n)}else{$$(".child_age")[0].addClassName("age_row"+n);$($$(".child_age")[0].select("label").first()).addClassName("first");$($$(".child_age")[0].select("label").last()).addClassName("last")}if(e.length>0){for(var k=e.length;k>=0;k--){if($$(".ageChild"+n)[k]&&e[l]){$$(".ageChild"+n)[k].options[e[l]].selected=true;l++}}}}else{if($(m).id=="children1"){if($("dynamic_rooms").select(".rm_info")[0].previous(".child_age")){$("dynamic_rooms").select(".rm_info")[0].previous(".child_age").remove()}$$(".rm_info")[0].insert({before:o});for(var k=0;k<d;k++){a++;h=j.evaluate({num:n,index:(d-k)});$$(".child_age")[0].select(".childAge")[0].insert(h);$("dynamic_rooms").select(".rm_info")[0].previous(".child_age").addClassName("age_row"+n);if($$(".child_age")[0].select(".childAge")[0].select("label").length==1){$($$(".child_age")[0].select(".childAge")[0].select("label").first()).addClassName("first");$($$(".child_age")[0].select(".childAge")[0].select("label").last()).addClassName("last")}else{$($$(".child_age")[0].select(".childAge")[0].select("label").first()).addClassName("first");$($$(".child_age")[0].select(".childAge")[0].select("label").last()).addClassName("last")}}if(e.length>0){for(var k=e.length;k>=0;k--){if($$(".ageChild"+n)[k]&&e[l]){$$(".ageChild"+n)[k].options[e[l]].selected=true;l++}}}}else{if($(m).up(".rm_info").next()){var c=$(m).up(".rm_info").next();if(c.hasClassName("child_age")){$(m).up(".rm_info").next().remove()}}$(m).up(".rm_info").insert({after:o});for(var k=0;k<d;k++){a++;h=j.evaluate({num:n,index:(d-k)});$(m).up(".rm_info").next(".child_age").select(".childAge")[0].insert(h)}$(m).up(".rm_info").next(".child_age").addClassName("age_row"+n);if($(m).up(".rm_info").next(".child_age").select("label").length==1){$($(m).up(".rm_info").next(".child_age").select("label").first()).addClassName("first");$($(m).up(".rm_info").next(".child_age").select("label").last()).addClassName("last")}else{$($(m).up(".rm_info").next(".child_age").select("label").first()).addClassName("first");$($(m).up(".rm_info").next(".child_age").select("label").last()).addClassName("last")}if(e.length>0){for(var k=e.length;k>=0;k--){if($$(".ageChild"+n)[k]&&e[l]){$$(".ageChild"+n)[k].options[e[l]].selected=true;l++}}}}}}else{var n=$(m).id.match(/\d+$/);if($$(".age_row"+n)[0]){$$(".age_row"+n)[0].remove()}}ct.validator.parseDomTree($(b))},setSearchCookies:function(j){var g=j.type;var c=j.params;var d=Object.keys(c);var k="";var h="";var a="";var e="";var b="";if(g=="F"){h="flight_sr";e="false";b="&search_date="+ct.dates.toString(new Date())}else{if(g=="MC_F"){h="mc_flight_sr";e="true"}}$A(d).each(function(m,l){k+=((l==0)?"":"&")+m+"="+c[m]});if(b){k+=b}k=encodeURI(k);if(window.productCode!="AG"&&window.productCode!="CP"&&(window.jsSetCookieDomain!=true)){ct.cookies.erase(h);if(e.length>0){ct.cookies.erase("was_mc_search")}a=window.location.hostname;a=a.substr(a.indexOf("."))}var f="";f=window.location.hostname;f=f.substr(f.indexOf("."));ct.cookies.erase(h,f);if(e.length>0){ct.cookies.erase("was_mc_search",f)}ct.cookies.create(h,k,365,a);if(e.length>0){ct.cookies.create("was_mc_search",e,365,a)}},showModalDialog:function(n,l,h,p,b){var d;var k=window.pageYOffset||document.documentElement.scrollTop||0;if(document.all){if(self&&self.pageYOffset){d=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){d=document.documentElement.scrollTop}else{if(document.body){d=document.body.scrollTop}}}function j(s,t){bod=window.top.document.getElementsByTagName("body")[0];bod.style.height=s;bod.style.overflow=t;htm=window.top.document.getElementsByTagName("html")[0];htm.style.height=s;htm.style.overflow=t}function q(s){selects=window.top.document.getElementsByTagName("select");for(i=0;i<selects.length;i++){selects[i].style.visibility=s}}j("100%","hidden");window.scrollTo(0,0);q("hidden")}function c(){if(document.all){try{if(Prototype.Browser.IE){$("TranslucentLayer").style.height=a+"px"}else{$("TranslucentLayer").style.height=(document.body.offsetHeight>a)?document.body.offsetHeight+"px":a+"px"}}catch(s){}}m.style.left=((document.body.offsetWidth-m.offsetWidth)/2)+"px"}Event.observe(window,"resize",c);document.onkeyup=function(s){var s=window.event||s;if(s.keyCode==27){ct.helperFunctions.hideModalDialog()}};function o(){if(b&&b()==false){return}if(document.all){ct.getWindowTop("scrollTo")(0,d);j("auto","auto");q("visible")}Event.stopObserving(window,"resize",c);ct.getWindowTop("document").getElementById("TranslucentLayer").remove();ct.getWindowTop("document").getElementById("ModalFrame").remove();if(Prototype.Browser.IE){window.scrollTo(0,k)}}ct.helperFunctions.hideModalDialog=o;var e=new Element("div",{id:"TranslucentLayer"});$(e).observe("click",o);var m=new Element("div",{id:"ModalFrame"});var g=new Element("div",{"class":"topBorder"});var r=new Element("a",{id:"close",title:ct_i18n.controls.closeWindow});g.appendChild(r);m.appendChild(g);m.appendChild(new Element("iframe",{src:n,frameborder:0,framespacing:0,width:"100%",height:"100%",scrolling:p?"no":"yes",name:"modal_window","class":"spinnerMedium"}));m.setStyle({width:(l||"700px"),height:(h||"70%")});document.body.appendChild(e);document.body.appendChild(m);r.observe("click",function(){ct.getWindowTop("ct").helperFunctions.hideModalDialog()});r.observe("mouseover",function(){r.addClassName("over")});r.observe("mouseout",function(){r.removeClassName("over")});m.style.left=((document.body.offsetWidth-m.offsetWidth)/2)+"px";var f=m.getHeight();var a=$(document).viewport.getHeight();m.setStyle({top:(a-f)*100/(2*a)+"%"});if(Prototype.Browser.IE){e.style.height=a+"px"}else{e.style.height=(document.body.offsetHeight>a)?document.body.offsetHeight+"px":a+"px"}},openPopup:function(b){var a=document.viewport.getDimensions();b=b||{};b.height=b.height||(a.height/2);b.width=b.width||(a.width/2);b.left=b.left||((a.width-b.width)/2);b.top=b.top||((a.height-b.height)/2);b.toolbar=b.toolbar?1:0;b.location=b.location?1:0;b.status=b.status?1:0;b.menubar=b.menubar?1:0;b.scrollbars=b.scrollbars?1:0;b.resizable=b.resizable?1:0;window.open(b.url||"about:blank","wnd"+Math.round(Math.random()*1000),"toolbar="+b.toolbar+",location="+b.location+",status="+b.status+",menubar="+b.menubar+",scrollbars="+b.scrollbars+",resizable="+b.resizable+",width="+b.width+",height="+b.height+",left="+b.left+",top="+b.top)},prefetchResources:function(){$$("link[rel=prefetch]").each(function(a){new Ajax.Request(a.href,{method:"get"})})},showThawteLogo:function(c){var b=new Element("iframe",{src:"/includes/thwarte-logo.html",frameBorder:0,width:"0",height:"0",scrolling:"no"});function a(){var d=b.contentWindow.document||b.document;b.style.width="100%";b.style.height=d.body.scrollHeight+"px"}b.onload=a;b.onreadystatechange=function(){if(b.readyState==="complete"){a()}};if(c){c.appendChild(b)}},logToServer:function(d,a,b){try{new Ajax.Request("/urltrack/"+d+"_"+a,{parameters:b||{},method:"get"})}catch(c){}try{}catch(c){}},logToSummary:function(a,b){try{new Ajax.Request(a,{parameters:b||{},method:"get"})}catch(c){}},resetCurrency:function(b){if(window.disp_currency){function a(){var c=null;if(window.currencies&&window.currencies.all&&window.sell_currency){$A(window.currencies.all).each(function(d){if(d.code===window.sell_currency.code){c=d}})}else{c={};c.name=window.disp_currency.code;c.code=window.disp_currency.code;c.rate=1;c.symbol=window.disp_currency.symbol;if(window.disp_currency.ts&&window.disp_currency.ds&&window.disp_currency.gp){c.ts=window.disp_currency.ts;c.ds=window.disp_currency.ds;c.gp=window.disp_currency.gp}}return c}ct.currentCurrency=a()}if(ct.currentCurrency==null){ct.currentCurrency={name:"Indian Rupees",code:"INR",rate:1,symbol:"Rs.",ts:",",ds:".",gp:"3,2"}}if(b){}},trackLinkClick:function(b){try{setTimeout('window.top.location = "'+$(b).readAttribute("href")+'"',100)}catch(a){}},spotNonCleartripReferrer:function(a){try{var b=window.location.hostname;b=b.substr(b.indexOf("."));if(a&&parent.document.referrer&&parent.document.referrer.indexOf("cleartrip")==-1){ct.cookies.create("r_referer",encodeURIComponent(parent.document.referrer),null,b);ct.cookies.create("r_params",encodeURIComponent(parent.window.location.search.substr(1)),null,b)}else{if(document.referrer&&document.referrer.indexOf("cleartrip")==-1){ct.cookies.create("r_referer",encodeURIComponent(document.referrer),null,b);ct.cookies.create("r_params",encodeURIComponent(window.location.search.substr(1)),null,b)}}}catch(c){}},ie9JumpList:{putUpJumpListBanner:function(c){var h="";var e="jumpListBanner Flash notice";if(c){if(window.ie9JumpListBannerMessaging){h=window.ie9JumpListBannerMessaging}else{h="Get closer to Cleartrip and a cool <strong>cash back of Rs.750</strong> by pinning Cleartrip to your task bar. <a href='http://marketing.cleartrip.com/offers/2011/12/mt-preview-c8db898c2aa2b5187a5970d86444af006ecb2537.php?161719' target='blank'>Click here</a> to know more."}h="<p><img src='"+baseLink+"/images/global/cleartrip_tick.gif' class='msPinSite' height='25'/><img width='18'  src='"+baseLink+"/images/elements/jl-point-arrow.png'  style='display:inline; margin:0; padding:0; padding-right:.8em;' />"+h+"</p>"}else{e="Flash notice";if(window.nonIe9JumpListBannerMessaging){h=window.nonIe9JumpListBannerMessaging}else{h="Download Internet Explorer 9 and make travel even more simple! With Internet Explorer 9 you can pin Cleartrip to your task bar and get <strong>Rs.750 cash back</strong> on your next trip! <a href='http://marketing.cleartrip.com/offers/2011/12/mt-preview-c8db898c2aa2b5187a5970d86444af006ecb2537.php?161719' target='blank'>Click here</a> to know more."}}var b=new Element("div",{"class":e}).update(h);b.className=e;if($("offerDisplay")&&($("ModifySearchWrapper")||window.isIe9OfferPage)){$("offerDisplay").update(b)}if($$(".downloadIe9Link")[0]){var d=window.navigator.userAgent;var g=true;var f=false;var a=false;$A(["Windows NT 6.1","Windows NT 6.0"]).each(function(j){if(d.indexOf(j)!=-1){g=false}});if(g){$A(["Mac OS","Linux"]).each(function(j){if(d.indexOf(j)!=-1){f=true}})}$A(["Windows NT 6.2"]).each(function(j){if(d.indexOf(j)!=-1){a=true}});if(g||f||a){$$(".downloadIe9Link").each(function(j){$(j).observe("click",function(k){Event.stop(k);if(f){ct.helperFunctions.showModalDialog("http://www.cleartrip.com/html/b2c/nonWindowMessage.html","410px","440px",true)}else{if(a){ct.helperFunctions.showModalDialog("http://www.cleartrip.com/html/b2c/newWindowMessage.html","490px","380px",true)}else{ct.helperFunctions.showModalDialog("http://www.cleartrip.com/html/b2c/oldWindowMessage.html","490px","380px",true)}}})})}}},putUpJumpListOfferBanner:function(){var a="/html/b2c/ie9Promo.html";setTimeout(function(){ct.helperFunctions.showModalDialog(a,"490px","380px","false")},10)},forFirstTimeJumpListUser:function(){try{var b=window.location.hostname;b=b.substr(b.indexOf("."));var a=true;var c=ct.cookies.read("jlcookie");var d=ct.cookies.read("jlconfcookie");if(c&&d){a=false}else{if(c==null){ct.cookies.create("jlcookie","true",365)}}if(a){ct.helperFunctions.ie9JumpList.putUpJumpListOfferBanner();ct.cookies.create("jlconfcookie","true",365)}}catch(f){a=false}return a},createBannersNJumpList:function(){try{if(Prototype.Browser.IE&&window.external&&window.external.msIsSiteMode()==true&&window.showIESuccessPopup==true&&(window.navigator.userAgent.indexOf("Windows NT 6.2")==-1)){var b;ct.helperFunctions.ie9JumpList.forFirstTimeJumpListUser();if(window.ie9JumpListItems){window.external.msSiteModeClearJumpList();window.external.msSiteModeCreateJumpList(window.ie9JumpListItems.title);$A(window.ie9JumpListItems.items).each(function(c){window.external.msSiteModeAddJumpListItem(c.desc,c.link,c.favicon,c.view)})}}else{if(Prototype.Browser.IE&&window.external&&(window.external.msIsSiteMode()==false||window.external.msIsSiteMode()==true)&&window.showIESuccessPopup!=true&&(window.navigator.userAgent.indexOf("Windows NT 6.2")==-1)){if(window.external.msIsSiteMode()==false){ct.helperFunctions.ie9JumpList.putUpJumpListBanner(true)}}else{if(window.showIESuccessPopup!=true){ct.helperFunctions.ie9JumpList.putUpJumpListBanner()}}}}catch(a){ct.helperFunctions.ie9JumpList.putUpJumpListBanner()}}},updateTabIndexies:function(b){var a=0;$A($(b).elements).each(function(c){if(c.type!="hidden"){if(Prototype.Browser.IE){$(c).setAttribute("tabIndex",++a)}else{$(c).setAttribute("tabindex",++a)}}})},autoFocusNextField:function(c){var a=Number($(c).readAttribute("tabindex"));var b=c.up("form").select('[tabindex="'+(a+1)+'"]')[0];setTimeout(function(){b.focus()},10)},forceHttpsLinks:function(b){var a=$(a?a:document.body);if(document.location.protocol==="https:"){$(a).select("a.forceHttp").each(function(c){c.href=c.href.replace("https:","http:")});$(a).select("form.forceHttp").each(function(c){c.action=c.action.replace("https:","http:")})}if(document.location.protocol==="http:"){$(a).select("a.forceHttps").each(function(c){c.href=c.href.replace("http:","https:")});$(a).select("form.forceHttps").each(function(c){c.action=c.action.replace("http:","https:")})}},setGAProperties:function(){try{var c=document.location.host.split(".");var a=(window.CT&&window.CT.cookies)?CT.cookies:(window.CT&&window.CT.utils.cookies)?CT.utils.cookies:ct.cookies;if(window.isGaPropertiesSet){return}if(c[0]==="www"&&c[2]==="com"){window._gaq.push(["_setAccount","UA-8292447-1"]);window._gaq.push(["_setDomainName",".cleartrip.com"])}else{if(c[0]==="om"&&c[2]==="com"){if(a.read("lang-pref")=="ar"){window._gaq.push(["_setAccount","UA-16109308-12"])}else{window._gaq.push(["_setAccount","UA-16109308-2"])}}else{if(c[0]==="qa"&&c[2]==="com"){if(a.read("lang-pref")=="ar"){window._gaq.push(["_setAccount","UA-16109308-13"])}else{window._gaq.push(["_setAccount","UA-16109308-4"])}}else{if(c[0]==="bh"&&c[2]==="com"){if(a.read("lang-pref")=="ar"){window._gaq.push(["_setAccount","UA-16109308-10"])}else{window._gaq.push(["_setAccount","UA-16109308-3"])}}else{if(c[0]==="kw"&&c[2]==="com"){if(a.read("lang-pref")=="ar"){window._gaq.push(["_setAccount","UA-16109308-11"])}else{window._gaq.push(["_setAccount","UA-16109308-5"])}}else{if(c[0]==="www"&&c[2]==="sa"){if(a.read("lang-pref")=="ar"){window._gaq.push(["_setAccount","UA-16109308-14"])}else{window._gaq.push(["_setAccount","UA-16109308-8"])}}else{if(c[0]==="www"&&c[2]==="ae"){if(a.read("lang-pref")=="ar"){window._gaq.push(["_setAccount","UA-16109308-9"])}else{window._gaq.push(["_setAccount","UA-16109308-1"])}}else{if(c[2]==="com"){window._gaq.push(["_setAccount","UA-16109308-3"])}}}}}}}}window._gaq.push(["_trackPageview"]);window.isGaPropertiesSet=true}catch(b){}}},genericBlocks:{consentBlock:function(a){if($(a).hasClassName("required")){ct.validator.attachValidation($("consent"),ct_i18n.validate.bookPolicyMsg,function(b){return(b.checked)})}},signupBlock:function(a){ct.validator.attachValidation($("confirmUname"),ct_i18n.validate.confirmEmailMsg,function(){if($F("confirmUname")===""||$F("newUname")===""){return true}return($F("confirmUname")===$F("newUname"))})},intlSearchToBookDaysFind:function(){if(window.intlSearchToBookDays==2){var d="",c="";try{d=$F("origin_autocomplete").split(",")[1].split("-")[0].trim();c=$F("destination_autocomplete").split(",")[1].split("-")[0].trim()}catch(b){}if(d!=""&&c!=""){var a="/searchUtil";new Ajax.Request(a,{method:"post",parameters:"action=searchEnableFlag&source="+d+"&dest="+c,onSuccess:function(e){window.intlSearchToBookValue=e.responseText},onFailure:function(e){}})}}},flightForm:function(flightForm,mcFlightFrom){function isInternational(){if(($F("origin_autocomplete").indexOf(", IN - ")>=0)&&($F("destination_autocomplete").indexOf(", IN - ")>=0)){return false}return true}function modifyDropdowns(){var adultSelection=$F("adults"),childrenSelection=$F("children"),infantsSelection=$F("infants"),i,option;$A($("children").childNodes).each(Element.remove);$A($("infants").childNodes).each(Element.remove);for(i=0;i<=adultSelection;i++){option=new Element("option",{value:i}).update(i);if(infantsSelection==i){option.setAttribute("selected","selected")}$("infants").appendChild(option)}for(i=0;i<(10-adultSelection);i++){option=new Element("option",{value:i}).update(i);if(childrenSelection==i){option.setAttribute("selected","selected")}$("children").appendChild(option)}}function prepopulateForm(){if(window.location.href.split("flights?")[1]&&window.productCode!="CP"&&window.productCode!="AG"){var content=decodeURIComponent(window.location.href.split("flights?")[1]);content=content.gsub(/\+/," ");var searchCookie;if(ct.cookies.read("flight_sr")){searchCookie=ct.cookies.read("flight_sr").toQueryParams("&")}else{searchCookie={}}var domainName="";if(window.productCode!="AG"&&window.productCode!="CP"&&(window.jsSetCookieDomain!=true)){ct.cookies.erase("flight_sr");domainName=window.location.hostname;domainName=domainName.substr(domainName.indexOf("."))}var eraseDomainName="";eraseDomainName=window.location.hostname;eraseDomainName=eraseDomainName.substr(eraseDomainName.indexOf("."));ct.cookies.erase("flight_sr",eraseDomainName);content+="&search_date="+ct.dates.toString(new Date());ct.cookies.create("flight_sr",content,365,domainName)}var flightCookie=ct.cookies.read("flight_sr");var was_oneway_click=ct.cookies.read("was_oneway_click");if(!$(flightForm).hasClassName("no-action-change")){if(window.productCode==="CP"){flightForm.action="/airInterstitial"}else{flightForm.action="/flights/search"}}if(flightCookie){function populateTextField(field,value){if(document.activeElement){if(document.activeElement!==field){field.value=value}}else{field.value=value}}flightCookie=flightCookie.toQueryParams("&");if((was_oneway_click&&was_oneway_click==="false")||(!(was_oneway_click)&&((flightCookie.rnd_one==="R")||(flightCookie.rnd_one==="C")))){if(window.amendments!=true&&flightCookie.depart_date&&!ct.dates.isPast(ct.dates.fromString(flightCookie.depart_date))){populateTextField(flightForm.depart_date,flightCookie.depart_date)}else{if(window.amendments==true){var locArr=window.location.href.split("&");for(var i=0;i<locArr.length;i++){if(locArr[i].indexOf("depart_date")>-1){populateTextField(flightForm.depart_date,locArr[i].split("=")[1])}}}}if(ct.dates.diffDates(ct.dates.toString(new Date()),flightCookie.depart_date)>=0){if(window.amendments!=true&&flightCookie.return_date&&!ct.dates.isPast(ct.dates.fromString(flightCookie.return_date))){populateTextField(flightForm.return_date,flightCookie.return_date)}else{if(window.amendments==true){var locArr=window.location.href.split("&");for(var i=0;i<locArr.length;i++){if(locArr[i].indexOf("return_date")>-1){populateTextField(flightForm.return_date,locArr[i].split("=")[1])}}}}}if($("rnd_trip")){$("rnd_trip").checked=true}makeRoundTrip()}else{if((was_oneway_click&&was_oneway_click==="true")||(!(was_oneway_click)&&(flightCookie.rnd_one==="O"))){$("one_way").checked=true;makeOneWay();if(flightCookie.depart_date&&!ct.dates.isPast(ct.dates.fromString(flightCookie.depart_date))){populateTextField(flightForm.depart_date,flightCookie.depart_date)}}else{if(!flightCookie.rnd_one){$("one_way").checked=true}}}$(flightForm.from).writeAttribute("preselect",flightCookie.from);if(flightForm.origin){flightForm.origin.value=flightCookie.origin||""}flightForm.from.value=flightCookie.from||"";if(flightForm.destination){flightForm.destination.value=flightCookie.destination||""}if(flightForm.to){flightForm.to.value=flightCookie.to||""}if(!flightCookie.search_date){flightCookie.search_date=ct.dates.toString(new Date())}var cookie_search_date_diff=ct.dates.diffDates(ct.dates.toString(new Date()),flightCookie.search_date);if(cookie_search_date_diff==0){flightForm.adults.value=flightCookie.adults||"1"}else{flightForm.adults.value="1"}if(window.productCode==="AG"){if(cookie_search_date_diff==0){flightForm.children.value=flightCookie.children||"0"}else{flightForm.children.value="0"}}else{if(cookie_search_date_diff==0){flightForm.childs.value=flightCookie.childs||"0"}else{flightForm.childs.value="0"}}if(cookie_search_date_diff==0){flightForm.infants.value=flightCookie.infants||"0"}else{flightForm.infants.value="0"}}else{if(flightForm.origin.value===""||flightForm.origin.value===flightForm.origin.readAttribute("selflabel")){var queryParams=window.location.search.replace("?","").toQueryParams();if(flightForm.style.display!="none"&&flightForm.parentNode.style.display!="none"&&(!queryParams.autofocus||queryParams.autofocus!="no")){flightForm.origin.focus()}}if(was_oneway_click){if(was_oneway_click&&was_oneway_click==="false"){$("rnd_trip").checked=true;makeRoundTrip()}else{if(was_oneway_click&&was_oneway_click==="true"){$("one_way").checked=true;makeOneWay()}}}else{$("one_way").checked=true}}}$("adults","children","infants").each(function(dropdown){$A(dropdown.childNodes).each(Element.remove);var startLimit=(dropdown.id==="adults")?1:0;for(var i=startLimit;i<10;i++){dropdown.appendChild(new Element("option",{value:i}).update(i))}});$("adults").observe("change",modifyDropdowns);if(!flightForm.hasClassName("dontprepopulate")){prepopulateForm();modifyDropdowns()}var buildHotelSearchForm=function(hotelForm,flightForm){var dest=flightForm.destination.value;var city=dest.split(",")[0],countryCode=((dest.split(",")[1]).split("-")[0]).strip();var chk_out;if($("rnd_trip").checked&&flightForm.return_date.value!==""&&flightForm.return_date.value!==flightForm.return_date.readAttribute("selflabel")){if(flightForm.depart_date.value===flightForm.return_date.value){var ret=ct.dates.fromString(flightForm.depart_date.value);ret.setDate(ret.getDate()+1);chk_out=ct.dates.toString(ret)}else{chk_out=flightForm.return_date.value}}else{var ret=ct.dates.fromString(flightForm.depart_date.value);ret.setDate(ret.getDate()+1);chk_out=ct.dates.toString(ret)}var adlt=parseInt(flightForm.adults.value,10);var chld=(parseInt(flightForm.childs.value,10)+parseInt(flightForm.infants.value,10));var attrib={city:city,country:countryCode,chk_in:flightForm.depart_date.value,chk_out:chk_out,num_rooms:"1",adults1:(adlt>2?2:adlt),children1:(chld>2?2:chld)};Object.keys(attrib).each(function(key){hotelForm.appendChild(new Element("input",{type:"hidden",name:key,value:attrib[key]}))});ct.cookies.create("hotel_sr",$H(attrib).toQueryString(),365)};$(flightForm).observe("submit",function(event){if(window.amendments!==true){if(!(flightForm.errors&&flightForm.errors.length>0)&&!$(flightForm).hasClassName("noCookie")){if($("searchHotels")&&$("searchHotels").checked&&$("comboHotelSearch")&&window.productCode!=="CP"){buildHotelSearchForm($("comboHotelSearch"),flightForm);var hotelWindow=window.open("/hotels","hotelSearchPage","left=224,top=168,width=800,height=400,outerWidth=800,outerHeight=500,toolbar=yes,location=yes,scrollbars=yes,resizable=yes,directories=yes,personalbar=yes,status=yes");if(hotelWindow){$("comboHotelSearch").submit();hotelWindow.focus()}else{alert("Oops.. Looks like your browser blocked our hotel search results window.")}}ct.cookies.erase("was_oneway_click");ct.cookies.create("was_mc_search","false",365);var flight_srString=$(flightForm).serialize();var searchCookie;if(ct.cookies.read("flight_sr")){searchCookie=ct.cookies.read("flight_sr").toQueryParams("&")}else{searchCookie={}}var domainName="";if(window.productCode!="AG"&&window.productCode!="CP"&&(window.jsSetCookieDomain!=true)){ct.cookies.erase("flight_sr");domainName=window.location.hostname;domainName=domainName.substr(domainName.indexOf("."))}var eraseDomainName="";eraseDomainName=window.location.hostname;eraseDomainName=eraseDomainName.substr(eraseDomainName.indexOf("."));ct.cookies.erase("flight_sr",eraseDomainName);flight_srString+="&search_date="+ct.dates.toString(new Date());ct.cookies.create("flight_sr",flight_srString,365,domainName)}if(flightForm.hasClassName("external_offers")&&window.productCode!=="CP"&&window.productCode!=="AG"){flightForm.action="http://www.cleartrip.com/flights/search"}}else{if(window.amendments==true){event.preventDefault();locationArr=window.location.href.split("&");for(var i=0;i<locationArr.length;i++){if(locationArr[i].indexOf("depart_date")>-1){locationArr[i]="depart_date="+$("dpt_date").value}if(locationArr[i].indexOf("return_date")>-1){locationArr[i]="return_date="+$("rtn_date").value}}locationArr=locationArr.join("&").replace("noresults","flights");window.src=locationArr;window.parent.location.href=locationArr}}});if($("adv_link")){$("adv_link").observe("click",function(event){setAdvCookie();$("advanced_search1").toggle();$("adv_link").toggleClassName("toggle_open");$("adv_link").toggleClassName("toggle_closed")})}(function(){var advanced=ct.cookies.read("adv1");if($("adv_link")&&advanced==="off"&&$("advanced_search1").style.display==="none"){$("advanced_search1").toggle();$("adv_link").toggleClassName("toggle_open");$("adv_link").toggleClassName("toggle_closed")}})();var attachValidation=ct.validator.attachValidation;attachValidation($("destination_autocomplete"),ct_i18n.validate.orgDestSameMsg,function(){if(($F("from")!=="")&&($F("to")!=="")){return $F("from")!==$F("to")}else{return true}});attachValidation($("infants"),ct_i18n.validate.infantAdultNumMsg,function(){return $F("infants")<=$F("adults")});attachValidation($("dpt_date"),ct_i18n.validate.intrFlightDepDate,function(){if((!isInternational())||(!ct.validator.validationConditions.requiredFieldCondition($("origin_autocomplete"))||!ct.validator.validationConditions.requiredFieldCondition($("destination_autocomplete")))){return true}else{if(!ct.dates.isValidDateString($F("dpt_date"))){return true}else{var intlDate;var minDepDate=ct.dates.fromString($("dpt_date").readAttribute("mindate"));minDepDate.setDate(minDepDate.getDate()+0);if(window.intlSearchToBookValue){intlDate=window.intlSearchToBookValue}else{if(window.intlSearchToBookDays==null){window.intlSearchToBookDays=0}intlDate=window.intlSearchToBookDays}return(ct.dates.diffDates($("dpt_date").readAttribute("mindate"),$F("dpt_date")))>=intlDate}}});function toggleModifySearch(){if(typeof(flightType)!="undefined"){_gaq.push(["_trackEvent","Flight","ModifySearch",""+flightType])}$("modify_search_open").toggle();$("mod_link").toggleClassName("toggle_open");$("mod_link").toggleClassName("toggle_closed");ct.stickyBlocks.recalculateTop($("filter"))}if($("rnd_trip")){$("rnd_trip").observe("click",makeRoundTrip)}if($("one_way")){$("one_way").observe("click",makeOneWay)}if($("mod_link")){$("mod_link").observe("click",toggleModifySearch)}function savedSearch(){if($("save_search")){if($("save_search").innerHTML.length!=0){$("save_search").remove()}$("save_search").toggle()}new Ajax.Request(savedSearchUrl,{method:"get",onSuccess:function(searchData){var searchItem;eval("searchItem ="+searchData.responseText);$("Header").appendChild(new Element("div",{id:"save_search",style:"top: 24px; left: 800px; *left: 850px;"}));$("save_search").style.left=$("savedSearch").offsetLeft+"px";for(var i=0;i<searchItem.records.length;i++){if(searchItem.records[i].sc_return_date==="null"){$("save_search").appendChild(new Element("a",{href:"http://"+document.location.host+"/search/flights/"+searchItem.records[i].url}).update(searchItem.records[i].fromcity+" - "+searchItem.records[i].tocity+"<br />")).appendChild(new Element("span",{style:"font-size:9px;color:#A3A3A3;"}).update(searchItem.records[i].sc_depart_date))}else{$("save_search").appendChild(new Element("a",{href:"http://"+document.location.host+"/search/flights/"+searchItem.records[i].url}).update(searchItem.records[i].fromcity+" - "+searchItem.records[i].tocity+" - "+searchItem.records[i].fromcity+"<br />")).appendChild(new Element("span",{style:"font-size:9px;color:#A3A3A3;"}).update(searchItem.records[i].sc_depart_date+" - "+searchItem.records[i].sc_return_date))}}},onFailure:function(searchData){alert("Something went wrong")}})}if($("savedSearch")){$("savedSearch").observe("click",savedSearch)}if($("close_link")){$("close_link").observe("click",toggleModifySearch)}if(!ct.genericBlocks.flightForm.helpers){ct.genericBlocks.flightForm.helpers={}}var helpers=ct.genericBlocks.flightForm.helpers;function makeOneWay(){$("rtn_date").setAttribute("disabled","disabled");$("ret_time").setAttribute("disabled","disabled");if($$(".Failure").length==0){$A($("rtn_date").up("td").childNodes).each(function(elem){if(elem.style){elem.style.display="none"}});$A($("ret_time").up("td").childNodes).each(function(elem){if(elem.style){elem.style.display="none"}})}}function makeRoundTrip(){$("rtn_date").removeAttribute("disabled");$("ret_time").removeAttribute("disabled");if($$(".Failure").length==0){$A($("rtn_date").up("td").childNodes).each(function(elem){if(elem.style){elem.style.display=""}});$A($("ret_time").up("td").childNodes).each(function(elem){if(elem.style){elem.style.display=""}})}}helpers.makeOneWay=makeOneWay;helpers.makeRoundTrip=makeRoundTrip;if(mcFlightFrom){function prepareMcForm(){if(mcFlightFrom.rnd_one[2]){mcFlightFrom.rnd_one[2].checked=true}if($$("body")[0].hasClassName("Home")){$$("body")[0].addClassName("MultiCity")}else{$("modify_search_open").addClassName("MultiCity")}$(mcFlightFrom).show();$(flightForm).hide();$(flightForm.readAttribute("errorblockid")).parentNode.style.display="none";$(mcFlightFrom.readAttribute("errorblockid")).parentNode.style.display="";if($("offers_1")){$("offers_1").hide()}if($("tipMessage")){$("tipMessage").hide()}if($("alternateDates")){$("alternateDates").hide()}if(!$(mcFlightFrom).hasClassName("no-action-change")){if(window.productCode==="CP"){mcFlightFrom.action="/airInterstitial"}}}helpers.prepareMcForm=prepareMcForm;if(flightForm.rnd_one&&flightForm.rnd_one[2]){Event.observe(flightForm.rnd_one[2],"click",prepareMcForm)}}else{if(flightForm.rnd_one&&flightForm.rnd_one[2]){Event.observe(flightForm.rnd_one[2],"click",function(){window.location.href="flights/multicity"})}}if(!window.dp){if($("one_way")&&$("one_way").checked){makeOneWay()}else{if($("rnd_trip")&&$("rnd_trip").checked){makeRoundTrip()}else{makeOneWay()}}}else{makeRoundTrip()}function setAdvCookie(){var adv_cookie=ct.cookies.read("adv1");if(adv_cookie===""||adv_cookie===null||adv_cookie==="off"){ct.cookies.erase("adv1");ct.cookies.create("adv1","on",365)}else{ct.cookies.erase("adv1");ct.cookies.create("adv1","off",365)}}},MC_FlightForm:function(l,a){if(!ct.genericBlocks.flightForm.helpers){ct.genericBlocks.flightForm.helpers={}}var c=ct.genericBlocks.flightForm.helpers;function g(){for(var n=1;n<=5;n++){if(($("origin_autocomplete"+n).value!=""&&$("origin_autocomplete"+n).value!=$("origin_autocomplete"+n).readAttribute("selflabel"))&&($("destination_autocomplete"+n).value!=""&&$("destination_autocomplete"+n).value!=$("destination_autocomplete"+n).readAttribute("selflabel"))){if((($F("origin_autocomplete"+n).indexOf(", IN - ")>=0)&&($F("destination_autocomplete"+n).indexOf(", IN - ")>=0))){}else{return true}}}return false}function j(n){if(n.readAttribute("selflabel")){if(n.value===""||n.value===n.readAttribute("selflabel")){return true}}else{if(n.value===""){return true}}return false}function b(n){var o=this.id.charAt(this.id.length-1);if(j($("origin_autocomplete"+o))&&j($("destination_autocomplete"+o))){$("dpt_date_"+o).disabled=true}else{$("dpt_date_"+o).disabled=false}}function m(o,n){if(j($("origin_autocomplete"+o))&&j($("destination_autocomplete"+o))&&(j($("dpt_date_"+o))||$("dpt_date_"+o).disabled)){if((o==3)){if(j($("origin_autocomplete"+(n+1)))&&j($("destination_autocomplete"+(n+1)))&&(j($("dpt_date_"+(n+1)))||$("dpt_date_"+(n+1)).disabled)&&j($("origin_autocomplete"+(n+2)))&&j($("destination_autocomplete"+(n+2)))&&(j($("dpt_date_"+(n+2)))||$("dpt_date_"+(n+2)).disabled)){return true}else{return false}}else{if(o==4){if(j($("origin_autocomplete"+(n+1)))&&j($("destination_autocomplete"+(n+1)))&&(j($("dpt_date_"+(n+1)))||$("dpt_date_"+(n+1)).disabled)){return true}else{return false}}else{return true}}}else{return false}}function k(){var r=$F("mc_adults"),p=$F("mc_children"),n=$F("mc_infants"),o,q;$A($("mc_children").childNodes).each(Element.remove);$A($("mc_infants").childNodes).each(Element.remove);for(o=0;o<=r;o++){q=new Element("option",{value:o}).update(o);if(n==o){q.setAttribute("selected","selected")}$("mc_infants").appendChild(q)}for(o=0;o<(10-r);o++){q=new Element("option",{value:o}).update(o);if(p==o){q.setAttribute("selected","selected")}$("mc_children").appendChild(q)}}function d(){for(var n=3;n<=5;n++){l["depart_date_"+n].disabled=true}var o=ct.cookies.read("mc_flight_sr");if(window.productCode=="AG"){l.action="/flights/search"}if(o){function p(r,q){if(document.activeElement){if(document.activeElement!==r){r.value=q}}else{r.value=q}}o=o.toQueryParams("&");for(var n=1;n<=5;n++){if(o["depart_date_"+n]&&o["depart_date_"+n]!=l["depart_date_"+n].readAttribute("selflabel")&&!ct.dates.isPast(ct.dates.fromString(o["depart_date_"+n]))){l["depart_date_"+n].disabled=false;p(l["depart_date_"+n],o["depart_date_"+n])}$(l["from"+n]).writeAttribute("preselect",o["from"+n]);if(l["origin"+n]){if(o["origin"+n]&&o["origin"+n]!=l["origin"+n].readAttribute("selflabel")){l["origin"+n].value=o["origin"+n]}}if(o["destination"+n]&&o["destination"+n]!=l["destination"+n].readAttribute("selflabel")){l["destination"+n].value=o["destination"+n]}l["from"+n].value=o["from"+n]||"";l["to"+n].value=o["to"+n]||"";if(o["dpt_time_"+n]&&l["dpt_time_"+n]){l["dpt_time_"+n].value=o["dpt_time_"+n]}}l.adults.value=o.adults||"1";l.childs.value=o.childs||"0";l.infants.value=o.infants||"0";if((!($$("body.Home")[0])||$("cities_error"))&&a&&ct.cookies.read("was_mc_search")==="true"){c.prepareMcForm()}}else{if(l.origin1.value===""||l.origin1.value===l.origin1.readAttribute("selflabel")){if(l.style.display!="none"&&l.parentNode.style.display!="none"){l.origin1.focus()}}}}$("mc_adults","mc_children","mc_infants").each(function(p){$A(p.childNodes).each(Element.remove);var o=(p.id==="mc_adults")?1:0;for(var n=o;n<10;n++){p.appendChild(new Element("option",{value:n}).update(n))}});$("mc_adults").observe("change",k);if(a){function e(n){n.checked=true;if($$("body")[0].hasClassName("Home")){$$("body")[0].removeClassName("MultiCity")}else{$("modify_search_open").removeClassName("MultiCity")}$(l).hide();$(a).show();$(l.readAttribute("errorblockid")).style.display="none";$(a.readAttribute("errorblockid")).style.display="";if($("offers_1")){$("offers_1").show()}if($("tipMessage")){$("tipMessage").show()}if($("alternateDates")){$("alternateDates").show()}}c.prepareMainForm=e;Event.observe(l.rnd_one[0],"click",function(){e(a.rnd_one[0]);c.makeRoundTrip()});Event.observe(l.rnd_one[1],"click",function(){e(a.rnd_one[1]);c.makeOneWay()})}else{Event.observe(l.rnd_one[0],"click",function(){ct.cookies.create("was_oneway_click","false",1);if(window.productCode=="CP"){window.location.href="/airSearch"}else{window.location.href="../flights"}});Event.observe(l.rnd_one[1],"click",function(){ct.cookies.create("was_oneway_click","true",1);if(window.productCode=="CP"){window.location.href="/airSearch"}else{window.location.href="../flights"}})}if(!l.hasClassName("dontprepopulate")){d();k()}$(l).observe("submit",function(p){if(!(l.errors&&l.errors.length>0)&&!$(l).hasClassName("noCookie")){var o="";if(window.productCode!="AG"&&window.productCode!="CP"&&(window.jsSetCookieDomain!=true)){ct.cookies.erase("mc_flight_sr");o=window.location.hostname;o=o.substr(o.indexOf("."))}var n="";n=window.location.hostname;n=n.substr(n.indexOf("."));ct.cookies.erase("mc_flight_sr",n);ct.cookies.create("mc_flight_sr",$(l).serialize(),365,o);ct.cookies.create("was_mc_search","true",365)}if(l.hasClassName("external_offers")&&(window.productCode!=="AG"&&window.productCode!=="CP")){l.action="http://www.cleartrip.com/flights/search"}});var f=ct.validator.attachValidation;for(var h=3;h<=5;h++){f($("origin_autocomplete"+h),ct_i18n.validate.requiredMsg.replace("${field}",$("origin_autocomplete"+h).title),function(p){var o=p.id.charAt(p.id.length-1);var n=parseInt(o,10);if(m(o,n)){return true}else{if(j($("origin_autocomplete"+o))){return false}return true}});f($("destination_autocomplete"+h),ct_i18n.validate.requiredMsg.replace("${field}",$("destination_autocomplete"+h).title),function(p){var o=p.id.charAt(p.id.length-1);var n=parseInt(o,10);if(m(o,n)){return true}else{if(j($("destination_autocomplete"+o))){return false}return true}});f($("dpt_date_"+h),ct_i18n.validate.requiredMsg.replace("${field}",$("dpt_date_"+h).title),function(p){var o=p.id.charAt(p.id.length-1);var n=parseInt(o,10);if(m(o,n)){return true}else{if(j($("dpt_date_"+o))){return false}return true}})}for(var h=1;h<=5;h++){f($("destination_autocomplete"+h),ct_i18n.validate.orgDestSameMsg,function(o){var n=o.id.charAt(o.id.length-1);if(($F("from"+n)!=="")&&($F("to"+n)!=="")){return $F("from"+n)!==$F("to"+n)}else{return true}});f($("dpt_date_"+h),ct_i18n.validate.intrFlightDepDate,function(q){var p=q.id.charAt(q.id.length-1);if(!ct.dates.isValidDateString($F("dpt_date_"+p))){return true}else{var o="";if($("dpt_date_"+p).readAttribute("mindate")){o=ct.dates.fromString($("dpt_date_"+p).readAttribute("mindate"))}else{if($("dpt_date_"+p).readAttribute("mindatefieldid")&&$($("dpt_date_"+p).readAttribute("mindatefieldid"))&&$($("dpt_date_"+p).readAttribute("mindatefieldid")).value!=""&&ct.dates.isValidDateString($($("dpt_date_"+p).readAttribute("mindatefieldid")))&&!ct.dates.isPast($($("dpt_date_"+p).readAttribute("mindatefieldid")))){o=ct.dates.fromString($($("dpt_date_"+p).readAttribute("mindatefieldid")).value)}}if(o){if(p==1&&g()){o.setDate(o.getDate()+0);this.message=ct_i18n.validate.intrFlightDepDate;var n;if(window.intlSearchToBookValue){n=window.intlSearchToBookValue}else{if(window.intlSearchToBookDays==null){window.intlSearchToBookDays=1}n=window.intlSearchToBookDays}return(ct.dates.diffDates($("dpt_date").readAttribute("mindate"),$F("dpt_date")))>=n}else{if(p!=1){this.message=ct_i18n.validate.validMinDateMsg.replace("${field}",q.title.toLowerCase()).replace("${date}",q.readAttribute("mindate"));return(ct.dates.fromString($F("dpt_date_"+p))-o)>=0}else{return true}}}else{return true}}});if(h!=1){Event.observe($("origin_autocomplete"+h),"focus",function(n){var o=this.id.charAt(this.id.length-1);var p=$("destination_autocomplete"+(parseInt(o,10)-1));if((this.value==""||this.value===this.readAttribute("selflabel"))&&(p&&p.value!=""&&p.value!=p.readAttribute("selflabel"))){Event.stop(n);this.value=p.value;$("from"+o).value=$("to"+(parseInt(o,10)-1)).value}})}if(h!=1&&h!=2){Event.observe($("origin_autocomplete"+h),"blur",b);Event.observe($("destination_autocomplete"+h),"blur",b)}}f($("infants"),ct_i18n.validate.infantAdultNumMsg,function(){return $F("infants")<=$F("adults")})},hotelForm:function(b){ct.validator.attachValidation($("rooms"),ct_i18n.validate.noOfRoomsMsg,function(){var d=parseInt($F("rooms"),10);for(var c=0;c<d;c++){if($("adults"+(c+1))===null||$("children"+(c+1))===null){return false}}return true});if(!b.hasClassName("dontprepopulate")){(function(){var k=(window.dp)?"dp_sr":"hotel_sr";if(window.location.href.split("hotels/?")[1]){var j=decodeURIComponent(window.location.href.split("hotels/?")[1]);j=j.gsub(/\+/," ");ct.cookies.create(k,j,365)}if(window.location.href.split("package/?")[1]){var j=decodeURIComponent(window.location.href.split("hotels/?")[1]);j=j.gsub(/\+/," ");ct.cookies.create(k,j,365)}if(ct.cookies.read(k)&&!(b.id==="fetch_rates")){var h=ct.cookies.read(k).toQueryParams("&");if(k=="hotel_sr"){b.city.value=h.city||"";b.state.value=h.state||"";b.country.value=h.country||"";b.dest_code.value=h.dest_code||""}if(h.chk_in&&!ct.dates.isPast(ct.dates.fromString(h.chk_in))){b.chk_in.value=h.chk_in}if(h.chk_out&&!ct.dates.isPast(ct.dates.fromString(h.chk_out))){b.chk_out.value=h.chk_out}if(h.ca1){if(typeof h.ca1==="string"){var g=h.ca1;h.ca1=[];h.ca1.push(g)}}if(h.ca2){if(typeof h.ca2==="string"){var e=h.ca2;h.ca2=[];h.ca2.push(e)}}if(h.ca3){if(typeof h.ca3==="string"){var d=h.ca3;h.ca3=[];h.ca3.push(d)}}if(h.ca4){if(typeof h.ca4==="string"){var c=h.ca4;h.ca4=[];h.ca4.push(c)}}$("rooms").value=h.num_rooms||"1";if($("showDebug")&&h.showDebug){$("showDebug").checked=true}if($("NonResident2")!==null&&$("NonResident2")!==undefined){$("NonResident2").checked=false}ct.helperFunctions.addRooms(b.num_rooms);switch(h.num_rooms){case"1":case"2":case"3":case"4":$("adults1").value=h.adults1||"1";$("children1").value=h.children1||"0";alterChildren("1");if(window.childAge==true){alterChildAge($("children1"));if(h.ca1){for(var f=0;f<h.ca1.length;f++){if($$(".ageChild1")[f]){$$(".ageChild1")[f].options[h.ca1[f]].selected=true}}}}if(h.num_rooms=="1"){break}case"2":case"3":case"4":$("adults2").value=h.adults2||"1";$("children2").value=h.children2||"0";alterChildren("2");if(window.childAge==true){alterChildAge($("children2"));if(h.ca2){for(var f=0;f<h.ca2.length;f++){if($$(".ageChild2")[f]){$$(".ageChild2")[f].options[h.ca2[f]].selected=true}}}}if(h.num_rooms=="2"){break}case"3":case"4":$("adults3").value=h.adults3||"1";$("children3").value=h.children3||"0";alterChildren("3");if(window.childAge==true){alterChildAge($("children3"));if(h.ca3){for(var f=0;f<h.ca3.length;f++){if($$(".ageChild3")[f]){$$(".ageChild3")[f].options[h.ca3[f]].selected=true}}}}if(h.num_rooms=="3"){break}case"4":$("adults4").value=h.adults4||"1";$("children4").value=h.children4||"0";alterChildren("4");if(window.childAge==true){alterChildAge($("children4"));if(h.ca4){for(var f=0;f<h.ca4.length;f++){if($$(".ageChild4")[f]){$$(".ageChild4")[f].options[h.ca4[f]].selected=true}}}}break}}})()}$(b).observe("submit",function(r){if(!b.errors){var o=false;if($("NonResident2")!==null&&$("NonResident2")!==undefined&&$("NonResident2").checked){o=true}if(!$(b).hasClassName("no-action-change")){if($F("dest_code")==="WCT"||o){if(window.productCode==="CP"){b.action="hotelInterstitial"}else{b.action="/hotels/search"}}else{if($("price_form")){b.action=$("price_form").value}else{if(window.productCode==="CP"){b.action="hotelInterstitial"}else{b.action="/hotels/search"}}if(b.readAttribute("campaign")){b.action+="?campaign="+b.readAttribute("campaign")}}}if(!window.dp){if(($F("dest_code")=="WCT")||o){var n=$("checkin_date").value.split("/");$("doa_dd").value=n[0];$("doa_mm").value=n[1];$("doa_yy").value=n[2];var j=$("checkout_date").value.split("/");$("dod_dd").value=j[0];$("dod_mm").value=j[1];$("dod_yy").value=j[2];var x=$F("rooms");var q=0;var f=0;for(var w=0;w<parseInt(x,10);w++){q+=parseInt(b["adults"+(w+1)].value,10);f+=parseInt(b["children"+(w+1)].value,10)}$("num_adults").value=Math.ceil(q/parseInt(x,10));$("num_children").value=Math.ceil(f/parseInt(x,10))}}var u="hotel_sr";if(window.dp){$("checkin_date").disabled=false;$("checkout_date").disabled=false;if($("package_flexi_dates")&&$("package_flexi_dates").checked==false){$("checkin_date").value=$("dpt_date").value;$("checkout_date").value=$("rtn_date").value}var d=[],x=$F("rooms"),q=0,f=0,h;for(var w=0;w<parseInt(x,10);w++){q+=parseInt(b["adults"+(w+1)].value,10);chObj=b["ca"+(w+1)];if(chObj){if(chObj.nodeType===1){h=parseInt(chObj.value,10);if(h<2){d.push(h)}else{f+=1}}else{for(var k=0;k<chObj.length;k++){h=parseInt(chObj[k].value,10);if(h<2){d.push(h)}else{f+=1}}}}}$("adults").value=q;$("children").value=f;$("infants").value=d.length;u="dp_sr"}ct.cookies.create(u,$(b).serialize(),365);if(window.dp){return false}if(b.id==="fetch_rates"){Event.stop(r);$("wait_img").show();var v=window.location.href;var l="/hotels/roomrates";if(v.indexOf("allowed_form")!=-1){l=l+"?allowed_form=true"}if(window.isMobileHtml4Request){var m=$("chkin_date").value+"/"+$("chkin_month").value,g=$("chkout_date").value+"/"+$("chkout_month").value;var e=["chk_in","chk_out"];for(var s=0,t=e.length;s<t;s++){var c=new Element("input");c.setAttribute("name",e[s]);c.setAttribute("value",e[s]==="chk_in"?m:g);c.setAttribute("type","hidden");if(this[e[s]]){this[e[s]].remove()}this.appendChild(c)}}if(!window.isMobileHtml4Request){var p=$(b.id).serialize();new Ajax.Request(l,{method:"get",parameters:p+"&ts="+ct.dates.getTimestamp(),onSuccess:function(y){if(window.pageTracker&&window.pageTracker._trackEvent){window._gaq.push(["_trackPageview","/hotels/results-directory"])}if(y.responseText==="NO HOTELS"){$("wait_img").hide();$(b.id).show();$("fetch_rates").enable();$("RoomRatesTable").innerHTML="<p><strong>Sorry, we couldn't find any available rooms for the dates you picked.</p></strong><p>You can try again with different dates.</p>"}else{$("wait_img").hide();$("RoomRatesTable").innerHTML=y.responseText;b.hide()}$("getRatesButton").enable();if(window.Effect){new Effect.Appear("RoomRatesTable")}else{$("RoomRatesTable").style.display="block"}},onFailure:function(y){$("fetch_rates").enable();$("wait_img").hide();if(window.pageTracker&&window.pageTracker._trackEvent){window._gaq.push(["_trackPageview","/hotels/results-directory"])}alert("Sorry, we weren't able to get room rates for this hotel at this time. Please try again later.")}});$("getRatesButton").disable()}else{this.action=l;this.method="GET";this.submit()}}}});function a(){$("modify_search_open").toggle();$("mod_link").toggleClassName("toggle_open");$("mod_link").toggleClassName("toggle_closed");ct.stickyBlocks.recalculateTop($("filter"))}if($("mod_link")){$("mod_link").observe("click",a)}if($("close_link")){$("close_link").observe("click",a)}},dynamicPackageForm:function(b){var c=ct.cookies.read("dp_sr");if(c){function e(g,f){if(document.activeElement){if(document.activeElement!==g){g.value=f}}else{g.value=f}}c=c.toQueryParams("&");if(c.depart_date&&!ct.dates.isPast(ct.dates.fromString(c.depart_date))){e(b.depart_date,c.depart_date)}if(ct.dates.diffDates(ct.dates.toString(new Date()),c.depart_date)>=0){if(c.return_date&&!ct.dates.isPast(ct.dates.fromString(c.return_date))){e(b.return_date,c.return_date)}}$(b.from).writeAttribute("preselect",c.from);if(b.origin){b.origin.value=c.origin||""}b.from.value=c.from||"";if(b.dest_code){b.dest_code.value=c.dest_code||""}if(b.city){b.city.value=c.city||""}if(b.state){b.state.value=c.state}if(b.country){b.country.value=c.country}if(!c.search_date){c.search_date=ct.dates.toString(new Date())}}else{if(b.origin.value===""||b.origin.value===b.origin.readAttribute("selflabel")){if(b.style.display!="none"&&b.parentNode.style.display!="none"){b.origin.focus()}}}if($("adv_link")){$("adv_link").observe("click",function(f){a();$("advanced_search1").toggle();$("adv_link").toggleClassName("toggle_open");$("adv_link").toggleClassName("toggle_closed")})}if($("package_flexi_dates")){$("package_flexi_dates").checked=false;if($("package_flexi_dates").checked==false){$("checkin_date").disabled=true;$("checkout_date").disabled=true}$("package_flexi_dates").observe("click",function(f){$("hotelDates").toggle();if($("package_flexi_dates").checked==true){$("checkin_date").disabled=false;$("checkout_date").disabled=false}else{$("checkin_date").disabled=true;$("checkout_date").disabled=true}})}(function(){var f=ct.cookies.read("adv1");if($("adv_link")&&f==="off"&&$("advanced_search1").style.display==="none"){$("advanced_search1").toggle();$("adv_link").toggleClassName("toggle_open");$("adv_link").toggleClassName("toggle_closed")}})();var d=ct.validator.attachValidation;if(!window.dp){d($("destination_autocomplete"),ct_i18n.validate.orgDestSameMsg,function(){if(($F("from")!=="")&&($F("to")!=="")){return $F("from")!==$F("to")}else{return true}})}d($("checkout_date"),ct_i18n.validate.validCheckoutDateMsg.replace("${field}","checkout date"),function(){if(ct.dates.fromString($F("checkout_date"))-ct.dates.fromString($F("checkin_date"))>=1){return true}else{this.errorMessage=ct_i18n.validate.validCheckoutDateMsg.replace("${field}","checkout date").replace("${date}",$("checkin_date").value);return false}});d($("dpt_date"),ct_i18n.validate.validCheckinDateMsg.replace("${field}","depart date"),function(){if(ct.dates.fromString($F("rtn_date"))-ct.dates.fromString($F("dpt_date"))>=1){return true}else{this.errorMessage=ct_i18n.validate.validCheckinDateMsg.replace("${field}","depart date").replace("${date}",$("rtn_date").value);return false}});d($("checkout_date"),ct_i18n.validate.validCheckinDateMsg.replace("${field}","checkout date").replace("${date}",$("rtn_date").value),function(){if(ct.dates.fromString($F("rtn_date"))-ct.dates.fromString($F("checkout_date"))>=0){return true}else{this.errorMessage=ct_i18n.validate.validCheckinDateMsg.replace("${field}","checkout date").replace("${date}",$("rtn_date").value);return false}});d($("checkin_date"),ct_i18n.validate.validCheckinDateMsg.replace("${field}","checkin date").replace("${date}",$("rtn_date").value),function(){if(ct.dates.fromString($F("rtn_date"))-ct.dates.fromString($F("checkin_date"))>=1){return true}else{this.errorMessage=ct_i18n.validate.validCheckinDateMsg.replace("${field}","checkin date").replace("${date}",$("rtn_date").value);return false}});function a(){var f=ct.cookies.read("adv1");if(f===""||f===null||f==="off"){ct.cookies.erase("adv1");ct.cookies.create("adv1","on",365)}else{ct.cookies.erase("adv1");ct.cookies.create("adv1","off",365)}}ct.genericBlocks.hotelForm(b)},trainForm:function(d){var e=ct.validator.attachValidation;e($("train_adults"),ct_i18n.validate.maxPassengersMsg,function(){return(+$F("train_adults")+(+$F("train_children"))+(+$F("train_male_seniors"))+(+$F("train_female_seniors")))<=6});e($("train_adults"),ct_i18n.validate.minPassengersMsg,function(){return(+$F("train_adults")+(+$F("train_children"))+(+$F("train_male_seniors"))+(+$F("train_female_seniors")))>0});e($("to_station"),ct_i18n.validate.orgDestSameMsg,function(){if(ct.validator.validationConditions.requiredFieldCondition($("from_station"))&&ct.validator.validationConditions.requiredFieldCondition($("to_station"))){return $F("from_station")!==$F("to_station")}else{return true}});e($("from_station"),ct_i18n.validate.trainsFromSugListMessage,function(){var f=$("from_station1").value;if(f==""){return false}else{if(f==true){return true}}return true});e($("to_station"),ct_i18n.validate.trainsToSugListMessage,function(){var f=$("to_station1").value;if(f==""){return false}else{if(f==true){return true}}return true});function b(){if(window.location.href.split("trains#")[1]){var g=decodeURIComponent(window.location.href.split("trains#")[1]);g=g.gsub(/\+/," ");ct.cookies.create("train_sr",g,365)}var f=ct.cookies.read("train_sr");if(f){function h(l,k,j){if(document.activeElement){if(document.activeElement!==l){l.value=k;if(j){j.value=true}}}else{l.value=k;if(j){j.value=true}}}f=f.toQueryParams("&");if(f.from_station){h(d.from_station,f.from_station,d.from_station1)}if(f.to_station){h(d.to_station,f.to_station,d.to_station1)}if(f.depart_date&&!ct.dates.isPast(ct.dates.fromString(f.depart_date))){h(d.depart_date,f.depart_date,null)}d.adults.value=f.adults||"1";d.children.value=f.children||"0";d.male_seniors.value=f.male_seniors||"0";d.female_seniors.value=f.female_seniors||"0";d["train[class]"].value=f["train[class]"]||""}}var a;if(a=d.select("button.loading")[0]){a.removeClassName("loading")}if(!d.hasClassName("dontprepopulate")){b()}function c(){$("modify_search_open").toggle();$("mod_link").toggleClassName("toggle_open");$("mod_link").toggleClassName("toggle_closed");ct.stickyBlocks.recalculateTop($("filter"))}if($("mod_link")){$("mod_link").observe("click",c)}if($("close_link")){$("close_link").observe("click",c)}$(d).observe("submit",function(){if(!d.ct_validationFailed){if(window.productCode!="AG"&&window.productCode!="CP"){var f=decodeURIComponent($(d).serialize()).toQueryParams();ct.trackers.mixpanelTrackingData.numAdults=f.adults;ct.trackers.mixpanelTrackingData.numChildren=f.children;ct.trackers.mixpanelTrackingData.numSeniorMen=f.male_seniors;ct.trackers.mixpanelTrackingData.numSeniorWomen=f.female_seniors;ct.trackers.mixpanelTrackingData.fromStation=f.from_station;ct.trackers.mixpanelTrackingData.toStation=f.to_station;ct.trackers.mixpanelTrackingData.departureDate=f.depart_date;ct.trackers.mixpanelTrackingData.trainClass=f["train[class]"];if($("rail_search").up("#Home").hasClassName("modifySearch")){ct.trackers.trackMixpanelEvent("T_Search_Modified",{})}else{ct.trackers.trackMixpanelEvent("T_Search_Clicked",{})}}ct.cookies.create("train_sr",$(d).serialize(),365);if($("trainFormButton")){$("trainFormButton").addClassName("loading")}}});ct.helperFunctions.updateTabIndexies(d);$(d["train[class]"]).observe("change",function(){ct.helperFunctions.autoFocusNextField(this)});ct.helperFunctions.trainStationSelectionHandler=function(f,g){ct.helperFunctions.autoFocusNextField(g)}},globalNavLinks:function(){var a=/dp.cleartirp.com|vegas.cleartrip.com/.test(window.location.hostname)?"dev-usermisc":"usermisc";if(ct.cookies.read(a)&&unescape(ct.cookies.read(a)).split("|")[0]=="SIGNED_IN"){}if($("global_signout")&&(window.productCode!="CP"&&window.productCode!="AG"&&(!window.isWL))){$("global_signout").observe("click",function(b){b.stop();var c=decodeURIComponent(ct.cookies.read("userid")).split("|")[4];_gaq.push(["_trackEvent","account_users","signout",c]);if(ct.cookies.read("fb")){FB.getLoginStatus(function(d){if(d.status=="connected"){FB.logout(function(e){window.location.href="/signout"})}else{window.location.href="/signout"}})}else{window.location.href="/signout"}})}},primaryNavFlyoutMenu:function(){if($("MainTabs")||$("PrimeMainTabs")){if(window.productCode==="AG"){var a=$($("PrimeMainTabs").select("li")[$("PrimeMainTabs").childElements().length-1])}else{var a=$($("MainTabs").select("li")[$("MainTabs").childElements().length-1])}if($("more_menu")&&a){$("more_menu").setStyle({top:(a.cumulativeOffset().top+a.getHeight()+((window.productCode==="AG")?((Prototype.Browser.IE)?1:0):6))+"px",left:a.cumulativeOffset().left+"px"});$(a.getElementsByTagName("a")[0]).observe("click",function(b){if($("more_menu").style.display==="none"){$("more_menu").style.display="block";$(a).addClassName("show_menu");ct.dom.addIEIframeFix($("more_menu"))}else{$("more_menu").style.display="none";ct.dom.removeIEIframeFix($("more_menu"));$(a).removeClassName("show_menu")}b.stop()});Event.observe(document,"click",function(){if($("more_menu").style.display==="block"){$("more_menu").style.display="none";ct.dom.removeIEIframeFix($("more_menu"));$(a).removeClassName("show_menu")}})}}if($("moreProductsLink")){Event.observe("moreProductsLink","click",function(b){$("moreProductsLink").toggleClassName("current");if(!$("tMoreProducts")){$$(".moreProducts")[0].toggle()}else{$("tMoreProducts").toggle()}b.stop()});Event.observe(document,"click",function(){if(!$("tMoreProducts")){if($$(".moreProducts")[0].style.display!="none"){$$(".moreProducts")[0].style.display="none";$("moreProductsLink").removeClassName("current")}}else{if($("tMoreProducts").style.display!="none"){$("tMoreProducts").style.display="none";$("moreProductsLink").removeClassName("current")}}})}},accountFlyoutHTML:function(){var a=new Element("div",{id:"AccountMenu"});var c=new Element("ul");var b=new Element("li").update('<a href="/account/trips/list">Upcoming Trips</a>');c.appendChild(b);b=new Element("li").update('<a href="/account/profile">My Profile</a>');c.appendChild(b);b=new Element("li").update('<a href="/account/preferences">My Preferences</a>');c.appendChild(b);a.appendChild(c);a.insert("<hr/>");c=new Element("ul");b=new Element("li").update('<a href="/signout" id="global_signout">Sign out</a>');c.appendChild(b);a.appendChild(c);return a},accountFlyoutMenuV2:function(b){var a,f,d,c;b=b||$("userAccountNav");var h=/dp.cleartirp.com|vegas.cleartrip.com/.test(window.location.hostname)?"dev-usermisc":"usermisc";if(b){a=$("userAccountNavTmpl"),f={};try{if(window.location.pathname=="/"||window.location.pathname=="/hotels"||window.location.pathname=="/flights"||window.location.pathname=="/account"||window.location.pathname=="/packages"||window.location.pathname=="/trains"||window.location.pathname=="/buses"){if(ct.cookies.read("ct-auth")&&!ct.cookies.read("usermisc")){ct.cookies.erase("ct-auth",("."+window.location.host.split(".").splice(1,2).join(".")));ct.cookies.erase("userid",("."+window.location.host.split(".").splice(1,2).join(".")));ct.cookies.erase("ct-auth",window.location.host);ct.cookies.erase("userid",window.location.host)}}}catch(g){}f.showLang=false;f.is_in_domain=window.is_in_domain;f.india=true;if(ct.cookies.read(h)&&unescape(ct.cookies.read(h)).split("|")[0]=="SIGNED_IN"){f.isSignedIn=true;f.info=unescape(ct.cookies.read("userid")).split("|");f.screen_name=unescape(ct.cookies.read("userid")||"Your account").split("|");f.screen_name=f.screen_name[1]||f.screen_name[0];if(f.info[2]){(f.info[2]=="M")?f.gender="man_24":f.gender="woman_24"}if(f.info[3]){f.profileLink=f.info[3]}if(ct.cookies.read("ct_rt")=="E"){f.elite=true}}else{if(ct.cookies.read("unconfirmed-email")){f.isUnConfirmed=true;f.isUnSignedIn=true;f.user_id=unescape(ct.cookies.read("unconfirmed-email"));f.screen_name="Guest"+(ct.cookies.read("unconfirmed-email"))?(" ("+unescape(ct.cookies.read("unconfirmed-email"))+")"):""}else{f.isUnSignedIn=true}}b.update(Mustache.to_html(a.innerHTML,f));$.userNavReady=true;ct.helperFunctions.forceHttpsLinks(b);d=$("userAccountMenu");c=$("userAccountLink");$globalSignout=$("global_signout");if(c){Event.observe(c,"click",function(e){d.toggle();c[((d.style.display!="none")?"add":"remove")+"ClassName"]("current");e.stop()});Event.observe(document,"click",function(e){if(d.style.display!="none"){d.style.display="none";$("userAccountLink").removeClassName("current")}})}if($globalSignout){Event.observe($globalSignout,"click",function(e){e.stop();window.location.href="/signout"})}}},accountFlyoutMenu:function(){try{if($("global")){if($("AccountMenuLink")){var a=$("AccountMenuLink");document.body.appendChild(new Element("div",{id:"AccountMenu",style:"display:none"}));if($("PrimaryIconNavigation")){$("AccountMenu").setStyle({top:($(a).cumulativeOffset().top+$(a).getHeight()+12)+"px",left:($(a).cumulativeOffset().left+($("global").select("li")[1].getWidth()-25))+"px"})}$(a).observe("click",function(c){if($("AccountMenu").style.display==="none"){$("AccountMenu").style.display="block";$(a).addClassName("on");ct.dom.addIEIframeFix($("AccountMenu"))}else{$(a).removeClassName("on");ct.dom.removeIEIframeFix($("AccountMenu"));$("AccountMenu").style.display="none"}if($("DomainOptions")){if($("DomainOptions").style.display=="block"){$("DomainOptions").style.display="none";ct.dom.removeIEIframeFix($("DomainOptions"));$("SetDomain").removeClassName("on")}}c.stop()});Event.observe(document,"click",function(c){if($("AccountMenu").style.display==="block"){$("AccountMenu").style.display="none";ct.dom.removeIEIframeFix($("AccountMenu"));$(a).removeClassName("on")}});Event.observe(window,"resize",function(){if($("PrimaryIconNavigation")){$("AccountMenu").setStyle({top:($(a).cumulativeOffset().top+$(a).getHeight()+12)+"px",left:($(a).cumulativeOffset().left+($("global").select("li")[1].getWidth()-25))+"px"});if($("AccountMenu").style.display=="block"){$(a).addClassName("on")}}})}if($("displayName")){Event.observe("displayName","click",function(c){$("displayName").toggleClassName("current");$("userAccountMenu").toggle();c.stop()});Event.observe(document,"click",function(c){if($("userAccountMenu").style.display!="none"){$("userAccountMenu").style.display="none";$("displayName").removeClassName("current")}})}}}catch(b){}},languageFlyoutMenu:function(){if($("SetDomain")){var b=document.location.hostname;var e="in";var h="";var c=["bh","qa","kw","om","sa"];var j=function(){var l="/countryPicker?cn="+e.toUpperCase();if(window.sourceCountry){l+="&preselect=true&sourceCountry="+window.sourceCountry;window.sourceCountry=false}setTimeout(function(){ct.helperFunctions.showModalDialog(l,((Prototype.Browser.IE)?"541px":"540px"),"440px","false")},10)};if(c.indexOf(b.split(".")[0].substr(0,2))!=-1){h=c[c.indexOf(b.split(".")[0].substr(0,2))]}if(b.split(".").length==3){if(h){e=h}else{if(b.split(".")[2]=="com"){e="in"}else{e=b.split(".")[2]}}}$("SetDomain").className="flag "+e.toUpperCase();$("SetDomain").observe("click",j);if(window.sourceCountry){j()}}if($("setLang")){var g,d,k=$("setLang"),f=window.location.href.toQueryParams(),a=false;if(f.hasOwnProperty("l")&&(f.l=="en"||f.l=="ar")){a=true}d=ct.cookies.read("lang-pref");if(d!=null){k.select("a.active").invoke("removeClassName","active");k.select("a[data-langtype='"+d+"']").invoke("addClassName","active")}else{k.select("a[data-langtype='en']").invoke("addClassName","active")}k.select("a").each(function(l){l.observe("click",function(o){var n,m=o.element(),p=m.readAttribute("data-langtype");o.preventDefault();if(!m.hasClassName("active")){ct.cookies.create("lang-pref",p,365);if(a){n=window.location.href.replace(/(l=)[a-z]+/ig,"l="+p);window.location.href=n}else{window.location.reload()}}})})}},parseDomTree:function(a){a=a||document.body;$(document.body).select(".consent").each(ct.genericBlocks.consentBlock);$(document.body).select(".loginBlock").each(ct.genericBlocks.signupBlock);if(window.searchCookieParams){ct.helperFunctions.setSearchCookies(window.searchCookieParams)}if($("AirSearch")&&$("MC_AirSearch")){ct.genericBlocks.flightForm($("AirSearch"),$("MC_AirSearch"));ct.genericBlocks.MC_FlightForm($("MC_AirSearch"),$("AirSearch"))}else{if($("MC_AirSearch")){ct.genericBlocks.MC_FlightForm($("MC_AirSearch"))}else{if($("AirSearch")){ct.genericBlocks.flightForm($("AirSearch"))}}}if($("modify_air_search")&&$("modify_MC_AirSearch")){ct.genericBlocks.flightForm($("modify_air_search"),$("modify_MC_AirSearch"));ct.genericBlocks.MC_FlightForm($("modify_MC_AirSearch"),$("modify_air_search"))}else{if($("modify_MC_AirSearch")){ct.genericBlocks.MC_FlightForm($("modify_MC_AirSearch"))}else{if($("modify_air_search")){ct.genericBlocks.flightForm($("modify_air_search"))}}}if($("home_hotels")){ct.genericBlocks.hotelForm($("home_hotels"))}if($("directory_search")){ct.genericBlocks.hotelForm($("directory_search"))}if($("hotelModifySearch")){ct.genericBlocks.hotelForm($("hotelModifySearch"))}if($("fetch_rates")){ct.genericBlocks.hotelForm($("fetch_rates"))}if($("rail_search")){ct.genericBlocks.trainForm($("rail_search"))}if($("HomeDP")){ct.genericBlocks.dynamicPackageForm($("HomeDP"))}setTimeout(ct.genericBlocks.primaryNavFlyoutMenu,1);setTimeout(ct.genericBlocks.languageFlyoutMenu,1);setTimeout(ct.genericBlocks.accountFlyoutMenu,1);setTimeout(ct.genericBlocks.accountFlyoutMenuV2,1);setTimeout(ct.genericBlocks.globalNavLinks,1)}},controls:{Calendar:function(j,f){var d=$(document.createElement("a"));var n=this,p;if(!f){f={}}f.firstDayOfWeek=f.firstDayOfWeek||(j.readAttribute("firstday")?parseInt(j.readAttribute("firstday"),10):1);f.minDate=f.minDate||(j.readAttribute("mindate")?ct.dates.fromString(j.readAttribute("mindate")):new Date());f.minDateField=f.minDateField||(j.readAttribute("mindatefieldid")?$(j.readAttribute("mindatefieldid")):null);f.calendarCount=f.calendarCount||(j.readAttribute("calendarcount")?parseInt(j.readAttribute("calendarcount"),10):2);f.maxDate=f.maxDate||(j.readAttribute("maxdate")?ct.dates.fromString(j.readAttribute("maxdate")):(new Date(new Date(f.minDate).setFullYear(f.minDate.getFullYear()+2))));f.offsetDays=f.offsetDays||(j.readAttribute("offsetdays")?parseInt(j.readAttribute("offsetdays"),10):0);f.defaultDate=f.defaultDate||(j.readAttribute("defaultdate")?ct.dates.fromString(j.readAttribute("defaultdate")):null);f.nxtOffsetDay=f.nxtOffsetDay||(j.readAttribute("nxtOffsetDay")?parseInt(j.readAttribute("nxtOffsetDay"),10):0);f.rangeFieldId=f.rangeFieldId||(j.readAttribute("rangefieldid")?$(j.readAttribute("rangefieldid")):null);f.currentDate=f.currentDate||(j.readAttribute("currentdate"))||new Date();f.tuxedo=f.tuxedo||(j.readAttribute("tuxedo"))?true:false;var k=null;(function(){if(!j.readAttribute("size")){j.writeAttribute("size",10)}j.writeAttribute("maxdate",ct.dates.toString(f.maxDate));ct.selfLabels.addSelfLabel(j,"dd/mm/yyyy");if(j.nextSibling){j.parentNode.insertBefore(d,j.nextSibling)}else{j.parentNode.appendChild(d)}d.href="javascript: void(0);";d.className="cal_openLink";var v=document.createElement("img");v.alt="Calendar";v.title="Click to open calendar";v.src=baseLink+"/images/global/calendar_icon.gif";d.appendChild(v);d.observe("click",function(w){n.showDatePicker();Event.stop(w)});j.observe("focus",function(w){n.showDatePicker()});j.observe("click",function(w){Event.stop(w)});k=l()})();if(f.minDateField&&$(f.minDateField)){$(f.minDateField).observe("ctCalendar:onChange",function(){if(!j.hasClassName("no_autochange")){if(j.readAttribute("selflabel")){j.removeClassName("selflabel")}var x=ct.dates.fromString($F(f.minDateField));x.setDate(x.getDate()+f.nxtOffsetDay);j.value=ct.dates.toString(x)}if(j.readAttribute("rangefieldid")){var w=$(j.readAttribute("rangefieldid")).value;var y=ct.dates.fromString(w);j.writeAttribute("mindate",ct.dates.toString(y));var v=b();var z=l().getMonth();u(z,v,y,s())}})}function b(){var M=document,D="createElement",x="setAttribute",K="appendChild";function L(N,P){for(var O=0;O<P;O++){N[K](M[D]("col"))}}var v=M[D]("table");v[x]("cellpadding","0");v[x]("cellspacing","0");v[x]("border","0");var A=M[D]("colgroup");L(A,5);v[K](A);A=M[D]("colgroup");A.className="weekend";L(A,2);v[K](A);var C=M[D]("thead");var B=M[D]("tr");var w=[ct_i18n.weekNames.slSu,ct_i18n.weekNames.slM,ct_i18n.weekNames.slTu,ct_i18n.weekNames.slW,ct_i18n.weekNames.slTh,ct_i18n.weekNames.slF,ct_i18n.weekNames.slSa];var G=M[D]("tr");var I=f.firstDayOfWeek;var F=M[D]("th");F[x]("colSpan","7");$(F).addClassName("month");B[K](F);for(var J=0;J<7;J++){I=I%7;var y=M[D]("th");if(J===5||J===6){y.className="weekend"}y[K](M.createTextNode($A(w)[I]));G[K](y);I++}C[K](B);C[K](G);v[K](C);var H=M[D]("tbody");var E=M[D]("tr");for(J=0;J<7;J++){var z=M[D]("td");if(J===5||J===6){z.className="weekend"}z[K](M.createTextNode("\u0020"));E[K](z)}for(J=0;J<6;J++){H[K](E.cloneNode(true))}v[K](H);return v}function o(){var H=document,B="createElement",G="setAttribute",I="appendChild";var z=H[B]("div");z[G]("id","datePickerContainer");z.style.display="block";var x=H[B]("div");x.id="close";$(x).addClassName("dt_control");var A=H[B]("a");A[G]("href","javascript: void(0);");A[G]("id","cal_closeCalendar");A[G]("title",ct_i18n.controls.close);A[I](H.createTextNode(" "));x[I](A);z[I](x);var y=H[B]("div");y.id="previous";$(y).addClassName("dt_control");var D=H[B]("a");D[I](H.createTextNode(" "));D[G]("href","javascript: void(0);");D[G]("id","cal_showPreviousMonth");D[G]("title",ct_i18n.controls.prevMonth);y[I](D);z[I](y);var F=b();var w=H[B]("div");w.setAttribute("id","datePickerWrapper");w.style.overflow="hidden";for(var C=0;C<f.calendarCount;C++){w[I](F.cloneNode(true))}z[I](w);var E=H[B]("div");E.id="next";$(E).addClassName("dt_control");var v=H[B]("a");v[I](H.createTextNode(" "));v[G]("href","javascript: void(0);");v[G]("id","cal_showNextMonth");v[G]("title",ct_i18n.controls.nextMonth);E[I](v);z[I](E);$(z).observe("click",m);return z}function m(v){try{switch(Event.findElement(v,"a").id){case"cal_closeCalendar":n.hideDatePicker();break;case"cal_showPreviousMonth":if(!Event.findElement(v,"a").hasClassName("disabled")){e()}break;case"cal_showNextMonth":if(!Event.findElement(v,"a").hasClassName("disabled")){t()}break;default:h(Event.findElement(v,"a"))}}catch(w){}Event.stop(v)}function q(v){n.hideDatePicker()}function g(v){a(false,j)}function h(w){if(w&&w.timeStamp){var v=new Date(w.timeStamp);var x=(v.getDate())+"/";x+=(v.getMonth()+1)+"/";x+=v.getFullYear();j.value=x;n.hideDatePicker();k=new Date(v);if(j.readAttribute("selflabel")){j.removeClassName("selflabel")}j.fire("ctCalendar:onChange")}}function c(){var x=l();var v=new Date(x);var z=p;while(z<0){z+=12}v.setMonth(z);if(v.getMonth()<=x.getMonth()&&v.getFullYear()<=x.getFullYear()){$("cal_showPreviousMonth").addClassName("disabled")}else{$("cal_showPreviousMonth").removeClassName("disabled")}var y=s();v=new Date(x);var w=p+f.calendarCount-1;while(w>12){w-=12}v.setMonth(w);if(v.getMonth()>=y.getMonth()&&v.getFullYear()>=y.getFullYear()){$("cal_showNextMonth").addClassName("disabled")}else{$("cal_showNextMonth").removeClassName("disabled")}}function e(){var v=b();$("datePickerWrapper").insertBefore(v,$("datePickerWrapper").firstChild);u(p-1,v,l(),s());p--;c();$($("datePickerWrapper").getElementsByTagName("table")[f.calendarCount]).remove();ct.dom.removeIEIframeFix($("datePickerContainer"));ct.dom.addIEIframeFix($("datePickerContainer"))}function t(){var v=b();$("datePickerWrapper").appendChild(v);u(p+f.calendarCount,v,l(),s());p++;c();$($("datePickerWrapper").getElementsByTagName("table")[0]).remove();ct.dom.removeIEIframeFix($("datePickerContainer"));ct.dom.addIEIframeFix($("datePickerContainer"))}function l(){var w;if(f.minDateField){if(ct.dates.isValidDateString($F(f.minDateField))){w=ct.dates.fromString($F(f.minDateField))}else{if($(f.minDateField).readAttribute("mindate")){w=ct.dates.fromString($(f.minDateField).readAttribute("mindate"))}else{w=new Date()}}}else{w=f.minDate}if(w){w.setDate(w.getDate()+f.offsetDays)}if(f.rangeFieldId){if($(f.rangeFieldId).readAttribute("selfLabel")!==$F(f.rangeFieldId)){var v=$(f.rangeFieldId).value;w=ct.dates.fromString(v)}}return new Date(w)}function s(){if(f.maxDate){return new Date(f.maxDate)}else{maxDate=new Date(l());maxDate.setFullYear(maxDate.getFullYear()+1);return maxDate}}function u(A,y,z,C){var v=new Date(z);var x=ct.dates.monthNames;ct.dates.setMonth(v,A);v.setDate(1);A%=12;y.getElementsByTagName("th")[0].appendChild(document.createTextNode(x[A<0?A+12:A]+" "+v.getFullYear()));var B=y.getElementsByTagName("tbody")[0].getElementsByTagName("td");if(ct.dates.isValidDateString($F(j))){k=ct.dates.fromString($F(j))}else{k=l()}var w=f.firstDayOfWeek;$A(B).each(function(D){if(w===v.getDay()&&v.getMonth()===A){if(ct.dates.compare(v,z)===1||ct.dates.compare(v,C)===-1){if(f.tuxedo){var E=document.createElement("span");E.className="disabled";E.appendChild(document.createTextNode(v.getDate()));D.appendChild(E)}else{D.appendChild(document.createTextNode(v.getDate()))}}else{var F=document.createElement("a");F.href="javascript: void(0);";F.timeStamp=v.valueOf();F.appendChild(document.createTextNode(v.getDate()));D.appendChild(F)}if(k.toString()==v.toString()){$(D).addClassName("selected")}if(f.currentDate.toDateString()==v.toDateString()){$(D).addClassName("current")}v.setDate(v.getDate()+1)}else{D.appendChild(document.createTextNode(" "))}w++;w%=7})}function a(v,x){var w=x.form;$A(w.elements).each(function(y){if(v==true){y.ctEnableState=y.disabled;y.disabled=true}else{y.disabled=y.ctEnableState}})}var r=null;this.showDatePicker=function(){if(!j.disabled){this.hideDatePicker();var y=o();if(f.minDateField&&ct.dates.isValidDateString($F(f.minDateField))&&ct.dates.isValidDateString($F(j))&&(Date.parse(ct.dates.fromString($F(f.minDateField)))>Date.parse(ct.dates.fromString($F(j))))){p=ct.dates.fromString($F(f.minDateField)).getMonth()+(ct.dates.fromString($F(f.minDateField)).getFullYear()-l().getFullYear())*12}else{if(ct.dates.isValidDateString($F(j))){p=ct.dates.fromString($F(j)).getMonth()+(ct.dates.fromString($F(j)).getFullYear()-l().getFullYear())*12}else{if(f.defaultDate){p=f.defaultDate.getMonth()+(f.defaultDate.getFullYear()-l().getFullYear())*12}else{p=l().getMonth()}}}document.body.appendChild(y);for(var z=0;z<f.calendarCount;z++){u(p+z,y.getElementsByTagName("table")[z],l(),s())}y.style.position="absolute";if(window.isMobileUA){var x=(window.pageXOffset!==undefined)?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;var B=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;y.style.top=((window.innerHeight/2)-(y.offsetHeight/2))+(B)+"px";y.style.left=((document.body.offsetWidth/2)-(y.offsetWidth/2))+(x)+"px";a(true,j)}else{var A=$(j).cumulativeOffset();var w=document.viewport.getDimensions();var v=y.getDimensions();if((w.height-v.height-A.top)>0){y.style.top=(A.top+$(j).getHeight())+"px"}else{y.style.top=(A.top-v.height)+"px"}if((w.width-A.left-v.width)>0){y.style.left=(A.left)+"px"}else{y.style.right=w.width-A.left-j.getWidth()+"px"}}c();ct.dom.addIEIframeFix(y);if(!window.isMobileUA){$(document.body).observe("click",function(){q()})}else{}}};this.hideDatePicker=function(){if($("datePickerContainer")){$("datePickerContainer").stopObserving("click",m);ct.dom.removeIEIframeFix($("datePickerContainer"));$("datePickerContainer").remove();if(window.isMobileUA){a(false,j)}else{$(document.body).stopObserving("click",q)}}}},AirportsDropdown:function(selectField,options){var self=this;if(!options){options={}}options.showFeaturedAirports=options.showFeaturedAirports||(selectField.readAttribute("showfeatured")&&selectField.readAttribute("showfeatured").toLowerCase()==="no")?false:true;options.preselectAirportCode=options.preselectAirportCode||(selectField.readAttribute("preselect")&&selectField.readAttribute("preselect")!=="")?selectField.readAttribute("preselect"):null;options.cookieSelection=options.cookieSelection||(selectField.readAttribute("cookieselection")&&selectField.readAttribute("cookieselection")==="no")?false:true;try{options.extraValues=options.extraValues||(selectField.readAttribute("extras")&&selectField.readAttribute("extras").strip().length>0)?eval("({"+selectField.readAttribute("extras").strip()+"})"):null}catch(e){options.extraValues=null}if(options.cookieSelection&&selectField.readAttribute("cookiename")){if(selectField.readAttribute("cookiename")===""){throw new Error('Error initializing the airports dropdown. There was no cookie name found to store the selection. Use cookiename="some_cookie_name" to specify the cookie name or cookieselection="no" to disable saving cookies.')}}else{options.cookieName=selectField.readAttribute("cookiename")}ct.validator.attachValidation(selectField,ct_i18n.validate.autocompleteSelectMsg.replace("${list}",selectField.title.toLowerCase()),function(){return $F(selectField)!==""});this.populate=function(){if(selectField.firstChild){selectField.removeChild(selectField.firstChild)}var key;if(options.extraValues){Object.keys(options.extraValues).each(function(key){var optionElem=new Element("option",{value:key}).update(options.extraValues[key]);if(options.preselectAirportCode&&options.preselectAirportCode===options.extraValues[key]){optionElem.setAttribute("selected","selected")}selectField.appendChild(optionElem)})}else{selectField.appendChild(new Element("option",{value:""}).update(ct_i18n.controls.selectPlace))}selectField.appendChild(new Element("option",{value:""}).update("------------"));if(options.showFeaturedAirports){$A(ct.airports.featured).each(function(airport){selectField.appendChild(new Element("option",{value:airport.k}).update(airport.v))});selectField.appendChild(new Element("option",{value:""}).update("------------"))}$A(ct.airports.all).each(function(airport){var optionElem=new Element("option",{value:airport.k}).update(airport.v);if(options.preselectAirportCode&&options.preselectAirportCode===airport.k){optionElem.writeAttribute("selected","selected")}selectField.appendChild(optionElem)})};self.populate()},AutoCompleteTextbox:function(field,options){var keyCodes={up:38,down:40,enter:13,escape:27,tab:9,shift:16};var currentSelectionIndex=0,autoCompleteContainerNodeId="autocompleteOptionsContainer",inProcCalls=[],callTimeoutHandle=null;var indicatorIconPath=baseLink+"/images/indicators/arrows_circle.gif";if(!ct.controls.AutoCompleteTextboxCache){ct.controls.AutoCompleteTextboxCache={}}options=options||{};options.queryUrl=options.queryUrl||field.getAttribute("queryurl")||null;options.valueOnly=options.valueOnly||field.hasClassName("valueOnly");options.includeKeys=options.includeKeys||field.hasClassName("includeKeys");options.idField=options.idField||field.getAttribute("idfield")||null;options.displayRowCount=parseInt(options.displayRowCount||field.getAttribute("displayrows")||10,10);options.minChars=parseInt(options.minChars||field.getAttribute("minchars")||3,10);options.selectionHandler=options.selectionHandler||field.getAttribute("selectionhandler")||null;options.jsfunction=options.jsfunction||field.getAttribute("jsfunction")||null;options.jsfunctionurl=options.jsfunctionurl||field.getAttribute("jsfunctionurl")||null;options.htmlIncluded=options.htmlIncluded||field.hasAttribute("htmlIncluded");options.callBack=options.callBack||field.getAttribute("callback")||null;options.nocache=options.nocache||field.getAttribute("nocache")||false;options.clicktoselect=options.clicktoselect||field.getAttribute("clicktoselect")||false;options.version=options.version||field.getAttribute("version")||"";field.setQueryUrl=function(url){field.setAttribute("queryUrl",url);options.queryUrl=new Template(url)};if($(field).hasClassName("forceKey")){var fkMsg=$(field).readAttribute("forcekeymsg"),forceKeyMsg=(fkMsg)?fkMsg:(ct_i18n.validate.autocompleteNotAvailMsg.replace("${entry}",field.title.toLowerCase()));ct.validator.attachValidation(field,forceKeyMsg,function(){if($(field).value===""){return true}if(field.readAttribute("selfLabel")===$F(field)){return true}return $(options.idField).value})}if(typeof options.selectionHandler==="string"){try{options.selectionHandler=eval(options.selectionHandler)}catch(e){throw new Error("From ct.controls.AutoCompleteTextbox: Unable to understand the selectionhandler attribute.")}}if(!options.idField){throw new Error("From ct.controls.AutoCompleteTextbox: idfield attribute not defined.")}if(!$(options.idField)||$(options.idField).id!==options.idField){field.parentNode.appendChild(new Element("input",{type:"hidden",id:options.idField,name:options.idField}))}if(ct.dom.getParentByTagName(field,"form")){$(ct.dom.getParentByTagName(field,"form")).observe("submit",function(event){if($(autoCompleteContainerNodeId)){event.stop()}})}$(field).observe("blur",function(){if(!options.clicktoselect){if($(autoCompleteContainerNodeId)){keyEnterPress()}removeAutocompleteDropdown()}else{setTimeout(function(){if($(autoCompleteContainerNodeId)&&$(autoCompleteContainerNodeId).getAttribute("referer")=="referer_"+field.id){removeAutocompleteDropdown()}},500)}});$(field).observe("keypress",function(event){if($(autoCompleteContainerNodeId)&&event.keyCode===keyCodes.enter){event.stop()}});$(field).observe("focus",function(event){$(field).select()});if(options.queryUrl||options.jsfunction){if(options.queryUrl){options.queryUrl=new Template(options.queryUrl)}if(options.clicktoselect){$(field).observe("keydown",function(event){field.clicktoselect_oldValue=field.value})}var isListNavigationKey=function(event){if($("autocompleteOptionsContainer")){if(event.keyCode==keyCodes.up||event.keyCode==keyCodes.down||event.keyCode==keyCodes.enter||event.keyCode==keyCodes.escape){return true}}return false};$(field).observe("keyup",function(event){if(options.clicktoselect&&((event.keyCode===keyCodes.shift||event.keyCode===keyCodes.tab)||(field.clicktoselect_oldValue&&field.clicktoselect_oldValue==field.value&&!isListNavigationKey(event)))){return false}field.clicktoselect_oldValue=field.value;var qType="#"+((event.target.readAttribute("queryUrl"))||((event.target.readAttribute("jsfunctionurl"))?(event.target.readAttribute("jsfunction")+"#"+event.target.readAttribute("jsfunctionurl")):event.target.readAttribute("jsfunction")));if(event.keyCode!==keyCodes.enter){$(options.idField).value=""}if($F(field)===""){removeAutocompleteDropdown()}else{if($F(field).length>=options.minChars){var key=$F(field).toLowerCase();if(options.nocache==false&&ct.controls.AutoCompleteTextboxCache[key+qType]){keystrokeHandler(event,ct.controls.AutoCompleteTextboxCache[key+qType])}else{if(inProcCalls["#"+key]){return}else{clearTimeout(callTimeoutHandle);callTimeoutHandle=setTimeout(function(){inProcCalls.push("#"+key);field.setStyle({backgroundPosition:"98% center",backgroundImage:'url("'+indicatorIconPath+'")',backgroundRepeat:"no-repeat"});if(options.queryUrl){new Ajax.Request(options.queryUrl.evaluate({q:key}),{method:"get",onSuccess:function(transport){if(typeof(responseModifier)=="function"){transport.responseText=responseModifier(transport.responseText,field)}ct.controls.AutoCompleteTextboxCache[key+qType]=eval(transport.responseText);inProcCalls.splice("#"+key,1);if(key===$F(field).toLowerCase()){keystrokeHandler(event,ct.controls.AutoCompleteTextboxCache[key+qType])}field.setStyle({backgroundImage:"none"});if(field.id=="origin_autocomplete"||field.id=="destination_autocomplete"){$("adults").value="1";$("children").value="0";$("infants").value="0"}},onFailure:function(){ct.controls.AutoCompleteTextboxCache.splice($A(ct.controls.AutoCompleteTextboxCache).indexOf(key+qType),1)}})}else{if(options.jsfunction){function callback(response){ct.controls.AutoCompleteTextboxCache[key+qType]=response;inProcCalls.splice("#"+key,1);if(key===$F(field).toLowerCase()){keystrokeHandler(event,ct.controls.AutoCompleteTextboxCache[key+qType])}field.setStyle({backgroundImage:"none"})}var functionPointer=eval(options.jsfunction);functionPointer(key,callback,field)}}},200)}}}}})}field.setAttribute("autocomplete","off");function keystrokeHandler(evt,data){var enteredKeyCode=null;try{enteredKeyCode=evt.keyCode}catch(e){}switch(enteredKeyCode){case keyCodes.up:keyUpPress();Event.stop(evt);break;case keyCodes.down:keyDownPress();Event.stop(evt);break;case keyCodes.escape:removeAutocompleteDropdown();Event.stop(evt);break;case keyCodes.enter:if($("autocompleteOptionsContainer")){keyEnterPress(evt);Event.stop(evt)}break;default:showAutocompleteDropdown(filterDataset(data));break}}function filterDataset(dataset){return dataset}function showAutocompleteDropdown(dataSubset){if(dataSubset.length>0){var container;if($(autoCompleteContainerNodeId)){while($(autoCompleteContainerNodeId).firstChild){$($(autoCompleteContainerNodeId).firstChild).remove()}container=$(autoCompleteContainerNodeId);ct.dom.removeIEIframeFix(container)}else{container=new Element("ul",{"class":"aa",style:"visibility: hidden",id:autoCompleteContainerNodeId})}$(container).setAttribute("referer","referer_"+field.id);var iterationCount=(options.displayRowCount<dataSubset.length)?options.displayRowCount:dataSubset.length;for(var i=0;i<iterationCount;i++){var li=new Element("li",{keyName:dataSubset[i].k,index:i}).update(dataSubset[i].d||dataSubset[i].v);li.dataObject=Object.clone(dataSubset[i]);container.appendChild(li)}document.body.appendChild(container);var fieldOffset=field.cumulativeOffset();container.setStyle({top:fieldOffset.top+field.getHeight()+"px",left:fieldOffset.left+"px",position:"absolute",visibility:"visible",width:field.getWidth()+"px"});ct.dom.addIEIframeFix(container);container.observe("click",mouseClickHandler);container.observe("mouseover",mouseOverHandler);highlightSelection()}else{$(options.idField).value="";removeAutocompleteDropdown();if(options.callBack){options.callBack()}}}function mouseClickHandler(event){var actualLi;if(event.findElement("li")&&event.findElement("li").nodeName.toLowerCase()==="li"){actualLi=event.findElement("li")}else{if(event.findElement("ul")&&event.findElement("ul").nodeName.toLowerCase()==="ul"&&event.findElement("ul").id===autoCompleteContainerNodeId&&options.clicktoselect){actualLi=$(autoCompleteContainerNodeId).select("li.highlight")[0]}}if(actualLi){currentSelectionIndex=actualLi.getAttribute("index");highlightSelection();keyEnterPress()}event.stop()}function mouseOverHandler(event){if(event.findElement("li")&&event.findElement("li").nodeName.toLowerCase()==="li"){currentSelectionIndex=event.findElement("li").getAttribute("index");highlightSelection()}event.stop()}function removeAutocompleteDropdown(){if($(autoCompleteContainerNodeId)){ct.dom.removeIEIframeFix($(autoCompleteContainerNodeId));$(autoCompleteContainerNodeId).stopObserving("click",mouseClickHandler);$(autoCompleteContainerNodeId).remove();currentSelectionIndex=0}if(window.isCalendarPage){checkInternational();constructReturn()}}function keyDownPress(){currentSelectionIndex++;highlightSelection()}function keyUpPress(){currentSelectionIndex--;highlightSelection()}function keyEnterPress(evt){if($(autoCompleteContainerNodeId)&&$(autoCompleteContainerNodeId).childNodes[currentSelectionIndex]){var selectedItem=$(autoCompleteContainerNodeId).childNodes[currentSelectionIndex];var pureText="";if(options.htmlIncluded){$A((new Element("div").update(selectedItem.dataObject.v)).childNodes).each(function(_node){if(_node.innerHTML){pureText+=_node.innerHTML}else{if(_node.nodeValue){pureText+=_node.nodeValue}}})}else{pureText=selectedItem.dataObject.v}$(options.idField).value=options.valueOnly?pureText:selectedItem.readAttribute("keyName");field.value=pureText;if(options.selectionHandler){options.selectionHandler(selectedItem.dataObject,field)}if(evt){evt.stop()}}removeAutocompleteDropdown()}function highlightSelection(){if($(autoCompleteContainerNodeId)){var datasetLength=$(autoCompleteContainerNodeId).childNodes.length;currentSelectionIndex=parseInt(currentSelectionIndex,10);if(currentSelectionIndex>=datasetLength){currentSelectionIndex=0}else{if(currentSelectionIndex<0){currentSelectionIndex=datasetLength-1}}$A($(autoCompleteContainerNodeId).childNodes).each(function(li,index){if(index===currentSelectionIndex){li.addClassName("highlight")}else{li.removeClassName("highlight")}})}}},Slider:function(g){var e=$(g).getElementsBySelector("input[type=text]");var b=new Element("div",{"class":"track"});g.appendChild(b);var a=new Element("div",{"class":"leftDisabled"}),n=new Element("div",{"class":"rightDisabled"});var o=parseFloat($(g).readAttribute("minvalue")||0),m=parseFloat($(g).readAttribute("maxvalue")||10),c=parseFloat($(g).readAttribute("stepvalue")||1);var j=0,p=b.getWidth();var s=(p-j)/(m-o);var q=Math.ceil(c*s);function d(){var t=[];var u=j;while(u<p&&q>0){t.push(u);u+=q}t.push(p);return t}function f(t){return((t-o)*s)}function h(v){if(v===j){return o}else{if(v===p){return m}}var u=(v/s)+o;var t=u%c;if(t<c/2){return u-t}else{return u+(c-t)}}g.minValue=o;g.maxValue=m;if(e.length===1){if(g.readAttribute("highlight")&&g.readAttribute("highlight").toLowerCase()==="left"){b.appendChild(n)}else{n=null}if(g.readAttribute("highlight")&&g.readAttribute("highlight").toLowerCase()==="right"){b.appendChild(a)}else{a=null}var r=new Element("div",{"class":"leftHandle"});b.appendChild(r);g.sliderObj=new Control.Slider(r,b,{axis:"horizontal",range:$R(j,p),sliderValue:f(parseFloat(e[0].getAttribute("value"))),startSpan:a,endSpan:n,values:d(),onChange:function(t){t=h(t);e[0].setAttribute("value",t);e[0].value=t;g.values=[t];g.fire("ctslider:onChange")},onSlide:function(t){g.inSlideValues=h(t);g.fire("ctslider:onSlide")}});g.sliderObj.setValue([f(parseFloat(e[0].getAttribute("value")))]);g.inSlideValues=[parseFloat(e[0].value)]}else{if(e.length===2){var l=new Element("div",{id:"rangeHandleMin1","class":"leftHandle"});var k=new Element("div",{id:"rangeHandleMax1","class":"rightHandle"});b.appendChild(a);b.appendChild(n);b.appendChild(l);b.appendChild(k);g.sliderObj=new Control.Slider([l,k],b,{axis:"horizontal",range:$R(j,p),sliderValue:[f(e[0].getAttribute("value")),f(e[1].getAttribute("value"))],startSpan:a,endSpan:n,values:d(),restricted:true,onChange:function(w){var v=h(w[0]);var t=h(w[1]);var u=g.values;if(!u||(u[0]!==v||u[1]!==t)){e[0].setAttribute("value",v);e[1].setAttribute("value",t);e[0].value=v;e[1].value=t;g.values=[v,t];g.fire("ctslider:onChange")}},onSlide:function(u){var t=g.inSlideValues;if(!t||(t[0]!==h(u[0])||t[1]!==h(u[1]))){g.inSlideValues=[h(u[0]),h(u[1])];g.fire("ctslider:onSlide")}}});g.setValues=function(){var t=g.sliderObj;var u=[e[0].getAttribute("value"),e[1].getAttribute("value")];t.setValue(f(u[0]),0);t.setValue(f(u[1]),1);g.inSlideValues=[u[0],u[1]];g.fire("ctslider:onSlide")};g.setValues()}}},CurrencyDropdown:function(selectBox){if(window.currencies&&!selectBox.loaded){var selected=false;var currencyPref=window.location.href.toQueryParams().currency||((window.sell_currency)?window.sell_currency.code:null)||ct.cookies.read("currency-pref");function addCurrency(currency){var optionElem=new Element("option",{value:currency.code,title:currency.name}).update(currency.code+" "+currency.symbol+" - "+currency.name);if(currency.code===currencyPref&&!selected){ct.currentCurrency=currency;optionElem.writeAttribute("selected","selected");selected=true}selectBox.appendChild(optionElem)}function sortCurrenciesfunction(a,b){var _a=a.code;var _b=b.code;if(_a>_b){return 1}else{if(_a<_b){return -1}else{return 0}}}function curr_symbol_convert(_num){_num=_num.toUpperCase();var uni='"\\u'+_num+'"';if(/^[A-F\d]{4}$/.test(_num)){return eval(uni)}return""}var curr_equiv={"\\u5143":"\u5143","\\u20AC":"\u20AC","\\u00A3":"\u00A3","\\u20AA":"\u20AA","\\u00A5":"\u00A5","\\u20A9":"\u20A9","\\uFDFC":"\uFDFC","\\u20AC":"\u20AC","\\u00A3":"\u00A3"};if(!currencies.top){currencies.notop=true;currencies.top=[{code:"AED",rate:"13.06",name:"UAE Dirham",symbol:"AED"},{code:"EUR",rate:"66.860000380968",name:"Euro",symbol:"\u20AC"},{code:"GBP",rate:"74.080000474112",name:"Pound Sterling",symbol:"\u00A3"},{code:"INR",rate:"1.00000",name:"Indian Rupee",symbol:"Rs."},{code:"USD",rate:"45.870000053025",name:"United States Dollar",symbol:"$"}]}currencies.all.sort(sortCurrenciesfunction);if(!currencies.notop){$A(currencies.top).each(function(top_curr){if(top_curr.symbol.indexOf("\\u")!=-1){top_curr.symbol=curr_symbol_convert(top_curr.symbol.substr(2))}})}$A(currencies.all).each(function(all_curr){if(all_curr.symbol.indexOf("\\u")!=-1){all_curr.symbol=curr_symbol_convert(all_curr.symbol.substr(2))}if(currencies.notop){$A(currencies.top).each(function(top_curr){if(top_curr.code==all_curr.code){top_curr.rate=all_curr.rate;top_curr.symbol=all_curr.symbol}})}});$A(currencies.top).each(addCurrency);selectBox.appendChild(new Element("option",{value:"",title:""}).update("----------"));$A(currencies.all).each(addCurrency);if(!selected){var options=$(selectBox).getElementsByTagName("option");for(var i=0;i<options.length;i++){if(options[i].value==="INR"){options[i].writeAttribute("selected","selected");break}}}$(selectBox).observe("change",function(){var currencyChanged=false;$A(currencies.all).each(function(currency){if(currency.code===$F(selectBox)){ct.currentCurrency=currency;currencyChanged=true}});if(!currencyChanged){ct.helperFunctions.resetCurrency(true)}else{ct.helperFunctions.logToServer("currency","changed",{to:ct.currentCurrency.code})}$(selectBox).fire("ctcurrency:change")});$(selectBox).loaded=true}},ToggleTabs:function(b,a){var c=[];if(!a){a={}}a.currentTabClass=a.currentTabClass||(b.readAttribute("currentTabClass")?b.readAttribute("currentTabClass"):"");a.deactivatedTabClass=a.deactivatedTabClass||(b.readAttribute("deactivatedTabClass")?b.readAttribute("deactivatedTabClass"):"");a.activeElement=a.activeElement||(b.readAttribute("activeElement")?b.readAttribute("activeElement"):"");$A(b.select("a[tabId]","a[tabid]")).each(function(d){c.push(d);Event.observe(d,"click",function(e){$A(c).each(function(g){if(a.activeElement!=""){g.up(a.activeElement).removeClassName(a.currentTabClass);g.up(a.activeElement).addClassName(a.deactivatedTabClass)}else{g.removeClassName(a.currentTabClass);g.addClassName(a.deactivatedTabClass)}$(g.readAttribute("tabId")).hide()});var f=$(e.target);if(f.tagName!=="A"){f=f.up("a")}f.addClassName(a.currentTabClass);f.removeClassName(a.deactivatedTabClass);if(a.activeElement!=""){f.up(a.activeElement).addClassName(a.currentTabClass);f.up(a.activeElement).removeClassName(a.deactivatedTabClass)}$(f.readAttribute("tabId")).show()})})},switchFields:function(c){if(c.switchActivated){return}var b=$(c.readAttribute("fromtext")),e=$(c.readAttribute("fromcode")),a=$(c.readAttribute("totext")),d=$(c.readAttribute("tocode"));c.switchActivated=true;Event.observe(c,"click",function(){if(b.value!=""&&b.value!=b.readAttribute("selfLabel")&&a.value!=""&&a.value!=a.readAttribute("selfLabel")&&b.value!=a.value){var g=b.value,f=e.value,j=a.value,h=d.value;b.value=j;a.value=g;if(e&&d){e.value=h;d.value=f}}})},parseDomTree:function(b){b=$(b||document.body);var a=ct.controls;b.getElementsBySelector("input.datePicker").each(function(d){new a.Calendar(d)});b.getElementsBySelector("select.airportsDropdown").each(function(d){new a.AirportsDropdown(d)});b.getElementsBySelector("input.autocomplete").each(function(d){new a.AutoCompleteTextbox(d)});b.getElementsBySelector("a.switchFields").each(function(d){new a.switchFields(d)});if(window.Control&&Control.Slider){var c=new Date();b.select(".slider").each(function(d){if(!d.sliderObj){new a.Slider(d)}});console.log("Slider creation total time: ",new Date()-c)}if($("currency_dropdown")){new ct.controls.CurrencyDropdown($("currency_dropdown"))}b.getElementsBySelector("ul.toggleTabs").each(function(d){new ct.controls.ToggleTabs(d)})}},carousel:function(g,d){var c=document.body.clientHeight;var h=document.body.clientWidth;var f="appendChild",b=this;var a=0;d=d||{};this.resizeFlag=false;this.feature_slideshow;this.attachSlideshowBehaviour=function(w){a++;$(w).writeAttribute("style","visibility:hidden;");var O=$(w).up();var s=(navigator.userAgent.indexOf("MSIE")>=0)?true:false;var I=w.cloneNode(true);var y=$(w).select(".slide");var m=$(w).readAttribute("navStyle");var l=$(w).readAttribute("widthType");var D=$(w).select(".slide")[0].getWidth()*parseInt($(w).readAttribute("visibleSlides"));var n=$(w).select(".slide")[0].getWidth();var N=$(w).select(".slide")[0];if(!s){var u=parseInt($(N).getStyle("margin-right").replace(/px/i,""))+parseInt($(N).getStyle("margin-left").replace(/px/i,""))+parseInt($(N).getStyle("border-right-width").replace(/px/i,""))+parseInt($(N).getStyle("border-left-width").replace(/px/i,""))+parseInt($(N).getStyle("padding-right").replace(/px/i,""))+parseInt($(N).getStyle("padding-left").replace(/px/i,""))}var A=$(w).select(".slide")[0].getHeight();var M=$(w).readAttribute("loopSlides");var G=$(w).readAttribute("keyscroll")||"no";var H=$(w).readAttribute("autoslide")||"false";var k=$(w).readAttribute("paginationType");var F=$(w).readAttribute("trackerFunction");var K=new Element("div",{id:"carouselWrapper"+a});$(O)[f](K);$(w).remove();$(K)[f](I);for(var L=0;L<$(I).select(".slide").length;L++){$(I).select(".slide")[L].writeAttribute("id",K.id+"_slide"+L)}if(l=="fluid"){$(K).writeAttribute("style","height:"+A+"px;overflow:hidden;position:relative")}else{if(l=="fixed"){$(K).writeAttribute("style","width:"+D+"px;height:"+A+"px;overflow:hidden;position:relative")}}if(l=="fluid"){if(s){$(K).up().writeAttribute("style","width:780px")}if(!s){var v=Math.round(parseInt($(K).getWidth())/parseInt($(I).readAttribute("visibleSlides")))-u}else{var v=Math.round(parseInt($(K).getWidth())/parseInt($(I).readAttribute("visibleSlides")))}var p=($(I).select(".slide").length*v)+v;$(I).writeAttribute("style","width:"+p+"px");$(I).select(".slide").each(function(P){$(P).writeAttribute("style","width:"+(v)+"px;")})}else{if(l=="fixed"){$(I).writeAttribute("style","width:"+n*(y.length+1)+"px")}}var t=new Element("div",{"class":m||"",id:"navCount"+a}),o;var L=$(I).select(".slide").length;var z=parseInt($(I).readAttribute("visibleslides"));if(z>L){o=Math.ceil(L/z)}else{if(L%z==0){o=Math.round(L/z)}else{if(L%z!=0){o=(L/z)+"";o=(parseInt(o.split(".")[0]))+1}}}if(k==null||k!="text"){var E=new Element("ul",{"class":"clearfix"});var r=0;for(i=0;i<o;i++){if(i!=0){r=r+(parseInt($(I).readAttribute("visibleslides")))}var j=new Element("li").update(new Element("a",{rel:i==0?$(I).select(".slide")[i].id:$(I).select(".slide")[r].id,href:"javascript:void(0)",count:i==0?i:r,tracker:$(I).select(".slide")[i].readAttribute("tracker")?$(I).select(".slide")[i].readAttribute("tracker"):"",trackercategory:$(I).select(".slide")[i].readAttribute("trackercategory")?$(I).select(".slide")[i].readAttribute("trackercategory"):"","class":i==0?"slide-control slide-jump active":"slide-control slide-jump"}));$(I).select(".slide")[i==0?i:r].writeAttribute("count",i);E[f](j)}var q=new Element("a",{href:"javascript:void(0)","class":"prev_feature slide-control disabledLeft",rel:"prev"});t[f](E);t[f](q);q.addClassName("prev_feature slide-control disabledLeft");var J=new Element("a",{href:"javascript:void(0)","class":"next_feature slide-control",rel:"next"});t[f](J);J.addClassName("next_feature slide-control");if(o==1){$(J).writeAttribute("style","visibility:hidden");$(q).writeAttribute("style","visibility:hidden");$(j).writeAttribute("style","visibility:hidden")}$(K).insert({after:t});if(M=="yes"){$(q).removeClassName("disabledLeft")}if(o!=0){var B=parseInt($(t).select("li")[0].getWidth());var x=parseInt($(t).select("li")[0].getStyle("margin-left"));o=o;$(E).writeAttribute("style","width: auto;height: auto;");$(t).writeAttribute("style","width:"+((o*B)+(o*x)+B)+"px;height: auto;")}if(l=="fluid"){$(K).writeAttribute("style","height:"+A+"px;overflow:hidden;position:relative")}else{if(l=="fixed"){$(K).writeAttribute("style","width:"+D+"px;height:"+A+"px;overflow:hidden;")}}}else{if(k=="text"){var E=new Element("ul",{"class":"inline clearfix"});var j=new Element("li",{"class":"prevNavLink first"});var q=new Element("a",{href:"javascript:void(0)","class":"slide-control",rel:"prev"}).update("&laquo; Prev");j[f](q);E[f](j);j=new Element("li",{"class":"slide_count"}).update("1 of "+$(I).select(".slide").length);E[f](j);j=new Element("li",{"class":"nextNavLink"});var J=new Element("a",{href:"javascript:void(0)","class":"slide-control",rel:"next"}).update("Next &raquo;");j[f](J);E[f](j);t[f](E);$(K).insert({after:t})}}$(K).select(".carousel")[0].writeAttribute("offsetx",$(K).select(".carousel")[0].cumulativeOffset()[0]);$(K).select(".carousel")[0].writeAttribute("offsety",$(K).select(".carousel")[0].cumulativeOffset()[1]);var C=$(t).select(".slide_count")[0];this.feature_slideshow=new Slideshow($(I),$(I).select(".slide"),$(t),$(t).select("a.slide-control"),{duration:2,autoslide:H,scrollspeed:0.5,width:$$(".slide")[0].getWidth()*((y.length)+1),visibleslides:parseInt($(I).readAttribute("visibleSlides")),pointTo:d.st,loopScroll:M,keyscroll:G,paginationType:k,textNode:C});$(t).select("a.slide-control").each(function(P){$(P).observe("click",function(){if(F){setTimeout("eval("+F+")('"+$(t).id+"')",300)}})});if(d.oncomplete){d.oncomplete()}if(F){setTimeout("eval("+F+")('"+$(t).id+"')",200)}$(t).select("a.slide-jump").each(function(P){$(P).observe("click",function(){$(t).select("a.slide-jump").each(function(Q){if(Q.hasClassName("active")){Q.removeClassName("active")}P.addClassName("active")})})});Event.observe(window,"resize",function(P){var Q=document.body.clientHeight;var R=document.body.clientWidth;b.resizeFlag=true;if(c!=Q||h!=R){reRenderDeals(P);h=R;c=Q}});reRenderDeals=function(Q){var P=window.setInterval(function(){if(b.resizeFlag!=false){var T=b.feature_slideshow;try{var S=$(I.id).cloneNode(true);$(t.id).remove();$(K.id).remove();$(O).insert(S);if(d.oncomplete){ct.carousel(S,{st:T.current,oncomplete:d.oncomplete})}else{ct.carousel(S,{st:T.current})}var U=$(t.id).select("a");$(U).each(function(X){if($(X).hasClassName("active")){$(X).removeClassName("active")}if(parseInt($(X).readAttribute("count"))==T.current){$(X).addClassName("active")}});var V=$(K.id).select("ul")[0].readAttribute("visibleSlides");var R=$(K.id).select("li.slide").length;if((T.current+parseInt(V))>=(parseInt(R)-1)&&$(K.id).select("ul")[0].readAttribute("loopSlides")=="no"){$(t.id).select("a.prev_feature")[0].removeClassName("disabledLeft");$(t.id).select("a.next_feature")[0].addClassName("disabledRight")}else{if($(K.id).select("ul")[0].readAttribute("loopSlides")=="yes"){$(t.id).select("a.prev_feature")[0].removeClassName("disabledLeft");$(t.id).select("a.next_feature")[0].removeClassName("disabledRight")}else{if(T.current==0){$(t.id).select("a.prev_feature")[0].addClassName("disabledLeft");$(t.id).select("a.next_feature")[0].removeClassName("disabledRight")}else{$(t.id).select("a.prev_feature")[0].removeClassName("disabledLeft");$(t.id).select("a.next_feature")[0].removeClassName("disabledRight")}}}b.resizeFlag=false}catch(W){}b.resizeFlag=false}},200)}};if(g){b.attachSlideshowBehaviour(g)}else{var e=$$(".carousel");$(e).each(function(j){b.attachSlideshowBehaviour(j)})}},offerRenderForHomeRHS:function(offerDesc){function standardLi(i){var offer_heading=home_offers[i].HEADING;var offer_title=home_offers[i].TITLE;var offer_desc=home_offers[i].DESC1;var offer_link=home_offers[i].LINK1;var offer_tracker=home_offers[i].TRACKER;var offer_tracker_cat=home_offers[i].TRACKERCAT;var offerLi=new Element("li",{id:"feature_"+i,"class":"slide"});if(offer_tracker){offerLi.writeAttribute("trackerCategory",offer_tracker_cat);offerLi.writeAttribute("tracker",offer_tracker)}var offerSpan=new Element("span",{"class":"caption"}).update(offer_heading);offerLi.appendChild(offerSpan);var offerHeadingLink=new Element("a",{href:offer_link}).update(offer_title);if(offer_tracker){offerHeadingLink.writeAttribute("trackerCategory",offer_tracker_cat);offerHeadingLink.writeAttribute("tracker",offer_tracker);offerHeadingLink.writeAttribute("onclick","ct.helperFunctions.trackLinkClick(this);return false;")}var offerH3=new Element("h3").update(offerHeadingLink);offerLi.appendChild(offerH3);var offerP=new Element("p").update(offer_desc);var offerPlink=new Element("a",{href:offer_link}).update("Know More &rarr;");if(offer_tracker){offerPlink.writeAttribute("trackerCategory",offer_tracker_cat);offerPlink.writeAttribute("tracker",offer_tracker);offerPlink.writeAttribute("onclick","ct.helperFunctions.trackLinkClick(this);return false;")}if(offer_tracker){offerUl.writeAttribute("trackerFunction","ct.trackerForTest")}offerP.appendChild(offerPlink);offerLi.appendChild(offerP);offerUl.appendChild(offerLi)}function customLi(i){var offer_markup=home_offers[i].MARKUP;var decodedMarkup=decodeURIComponent(offer_markup);$("offerUl").innerHTML=$("offerUl").innerHTML+decodedMarkup}function jsonParser(){var offerDiv=new Element("div",{id:"TopFeatures"});offerUl=new Element("ul",{"class":"inline clearfix carousel",id:"offerUl",visibleSlides:"1",navStyle:"carouselNavigation",widthType:"fixed",loopSlides:"yes"});offerDiv.appendChild(offerUl);$("offerDisplay").appendChild(offerDiv);for(var i=0;i<home_offers.length;i++){if(home_offers[i].OFFERSTYLE=="STANDARD"){standardLi(i)}else{customLi(i)}}if(home_offers.length>1){try{if(window.shcInit){shcInit()}}catch(e){}ct.carousel(offerUl);setTimeout(function(){if($("verticalAccordion")){$("verticalAccordion").style.visibility="visible"}},ct.schTimeoutlimit)}}try{offerDesc=offerDesc.replace("http://www.cleartrip.com","");new Ajax.Request(offerDesc,{method:"get",onSuccess:function(response){try{var resp;if(response.responseText){eval(response.responseText);if(typeof home_offers!="undefined"){window.home_offers=home_offers;jsonParser()}else{window.home_offers=[]}}}catch(e){console.log("error in offers JSON parsing")}},onFailure:function(){}})}catch(e){console.log("error in offers JSON")}},trackerForTest:function(a){$(a).select("a.slide-jump").each(function(b){if(b.hasClassName("active")){if(pageTracker){}}})},trackers:{page_count:function(){try{if(window.ct_ct_track){var b="/common/ctct";var g="ct_ct";var f=ct.cookies.read(g)?ct.cookies.read(g):"";var a=ct.cookies.read("Apache")?ct.cookies.read("Apache"):"";var d={n:ct_ct_track.n,p:ct_ct_track.p};if(f&&!Prototype.Browser.IE){ct.cookies.erase(g,"."+window.location.hostname)}new Ajax.Request(b,{method:"post",parameters:d,requestHeaders:["Pragma","no-cache","Cache-Control","no-cache","Expires","0"],onSuccess:function(e){},onFailure:function(e){ct.console.log("error in ct tracking call")}})}}catch(c){ct.console.log("error in ct tracking")}},parseDomTree:function(a){function b(g){try{var c=$(g),f=c.readAttribute("ga_category"),h="click",d=c.readAttribute("ga_label");window._gaq=window._gaq||[];window._gaq.push(["_trackEvent",f,h,d])}catch(j){}}a=$(a?a:document.body);$A(a.select("a[gatrack]")).each(function(d,c){Event.observe(d,"click",function(){b(d)})})},trackMixpanelEvent:function(b,a){if(window.mixpanelswitch&&window.mixpanel){var a=ct.trackers.merge({},ct.trackers.mixpanelTrackingData,a);mixpanel.track(b,a)}},mixpanelTrackingData:{},includeMixPanel:function(){(function(m,c){if(!c.__SV){var d,l,h,k;window.mixpanel=c;c._i=[];c.init=function(b,n,o){function g(e,q){var f=q.split(".");2==f.length&&(e=e[f[0]],q=f[1]);e[q]=function(){e.push([q].concat(Array.prototype.slice.call(arguments,0)))}}var p=c;"undefined"!==typeof o?p=c[o]=[]:o="mixpanel";p.people=p.people||[];p.toString=function(e){var f="mixpanel";"mixpanel"!==o&&(f+="."+o);e||(f+=" (stub)");return f};p.people.toString=function(){return p.toString(1)+".people (stub)"};h="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(k=0;k<h.length;k++){g(p,h[k])}c._i.push([b,n,o])};c.__SV=1.2;var j=function(){var f=document;var b=f.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";l=f.getElementsByTagName("script")[0];l.parentNode.insertBefore(b,l)};if(ct.domIsLoaded==true){j()}else{Event.observe(window,"load",j)}}})(document,window.mixpanel||[]);if(window.mixpanelid){mixpanel.init(window.mixpanelid,{upgrade:true,persistence:"localStorage",cross_subdomain_cookie:false})}},merge:function(){var d={},c=0,a=arguments.length,b;for(;c<a;c++){for(b in arguments[c]){if(arguments[c].hasOwnProperty(b)){d[b]=arguments[c][b]}}}return d},tpTrack:function(d){try{function g(j){try{for(var k in j){if(j.hasOwnProperty(k)){switch(k){case"airline":j[k]=j[k].split(":").map(function(e){return e.split("-")[0]}).join(",");break;case"last_event_type":if(j[k]==-1){j[k]=window.clevertapLastEventType||(window.localStorage&&window.localStorage.CLVR_LE)||null}break;case"last_page_name":if(j[k]==-1){j[k]=window.clevertapLastPage||(window.localStorage&&window.localStorage.CLVR_LP)||null}break;default:break}}}}catch(l){window.console&&console.log(l)}}if(d.tp=="clevertap"){if(!window.cleverTapEnabled){return window.console&&console.warn("CleverTap Not Enabled")}function b(){if(!window.clevertap){window.clevertap={event:[],profile:[],account:[],onUserLogin:[],notifications:[]};window.clevertap.account.push({id:(window.cleverTapAccId||"W8R-KK8-W74Z")});window.clevertap.enablePersonalization=true;(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://d2r1yp2w7bby2u.cloudfront.net":"http://static.clevertap.com")+"/js/a.js";var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(e,j)})();if(window.clevertapChromePushNotification){setTimeout(function(){clevertap.notifications.push({skipDialog:true})},1000)}}}b();if(d.logout){window.clevertap.clear();window.clevertap.logout();return}if(!window.clevertap.profile.length&&ct.cookies.read("userid")){var h=decodeURIComponent(ct.cookies.read("userid"));h=h.split("|");var c={Email:h[0],Identity:h[4],Name:(window.userFullName?window.userFullName:"")+(h[1]?" ("+h[1]+")":""),apache_cookie:ct.cookies.read("Apache")};if(h[2]=="M"||h[2]=="F"){c.Gender=h[2]}if(h[3]&&h[3]!=""){c.Photo="https://"+window.location.host+"/profile/photos/"+h[3]}clevertap.profile.push({Site:c});if(window.FB&&FB.api){FB.api("/me",{fields:"id,name,email,birthday,gender,education,work"},function(e){clevertap.profile.push({Facebook:e})})}}if(d.values){d.values.domain=window.location.host}g(d.values);window.clevertapLastEventType=d.category;if(window.localStorage){window.localStorage.CLVR_LE=d.category;if(d.values.page_name){window.localStorage.CLVR_LP=d.values.page_name;window.clevertapLastPage=d.values.page_name}}window.clevertap.event.push(d.category,d.values)}if(d.tp=="moengage"){if(!window.moengageEnabled){return window.console&&console.warn("Moengage not Enabled")}if(!window.moengageId){return window.console&&console.warn("Moengage id not available")}if(window.moengageEnabled&&window.moengageId){function a(){window.Moengage=moe({app_id:window.moengageId,debug_logs:window.moengageDebugLogs?window.moengageDebugLogs:0})}if(!window.Moengage){a()}if(d.logout){Moengage.destroy_session();return}if(ct.cookies&&ct.cookies.read&&ct.cookies.read("usermisc")&&ct.cookies.read("usermisc").match("SIGNED_IN")){var h=decodeURIComponent(ct.cookies.read("userid"));h=h.split("|");Moengage.add_unique_user_id(h[4]);Moengage.add_email(h[0]);Moengage.add_gender(h[2])}if(d.category&&d.values){Moengage.track_event(d.category,d.values)}}}}catch(f){window.console&&console.log(f)}},includeGATagManager:function(){(function(b,j,g,a,f){b[a]=b[a]||[];b[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var e=a!="dataLayer"?"&l="+a:"";var c="//www.googletagmanager.com/gtm.js?id="+f+e;var h=document.createElement("script");h.setAttribute("src",c);document.head.appendChild(h)})(window,document,"script","dataLayer","GTM-T9S432")}},socialmedia:{facebook:function(b){b=$(b?b:document.body);var a=$A($(b).getElementsByTagName("a"));var c=[];a.each(function(d){if($(d).hasClassName("facebookShare")||$(d).hasClassName("facebookShare_small")){if($(d).readAttribute("jsModify")&&$(d).readAttribute("jsModify")=="true"){ct.socialmedia.bitly.compressorIt=false}if($(d).readAttribute("messageLink")){if($(d).readAttribute("messageLink")==="${documentUrl}"){$(d).writeAttribute("messagelink",window.location.href)}else{if($(d).readAttribute("messageLink").toLowerCase().indexOf("http")!=0){$(d).writeAttribute("messagelink","http://"+$(d).readAttribute("messageLink"))}}d.compressedUrl=$(d).readAttribute("messageLink");d.toCompressUrl=$(d).readAttribute("messageLink");c.push($(d))}$(d).observe("click",function(){if(window.hotel_productCode=="true"){getFacebookFilters();var e=window.location.href;e+=facebook_parameters;if($(d).readAttribute("messageLink")){if($(d).readAttribute("messageLink")&&$(d).readAttribute("filter")){$(d).writeAttribute("messagelink",e)}else{if($(d).readAttribute("messageLink").toLowerCase().indexOf("http")!=0){$(d).writeAttribute("messagelink","http://"+$(d).readAttribute("messageLink"))}}d.compressedUrl=$(d).readAttribute("messageLink");d.toCompressUrl=$(d).readAttribute("messageLink");c.push($(d))}}var f=function(){var h=d.compressedUrl;var k=encodeURIComponent($(d).readAttribute("messageDescription"));var g=($(d).readAttribute("dispImg"))?$(d).readAttribute("dispImg"):"";if(g.indexOf("http")!=0){g=window.location.host+g}g=encodeURIComponent(g);if($(d).readAttribute("messageId")){var j=encodeURIComponent($(d.readAttribute("messageId")).value);facebookwindow=window.open("http://www.facebook.com/sharer.php?s=100&p[title]="+j+"&p[url]="+h+"&p[summary]="+k+"&p[images][0]="+g,"facebookwindow","menubar=1,resizable=1,width=550,height=450,left=100,top=100,screenX=100,screenY=100");if(facebookwindow){facebookwindow.focus()}}else{if($(d).readAttribute("customMessage")){var j=encodeURIComponent($(d).readAttribute("customMessage"));var k=encodeURIComponent($(d).readAttribute("messageDescription"));facebookwindow=window.open("http://www.facebook.com/sharer.php?s=100&p[title]="+j+"&p[url]="+h+"&p[summary]="+k+"&p[images][0]="+g,"facebookwindow","menubar=1,resizable=1,width=550,height=450,left=100,top=100,screenX=100,screenY=100");if(facebookwindow){facebookwindow.focus()}}}};if(window.location.protocol==="http:"){if(window.documentUrlshort){$(d).compressedUrl=window.documentUrlshort;f();ct.console.log("social :: documentUrlshort")}else{$(d).compressedUrl="";ct.socialmedia.bitly.loadBitly(function(){ct.socialmedia.bitly.compressor(d,f)});ct.console.log("social :: documentUrlshort null")}}else{$(d).compressedUrl=d.toCompressUrl;f();ct.console.log("social :: documentUrlshort https")}})}});if(c.length>0&&window.location.protocol==="http:"){ct.socialmedia.bitly.loadBitly()}},twitter:function(b){b=$(b?b:document.body);var a=$A($(b).getElementsByTagName("a"));var c=[];a.each(function(d){if($(d).hasClassName("tweetThis")||$(d).hasClassName("tweetThis_small")){if($(d).readAttribute("jsModify")&&$(d).readAttribute("jsModify")=="true"){ct.socialmedia.bitly.compressorIt=false}if($(d).readAttribute("messageLink")){if($(d).readAttribute("messageLink")==="${documentUrl}"){$(d).writeAttribute("messagelink",window.location.href)}else{if($(d).readAttribute("messageLink").toLowerCase().indexOf("http")!=0){$(d).writeAttribute("messagelink","http://"+$(d).readAttribute("messageLink"))}}d.compressedUrl=$(d).readAttribute("messageLink");d.toCompressUrl=$(d).readAttribute("messageLink");c.push($(d))}$(d).observe("click",function(){if(window.hotel_productCode=="true"){getFacebookFilters();var e=window.location.href;e+=facebook_parameters;if($(d).readAttribute("messageLink")&&$(d).readAttribute("filter")){if($(d).readAttribute("messageLink")&&$(d).readAttribute("filter")){$(d).writeAttribute("messagelink",e)}else{if($(d).readAttribute("messageLink").toLowerCase().indexOf("http")!=0){$(d).writeAttribute("messagelink","http://"+$(d).readAttribute("messageLink"))}}d.compressedUrl=$(d).readAttribute("messageLink");d.toCompressUrl=$(d).readAttribute("messageLink");c.push($(d))}}var f=function(){if($(d).readAttribute("messageId")){twitterwindow=window.open("http://twitter.com/home/?status="+$(d).readAttribute("messageId")+" - "+$(d).compressedUrl,"twitter","menubar=1,resizable=1,width=800,height=550,left=100,top=100,screenX=100,screenY=100");if(twitterwindow){twitterwindow.focus()}}else{if($(d).readAttribute("customMessage")){var g=encodeURIComponent($(d).readAttribute("customMessage"));twitterwindow=window.open("http://twitter.com/home/?status="+$(d).readAttribute("customMessage")+" - "+$(d).compressedUrl,"twitter","menubar=1,resizable=1,width=750,height=550,left=100,top=100,screenX=100,screenY=100");if(twitterwindow){twitterwindow.focus()}}}};if(window.location.protocol==="http:"){if(window.documentUrlshort){$(d).compressedUrl=window.documentUrlshort;ct.console.log("social :: documentUrlshort");f()}else{$(d).compressedUrl="";ct.socialmedia.bitly.loadBitly(function(){ct.socialmedia.bitly.compressor(d,f)});ct.console.log("social :: documentUrlshort null")}}else{$(d).compressedUrl=d.toCompressUrl;f();ct.console.log("social :: documentUrlshort https")}})}});if(c.length>0&&window.location.protocol==="http:"){ct.socialmedia.bitly.loadBitly()}},bitly:{bitlyLoaded:false,loadBitly:function(c){if(!ct.socialmedia.bitly.bitlyLoaded){ct.socialmedia.bitly.bitlyLoaded=true;var b=new Element("script",{type:"text/javascript",charset:"utf-8",src:"http://bit.ly/javascript-api.js?version=latest&login=cleartripdev&apiKey=R_7a84981a7e378606bc8783874d9a0ffe"});document.getElementsByTagName("head")[0].appendChild(b)}var a=setInterval(function(){if(window.BitlyApiClient){clearInterval(a);if(c){c()}}},500)},compressorIt:true,pointer:-1,compressor:function(b,a){var c=setInterval(function(){if(ct.socialmedia.bitly.compressorIt){clearInterval(c);ct.socialmedia.bitly.pointer++;var d="BitlyCB.renderResponse_"+ct.socialmedia.bitly.pointer;BitlyCB["renderResponse_"+ct.socialmedia.bitly.pointer]=function(f){var e=Object.values(f.results)[0];ct.console.log(b.id+" :: :: "+Object.keys(f.results)[0]+" :: :: "+e.shortUrl);if(e.shortUrl){b.compressedUrl=e.shortUrl;window.documentUrlshort=e.shortUrl}else{ct.console.log(b.id);b.compressedUrl="http://www.cleartrip.com"}a()};BitlyClient.call("shorten",{longUrl:b.toCompressUrl},d)}},100)}}},ajaxTimeoutHandler:{onCreate:function(b){var a=120000;if(b.options.timeOut){a=b.options.timeOut}else{if(window.customAjaxTimeout){a=customAjaxTimeout}}b.timeoutId=window.setTimeout(function(){if($A([1,2,3]).indexOf(parseInt(b.transport.readyState,10))!==-1){b.transport.abort();if((!b.url.match("/urltrack/"))&&(!b.url.match("fare-rules"))){alert("The server has taken too long to respond. This might be a problem with our servers, or your Internet connection.\n\nPlease try again later.")}if(b.options.onFailure){b.options.onFailure(b.transport,b.json)}}},a)},onComplete:function(a){window.clearTimeout(a.timeoutId)}},searchHistoryCookie:{shcCreate:function(a,m){var g=location.href.toQueryParams();var h=ct.dates.toString(new Date());if(a=="shcFlight"){var b="n";var e=0;var f="";if(g.intl=="y"){f=$("to_book_form").serialize();b="y";if(cheapestflight.pr){var c=cheapestflight.pr;e=c}}else{f=$("universal_display").serialize();var j="";if(cheap_dep_flight.pr){var k=cheap_dep_flight.pr;if(g.return_date){j=cheap_ret_flight.pr}e=k+j}}f+="&price="+e+"&search_date="+h+"&intl="+b}if(a=="shcTrain"){var d=location.search.replace("?","").toQueryParams();var n=0;var l=0;var f=Form.serialize($("bookForm")).replace("%5B'","").replace("'%5D","");if(d.from_station){n=d.from_station}if(d.to_station){l=d.to_station}f+="&from_station="+n;f+="&to_station="+l;f+="&search_date="+h}if(a=="shcHotel"){var f=location.search.replace("?","");f+="&dest_code="+$("dest_code").value;f+="&search_date="+h}if(ct.cookies.read(a)){ct.searchHistoryCookie.shcUpdate(a,f,m)}else{ct.cookies.create(a,f,m)}},shcRead:function(name){var _shc=ct.cookies.read(name).split("||");var _shcErr=0;var _trackCodeName="";if(name=="shcFlight"){_trackCodeName="flight";var _shcTemplate_r=new Template('<li><a href="#{_shcRedirectUri}" class="fareHistory"><dl class="itinerary"><dt title="#{from} &#8644; #{to}">#{from} &#8644; #{to}</dt><dd>#{dep_date} &mdash; #{ret_date}</dd></dl><dl class="currentFare currentFare#{cfid}" style="display:none;"><p class="loading" style="width:100px;">Getting fares...</p></dl><dl class="fareChange fareChange#{fcid}" style="display:none;"></dl></a></li>');var _shcTemplate=new Template('<li><a href="#{_shcRedirectUri}" class="fareHistory"><dl class="itinerary"><dt title="#{from} &rarr; #{to}">#{from} &rarr; #{to}</dt><dd>#{dep_date}</dd></dl><dl class="currentFare currentFare#{cfid}" style="display:none;"><p class="loading" style="width:100px;">Getting fares...</p></dl><dl class="fareChange fareChange#{fcid}" style="display:none;"></dl></a></li>');var _shcData="";for(var i=0;i<_shc.length;i++){var _1=_shc[i].toQueryParams();var rndOne="O";var rndDate="";if(_1.rnd_one!="O"){rndOne="R";rndDate=_1.return_date}var shwOff="N";if(_1.intl=="y"){if(ct.dates.diffDates(ct.dates.toString(new Date()),_1.depart_date)>0){shwOff="Y"}}else{if(ct.dates.diffDates(ct.dates.toString(new Date()),_1.depart_date)>=0){shwOff="Y"}}if(shwOff=="Y"){_shcErr=1;var _clickUri="/flights/search?rnd_one="+rndOne+"&from="+_1.from+"&to="+_1.to+"&depart_date="+_1.depart_date+"&return_date="+rndDate+"&adults="+_1.adults+"&childs="+_1.childs+"&infants="+_1.infants+"&class=&airline="+_1.carrier+"&carrier="+_1.carrier+"&utm_source=home_page_flights&utm_medium=internal&utm_campaign=saved_search&saved_search=T";var _2={_shcRedirectUri:_clickUri,from:_1.from_city,to:_1.to_city,dep_date:ct.dates.convertDate(_1.depart_date),ret_date:ct.dates.convertDate(rndDate),tot_pr:ct.stringFormatting.formatForCurrency(_1.price),cfid:i,fcid:i};if(_1.rnd_one!="O"){_shcData+=_shcTemplate_r.evaluate(_2)}else{_shcData+=_shcTemplate.evaluate(_2)}}}$("recentSearches").update(_shcData);function shcSendAjax(i,_1){var RTJson={};var _err=0;function shcFareMarkup(_jsnPr,_1,_err){if(_jsnPr!=0){_jsnPr=Math.round(_jsnPr);$$(".currentFare"+i)[0].update("<dt>"+ct.stringFormatting.formatForCurrency(_jsnPr)+"</dt><dd>Today's Price</dd>");if(_1.price<_jsnPr){var _diff=Math.abs(parseInt(_1.price)-parseInt(_jsnPr));if(ct.dates.diffDates(ct.dates.toString(new Date()),_1.search_date)!=0){$$(".fareChange"+i)[0].update('<dt class="fareIncrease"><span></span> '+ct.stringFormatting.formatForCurrency(_diff)+"</dt><dd>Since "+ct.dates.convertDate(_1.search_date).split(", ")[1]+"</dd>")}else{$$(".fareChange"+i)[0].update('<dt class="noChange"></dt><dd></dd>')}}else{if(_1.price>_jsnPr){var _diff=Math.abs(parseInt(_jsnPr)-parseInt(_1.price));if(ct.dates.diffDates(ct.dates.toString(new Date()),_1.search_date)!=0){$$(".fareChange"+i)[0].update('<dt class="fareDecrease"><span></span> '+ct.stringFormatting.formatForCurrency(_diff)+"</dt><dd>Since "+ct.dates.convertDate(_1.search_date).split(", ")[1]+"</dd>")}else{$$(".fareChange"+i)[0].update('<dt class="noChange"></dt><dd></dd>')}}}}else{_err=1}if(_err==1){farefailure(i)}}function shcFareCalc(_jsn,trip_flag){var _jsnPr=0;var _err=0;try{if(trip_flag=="O"){var _jsnArrOn=_jsn.calendar_json[ct.dates.convertDateString(_1.depart_date)];if(_jsnArrOn[0]){var intl_chk="N";if(_1.intl=="y"){intl_chk="Y"}var _pr1=ct.searchHistoryCookie.shcPrMinVal(_jsnArrOn,_1.adults,_1.childs,_1.depart_date,intl_chk);_jsnPr=_pr1}else{_err=1}}if(trip_flag=="R"){if(_1.intl=="y"){var _jsnArrOn=_jsn.calendar_json[ct.dates.convertDateString(_1.depart_date)];if(_jsnArrOn[0]){var _pr1=ct.searchHistoryCookie.shcPrMinVal(_jsnArrOn,_1.adults,_1.childs,_1.depart_date,"Y");_jsnPr=_pr1}else{_err=1}}else{if(RTJson.onwardData&&RTJson.returnData){var _jsnArrOn=RTJson.onwardData.calendar_json[ct.dates.convertDateString(_1.depart_date)];if(_jsnArrOn[0]){var _pr1=ct.searchHistoryCookie.shcPrMinVal(_jsnArrOn,_1.adults,_1.childs,_1.depart_date,"N");_jsnPr=_pr1}else{_err=1}var _jsnArrRe=RTJson.returnData.calendar_json[ct.dates.convertDateString(_1.return_date)];if(_jsnArrRe[0]){var _pr2=ct.searchHistoryCookie.shcPrMinVal(_jsnArrRe,_1.adults,_1.childs,_1.depart_date,"N");_jsnPr=parseInt(_jsnPr)+parseInt(_pr2)}else{_err=1}}}}shcFareMarkup(_jsnPr,_1,_err)}catch(e){farefailure(i)}}function farefailure(_divId){$$(".currentFare"+_divId)[0].update("<dt></dt><dd></dd>");$$(".fareChange"+_divId)[0].update("<dt></dt><dd></dd>")}function AjaxReq(url,shc_params,flag,trip_flag){new Ajax.Request(url,{method:"get",parameters:shc_params,onSuccess:function(response){var _jsn=eval("("+response.responseText+")");if(flag==0){RTJson.onwardData=_jsn}else{if(flag==1){RTJson.returnData=_jsn}}shcFareCalc(_jsn,trip_flag)},onFailure:function(response){farefailure(i)}})}if(_1.intl=="y"&&_1.childs!=0){_err=1}else{if(_1.infants==0){if(_1.intl=="y"){if(_1.rnd_one=="O"){var shc_params="from="+_1.from+"&to="+_1.to+"&start_date="+ct.dates.convertDateString(_1.depart_date)+"&end_date="+ct.dates.convertDateString(_1.depart_date);AjaxReq("flights/calendar/calendarstub.json",shc_params,0,_1.rnd_one)}if(_1.rnd_one=="R"){var shc_params="from="+_1.from+"&to="+_1.to+"&start_date="+ct.dates.convertDateString(_1.depart_date)+"&end_date="+ct.dates.convertDateString(_1.depart_date)+"&return_after="+ct.dates.diffDates(_1.depart_date,_1.return_date);AjaxReq("flights/calendar/calendarstub.json",shc_params,0,_1.rnd_one)}}else{if(_1.rnd_one=="O"){var shc_params="from="+_1.from+"&to="+_1.to+"&start_date="+ct.dates.convertDateString(_1.depart_date)+"&end_date="+ct.dates.convertDateString(_1.depart_date);AjaxReq("flights/calendar/calendarstub.json",shc_params,0,_1.rnd_one)}if(_1.rnd_one=="R"){var shc_params="from="+_1.from+"&to="+_1.to+"&start_date="+ct.dates.convertDateString(_1.depart_date)+"&end_date="+ct.dates.convertDateString(_1.depart_date);AjaxReq("flights/calendar/calendarstub.json",shc_params,0,_1.rnd_one);var shc_params="from="+_1.to+"&to="+_1.from+"&start_date="+ct.dates.convertDateString(_1.depart_date)+"&end_date="+ct.dates.convertDateString(_1.return_date);AjaxReq("flights/calendar/calendarstub.json",shc_params,1,_1.rnd_one)}}}else{_err=1}}if(_err==1){farefailure(i)}}for(var i=0;i<_shc.length;i++){var _1=_shc[i].toQueryParams();shcSendAjax(i,_1)}}if(name=="shcTrain"){_trackCodeName="train";var _shc=ct.cookies.read(name).split("||");var _shcTemplate=new Template('<li><a href="#{_tainUri}" class="fareHistory"><dl class="itinerary"><dt>#{from} &rarr; #{to}</dt><dd>#{dep_date}</dd></dl></a></li>');var _shcData="";for(var i=0;i<_shc.length;i++){var _1=_shc[i].toQueryParams();if(!_1.from_station){ct.cookies.erase("shcTrain");_shcErr=1;break}if(ct.dates.diffDates(ct.dates.toString(new Date()),_1.date.replace(/-/gi,"/"))>=0){_shcErr=1;var from_code="from_city="+_1.from_city;var to_code="&to_city="+_1.to_city;if(_1.from_station!=0){from_code="from_station="+_1.from_station}if(_1.to_station!=0){to_code="&to_station="+_1.to_station}var _tUri="/trains/results?"+from_code+to_code+"&class="+_1["class"]+"&date="+_1.date+"&adults="+_1.adults+"&children="+_1.children+"&male_seniors="+_1.male_seniors+"&female_seniors="+_1.female_seniors+"&utm_source=home_page_trains&utm_medium=internal&utm_campaign=saved_search";var _2={_tainUri:_tUri,from:_1.from_city,to:_1.to_city,dep_date:ct.dates.convertDate(_1.date.replace(/-/gi,"/"))};_shcData+=_shcTemplate.evaluate(_2)}}$("recentSearches").update(_shcData)}if(name=="shcHotel"){_trackCodeName="hotel";var _shc=ct.cookies.read(name).split("||");var _shcTemplate=new Template('<li><a href="#" onclick="ct.searchHistoryCookie.shcHotelClick(\'#{_hotelUri}\',\'#{hCookie}\')" class="fareHistory"><dl class="itinerary"><dt>#{city}</dt><dd>#{dep_date} &mdash; #{ret_date}</dd></dl></a></li>');var _shcData="";for(var i=0;i<_shc.length;i++){var _1=_shc[i].toQueryParams();var city_val=_1.noOfRooms+" rooms in "+_1.city;if(_1.noOfRooms==1){city_val=_1.noOfRooms+" room in "+_1.city}var dst_code="";if(_1.dest_code){dst_code=_1.dest_code}if(ct.dates.diffDates(ct.dates.toString(new Date()),_1.ckIn)>=0){_shcErr=1;if(_1.noOfRooms>1){var adlts=_1.ad.split(",");var childs=_1.cd.split(",");var uri_adlt_text="";var childAgeText="";for(var ij=0;ij<adlts.length;ij++){uri_adlt_text+="&adults"+(ij+1)+"="+adlts[ij]+"&children"+(ij+1)+"="+childs[ij]}for(var ij=0;ij<childs.length;ij++){try{if(childs[ij]>0){var cAge=_1["ca"+(ij+1)].split(",");for(var jk=0;jk<cAge.length;jk++){if(cAge[jk]){childAgeText+="&ca"+(ij+1)+"="+cAge[jk]}}}}catch(e){console("Error ="+e)}}var _hUri="/hotels/search?city="+_1.city+"&chk_in="+_1.ckIn+"&chk_out="+_1.ckOut+"&num_rooms="+_1.noOfRooms+uri_adlt_text+"&country="+_1.country+childAgeText+"&utm_source=home_page_hotels&utm_medium=internal&utm_campaign=saved_search";var hCokie="city="+_1.city+"&dest_code="+dst_code+"&state="+_1.state+"&country="+_1.country+"&chk_in="+_1.ckIn+"&chk_out="+_1.ckOut+"&num_rooms="+_1.noOfRooms+uri_adlt_text+childAgeText}else{var childAgeText="";if(_1.cd>0){var cAge=_1.ca1.split(",");for(var jk=0;jk<cAge.length;jk++){if(cAge[jk]){childAgeText+="&ca1="+cAge[jk]}}}var _hUri="/hotels/search?city="+_1.city+"&chk_in="+_1.ckIn+"&chk_out="+_1.ckOut+"&num_rooms="+_1.noOfRooms+"&adults1="+_1.ad+"&children1="+_1.cd+"&country="+_1.country+"&utm_source=home_page_hotels&utm_medium=internal&utm_campaign=saved_search";var hCokie="city="+_1.city+"&dest_code="+dst_code+"&state="+_1.state+"&country="+_1.country+"&chk_in="+_1.ckIn+"&chk_out="+_1.ckOut+"&num_rooms="+_1.noOfRooms+"&adults1="+_1.ad+"&children1="+_1.cd+childAgeText}try{var _2={_hotelUri:_hUri,hCookie:hCokie,noOfrooms:_1.noOfRooms,city:city_val,dep_date:ct.dates.convertDate(_1.ckIn),ret_date:ct.dates.convertDate(_1.ckOut)}}catch(e){}_shcData+=_shcTemplate.evaluate(_2)}}$("recentSearches").update(_shcData)}if($("accordion_content1")){$("accordion_content1").hide();setTimeout(function(){$("accordion_content1").show()},ct.schTimeoutlimit)}if(_shcErr==0){window.setTimeout(function(){ct.searchHistoryCookie.noShc(_trackCodeName)},100)}else{setTimeout(function(){ct.searchHistoryCookie.shcTrackCodeFunc(_trackCodeName,"ss")},1000);$("accordion_content2").show();setTimeout(function(){$("accordion_content2").hide()},ct.schTimeoutlimit)}},shcHotelClick:function(b,c){var a="http://"+location.host+b;ct.cookies.create("hotel_sr",c,365);location.href=a},shcUpdate:function(a,g,m){var j=ct.cookies.read(a);var h=j.split("||");var e="";var d="";if(ct.searchHistoryCookie.shcIsExist(h,g)!=1){if(ct.searchHistoryCookie.shcIsValidDate(g)){var c=g.toQueryParams();var l=-1;if(a=="shcFlight"){for(var f=0;f<h.length;f++){var b=h[f].toQueryParams();if(c.from_city==b.from_city&&c.to_city==b.to_city&&c.depart_date==b.depart_date&&c.return_date==b.return_date){l=f;break}}}if(a=="shcTrain"){for(var f=0;f<h.length;f++){var b=h[f].toQueryParams();if(c.from_city==b.from_city&&c.to_city==b.to_city&&c["class"]==b["class"]&&c.date==b.date){l=f;break}}}if(a=="shcHotel"){for(var f=0;f<h.length;f++){var b=h[f].toQueryParams();if(c.city==b.city&&c.ckIn==b.ckIn&&c.ckOut==b.ckOut&&c.noOfRooms==b.noOfRooms){l=f;break}}}if(l==-1){e+=g;for(var f=0;f<h.length;f++){if(f<2){if(ct.searchHistoryCookie.shcIsValidDate(h[f])){d+="||"+h[f]}}else{break}}}else{for(var f=0;f<h.length;f++){if(ct.searchHistoryCookie.shcIsValidDate(h[f])){var k=h[f];if(l==f){k=g}if(f==0){d+=k}else{if(d){d+="||"+k}else{d+=k}}}}}ct.cookies.create(a,"",-1);ct.cookies.create(a,e+d,m)}}},shcIsValidDate:function(c){var b=c.toQueryParams();var a="";if(b.ckIn){a=b.ckIn}if(b.date){a=b.date.replace(/-/gi,"/")}if(b.depart_date){a=b.depart_date}return ct.dates.diffDates(ct.dates.toString(new Date()),a)>=0?true:false},shcIsExist:function(d,c){var c=c.toQueryParams();for(var b=0;b<d.length;b++){var a=d[b].toQueryParams();if(a.ckIn){if(a.city==c.city&&a.ckIn==c.ckIn&&a.ckOut==c.ckOut&&a.noOfRooms==c.noOfRooms&&a.ad==c.ad&&a.cd==c.cd){return 1;break}}if(a.depart_date){if(a.from_city==c.from_city&&a.to_city==c.to_city&&a.depart_date==c.depart_date&&a.return_date==c.return_date&&a.adults==c.adults&&a.childs==c.childs){return 1;break}}if(a.date){if(a.from_city==c.from_city&&a.to_city==c.to_city&&a["class"]==c["class"]&&a.date==c.date&&a.adults==c.adults&&a.children==c.children&&a.male_seniors==c.male_seniors&&a.female_seniors==c.female_seniors){return 1;break}}}},shcPrMinVal:function(c,b,h,e,a){var f=new Array();for(var d=0;d<c.length;d++){if(ct.dates.diffDates(e,"15/04/2012")>=0){f.push(c[d].pr*(parseInt(b)+parseInt(h)))}else{if(a=="Y"){f.push(c[d].pr*(parseInt(b)+parseInt(h)))}else{if(c[d].al!="IT"||c[d].al!="IT-RED"){f.push(c[d].pr*(parseInt(b)+parseInt(h)))}}}}var g=f.sort();g=g.uniq();return g.min()},shcSlideDown:function(a){ele=$(a);yy=ele.getHeight();setTimeout(function(){ct.searchHistoryCookie.shcSlideDownEffect(a)},10)},shcSlideDownEffect:function(a){ele.setStyle({height:xx+"px",display:"block"});if(Prototype.Browser.Gecko){xx=parseInt(xx)+20}else{xx=parseInt(xx)+5}if(xx<yy){setTimeout(function(){ct.searchHistoryCookie.shcSlideDownEffect(a)},10)}else{ele.setStyle({display:"block",height:yy+"px"});xx=0;ct.searchHistoryCookie.resizeRenderOfCarousel(a)}},resizeRenderOfCarousel:function(a){if(a=="accordion_content2"&&ct.searchHistoryCookie.windowResizedWithShc){if(window.reRenderDeals){ct.resizeFlag=true;window.reRenderDeals()}ct.searchHistoryCookie.windowResizedWithShc=false}},shcTrackCodeFunc:function(a,b){if(b=="ss"){if(window.pageTracker&&window.pageTracker._trackEvent){if(ct.shcTrackFlag==0){window._gaq.push(["_trackPageview","/recentSearches_"+a]);ct.shcTrackFlag=1}}}else{if(window.pageTracker&&window.pageTracker._trackEvent){if(ct.shcTrackFlag==0){window._gaq.push(["_trackPageview","/hotels/offers_"+a]);ct.shcTrackFlag=1}}}},shcAccordion:function(d,c,b,a){if($(c).getHeight()>10&&$(c).getStyle("display")=="block"){return false}$(d).hide();$(b).addClassName("accordion_open");$(a).removeClassName("accordion_open");if(Prototype.Browser.IE){$(c).show();ct.searchHistoryCookie.resizeRenderOfCarousel(c)}else{ct.searchHistoryCookie.shcSlideDown(c)}},noShc:function(a){setTimeout(function(){ct.searchHistoryCookie.shcTrackCodeFunc(a,"offers")},1000);$("accordion_content1").hide();$("at1").setStyle({display:"none"});$("accordion_content2").show();$("at2").addClassName("arrowOff");$("at2").removeClassName("last")},shc_init:function(c){var a=0;var b="";var d="";ct.shcTrackFlag=0;try{if(c=="F"){d="flight";if(ct.cookies.read("shcFlight")){ct.searchHistoryCookie.shcRead("shcFlight");b=ct.cookies.read("shcFlight").split("||")[0].toQueryParams().search_date}else{a=1}}else{if(c=="T"){d="train";if(ct.cookies.read("shcTrain")){ct.searchHistoryCookie.shcRead("shcTrain");b=ct.cookies.read("shcTrain").split("||")[0].toQueryParams().search_date}else{a=1}}else{if(c=="H"){d="hotel";if(ct.cookies.read("shcHotel")){ct.searchHistoryCookie.shcRead("shcHotel");b=ct.cookies.read("shcHotel").split("||")[0].toQueryParams().search_date}else{a=1}}else{console.log("error")}}}}catch(f){b=ct.dates.toString(new Date())}if(ct.dates.diffDates(b,ct.dates.toString(new Date()))>3){setTimeout(function(){$("accordion_content1").hide();$("accordion_content2").show();$("at1").removeClassName("accordion_open");$("at1").addClassName("accordion_hide");$("at2").removeClassName("arrowOff");$("at2").removeClassName("accordion_hide");$("at2").addClassName("accordion_open");ct.searchHistoryCookie.shcTrackCodeFunc(d,"offers")},50);setTimeout(function(){ct.searchHistoryCookie.shcTrackCodeFunc(d,"offers")},1000)}if(a==1){ct.searchHistoryCookie.noShc(d)}Event.observe(window,"resize",function(){if($("accordion_content1")&&$("accordion_content1").style.display!="none"){ct.searchHistoryCookie.windowResizedWithShc=true}else{ct.searchHistoryCookie.windowResizedWithShc=false}})},shcInitRes:function(a){if(a=="F"){window.setTimeout('ct.searchHistoryCookie.shcCreate("shcFlight",365)',3000)}else{if(a=="T"){window.setTimeout('ct.searchHistoryCookie.shcCreate("shcTrain",365)',3000)}else{if(a=="H"){window.setTimeout('ct.searchHistoryCookie.shcCreate("shcHotel",365)',3000)}else{console.log("error")}}}}},abTest:function(){var b=true,c=new Date(),g,f=false;if(typeof(Storage)!=undefined&&localStorage.getItem("abTestStoreDate")!=undefined){var o=new Date(localStorage.getItem("abTestStoreDate")).toDateString();var a=new Date().toDateString();if(o==a&&ct.cookies.read("ct-ab")){b=false}}if(b){try{var g=window.logUiEvtTimeOut?parseInt(window.logUiEvtTimeOut):3000;var n=window.analyticsHost?window.analyticsHost:"";var h=$("body");var k=ct.cookies.read("userid")?ct.cookies.read("userid"):"";var m=ct.cookies.read("Apache")?ct.cookies.read("Apache"):"";var l=ct.cookies.read("__utmz")?ct.cookies.read("__utmz"):"";var d={userid:k,apache_cookie:m,utmz:l};var j={};if(n){d={};j={userid:k,apache_cookie:m,utmz:l}}new Ajax.Request(n+"/source/abtest/getabtestconfig",{method:"get",requestHeaders:d,parameters:j,onSuccess:function(q){var s="";if(typeof q=="object"&&typeof q.responseText=="object"&&JSON.stringify(q.responseText)!=="{}"){try{s=JSON.stringify(q.responseText)}catch(r){s=null}}if(s){s=ct.convertToShortAbTestNames(s);ct.cookies.create("ct-ab",escape(s))}if(typeof(Storage)!=undefined){localStorage.setItem("abTestStoreDate",new Date())}},onFailure:function(e){},timeout:g})}catch(p){}}},abTestNames:{flshtl:"fsl",Hotels_Desktop_PriceFilter:"hdpf",errorEvent:"ferev",ptb:"fptb",ptb_AE_B2C_intl:"fptbai",ptb_BH_B2C_intl:"fptbbi",ptb_IN_B2C_intl:"fptbii",ptb_KW_B2C_intl:"fptbki",ptb_OM_B2C_intl:"fptboi",ptb_QA_B2C_intl:"fptbqi",ptb_SA_B2C_intl:"fptbsi",sortorder:"sto",sortordermobile:"stom",creativePricingAB:"hcp",hotels_srp_cta:"hrcta",hotels_stp_price:"hsp",modify_search:"hms",room_category_details_page:"hrcd"},convertToShortAbTestNames:function(h){try{var c="",a={};var f;var d=ct.abTestNames;if(typeof h=="string"){f=JSON.parse(h)}for(var b in f){a[d[b]||b]=f[b]}c=JSON.strigify(a);return c}catch(g){return h}}};String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")};compareDates=ct.dates.compare;toHomeForm=ct.helperFunctions.toHomeForm;addRooms=ct.helperFunctions.addRooms;alterChildren=ct.helperFunctions.alterChildren;alterChildAge=ct.helperFunctions.alterChildAge;ct.getWindowTop=ct.helperFunctions.getWindowTop;ct.genericBlocks.hotelForm.handleCitySelection=function(a){$("country").writeAttribute("value",a.c?a.c:"");$("state").writeAttribute("value",a.s?a.s:"")};ct.controls.Calendar._markupOutlineCache=null;ct.helperFunctions.resetCurrency(false);var pageTracker;(function(){function d(){var f=document.location.host.split(".");var e=false;if(f.length>=3&&f[1]==="cleartrip"){if(f[0]=="www"&&["ae","me","eu","sa","com","co","za","pl","qa"].indexOf(f[2])!=-1){e=true}if(["om","bh","qa","kw","me","qa2"].indexOf(f[0])!=-1&&(["ae","sa","me","eu","com","co","za","pl","qa"].indexOf(f[2])!=-1)){e=true}}return e}function b(){ct.domIsLoaded=true;ct.helperFunctions.loadJS("//connect.facebook.net/en_US/all.js",ct.loginFb);ct.schTimeoutlimit=(Prototype.Browser.IE)?500:10;ct.validator._initializeForms();ct.selfLabels.parseDomTree();if(!window.isCalendarPage){ct.bubbles.parseDomTree()}ct.stickyBlocks.parseDomTree();ct.genericBlocks.parseDomTree();ct.controls.parseDomTree();ct.trackers.parseDomTree();ct.carousel();ct.genericBlocks.intlSearchToBookDaysFind();Event.observe(document,"click",function(){if($("ct_bubbleNode")){ct.dom.removeIEIframeFix($("ct_bubbleNode"));$("ct_bubbleNode").remove()}});setTimeout(ct.helperFunctions.prefetchResources,3000);ct.socialmedia.twitter();ct.socialmedia.facebook();ct.trackers.page_count();ct.smartHomePage()}function c(){if(window.isIe9OfferPage!=true){if(window.placeIe9JumpListBanner==true){if(ct.helperFunctions.ie9JumpList){ct.helperFunctions.ie9JumpList.createBannersNJumpList()}}}if(window.rhsOfferUrl){ct.offerRenderForHomeRHS(window.rhsOfferUrl)}setTimeout(function(){var r=document.location.toString();r=r.toQueryParams();if(r.host){var e=$("AirSearch")?$("AirSearch"):$("home_hotels");e.action="http://"+r.host+($("AirSearch")?"/airInterstitial":"/hotelInterstitial");if($("offer_nav")){$("offer_nav").select("a").each(function(s){s.href=s.href+"?host="+r.host})}}},3000);var h=new Image();var k=window.location;h.src=baseLink+"/images/elements/error_arrow.gif";ct.cookies.erase("ct-dom-style");if((!(location.search.toQueryParams("&").noGA=="true"))&&(($("noGA")&&$("noGA").value!="true")||(!($("noGA"))))){if(d()||window.productCode=="AG"||window.productCode=="CP"||document.location.href.split("/chmm").length>1){var f=new Date().getTime();var n="";if(window.location.host.split(".")[0]=="www"&&(window.location.host.split(".")[2]=="com"||window.location.host.split(".")[2]=="ae")){n=baseLink+"/javascripts/dc.js?v="+f}else{n=baseLink+"/javascripts/ga.js?v="+f}var q=new Element("script",{type:"text/javascript",src:n});var j=false;q.onload=q.onreadystatechange=function(){if(!j&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){j=true;q.onload=q.onreadystatechange=null;ct.helperFunctions.paidChannelTracker()}};document.getElementsByTagName("head")[0].appendChild(q);window._gaq=window._gaq||[];ct.helperFunctions.setGAProperties()}}if(window.moverride_jsver!=null&&$("mobileLink")){var g=new Element("script",{type:"text/javascript",src:baseLink+"/javascripts/mobile/m_override"+window.moverride_jsver+".js"});document.getElementsByTagName("head")[0].appendChild(g);var o=document.cookie;if(o!=null&&o.indexOf("ct.mobile.override")!=-1){$("mobileLink").style.display=""}else{$("mobileLink").parentNode.removeChild($("mobileLink"))}}var m=ct.helperFunctions.store;if(m){try{var p=m().getItem("events");if(p){ct.helperFunctions.postAnalyticsDataViaAJAX(p);m().removeItem("events")}}catch(l){}}if(d()){ct.trackers.includeGATagManager()}}if(window.ui_optm){document.observe("dom:loaded",b)}else{Event.observe(window,"load",b)}if(window.isIe9OfferPage==true){if(window.placeIe9JumpListBanner==true){if(ct.helperFunctions.ie9JumpList){ct.helperFunctions.ie9JumpList.createBannersNJumpList()}}}Event.observe(window,"load",c);Event.observe(window,"load",function(){window._comscore=window._comscore||[];window._comscore.push({c1:"2",c2:"7561529"});var f=document.createElement("script"),e=document.getElementsByTagName("script")[0];f.src=baseLink+"/javascripts/trackers/comscore_beacon.js";e.parentNode.insertBefore(f,e);ct.trackers.mixpanelTrackingData={cookieId:window.ct.cookies.read("Apache"),utmz:window.ct.cookies.read("__utmz"),devicetype:"Desktop",referralSource:document.referrer||"N/A",currencySelected:"INR",countrySelected:window.countryCode?window.countryCode.toUpperCase():"N/A",emailID:(decodeURIComponent(window.ct.cookies.read("userid")).split("|")[0])!="null"?(decodeURIComponent(window.ct.cookies.read("userid")).split("|")[0]):"N/A",currentDate:(new Date()).toDateString(),fromStation:"N/A",toStation:"N/A",departureDate:"N/A",numAdults:"N/A",numChildren:"N/A",numSeniorMen:"N/A",numSeniorWomen:"N/A",irctcUserName:"N/A",trainName:"N/A",trainType:"N/A",trainNumber:"N/A",trainClass:"N/A",fromStationPicked:"N/A",toStationPicked:"N/A",trainFare:"N/A",availability:"N/A",itineraryID:"N/A",tripID:"N/A",paymentType:"N/A"}});var a=function(e){if(e.persisted){b()}};if(window.addEventListener){window.addEventListener("pageshow",a,false)}else{if(window.attachEvent){window.attachEvent("onpageshow",a)}}(function(){try{if(window.isWL&&top.location.hostname!==window.location.hostname){top.location.hostname=window.location.hostname}}catch(f){}})();(function(){if(window.ct.langUrlPrefix==undefined){window.ct.langUrlPrefix=(function(){var h=["ar"];var e="";var g=h.length;for(var f=0;f<g;f++){var j=h[f];if(window.location.pathname.split("/")[1]==j){e="/"+j}}return e})()}})();if(window.mixpanelswitch&&(window.location.pathname.indexOf("/trains")!=-1||window.ctApp=="train")){ct.trackers.includeMixPanel()}Event.observe(window,"load",function(){if(window.productCode!="AG"&&window.productCode!="CP"&&window.location.pathname.indexOf("/hotels")!=-1){ct.abTest()}})})();Ajax.Responders.register(ct.ajaxTimeoutHandler);