BOOMR_start=new Date().getTime();function BOOMR_check_doc_domain(b){var c;if(!window){return}if(!b){if(window.parent===window||!document.getElementById("boomr-if-as")){return}if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window){try{if(BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain){BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain}}catch(a){if(!BOOMR.isCrossOriginError(a)){BOOMR.addError(a,"BOOMR_check_doc_domain.domainFix")}}}b=document.domain}if(b.indexOf(".")===-1){return}try{c=window.parent.document;return}catch(a){document.domain=b}try{c=window.parent.document;return}catch(a){b=b.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(b)}BOOMR_check_doc_domain();(function(i){var g,h,f,c,l,b,j,m=i;if(i.parent!==i&&document.getElementById("boomr-if-as")&&document.getElementById("boomr-if-as").nodeName.toLowerCase()==="script"){i=i.parent}f=i.document;if(!i.BOOMR){i.BOOMR={}}BOOMR=i.BOOMR;if(BOOMR.version){return}BOOMR.version="4.0.0";BOOMR.window=i;BOOMR.boomerang_frame=m;if(!BOOMR.plugins){BOOMR.plugins={}}(function(){try{if(new i.CustomEvent("CustomEvent")!==undefined){c=function(o,p){return new i.CustomEvent(o,p)}}}catch(d){}try{if(!c&&f.createEvent&&f.createEvent("CustomEvent")){c=function(p,q){var o=f.createEvent("CustomEvent");q=q||{cancelable:!1,bubbles:!1};o.initCustomEvent(p,q.bubbles,q.cancelable,q.detail);return o}}}catch(d){}if(!c&&f.createEventObject){c=function(p,q){var o=f.createEventObject();o.type=o.propertyName=p;o.detail=q.detail;return o}}if(!c){c=function(){return undefined}}}());l=function(d,q,p){var r=c(d,{detail:q});if(!r){return}function o(){try{if(f.dispatchEvent){f.dispatchEvent(r)}else{if(f.fireEvent){f.fireEvent("onpropertychange",r)}}}catch(s){BOOMR.debug("Error when dispatching "+d)}}if(p){BOOMR.setImmediate(o)}else{o()}};if(typeof f.hidden!=="undefined"){b="visibilityState";j="visibilitychange"}else{if(typeof f.mozHidden!=="undefined"){b="mozVisibilityState";j="mozvisibilitychange"}else{if(typeof f.msHidden!=="undefined"){b="msVisibilityState";j="msvisibilitychange"}else{if(typeof f.webkitHidden!=="undefined"){b="webkitVisibilityState";j="webkitvisibilitychange"}}}}g={beacon_url:"",beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:undefined,site_domain:i.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:undefined,r2:undefined,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],xhr_send:[],xhr_error:[],error:[],xhr_send:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},"1":{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",xb_handler:function(d){return function(o){var p;if(!o){o=i.event}if(o.target){p=o.target}else{if(o.srcElement){p=o.srcElement}}if(p.nodeType===3){p=p.parentNode}if(p&&p.nodeName&&p.nodeName.toUpperCase()==="OBJECT"&&p.type==="application/x-shockwave-flash"){return}g.fireEvent(d,p)}},clearEvents:function(){var d;for(d in this.events){if(this.events.hasOwnProperty(d)){this.events[d]=[]}}},clearListeners:function(){var o,d;for(o in g.listenerCallbacks){if(g.listenerCallbacks.hasOwnProperty(o)){while(g.listenerCallbacks[o].length){BOOMR.utils.removeListener(g.listenerCallbacks[o][0].el,o,g.listenerCallbacks[o][0].fn)}}}g.listenerCallbacks={}},fireEvent:function(d,t){var p,q,o,s;d=d.toLowerCase();if(this.translate_events[d]){d=this.translate_events[d]}if(!this.events.hasOwnProperty(d)){return}if(this.public_events.hasOwnProperty(d)){l(this.public_events[d],t)}o=this.events[d];if(d!=="before_beacon"&&d!=="beacon"){BOOMR.real_sendBeacon()}s=o.length;for(p=0;p<s;p++){try{q=o[p];q.fn.call(q.scope,t,q.cb_data)}catch(r){BOOMR.addError(r,"fireEvent."+d+"<"+p+">")}}for(p=0;p<s;p++){if(o[p].once){o.splice(p,1);s--;p--}}return},spaNavigation:function(){g.onloadfired=!0},beaconUrlAllowed:function(d){if(!g.beacon_urls_allowed||g.beacon_urls_allowed.length===0){return !0}for(var o=0;o<g.beacon_urls_allowed.length;o++){var p=new RegExp(g.beacon_urls_allowed[o]);if(p.exec(d)){return !0}}return !1},checkLocalStorageSupport:function(){var d=g.LOCAL_STORAGE_PREFIX+"clss";g.localStorageSupported=!1;if(!i.JSON||!i.localStorage){return}try{i.localStorage.setItem(d,d);g.localStorageSupported=(i.localStorage.getItem(d)===d);i.localStorage.removeItem(d)}catch(o){g.localStorageSupported=!1}}};h={t_start:BOOMR_start,t_end:undefined,url:"",loadedLate:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2000},utils:{hasPostMessageSupport:function(){if(!i.postMessage||typeof i.postMessage!=="function"&&typeof i.postMessage!=="object"){return !1}return !0},objectToString:function(s,r,p){var q=[],d;if(!s||typeof s!=="object"){return s}if(r===undefined){r="\n\t"}if(!p){p=0}if(BOOMR.utils.isArray(s)){for(d=0;d<s.length;d++){if(p>0&&s[d]!==null&&typeof s[d]==="object"){q.push(this.objectToString(s[d],r+(r==="\n\t"?"\t":""),p-1))}else{if(r==="&"){q.push(encodeURIComponent(s[d]))}else{q.push(s[d])}}}r=","}else{for(d in s){if(Object.prototype.hasOwnProperty.call(s,d)){if(p>0&&s[d]!==null&&typeof s[d]==="object"){q.push(encodeURIComponent(d)+"="+this.objectToString(s[d],r+(r==="\n\t"?"\t":""),p-1))}else{if(r==="&"){q.push(encodeURIComponent(d)+"="+encodeURIComponent(s[d]))}else{q.push(d+"="+s[d])}}}}}return q.join(r)},getCookie:function(d){if(!d){return null}d=" "+d+"=";var o,p;p=" "+f.cookie+";";if((o=p.indexOf(d))>=0){o+=d.length;p=p.substring(o,p.indexOf(";",o)).replace(/^"/,"").replace(/"$/,"");return p}},setCookie:function(q,r,d){var s,p,o,u,t;if(!q||!g.site_domain||typeof r==="undefined"){BOOMR.debug("Invalid parameters or site domain: "+q+"/"+r+"/"+g.site_domain);BOOMR.addVar("nocookie",1);return !1}s=this.objectToString(r,"&");p=q+'="'+s+'"';if(p.length<500){u=[p,"path=/","domain="+g.site_domain];if(typeof d==="number"){t=new Date();t.setTime(t.getTime()+d*1000);t=t.toGMTString();u.push("expires="+t)}f.cookie=u.join("; ");o=this.getCookie(q);if(s===o||(typeof o==="undefined"&&typeof d==="number"&&d<=0)){return !0}BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+s+"\n"+o)}else{BOOMR.warn("Cookie too long: "+p.length+" "+p)}BOOMR.addVar("nocookie",1);return !1},getSubCookies:function(r){var q,p,d,t,o=!1,s={};if(!r){return null}if(typeof r!=="string"){BOOMR.debug("TypeError: cookie is not a string: "+typeof r);return null}q=r.split("&");for(p=0,d=q.length;p<d;p++){t=q[p].split("=");if(t[0]){t.push("");s[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);o=!0}}return o?s:null},removeCookie:function(d){return this.setCookie(d,{},-86400)},getLocalStorage:function(d){var p,o;if(!d||!g.localStorageSupported){return null}try{p=i.localStorage.getItem(g.LOCAL_STORAGE_PREFIX+d);if(p===null){return undefined}o=i.JSON.parse(p)}catch(q){BOOMR.warn(q);return null}if(!o||typeof o.items!=="object"){this.removeLocalStorage(d);return null}if(typeof o.expires==="number"){if(BOOMR.now()>=o.expires){this.removeLocalStorage(d);return undefined}}return o.items},setLocalStorage:function(q,p,d){var s,r,o;if(!q||!g.localStorageSupported||typeof p!=="object"){return !1}s={items:p};if(typeof d==="number"){s.expires=BOOMR.now()+(d*1000)}r=i.JSON.stringify(s);if(r.length<50000){try{i.localStorage.setItem(g.LOCAL_STORAGE_PREFIX+q,r);o=i.localStorage.getItem(g.LOCAL_STORAGE_PREFIX+q);if(r===o){return !0}}catch(t){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+r+"\n"+o)}else{BOOMR.warn("Storage items too large: "+r.length+" "+r)}return !1},removeLocalStorage:function(d){if(!d||!g.localStorageSupported){return !1}try{i.localStorage.removeItem(g.LOCAL_STORAGE_PREFIX+d);return !0}catch(o){}return !1},cleanupURL:function(p,o){if(!p||BOOMR.utils.isArray(p)){return""}if(g.strip_query_string){p=p.replace(/\?.*/,"?qs-redacted")}if(typeof o!=="undefined"&&p&&p.length>o){var d=p.indexOf("?");if(d!==-1&&d<o){p=p.substr(0,d)+"?..."}else{p=p.substr(0,o-3)+"..."}}return p},hashQueryString:function(o,d){if(!o){return o}if(!o.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof o);return""}if(o.match(/^\/\//)){o=location.protocol+o}if(!o.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+o);return""}if(d){o=o.replace(/#.*/,"")}if(!BOOMR.utils.MD5){return o}return o.replace(/\?([^#]*)/,function(q,p){return"?"+(p.length>10?BOOMR.utils.MD5(p):p)})},pluginConfig:function(t,d,r,q){var p,s=0;if(!d||!d[r]){return !1}for(p=0;p<q.length;p++){if(d[r][q[p]]!==undefined){t[q[p]]=d[r][q[p]];s++}}return(s>0)},arrayFilter:function(s,o){var d=[];if(!(this.isArray(s)||(s&&typeof s.length==="number"))||typeof o!=="function"){return d}if(typeof s.filter==="function"){d=s.filter(o)}else{var p=-1,q=s.length,r;while(++p<q){r=s[p];if(o(r,p,s)){d[d.length]=r}}}return d},arrayFind:function(r,d){if(!(this.isArray(r)||(r&&typeof r.length==="number"))||typeof d!=="function"){return undefined}if(typeof r.find==="function"){return r.find(d)}else{var o=-1,p=r.length,q;while(++o<p){q=r[o];if(d(q,o,r)){return q}}return undefined}},isMutationObserverSupported:function(){var d=(i&&i.navigator&&i.navigator.userAgent&&i.navigator.userAgent.match(/Trident.*rv[ :]*11\./));return(!d&&i&&i.MutationObserver&&typeof i.MutationObserver==="function")},addObserver:function(r,p,s,v,q,u){var t={observer:null,timer:null};if(!this.isMutationObserverSupported()||!v||!r){return null}function d(o){var w=!1;if(t.timer){clearTimeout(t.timer);t.timer=null}if(v){w=v.call(u,o,q);if(!w){v=null}}if(!w&&t.observer){t.observer.disconnect();t.observer=null}if(typeof w==="number"&&w>0){t.timer=setTimeout(d,w)}}t.observer=new BOOMR.window.MutationObserver(d);if(s){t.timer=setTimeout(d,t.timeout)}t.observer.observe(r,p);return t},addListener:function(q,p,o,d){var r=!1;if(q.addEventListener){if(d&&BOOMR.browser.supportsPassive()){r={capture:!1,passive:!0}}q.addEventListener(p,o,r)}else{if(q.attachEvent){q.attachEvent("on"+p,o)}}g.listenerCallbacks[p]=g.listenerCallbacks[p]||[];g.listenerCallbacks[p].push({el:q,fn:o})},removeListener:function(q,p,o){var d;if(q.removeEventListener){q.removeEventListener(p,o,!1)}else{if(q.detachEvent){q.detachEvent("on"+p,o)}}if(g.listenerCallbacks.hasOwnProperty(p)){for(var d=0;d<g.listenerCallbacks[p].length;d++){if(o===g.listenerCallbacks[p][d].fn&&q===g.listenerCallbacks[p][d].el){g.listenerCallbacks[p].splice(d,1);return}}}},isArray:function(d){return Object.prototype.toString.call(d)==="[object Array]"},inArray:function(p,o){var d;if(typeof p==="undefined"||typeof o==="undefined"||!o.length){return !1}for(d=0;d<o.length;d++){if(o[d]===p){return !0}}return !1},getQueryParamValue:function(s,o){var d,r,p,q;if(!s){return null}if(typeof o==="string"){d=BOOMR.window.document.createElement("a");d.href=o}else{if(typeof o==="object"&&typeof o.search==="string"){d=o}else{d=BOOMR.window.location}}r=d.search.slice(1).split(/&/);for(p=0;p<r.length;p++){if(r[p]){q=r[p].split("=");if(q.length&&q[0]===s){return decodeURIComponent(q[1].replace(/\+/g," "))}}}return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var o=Math.random()*16|0;var d=p==="x"?o:(o&3|8);return d.toString(16)})},generateId:function(d){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,d||40).replace(/x/g,function(o){var o=(Math.random()||0.01).toString(36);if(o==="0"){return"0"}else{return o.substr(2,1)}})},serializeForUrl:function(d){if(BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl){return BOOMR.utils.Compression.jsUrl(d)}if(window.JSON){return JSON.stringify(d)}BOOMR.debug("JSON is not supported");return""},getMyURL:function(){var o;var q=(document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as"));if(q){return q.src}var d=document.getElementsByTagName("script"),p;for(p=d.length;p--;){if(d[p].readyState==="interactive"){return d[p].src}}try{throw new Error()}catch(r){if("stack" in r){o=this.arrayFilter(r.stack.split(/\n/),function(s){return s.match(/https?:\/\//)});if(o&&o.length){return o[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}}}return""},scroll:function(){var o=i.pageXOffset!==undefined;var p=((i.document.compatMode||"")==="CSS1Compat");var d={x:0,y:0};if(o){if(typeof i.pageXOffset==="function"){d.x=i.pageXOffset();d.y=i.pageYOffset()}else{d.x=i.pageXOffset;d.y=i.pageYOffset}}else{if(p){d.x=i.document.documentElement.scrollLeft;d.y=i.document.documentElement.scrollTop}else{d.x=i.document.body.scrollLeft;d.y=i.document.body.scrollTop}}if(typeof d.sx==="number"){d.sx=Math.round(d.sx)}if(typeof d.sy==="number"){d.sy=Math.round(d.sy)}return d},windowHeight:function(){return i.innerHeight||i.document.documentElement.clientHeight||i.document.body.clientHeight},windowWidth:function(){return i.innerWidth||i.document.documentElement.clientWidth||i.document.body.clientWidth}},browser:{results:{},supportsPassive:function(){if(typeof BOOMR.browser.results.supportsPassive==="undefined"){BOOMR.browser.results.supportsPassive=!1;if(!Object.defineProperty){return !1}try{var d=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,d)}catch(o){}}return BOOMR.browser.results.supportsPassive}},init:function(o){var q,d,p=["autorun","beacon_auth_key","beacon_auth_token","beacon_url","beacon_type","site_domain","strip_query_string","user_ip"];BOOMR_check_doc_domain();if(!o){o={}}if(o.log!==undefined){this.log=o.log}if(!this.log){this.log=function(){}}if(!this.pageId){this.pageId=BOOMR.utils.generateId(8);BOOMR.debug("Generated PageID: "+this.pageId)}if(o.primary&&g.handlers_attached){return this}if(typeof o.autorun!=="undefined"){g.autorun=o.autorun}for(d in this.plugins){if(this.plugins.hasOwnProperty(d)){if(o[d]&&o[d].hasOwnProperty("enabled")&&o[d].enabled===!1){g.disabled_plugins[d]=1;if(typeof this.plugins[d].disable==="function"){this.plugins[d].disable()}continue}if(g.disabled_plugins[d]){if(!o[d]||!o[d].hasOwnProperty("enabled")||o[d].enabled!==!0){continue}if(typeof this.plugins[d].enable==="function"){this.plugins[d].enable()}delete g.disabled_plugins[d]}if(typeof this.plugins[d].init==="function"){try{this.plugins[d].init(o)}catch(r){BOOMR.addError(r,d+".init")}}}}for(q=0;q<p.length;q++){if(o[p[q]]!==undefined){g[p[q]]=o[p[q]]}}if(g.handlers_attached){return this}if(!g.onloadfired&&(o.autorun===undefined||o.autorun!==!1)){if(BOOMR.hasBrowserOnloadFired()){BOOMR.loadedLate=!0}BOOMR.attach_page_ready(BOOMR.page_ready_autorun)}BOOMR.utils.addListener(i,"DOMContentLoaded",function(){g.fireEvent("dom_loaded")});BOOMR.fireEvent("config",o);BOOMR.subscribe("config",function(s){if(s.beacon_url){g.beacon_url=s.beacon_url}});BOOMR.subscribe("spa_navigation",g.spaNavigation,null,g);(function(){var s,t;if(j!==undefined){BOOMR.utils.addListener(f,j,function(){g.fireEvent("visibility_changed")});g.lastVisibilityState=BOOMR.visibilityState();BOOMR.subscribe("visibility_changed",function(){var u=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[u]=BOOMR.now();BOOMR.debug("Visibility changed from "+g.lastVisibilityState+" to "+u);if(g.lastVisibilityState==="prerender"&&u!=="prerender"){BOOMR.addVar("vis.pre","1");g.fireEvent("prerender_to_visible")}g.lastVisibilityState=u})}BOOMR.utils.addListener(f,"mouseup",g.xb_handler("click"));s=f.getElementsByTagName("form");for(t=0;t<s.length;t++){BOOMR.utils.addListener(s[t],"submit",g.xb_handler("form_submit"))}if(!i.onpagehide&&i.onpagehide!==null){BOOMR.utils.addListener(i,"unload",function(){BOOMR.window=i=null})}}());g.handlers_attached=!0;return this},attach_page_ready:function(d){if(BOOMR.hasBrowserOnloadFired()){this.setImmediate(d,null,null,BOOMR)}else{if(i.onpagehide||i.onpagehide===null){BOOMR.utils.addListener(i,"pageshow",d)}else{BOOMR.utils.addListener(i,"load",d)}}},page_ready_autorun:function(d){if(g.autorun){BOOMR.page_ready(d,!0)}},page_ready:function(o,p){var d;if(!p&&typeof o==="number"){d=o;o=null}if(!o){o=i.event}if(!o){o={name:"load"}}if(!p){o.timing=o.timing||{};if(d){o.timing.loadEventEnd=d}else{if(typeof i.BOOMR_page_ready==="number"){o.timing.loadEventEnd=i.BOOMR_page_ready}else{o.timing.loadEventEnd=BOOMR.now()}}BOOMR.addVar("pr",1,!0)}else{if(typeof i.BOOMR_page_ready==="number"){o.timing=o.timing||{};o.timing.loadEventEnd=i.BOOMR_page_ready;BOOMR.addVar("pr",1,!0)}}if(g.onloadfired){return this}g.fireEvent("page_ready",o);g.onloadfired=!0;return this},hasBrowserOnloadFired:function(){var d=BOOMR.getPerformance();return((f.readyState&&f.readyState==="complete")||(d&&d.timing&&d.timing.loadEventStart>0)||i.BOOMR_onload>0)},onloadFired:function(){return g.onloadfired},setImmediate:function(q,r,p,s){var d,o;d=function(){q.call(s||null,r,p||{},o);d=null};if(i.requestIdleCallback){i.requestIdleCallback(d,{timeout:1000})}else{if(i.setImmediate){i.setImmediate(d)}else{setTimeout(d,10)}}},now:(function(){return Date.now||function(){return new Date().getTime()}}()),getPerformance:function(){try{if(BOOMR.window){if("performance" in BOOMR.window&&BOOMR.window.performance){return BOOMR.window.performance}return BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}}catch(d){}},hrNow:function(){var o,d,q=BOOMR.getPerformance();if(q&&q.now){o=q.now()}else{d=(BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart())||BOOMR.t_lstart||BOOMR.t_start;o=BOOMR.now()-d}return o},visibilityState:(b===undefined?function(){return"visible"}:function(){return f[b]}),lastVisibilityEvent:{},registerEvent:function(d){if(g.events.hasOwnProperty(d)){return this}g.events[d]=[];return this},disable:function(){g.clearEvents();g.clearListeners()},fireEvent:function(d,o){return g.fireEvent(d,o)},subscribe:function(d,s,o,u,r){var p,q,t;d=d.toLowerCase();if(g.translate_events[d]){d=g.translate_events[d]}if(!g.events.hasOwnProperty(d)){g.events[d]=[]}t=g.events[d];for(p=0;p<t.length;p++){q=t[p];if(q&&q.fn===s&&q.cb_data===o&&q.scope===u){return this}}t.push({fn:s,cb_data:o||{},scope:u||null,once:r||!1});if(d==="page_ready"&&g.onloadfired&&g.autorun){this.setImmediate(s,null,o,u)}if(d==="page_unload"||d==="before_unload"){(function(){var v,w=t.length;v=function(x){if(s){s.call(u,x||i.event,o)}if(d==="page_unload"&&w===g.events[d].length){BOOMR.real_sendBeacon()}};if(d==="page_unload"){if(i.onpagehide||i.onpagehide===null){BOOMR.utils.addListener(i,"pagehide",v)}else{BOOMR.utils.addListener(i,"unload",v)}}BOOMR.utils.addListener(i,"beforeunload",v)}())}return this},addError:function n(o,r,d){var q,p=BOOMR.plugins.Errors;if(p&&p.is_supported()){if(typeof o==="string"){p.send({message:o,extra:d,functionName:r,noStack:!0},p.VIA_APP,p.SOURCE_BOOMERANG)}else{if(typeof r==="string"){o.functionName=r}if(typeof d!=="undefined"){o.extra=d}p.send(o,p.VIA_APP,p.SOURCE_BOOMERANG)}return}if(typeof o!=="string"){q=String(o);if(q.match(/^\[object/)){q=o.name+": "+(o.description||o.message).replace(/\r\n$/,"")}o=q}if(r!==undefined){o="["+r+":"+BOOMR.now()+"] "+o}if(d){o+=":: "+d}if(g.errors[o]){g.errors[o]++}else{g.errors[o]=1}},isCrossOriginError:function(d){return d.name==="SecurityError"||(d.name==="TypeError"&&d.message==="Permission denied")||(d.name==="Error"&&d.message&&d.message.match(/^(Permission|Access is) denied/))},addVar:function(p,r,q){if(typeof p==="string"){g.vars[p]=r}else{if(typeof p==="object"){var s=p,d;for(d in s){if(s.hasOwnProperty(d)){g.vars[d]=s[d]}}}}if(q){g.singleBeaconVars[p]=1}return this},appendVar:function(d,p){var o=BOOMR.getVar(d)||"";if(o){o+=","}BOOMR.addVar(d,o+p);return this},removeVar:function(o){var d,p;if(!arguments.length){return this}if(arguments.length===1&&BOOMR.utils.isArray(o)){p=o}else{p=arguments}for(d=0;d<p.length;d++){if(g.vars.hasOwnProperty(p[d])){delete g.vars[p[d]]}}return this},hasVar:function(d){return g.vars.hasOwnProperty(d)},getVar:function(d){return g.vars[d]},setVarPriority:function(d,o){if(typeof o!=="number"||Math.abs(o)!==1){return this}g.varPriority[o][d]=1;return this},setReferrer:function(o,d){g.r=o;if(d&&o!==d){g.r2=d}else{g.r2=undefined}},requestStart:function(o){var d=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+o,d);return{loaded:function(p){BOOMR.responseEnd(o,d,p)}}},readyToSend:function(){var d;for(d in this.plugins){if(this.plugins.hasOwnProperty(d)){if(g.disabled_plugins[d]){continue}if(typeof this.plugins[d].readyToSend==="function"&&this.plugins[d].readyToSend()===!1){BOOMR.debug("Plugin "+d+" is not ready to send");return !1}}}return !0},responseEnd:function(o,d,q,p){d=typeof d==="number"?d:BOOMR.now();p=typeof p==="number"?p:BOOMR.now();if(!BOOMR.readyToSend()){BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again...");setTimeout(function(){BOOMR.responseEnd(o,d,q,p)},1000);return}if(!BOOMR.hasSentPageLoadBeacon()&&!BOOMR.utils.inArray(o.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(o,d,q,p)},null,BOOMR,!0);return}if(typeof o==="object"){if(!o.url){BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");return}g.fireEvent("xhr_load",o)}else{BOOMR.real_sendBeacon();BOOMR.addVar("xhr.pg",o);BOOMR.plugins.RT.startTimer("xhr_"+o,d);g.fireEvent("xhr_load",{name:"xhr_"+o,data:q,timing:{loadEventEnd:p}})}},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(d){if(d){g.beacon_url_override=d}if(!g.beaconQueued){g.beaconQueued=!0;BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)}return !0},real_sendBeacon:function(){var s,o,d,w=[],r=[],u,t={},v;if(!g.beaconQueued){return !1}g.beaconQueued=!1;BOOMR.debug("Checking if we can send beacon");for(s in this.plugins){if(this.plugins.hasOwnProperty(s)){if(g.disabled_plugins[s]){continue}if(!this.plugins[s].is_complete(g.vars)){BOOMR.debug("Plugin "+s+" is not complete, deferring beacon send");return !1}}}if(!window||!window.Image||!window.navigator||!BOOMR.window){BOOMR.debug("DOM not fully available, not sending a beacon");return !1}var p=BOOMR.utils.inArray(g.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS);var q=typeof g.vars["http.initiator"]==="undefined"||p;if(!g.vars.pgu){g.vars.pgu=p?f.URL:f.URL.replace(/#.*/,"")}g.vars.pgu=BOOMR.utils.cleanupURL(g.vars.pgu);if(!g.vars.u||p){g.vars.u=g.vars.pgu}if(g.vars.pgu===g.vars.u){delete g.vars.pgu}if(g.r){g.vars.r=BOOMR.utils.cleanupURL(g.r)}else{delete g.vars.r}if(g.r2){g.vars.r2=BOOMR.utils.cleanupURL(g.r2)}else{delete g.vars.r2}g.vars.v=BOOMR.version;if(BOOMR.visibilityState()){g.vars["vis.st"]=BOOMR.visibilityState();if(BOOMR.lastVisibilityEvent.visible){g.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible}if(BOOMR.lastVisibilityEvent.hidden){g.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden}}g.vars["ua.plt"]=navigator.platform;g.vars["ua.vnd"]=navigator.vendor;if(this.pageId){g.vars.pid=this.pageId}if(i!==window){v="if";g.vars[v]=""}for(s in g.errors){if(g.errors.hasOwnProperty(s)){w.push(s+(g.errors[s]>1?" (*"+g.errors[s]+")":""))}}if(w.length>0){g.vars.errors=w.join("\n")}g.errors={};g.fireEvent("before_beacon",g.vars);for(s in g.vars){if(g.vars.hasOwnProperty(s)){t[s]=g.vars[s]}}BOOMR.removeVar("qt");for(var x in g.singleBeaconVars){if(g.singleBeaconVars.hasOwnProperty(x)){BOOMR.removeVar(x)}}g.singleBeaconVars={};if(!g.hasSentPageLoadBeacon&&q){g.hasSentPageLoadBeacon=!0;BOOMR.setImmediate(function(){g.fireEvent("page_load_beacon",t)})}BOOMR.sendBeaconData(t);return !0},hasSentPageLoadBeacon:function(){return g.hasSentPageLoadBeacon},sendBeaconData:function(s){var p=[],o=[],r,u,d,t,y=!0,x,w;BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(s));g.beacon_url=g.beacon_url_override||g.beacon_url;if(!g.beacon_url){BOOMR.debug("No beacon URL, so skipping.");return !1}if(!g.beaconUrlAllowed(g.beacon_url)){BOOMR.debug("Beacon URL not allowed: "+g.beacon_url);return !1}if(s.length===0){return !1}g.fireEvent("beacon",s);p=this.getVarsOfPriority(s,-1);o=this.getVarsOfPriority(s,1);r=p.concat(this.getVarsOfPriority(s,0),o);u=r.join("&");d=g.beacon_url+((g.beacon_url.indexOf("?")>-1)?"&":"?")+u;if(g.beacon_type==="POST"||d.length>BOOMR.constants.MAX_GET_LENGTH){y=!1}if(i&&i.navigator&&typeof i.navigator.sendBeacon==="function"&&typeof i.Blob==="function"){var q=new i.Blob([u+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(i.navigator.sendBeacon(g.beacon_url,q)){return !0}}if(!BOOMR.orig_XMLHttpRequest&&(!i||!i.XMLHttpRequest)){y=!0}if(y){try{t=new Image()}catch(v){BOOMR.debug("Image is not a constructor, not sending a beacon");return !1}t.src=d}else{x=new (BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest)();try{this.sendXhrPostBeacon(x,u)}catch(v){x=new BOOMR.boomerang_frame.XMLHttpRequest();this.sendXhrPostBeacon(x,u)}}return !0},hasSentPageLoadBeacon:function(){return g.hasSentPageLoadBeacon},sendXhrPostBeacon:function(o,d){o.open("POST",g.beacon_url);o.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(typeof g.beacon_auth_token!=="undefined"){if(typeof g.beacon_auth_key==="undefined"){g.beacon_auth_key="Authorization"}o.setRequestHeader(g.beacon_auth_key,g.beacon_auth_token)}o.send(d)},getVarsOfPriority:function(q,p){var o,d=[];if(p!==0){for(o in g.varPriority[p]){if(g.varPriority[p].hasOwnProperty(o)){if(q.hasOwnProperty(o)){d.push(this.getUriEncodedVar(o,q[o]));delete q[o]}}}}else{for(o in q){if(q.hasOwnProperty(o)){d.push(this.getUriEncodedVar(o,q[o]))}}}return d},getUriEncodedVar:function(o,p){if(p===undefined||p===null){p=""}if(typeof p==="object"){p=BOOMR.utils.serializeForUrl(p)}var d=encodeURIComponent(o)+"="+encodeURIComponent(p);return d},getResourceTiming:function(o,q){var d,r=BOOMR.getPerformance();try{if(r&&typeof r.getEntriesByName==="function"){d=r.getEntriesByName(o);if(d&&d.length){if(typeof q==="function"){d.sort(q)}return d[d.length-1]}}}catch(s){}}};h.url=h.utils.getMyURL();delete BOOMR_start;if(typeof BOOMR_lstart==="number"){h.t_lstart=BOOMR_lstart;delete BOOMR_lstart}else{if(typeof BOOMR.window.BOOMR_lstart==="number"){h.t_lstart=BOOMR.window.BOOMR_lstart}}if(typeof BOOMR.window.BOOMR_onload==="number"){h.t_onload=BOOMR.window.BOOMR_onload}(function(){var d;if(typeof console==="object"&&console.log!==undefined){h.log=function(o,p,q){console.log("("+BOOMR.now()+") {"+BOOMR.pageId+"}: "+q+": ["+p+"] "+o)}}else{h.log=function(){}}d=function(o){return function(p,q){this.log(p,o,"boomerang"+(q?"."+q:""));return this}};h.debug=d("debug");h.info=d("info");h.warn=d("warn");h.error=d("error")}());try{var a=h.getPerformance();if(a&&typeof a.now==="function"&&/\[native code\]/.test(String(a.now))&&a.timing&&a.timing.navigationStart){h.now=function(){return Math.round(a.now()+a.timing.navigationStart)}}}catch(e){}g.checkLocalStorageSupport();(function(){var d;for(d in h){if(h.hasOwnProperty(d)){BOOMR[d]=h[d]}}if(!BOOMR.xhr_excludes){BOOMR.xhr_excludes={}}}());l("onBoomerangLoaded",{BOOMR:BOOMR},!0)}(window));(function(a){var e,b,c=60*60*24*7;if(BOOMR.plugins.RT){return}b={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:c,strict_referrer:!0,navigationType:0,navigationStart:undefined,responseStart:undefined,t_start:undefined,cached_t_start:undefined,cached_xhr_start:undefined,t_fb_approx:undefined,r:undefined,r2:undefined,basic_timers:{t_done:1,t_resp:1,t_page:1},crossdomain_sending:!1,addedVars:[],updateCookie:function(i,j){var h,f,g,d;if(!this.cookie){return !1}g=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{};if(typeof i==="object"){for(d in i){if(i.hasOwnProperty(d)){if(i[d]===undefined){if(g.hasOwnProperty(d)){delete g[d]}}else{if(d==="nu"||d==="r"){i[d]=BOOMR.utils.hashQueryString(i[d],!0)}g[d]=i[d]}}}}f=BOOMR.now();if(j){g[j]=f;b.lastActionTime=f}BOOMR.debug("Setting cookie (timer="+j+")\n"+BOOMR.utils.objectToString(g),"rt");if(!BOOMR.utils.setCookie(this.cookie,g,this.cookie_exp)){BOOMR.error("cannot set start cookie","rt");return !1}h=BOOMR.now();if(h-f>50){BOOMR.utils.removeCookie(this.cookie);BOOMR.error("took more than 50ms to set cookie... aborting: "+f+" -> "+h,"rt")}return !0},initFromCookie:function(){var d,f;f=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie));if(!f){return}f.s=Math.max(+f.ld||0,Math.max(+f.ul||0,+f.cl||0));BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(f),"rt");if(f.s&&(f.r||f.nu)){this.r=f.r;d=BOOMR.utils.hashQueryString(e.URL,!0);BOOMR.debug(this.r+" =?= "+this.r2,"rt");BOOMR.debug(f.s+" <? "+(+f.cl+15),"rt");BOOMR.debug(f.nu+" =?= "+d,"rt");if(!this.strict_referrer||(f.nu&&f.nu===d&&f.s<+f.cl+15)||(f.s===+f.ul&&this.r===this.r2)){this.t_start=f.s;if(+f.hd>f.s){this.t_fb_approx=parseInt(f.hd,10)}}else{this.t_start=this.t_fb_approx=undefined}}this.updateCookie({s:undefined,r:undefined,nu:undefined,ul:undefined,cl:undefined,hd:undefined,ld:undefined,rl:undefined})},getBoomerangTimings:function(){var g,l,f,h,i;function d(o,n){var p=Math.round(o?o:0),m=Math.round(n?n:0);p=(p===0?0:(p-m));return p?p:""}if(BOOMR.t_start){BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start);BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end);BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart);BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)}}try{if(window&&"performance" in window&&window.performance&&typeof window.performance.getEntriesByName==="function"){l={"rt.bmr":BOOMR.url};for(f in l){if(l.hasOwnProperty(f)&&l[f]){g=window.performance.getEntriesByName(l[f]);if(!g||g.length===0||!g[0]){continue}g=g[0];h=d(g.startTime,0);i=[h,d(g.responseEnd,h),d(g.responseStart,h),d(g.requestStart,h),d(g.connectEnd,h),d(g.secureConnectionStart,h),d(g.connectStart,h),d(g.domainLookupEnd,h),d(g.domainLookupStart,h),d(g.redirectEnd,h),d(g.redirectStart,h)].join(",").replace(/,+$/,"");BOOMR.addVar(f,i);b.addedVars.push(f)}}}}catch(j){BOOMR.addError(j,"rt.getBoomerangTimings")}},checkPreRender:function(){if(BOOMR.visibilityState()!=="prerender"){return !1}BOOMR.plugins.RT.startTimer("t_load",this.navigationStart);BOOMR.plugins.RT.endTimer("t_load");BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart);BOOMR.plugins.RT.startTimer("t_postrender");return !0},initFromNavTiming:function(){var d,g,f;if(this.navigationStart){return}g=BOOMR.getPerformance();if(g&&g.navigation){this.navigationType=g.navigation.type}if(g&&g.timing){d=g.timing}else{if(a.chrome&&a.chrome.csi&&a.chrome.csi().startE){d={navigationStart:a.chrome.csi().startE};f="csi"}else{if(a.gtbExternal&&a.gtbExternal.startE()){d={navigationStart:a.gtbExternal.startE()};f="gtb"}}}if(d){BOOMR.addVar("rt.start",f||"navigation");this.navigationStart=d.navigationStart||d.fetchStart||undefined;this.fetchStart=d.fetchStart||undefined;this.responseStart=d.responseStart||undefined;if(navigator.userAgent.match(/Firefox\/[78]\./)){this.navigationStart=d.unloadEventStart||d.fetchStart||undefined}}else{BOOMR.warn("This browser doesn't support the WebTiming API","rt")}return},validateLoadTimestamp:function(g,f,d){var h;if(f&&f.timing&&f.timing.loadEventEnd){return f.timing.loadEventEnd}else{if(d==="xhr"&&(!f||!BOOMR.utils.inArray(f.initiator,BOOMR.constants.BEACON_TYPE_SPAS))){return g}else{h=BOOMR.getPerformance();if(h&&h.timing){if(h.timing.loadEventEnd){return h.timing.loadEventEnd}}else{return BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||g}}}return g},setPageLoadTimers:function(f,j,l){var i,h,m,d;if(f!=="xhr"){b.initFromCookie();b.initFromNavTiming();if(b.checkPreRender()){return !1}}if(f==="xhr"){if(l.timers){for(var g in l.timers){if(l.timers.hasOwnProperty(g)){BOOMR.plugins.RT.setTimer(g,l.timers[g])}}}else{if(l&&l.timing){h=l.timing.fetchStart;if(typeof h==="undefined"||l.timing.responseEnd>=h){i=l.timing.responseEnd}}}}else{if(b.responseStart){if(b.responseStart>=b.navigationStart&&b.responseStart>=b.fetchStart){i=b.responseStart}}else{if(b.timers.hasOwnProperty("t_page")){BOOMR.plugins.RT.endTimer("t_page")}else{if(b.t_fb_approx){i=b.t_fb_approx}}}}if(i){if(h){BOOMR.plugins.RT.setTimer("t_resp",h,i)}else{BOOMR.plugins.RT.endTimer("t_resp",i)}if(f==="load"&&b.timers.t_load){BOOMR.plugins.RT.setTimer("t_page",b.timers.t_load.end-i)}else{if(j<i){BOOMR.addVar("t_page.inv",1)}else{BOOMR.plugins.RT.setTimer("t_page",j-i)}}}if(f==="load"&&b.timers.hasOwnProperty("t_postrender")){BOOMR.plugins.RT.endTimer("t_postrender");BOOMR.plugins.RT.endTimer("t_prerender")}return !0},setSupportingTimestamps:function(d){if(d){BOOMR.addVar("rt.tstart",d)}if(typeof b.navigationStart==="number"&&b.navigationStart!==d){BOOMR.addVar("rt.nstart",b.navigationStart)}if(typeof b.t_start==="number"&&b.t_start!==d){BOOMR.addVar("rt.cstart",b.t_start)}BOOMR.addVar("rt.bstart",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.addVar("rt.blstart",BOOMR.t_lstart)}BOOMR.addVar("rt.end",b.timers.t_done.end)},determineTStart:function(f,g){var d;if(f==="xhr"){if(g&&g.name&&b.timers[g.name]){d=b.timers[g.name].start}else{if(g&&g.timing&&g.timing.requestStart){d=g.timing.requestStart}}if(typeof d==="undefined"&&g&&BOOMR.utils.inArray(g.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){BOOMR.addVar("rt.start","none")}else{BOOMR.addVar("rt.start","manual")}b.cached_xhr_start=d}else{if(b.navigationStart){d=b.navigationStart}else{if(b.t_start&&b.navigationType!==2){d=b.t_start;BOOMR.addVar("rt.start","cookie")}else{if(b.cached_t_start){d=b.cached_t_start}else{BOOMR.addVar("rt.start","none");d=undefined}}}b.cached_t_start=d}BOOMR.debug("Got start time: "+d,"rt");return d},page_ready:function(){this.onloadfired=!0},check_visibility:function(){if(BOOMR.visibilityState()==="visible"){b.visiblefired=!0}},prerenderToVisible:function(){if(b.onloadfired&&b.autorun){BOOMR.debug("Transitioned from prerender to "+BOOMR.visibilityState(),"rt");BOOMR.addVar("vis.pre","1");BOOMR.plugins.RT.done(null,"visible")}},page_unload:function(d){BOOMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt");if(!this.unloadfired){BOOMR.plugins.RT.done(d,"unload")}this.updateCookie({r:e.URL},d.type==="beforeunload"?"ul":"hd");this.unloadfired=!0},_iterable_click:function(f,g,i,d){var h;if(!i){return}BOOMR.debug(f+" called with "+i.nodeName,"rt");while(i&&i.nodeName.toUpperCase()!==g){i=i.parentNode}if(i&&i.nodeName.toUpperCase()===g){BOOMR.debug("passing through","rt");h=d(i);this.updateCookie({nu:h},"cl");BOOMR.addVar("nu",BOOMR.utils.cleanupURL(h));b.addedVars.push("nu")}},onclick:function(d){b._iterable_click("Click","A",d,function(f){return f.href})},markComplete:function(){if(this.onloadfired){b.complete=!0}},onsubmit:function(d){b._iterable_click("Submit","FORM",d,function(g){var f=g.getAttribute("action")||e.URL||"";return f.match(/\?/)?f:f+"?"})},onconfig:function(d){if(d.beacon_url){b.beacon_url=d.beacon_url}if(d.RT){if(d.RT.oboError&&!isNaN(d.RT.oboError)&&d.RT.oboError>b.oboError){b.oboError=d.RT.oboError}if(d.RT.loadTime&&!isNaN(d.RT.loadTime)&&d.RT.loadTime>b.loadTime){b.loadTime=d.RT.loadTime;if(!isNaN(b.timers.t_done.delta)){b.loadTime+=b.timers.t_done.delta}}}},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){BOOMR.removeVar("rt.start");if(b.addedVars&&b.addedVars.length>0){BOOMR.removeVar(b.addedVars);b.addedVars=[]}},spaNavigation:function(){b.onloadfired=!0}};BOOMR.plugins.RT={init:function(d){BOOMR.debug("init RT","rt");if(a!==BOOMR.window){a=BOOMR.window}if(d&&d.CrossDomain&&d.CrossDomain.sending){b.crossdomain_sending=!0}if(!a||!a.document){return}e=a.document;BOOMR.utils.pluginConfig(b,d,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]);if(d&&typeof d.autorun!=="undefined"){b.autorun=d.autorun}if(typeof e!=="undefined"){b.r=b.r2=BOOMR.utils.hashQueryString(e.referrer,!0)}b.initFromCookie();if(b.initialized){return this}b.complete=!1;b.timers={};b.check_visibility();BOOMR.subscribe("page_ready",b.page_ready,null,b);BOOMR.subscribe("visibility_changed",b.check_visibility,null,b);BOOMR.subscribe("prerender_to_visible",b.prerenderToVisible,null,b);BOOMR.subscribe("page_ready",this.done,"load",this);BOOMR.subscribe("xhr_load",this.done,"xhr",this);BOOMR.subscribe("dom_loaded",b.domloaded,null,b);BOOMR.subscribe("page_unload",b.page_unload,null,b);BOOMR.subscribe("click",b.onclick,null,b);BOOMR.subscribe("form_submit",b.onsubmit,null,b);BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this);BOOMR.subscribe("beacon",b.clear,null,b);BOOMR.subscribe("error",b.markComplete,null,b);BOOMR.subscribe("config",b.onconfig,null,b);BOOMR.subscribe("spa_navigation",b.spaNavigation,null,b);BOOMR.subscribe("interaction",b.markComplete,null,b);BOOMR.getBeaconURL=function(){return b.beacon_url};b.initialized=!0;return this},startTimer:function(d,f){if(d){if(d==="t_page"){this.endTimer("t_resp",f)}b.timers[d]={start:(typeof f==="number"?f:BOOMR.now())}}return this},endTimer:function(d,f){if(d){b.timers[d]=b.timers[d]||{};if(b.timers[d].end===undefined){b.timers[d].end=(typeof f==="number"?f:BOOMR.now())}}return this},clearTimer:function(d){if(d){delete b.timers[d]}return this},setTimer:function(d,g,f){if(d){if(typeof f!=="undefined"){b.timers[d]={start:g,end:f,delta:f-g}}else{b.timers[d]={delta:g}}}return this},addTimersToBeacon:function(h,f){var g,i,d=[];for(g in b.timers){if(b.timers.hasOwnProperty(g)){i=b.timers[g];if(typeof i.delta!=="number"){if(typeof i.start!=="number"){i.start=f==="xhr"?b.cached_xhr_start:b.cached_t_start}i.delta=i.end-i.start}if(isNaN(i.delta)){continue}if(b.basic_timers.hasOwnProperty(g)){BOOMR.addVar(g,i.delta);b.addedVars.push(g)}else{d.push(g+"|"+i.delta)}}}if(d.length){BOOMR.addVar("t_other",d.join(","));b.addedVars.push("t_other")}if(f==="beacon"){b.timers={};b.complete=!1}},done:function(j,g){BOOMR.debug("Called done: "+g,"rt");var f,h,i=BOOMR.now(),d=!1;b.complete=!1;h=b.validateLoadTimestamp(i,j,g);if(g==="load"||g==="visible"||g==="xhr"){if(!b.setPageLoadTimers(g,h,j)){return this}}if(g==="load"||g==="visible"||(g==="xhr"&&j&&j.initiator==="spa_hard")){b.getBoomerangTimings()}f=b.determineTStart(g,j);this.endTimer("t_done",h);if(j&&j.initiator==="xhr"){this.setTimer("t_done",j.timing.requestStart,j.timing.loadEventEnd)}BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","rt.tstart","rt.nstart","rt.cstart","rt.bstart","rt.end","rt.subres","http.errno","http.method","xhr.sync");b.setSupportingTimestamps(f);this.addTimersToBeacon(null,g);BOOMR.setReferrer(b.r,b.r2);if(g==="xhr"&&j){if(j&&j.data){j=j.data}}if(g==="xhr"&&j){d=j.subresource;if(j.url){BOOMR.addVar("u",BOOMR.utils.cleanupURL(j.url.replace(/#.*/,"")));b.addedVars.push("u")}if(j.status&&(j.status<-1||j.status>=400)){BOOMR.addVar("http.errno",j.status)}if(j.method&&j.method!=="GET"){BOOMR.addVar("http.method",j.method)}if(j.headers){BOOMR.addVar("http.hdr",j.headers)}if(j.synchronous){BOOMR.addVar("xhr.sync",1)}if(j.initiator){BOOMR.addVar("http.initiator",j.initiator)}b.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")}if(d&&d!=="passive"){BOOMR.addVar("rt.subres",1);b.addedVars.push("rt.subres")}b.updateCookie();if(g==="unload"){BOOMR.addVar("rt.quit","");if(!b.onloadfired){BOOMR.addVar("rt.abld","");b.addedVars.push("rt.abld")}if(!b.visiblefired){BOOMR.addVar("rt.ntvu","")}}b.complete=!0;BOOMR.sendBeacon(b.beacon_url);return this},is_complete:function(d){return b.complete||(d&&d["http.initiator"]==="error")},updateCookie:function(){b.updateCookie()},navigationStart:function(){if(!b.navigationStart){b.initFromNavTiming()}return b.navigationStart}}}(window));(function(){if(BOOMR.plugins.DNS){return}var a={complete:!1,base_url:"",t_start:null,t_dns:null,t_http:null,img:null,gen_url:"",start:function(){if(a.gen_url){return}var b=BOOMR.utils.generateId(10);a.gen_url=a.base_url.replace(/\*/,b);a.img=new Image();a.img.onload=a.A_loaded;a.t_start=new Date().getTime();a.img.src=a.gen_url+"image-l.gif?t="+b},A_loaded:function(){var b=BOOMR.utils.generateId(10);a.t_dns=new Date().getTime()-a.t_start;a.img=new Image();a.img.onload=a.B_loaded;a.t_start=new Date().getTime();a.img.src=a.gen_url+"image-l.gif?t="+b},B_loaded:function(){a.t_http=new Date().getTime()-a.t_start;a.img=null;a.done()},done:function(){var b=a.t_dns-a.t_http;BOOMR.addVar("dns.t",b);a.complete=!0;a.gen_url="";BOOMR.sendBeacon()}};BOOMR.plugins.DNS={init:function(b){BOOMR.utils.pluginConfig(a,b,"DNS",["base_url"]);if(b&&b.wait){return this}if(!a.base_url){BOOMR.warn("DNS.base_url is not set.  Cannot run DNS test.","dns");a.complete=!0;return this}if(BOOMR.window.location.protocol==="https:"){a.complete=!0;return this}BOOMR.subscribe("page_ready",a.start,null,a);return this},is_complete:function(){return a.complete}}}());(function(){if(BOOMR.plugins.NavigationTiming){return}function b(d,c){if(typeof c!=="number"||c===0){return undefined}return Math.floor((d||0)+c)}var a={complete:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(h){var g;if(h&&h.initiator==="spa_hard"){a.done(h);return}else{if(h&&h.initiator==="spa"){a.sendBeacon();return}}var c=BOOMR.window,e,f={},d;if(!h){return}if(h.data){h=h.data}g=BOOMR.getPerformance();if(g&&h.restiming){f={nt_red_st:h.restiming.redirectStart,nt_red_end:h.restiming.redirectEnd,nt_fet_st:h.restiming.fetchStart,nt_dns_st:h.restiming.domainLookupStart,nt_dns_end:h.restiming.domainLookupEnd,nt_con_st:h.restiming.connectStart,nt_con_end:h.restiming.connectEnd,nt_req_st:h.restiming.requestStart,nt_res_st:h.restiming.responseStart,nt_res_end:h.restiming.responseEnd};if(h.restiming.secureConnectionStart){f.nt_ssl_st=h.restiming.secureConnectionStart}for(d in f){if(f.hasOwnProperty(d)&&f[d]){f[d]+=g.timing.navigationStart;f[d]=Math.floor(f[d])}}}if(h.timing){e=h.timing;if(!f.nt_req_st){f.nt_req_st=e.requestStart}if(!f.nt_res_st){f.nt_res_st=e.responseStart}if(!f.nt_res_end){f.nt_res_end=e.responseEnd}f.nt_domint=e.domInteractive;f.nt_domcomp=e.domComplete;f.nt_load_st=e.loadEventEnd;f.nt_load_end=e.loadEventEnd}for(d in f){if(f.hasOwnProperty(d)&&!f[d]){delete f[d]}}BOOMR.addVar(f);try{a.addedVars.push.apply(a.addedVars,Object.keys(f))}catch(i){}a.sendBeacon()},done:function(){var m=BOOMR.window,c,d,e,n,h={},f=0,j,g;if(this.complete){return this}a.addedVars=[];c=BOOMR.getPerformance();if(c){if(typeof c.getEntriesByType==="function"){n=c.getEntriesByType("navigation");if(n&&n.length){BOOMR.info("This user agent supports NavigationTiming2","nt");n=n[0];f=c.timing?c.timing.navigationStart:0}else{n=undefined}}if(!n&&c.timing){BOOMR.info("This user agent supports NavigationTiming","nt");n=c.timing}if(n){h={nt_nav_st:c.timing?c.timing.navigationStart:0,nt_red_st:b(f,n.redirectStart),nt_red_end:b(f,n.redirectEnd),nt_fet_st:b(f,n.fetchStart),nt_dns_st:b(f,n.domainLookupStart),nt_dns_end:b(f,n.domainLookupEnd),nt_con_st:b(f,n.connectStart),nt_con_end:b(f,n.connectEnd),nt_req_st:b(f,n.requestStart),nt_res_st:b(f,n.responseStart),nt_res_end:b(f,n.responseEnd),nt_domloading:b(f,n.domLoading),nt_domint:b(f,n.domInteractive),nt_domcontloaded_st:b(f,n.domContentLoadedEventStart),nt_domcontloaded_end:b(f,n.domContentLoadedEventEnd),nt_domcomp:b(f,n.domComplete),nt_load_st:b(f,n.loadEventStart),nt_load_end:b(f,n.loadEventEnd),nt_unload_st:b(f,n.unloadEventStart),nt_unload_end:b(f,n.unloadEventEnd)};if(!h.nt_domloading&&c&&c.timing&&c.timing.domLoading){h.nt_domloading=c.timing.domLoading}if(n.secureConnectionStart){h.nt_ssl_st=b(f,n.secureConnectionStart)}if(c.timing&&c.timing.msFirstPaint){h.nt_first_paint=c.timing.msFirstPaint}if(n.workerStart){h.nt_worker_start=b(f,n.workerStart)}if(n.decodedBodySize||n.transferSize){h.nt_enc_size=n.encodedBodySize;h.nt_dec_size=n.decodedBodySize;h.nt_trn_size=n.transferSize}if(n.nextHopProtocol){h.nt_protocol=n.nextHopProtocol}}if(!h.nt_first_paint&&BOOMR.plugins.PaintTiming){g=BOOMR.plugins.PaintTiming.getTimingFor("first-paint");if(g){h.nt_first_paint=b(f,g)}}if((!h.nt_protocol||!h.nt_first_paint)&&m.chrome&&typeof m.chrome.loadTimes==="function"){e=m.chrome.loadTimes();if(e){h.nt_spdy=(e.wasFetchedViaSpdy?1:0);h.nt_cinf=e.connectionInfo;if(typeof e.firstPaintTime==="number"&&e.firstPaintTime!==0){h.nt_first_paint=Math.round(e.firstPaintTime*1000)}}}if(c.navigation){d=c.navigation;h.nt_red_cnt=d.redirectCount;h.nt_nav_type=d.type}for(k in h){if(h.hasOwnProperty(k)&&h[k]===undefined){delete h[k]}}BOOMR.addVar(h);if(n&&((n.requestStart&&n.navigationStart&&n.requestStart<n.navigationStart)||(n.responseStart&&n.navigationStart&&n.responseStart<n.navigationStart)||(n.responseStart&&n.fetchStart&&n.responseStart<n.fetchStart)||(n.navigationStart&&n.fetchStart<n.navigationStart)||(n.responseEnd&&n.responseEnd>BOOMR.now()+86400000))){BOOMR.addVar("nt_bad",1);a.addedVars.push("nt_bad")}try{a.addedVars.push.apply(a.addedVars,Object.keys(h))}catch(l){}}a.sendBeacon()},clear:function(){if(a.addedVars&&a.addedVars.length>0){BOOMR.removeVar(a.addedVars);a.addedVars=[]}this.complete=!1},prerenderToVisible:function(){this.complete=!1;this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!a.initialized){BOOMR.subscribe("page_ready",a.done,null,a);BOOMR.subscribe("prerender_to_visible",a.prerenderToVisible,null,a);BOOMR.subscribe("xhr_load",a.xhr_done,null,a);BOOMR.subscribe("before_unload",a.done,null,a);BOOMR.subscribe("beacon",a.clear,null,a);a.initialized=!0}return this},is_complete:function(){return !0}}}());(function(){var n,B,b,C,x,p=!1,o=!1,s=["uninitialized","open","responseStart","domInteractive","responseEnd"];var c=1000;var q=50;var z=1000;var h=500;var m=-1001;var u=-999;var i=-998;var r=-997;var g=["xmlhttprequest","script"];if(BOOMR.plugins.AutoXHR){return}n=BOOMR.window;if(!n||!n.XMLHttpRequest||!(new n.XMLHttpRequest()).addEventListener){return}function l(a){BOOMR.debug(a,"AutoXHR")}function y(a){if(!a){return null}a.href=a.href;var d=a.pathname;if(d.charAt(0)!=="/"){d="/"+d}return d}function j(a){if(a.href){if(a.href.match(/^(about:|javascript:|data:)/i)){return !0}if(a.href.indexOf(BOOMR.getBeaconURL())===0){return !0}}return BOOMR.xhr_excludes.hasOwnProperty(a.href)||BOOMR.xhr_excludes.hasOwnProperty(a.hostname)||BOOMR.xhr_excludes.hasOwnProperty(y(a))}function t(){this.watch=0;this.timer=null;this.pending_events=[];this.lastSpaLocation=null}t.stop=function(){t.pause();t.observer=null};t.pause=function(){if(t.observer&&t.observer.observer&&!t.isPaused){t.isPaused=!0;t.observer.observer.disconnect()}};t.resume=function(){if(t.observer&&t.observer.observer&&t.isPaused){t.isPaused=!1;t.observer.observer.observe(B,t.observer.config)}};t.start=function(){if(t.observer){return}var a={childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]};t.observer=BOOMR.utils.addObserver(B,a,null,b.mutation_cb,null,b);if(t.observer){t.observer.config=a;BOOMR.subscribe("page_unload",t.stop,null,t)}};t.prototype.addEvent=function(F){var E={type:F.initiator,resource:F,nodes_to_wait:0,total_nodes:0,resources:[],complete:!1},w,a,D,d=this.pending_events.length;for(w=d-1;w>=0;w--){if(this.pending_events[w]&&!this.pending_events[w].complete){a=this.pending_events[w];D=w;break}}if(a){if(a.type==="click"){if(a.nodes_to_wait===0||!a.resource.url){this.pending_events[w]=undefined}}else{if(a.type==="xhr"){if(E.type==="click"){return null}}else{if(BOOMR.utils.inArray(a.type,BOOMR.constants.BEACON_TYPE_SPAS)){if(E.type==="xhr"){return null}if(BOOMR.utils.inArray(E.type,BOOMR.constants.BEACON_TYPE_SPAS)){BOOMR.debug("Aborting previous SPA navigation");a.resource.timing.loadEventEnd=BOOMR.now();a.aborted=!0;this.sendEvent(D)}}}}}this.watch++;this.pending_events.push(E);if(!t.observer){if(BOOMR.utils.inArray(E.type,BOOMR.constants.BEACON_TYPE_SPAS)){t.start();this.setTimeout(c,d);return d}if(F.url&&F.timing.loadEventEnd){this.sendEvent(d)}return null}else{if(!BOOMR.utils.inArray(E.type,BOOMR.constants.BEACON_TYPE_SPAS)){this.setTimeout(q,d)}else{this.setTimeout(c,d)}return d}};t.prototype.sendEvent=function(w){var D=this.pending_events[w],a=this,d=BOOMR.now();if(!D||D.complete){return}this.clearTimeout();if(BOOMR.readyToSend()){D.complete=!0;this.watch--;D.resource.resources=D.resources;if(BOOMR.utils.inArray(D.type,BOOMR.constants.BEACON_TYPE_SPAS)){D.resource.url=B.URL}if(D.type==="spa"&&D.total_nodes===0&&D.resource.url===a.lastSpaLocation){l("SPA beacon cancelled, no URL change or resources triggered");this.pending_events[w]=undefined;return}if(BOOMR.utils.inArray(D.type,BOOMR.constants.BEACON_TYPE_SPAS)){a.lastSpaLocation=D.resource.url;if(!D.forced&&D.total_nodes===0){D.resource.timing.loadEventEnd=d-c}}this.sendResource(D.resource,w)}else{setTimeout(function(){a.sendEvent(w)},h)}};t.prototype.sendResource=function(E,w){var a=this,D=a.pending_events[w];var d=E.timing?E.timing.requestStart:undefined;var F=function(H,G){if(H){E.timing.loadEventEnd=G||BOOMR.now()}BOOMR.real_sendBeacon();if(E.onComplete){E.onComplete(E)}if(BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_enabled()&&E.timing&&E.timing.requestStart){var I=BOOMR.plugins.ResourceTiming.getCompressedResourceTiming(E.timing.requestStart,E.timing.loadEventEnd);BOOMR.plugins.ResourceTiming.addToBeacon(I)}if(BOOMR.utils.inArray(E.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){a.calculateSpaTimings(E);if(typeof w==="number"&&a.pending_events[w].aborted){BOOMR.addVar("pgu",B.URL);BOOMR.addVar("rt.quit","");BOOMR.addVar("rt.abld","");x.addedVars.push("pgu","rt.quit","rt.abld")}}BOOMR.responseEnd(E,d,E);if(typeof w==="number"){a.pending_events[w]=undefined}};if(!E.wait){if(E.initiator==="spa_hard"){if((!D||!D.aborted)&&B&&B.readyState&&B.readyState!=="complete"){BOOMR.window.addEventListener("load",function(){var G=BOOMR.now();BOOMR.setImmediate(function(){F(!0,G)})});return}}F(!1)}else{E.waitComplete=function(){F(!0)}}};t.prototype.calculateSpaTimings=function(E){var G=BOOMR.getPerformance();if(!G||!G.timing){return}if(E.initiator==="spa_hard"){E.timing.responseEnd=G.timing.responseStart;E.timing.fetchStart=G.timing.navigationStart}else{if(!BOOMR.plugins.ResourceTiming||!BOOMR.plugins.ResourceTiming.is_supported()){return}var F=BOOMR.plugins.ResourceTiming.getFilteredResourceTiming(E.timing.requestStart,E.timing.loadEventEnd,x.spaBackEndResources).entries;var D=Math.round(E.timing.loadEventEnd-E.timing.requestStart);if(!F||!F.length){E.timers={t_resp:0,t_page:D,t_done:D};return}var w=E.timing.loadEventEnd-G.timing.navigationStart;for(var d=0;d<F.length;d++){if(F[d].responseStart>w){F[d].responseStart=w;F[d].responseEnd=w}else{if(F[d].responseEnd>w){F[d].responseEnd=w}}}var H=Math.round(BOOMR.plugins.ResourceTiming.calculateResourceTimingUnion(F));var a=D-H;if(H<0||D<0||a<0){BOOMR.addError("Incorrect SPA time calculation");return}E.timers={t_resp:H,t_page:a,t_done:D}}};t.prototype.setTimeout=function(w,d){var a=this;if(!w){return}this.clearTimeout();this.timer=setTimeout(function(){a.timedout(d)},w)};t.prototype.timedout=function(a){var d;this.clearTimeout();d=this.pending_events[a];if(d&&BOOMR.utils.inArray(d.type,BOOMR.constants.BEACON_TYPE_SPAS.concat("xhr"))){if(d.nodes_to_wait===0){this.sendEvent(a)}}else{if(this.watch>0){this.watch--}this.pending_events[a]=undefined}};t.prototype.clearTimeout=function(){if(this.timer){clearTimeout(this.timer);this.timer=null}};t.prototype.load_cb=function(D,w){var E,d,a=BOOMR.now();E=D.target||D.srcElement;if(!E||!E._bmr){return}d=E._bmr.idx;w=typeof w!=="undefined"?w:(E._bmr.res||0);if(E._bmr.end[w]){return}E._bmr.end[w]=a;this.load_finished(d,a)};t.prototype.load_finished=function(w,a){var d=this.pending_events[w];if(!d){return}d.nodes_to_wait--;if(d.nodes_to_wait===0){d.resource.timing.loadEventEnd=a||BOOMR.now();if(BOOMR.utils.inArray(d.type,BOOMR.constants.BEACON_TYPE_SPAS)){this.setTimeout(c,w)}else{this.sendEvent(w)}}};t.prototype.wait_for_node=function(d,H){var J=this,I,E,w=!1,F,D,a,K=!1,G;if(d.nodeName.toUpperCase().match(/^(IMG|SCRIPT|IFRAME|IMAGE)$/)||(d.nodeName==="LINK"&&d.rel&&d.rel.match(/\<stylesheet\>/i))){if(d._bmr&&typeof d._bmr.res==="number"&&d._bmr.end[d._bmr.res]){K=!0}a=d.src||d.getAttribute("xlink:href")||d.href;if(d.nodeName==="IMG"){if(d.naturalWidth&&!K){return !1}else{if(d.getAttribute("src")===""){return !1}}}if(!a||a.match(/^(about:|javascript:|data:)/i)){return !1}I=this.pending_events[H];if(!I){return !1}G=I.resources.length;if(!d._bmr){d._bmr={end:{}}}if(!I.urls){I.urls={}}if(I.urls[a]){return !1}if(d.nodeName==="SCRIPT"&&p){return !1}if(!I.resource.url){C.href=a;if(x.excludeFilter(C)){BOOMR.debug("Exclude for "+C.href+" matched. Excluding","AutoXHR");return !1}I.resource.url=C.href}d._bmr.res=G;d._bmr.idx=H;delete d._bmr.end[G];d.addEventListener("load",function(L){J.load_cb(L,G)});d.addEventListener("error",function(L){J.load_cb(L,G)});I.nodes_to_wait++;this.clearTimeout();I.total_nodes++;I.resources.push(d);I.urls[a]=1;w=!0}else{if(d.nodeType===Node.ELEMENT_NODE){["IMAGE","IMG"].forEach(function(L){E=d.getElementsByTagName(L);if(E&&E.length){for(F=0,D=E.length;F<D;F++){w|=this.wait_for_node(E[F],H)}}},this)}}return w};t.prototype.add_event_resource=function(w){var d=this.pending_events.length-1,a;if(d<0){return -1}a=this.pending_events[d];if(!a){return -1}if(!w){return -1}a.nodes_to_wait++;a.total_nodes++;w.index=d;return d};t.prototype.mutation_cb=function(d){var w,D,a;if(!this.watch){return !0}w=this;D=this.pending_events.length-1;if(D<0||!this.pending_events[D]){return !0}a=this.pending_events[D];if(typeof a.interesting==="undefined"){a.interesting=!1}if(d&&d.length){a.resource.timing.domComplete=BOOMR.now();d.forEach(function(F){var G,E,H;if(F.type==="attributes"){a.interesting|=w.wait_for_node(F.target,D)}else{if(F.type==="childList"){E=F.addedNodes.length;for(G=0;G<E;G++){a.interesting|=w.wait_for_node(F.addedNodes[G],D)}E=F.removedNodes.length;for(G=0;G<E;G++){H=F.removedNodes[G];if(H.nodeName==="IFRAME"&&H._bmr){w.load_cb({target:H,type:"removed"})}}}}})}if(!a.interesting&&!this.timeoutExtended){this.setTimeout(z,D);this.timeoutExtended=!0}return !0};t.prototype.queue_is_empty=function(){return this.nodesWaitingFor()===0};t.prototype.nodesWaitingFor=function(){if(this.pending_events.length===0){return 0}var a=this.pending_events.length-1;if(!this.pending_events[a]){return 0}return this.pending_events[a].nodes_to_wait};t.prototype.completeEvent=function(){var d=BOOMR.now(),a,w;if(this.pending_events.length===0){return}a=this.pending_events.length-1;w=this.pending_events[a];if(!w){return}w.resource.timing.loadEventEnd=d;w.forced=!0;this.sendEvent(a)};b=new t();function v(){BOOMR.subscribe("click",function(){if(p){return}var a={timing:{},initiator:"click"};if(!BOOMR.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest===BOOMR.window.XMLHttpRequest){return}a.timing.requestStart=BOOMR.now();b.addEvent(a)})}function f(){if(BOOMR.proxy_XMLHttpRequest&&BOOMR.proxy_XMLHttpRequest===BOOMR.window.XMLHttpRequest){return}if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===BOOMR.window.XMLHttpRequest){BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest;t.start();return}BOOMR.orig_XMLHttpRequest=BOOMR.window.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest;t.start();v();BOOMR.proxy_XMLHttpRequest=function(){var D,E={timing:{},initiator:"xhr"},a,w,F=!1,d=!1;D=new BOOMR.orig_XMLHttpRequest();a=D.open;w=D.send;D.open=function(L,H,J){C.href=H;if(x.excludeFilter(C)){d=!0;BOOMR.debug("Exclude found for resource: "+C.href+" Skipping instrumentation!","AutoXHR");return a.apply(D,arguments)}d=!1;if(J===undefined){J=!0}BOOMR.fireEvent("xhr_init","xhr");function G(){var Q,M,R=!1,O=BOOMR.now(),N,P;if(E.timing.loadEventEnd){return}if(E.status){BOOMR.fireEvent("xhr_error",E)}E.timing.loadEventEnd=O;Q=BOOMR.getResourceTiming(E.url,function(S,T){return S.responseEnd-T.responseEnd});if(Q){M=BOOMR.getPerformance().timing.navigationStart;E.timing.loadEventEnd=BOOMR.now();N=Math.floor(M+Q.startTime);if(E.timing.requestStart-N>=2){R=!1}else{if(Q.responseEnd!==0){P=Math.floor(M+Q.responseEnd);if(P<=E.timing.loadEventEnd){E.timing.responseEnd=P;R=!0;E.restiming=Q}}if(R){E.timing.requestStart=N;E.timing.fetchStart=N;if(Q.responseStart!==0){E.timing.responseStart=Math.floor(M+Q.responseStart)}}}}if(E.index>-1){b.load_finished(E.index,E.timing.responseEnd)}else{if(x.alwaysSendXhr){b.sendResource(E)}else{if(!p||o){b.addEvent(E)}}}}function I(M,N){D.addEventListener(M,function(){if(M==="readystatechange"){E.timing[s[D.readyState]]=BOOMR.now();if(D.readyState===4&&D.status!==0){if(D.status<200||D.status>=400){E.status=D.status}E.response={text:(D.responseType===""||D.responseType==="text")?D.responseText:null,xml:(D.responseType===""||D.responseType==="document")?D.responseXML:null,raw:D.response,json:D.responseJSON};G()}}else{E.status=(N===undefined?D.status:N);G()}},!1)}if(!F){if(J){I("readystatechange")}I("load");I("timeout",m);I("error",i);I("abort",u)}E.url=C.href;E.method=L;delete E.status;if(!J){E.synchronous=!0}F=!0;try{return a.apply(D,arguments)}catch(K){E.status=r;G();throw K}};D.send=function(G){if(d){return w.apply(D,arguments)}D.resource.requestPayload=G;BOOMR.fireEvent("xhr_send",D);E.timing.requestStart=BOOMR.now();if(p&&b.watch&&!x.alwaysSendXhr){b.add_event_resource(E)}if(typeof E.status==="undefined"||E.status!==r){return w.apply(D,arguments)}};D.resource=E;return D};BOOMR.proxy_XMLHttpRequest.UNSENT=0;BOOMR.proxy_XMLHttpRequest.OPENED=1;BOOMR.proxy_XMLHttpRequest.HEADERS_RECEIVED=2;BOOMR.proxy_XMLHttpRequest.LOADING=3;BOOMR.proxy_XMLHttpRequest.DONE=4;BOOMR.proxy_XMLHttpRequest.prototype=BOOMR.orig_XMLHttpRequest.prototype;BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest}function e(){if(BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest){BOOMR.window.XMLHttpRequest=BOOMR.orig_XMLHttpRequest}}function A(a){a.initiator="xhr";BOOMR.responseEnd(a)}x={spaBackEndResources:g,alwaysSendXhr:!1,excludeFilters:[],initialized:!1,addedVars:[],excludeFilter:function(D){var a,w,d;if(!D||!D.href){return !1}for(a=0;a<x.excludeFilters.length;a++){if(typeof x.excludeFilters[a].cb==="function"){d=x.excludeFilters[a].ctx;if(x.excludeFilters[a].name){l("Running filter: "+x.excludeFilters[a].name+" on URL: "+D.href)}try{w=x.excludeFilters[a].cb.call(d,D);if(w){BOOMR.debug("Found matching filter at: "+x.excludeFilters[a].name+" for URL: "+D.href,"AutoXHR");return !0}}catch(E){BOOMR.addError(E,"BOOMR.plugins.AutoXHR.impl.excludeFilter()")}}}return !1},clear:function(){if(x.addedVars&&x.addedVars.length>0){BOOMR.removeVar(x.addedVars);x.addedVars=[]}}};BOOMR.plugins.AutoXHR={is_complete:function(){return !0},init:function(D){var E,d;if(!BOOMR.window||!BOOMR.window.document){return}B=BOOMR.window.document;C=BOOMR.window.document.createElement("A");BOOMR.utils.pluginConfig(x,D,"AutoXHR",["spaBackEndResources","alwaysSendXhr"]);BOOMR.instrumentXHR=f;BOOMR.uninstrumentXHR=e;if(!x.initialized){this.addExcludeFilter(j,null,"shouldExcludeXhr");x.initialized=!0}if(D&&D.AutoXHR&&D.AutoXHR.excludeFilters&&D.AutoXHR.excludeFilters.length>0){for(d=0;d<D.AutoXHR.excludeFilters.length;d++){x.excludeFilters.push(D.AutoXHR.excludeFilters[d])}}o=D.instrument_xhr;if(BOOMR.plugins.SPA&&BOOMR.plugins.SPA.supported_frameworks){var a=BOOMR.plugins.SPA.supported_frameworks();for(E=0;E<a.length;E++){var F=a[E];if(D[F]&&D[F].enabled){p=!0;break}}}if(x.alwaysSendXhr&&o&&BOOMR.xhr&&typeof BOOMR.xhr.stop==="function"){function w(H){if(H.length){for(E=0;E<H.length;E++){A(H[E])}}else{A(H)}}var G=BOOMR.xhr.stop(w);if(G&&G.length){BOOMR.setImmediate(w,G)}}if(p){if(!x.alwaysSendXhr){o=!1}if(o){BOOMR.instrumentXHR()}}else{if(o){BOOMR.instrumentXHR()}else{if(o===!1){BOOMR.uninstrumentXHR()}}}BOOMR.registerEvent("xhr_error");BOOMR.subscribe("beacon",x.clear,null,x)},getMutationHandler:function(){return b},getPathname:y,enableAutoXhr:function(){if(!o){BOOMR.instrumentXHR()}o=!0},addExcludeFilter:function(a,d,w){x.excludeFilters.push({cb:a,ctx:d,name:w})}}})();function callBooBeacon(){window.BOOMR.init({beacon_url:window.pageloadBeaconUrl,beacon_type:"POST",instrument_xhr:!0})}document.addEventListener("onBeforeBoomerangBeacon",function(a){if(document.cookie.indexOf("userid")>=0){window.BOOMR.addVar("ct_lg_usr",1)}else{window.BOOMR.addVar("ct_lg_usr",0)}window.BOOMR.addVar("time_long",new Date().getTime())});