!function(){function e(){var e=u.__getUserAgent().toLowerCase();return e.indexOf("edge")>-1}function r(){var e=u.__getUserAgent().toLowerCase();return e.indexOf("msie")>-1||e.indexOf("trident")>-1}function t(){var e=u.__getUserAgent().toLowerCase();return e.indexOf("firefox")>-1}function n(){var e=u.__getUserAgent().toLowerCase();return e.indexOf("safari")>-1&&-1===e.indexOf("chrome")&&-1===e.indexOf("chromium")}function o(){return!!window.chrome}function a(e){e=e.toLowerCase();var r=e.match(/firefox\/(\d+.\d+)/);return parseFloat(r[1])}function i(e){e=e.toLowerCase();var r=e.match(/version\/(\d+.\d+)/);return parseFloat(r[1])}function s(e){e=e.toLowerCase();var r=e.match(/chrome\/(\d+.\d+)/);return parseFloat(r[1])}function l(){return document.documentMode}var u={};u.__getUserAgent=function(){return navigator.userAgent},u.isSupportedIEVersion=function(e){return l()>=11},u.isBrokenIEVersion=function(e){return l()<11},u.isSupportedFirefoxVersion=function(e){return a(e)>=30},u.isBrokenFirefoxVersion=function(e){return a(e)<22},u.isSupportedSafariVersion=function(e){return i(e)>=9},u.isBrokenSafariVersion=function(e){return i(e)<6.2},u.isSupportedChromeLikeVersion=function(e){return s(e)>=26},u.isBrokenChromeLikeVersion=function(e){return s(e)<26},u.isBrowserOfficiallySupported=function(){var a=u.__getUserAgent(),i=o()&&u.isSupportedChromeLikeVersion(a),s=r()&&u.isSupportedIEVersion(a),l=n()&&u.isSupportedSafariVersion(a),c=t()&&u.isSupportedFirefoxVersion(a);return e()||i||s||l||c},u.isBrowserExtremelyOutdated=function(){var e=u.__getUserAgent(),a=o()&&u.isBrokenChromeLikeVersion(e),i=r()&&u.isBrokenIEVersion(e),s=n()&&u.isBrokenSafariVersion(e),l=t()&&u.isBrokenFirefoxVersion(e);return a||i||s||l},window.BrowserUtil=u}(),function(){var e="web-mobile.html",r="web-desktop.html",t={__getWindowLocation:function(){return window.location},__isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/mobi|android/i.test(e)},__findDestinationPage:function(){return t.__isMobile()?e:r},__getCurrentPathName:function(){var e=window.location.pathname.split("/");return e=e[e.length-1]},__getCurrentHref:function(){return window.location.href},_removeParameters:function(e){if(void 0!==e&&e.length>0){for(var r=t.__getCurrentHref(),n=r,o=0;o<e.length;o++)n=t._removeParam(e[o],n);return n!==r?n:null}return null},_paramRegex:{},_removeParam:function(e,r){var n=t._paramRegex[e];void 0===n&&(n=new RegExp("[?&]("+e+"=.*?)(?=[#&]|$)","gi"),t._paramRegex[e]=n);var o=r.match(n);if(o&&o.length>0)for(var a=0;a<o.length;a++)r=r.replace(o[a],"");return r},findAutoRedirectTarget:function(){var n=t.__getCurrentPathName(),o=t.__findDestinationPage(),a=t.__getWindowLocation(),i=n===r||n===e,s=n!==o,l=null!==localStorage.getItem("__DEBUG_DO_NOT_REDIRECT_BETWEEN_DESKTOP_AND_MOBILE__"),u=t._removeParameters(["emailInput","passwordInput"]);if(null!==u&&window.location.replace(u),!i||s&&!l){var c=a.hash;if(o===r)c=c.replace("#/tab/","#/");else{var d=/^#\/(login|register|activation|forgotpassword|cookiepolicy|privacypolicy|termsandconditions|faq)/;-1!==c.indexOf("#/tab/")||d.test(c)||(c=c.replace("#/","#/tab/"))}return o+a.search+c}return null},doAutoRedirect:function(){var e=t.__getCurrentPathName();if("context.html"!==e&&"debug.html"!==e){var r=t.findAutoRedirectTarget();r&&(window.location.href=r)}}};window.CmtWebRedirect=t,window.CmtWebRedirect.doAutoRedirect()}(),function(){var e={SITECODE:"NCMTNCMT",handleRefresh:function(r){r=r.replace("#/tab/","#/");var t=r.split("/");if(t.length>1){var n=t[1];e._updateLocalStorageForRoute(n,t)}else e._deleteAllKeysExceptUser()},_updateLocalStorageForRoute:function(r,t){switch(r){case"triplist":e._deleteAllKeysExceptUser();break;case"trip-expanded":case"segment-expanded":e._resetTripDetailsForTripId(t[2]);break;case"seatMap":e._deleteSeatMapForRefId(t[6])}},_generateLocalStorageKey:function(r){return e.SITECODE+":"+r},_deleteAllKeysExceptUser:function(){e._deleteLocalStorageKeysContaining(e._generateLocalStorageKey("TriplistPast"),!0),e._deleteLocalStorageKeysContaining(e._generateLocalStorageKey("TriplistFuture"),!0),e._deleteLocalStorageKeysContaining(e._generateLocalStorageKey("trip_")),e._deleteLocalStorageKeysContaining(e._generateLocalStorageKey("seatMap_")),e._deleteLocalStorageKeysContaining(e._generateLocalStorageKey("weather_"))},_resetTripDetailsForTripId:function(r){if(r){var t=e._generateLocalStorageKey("trip_"+r),n=localStorage.getItem(t);n&&(n=JSON.parse(n),n.data.tripDetails=null,localStorage.setItem(t,JSON.stringify(n)))}},_deleteSeatMapForRefId:function(r){if(r){var t=e._generateLocalStorageKey("seatMap_"+r);e._deleteLocalStorageKeysContaining(t,!0)}},_deleteLocalStorageKeysContaining:function(e,r){if(r)localStorage.removeItem(e);else{for(var t=[],n=0,o=localStorage.length;o>n;n++){var a=localStorage.key(n);a&&0===a.indexOf(e)&&t.push(a)}for(var i=0,s=t.length;s>i;i++)localStorage.removeItem(t[i])}}};window.WebDesktopRefresh=e,window.WebDesktopRefresh.handleRefresh(window.location.hash)}();