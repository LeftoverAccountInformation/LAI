(function(c){function a(){null!==d&&clearInterval(d)}function b(){d=setTimeout(jq.ui.r9popover.close,200)}var d=null;c.widget("ui.r9dialog",c.ui.dialog,{options:{autoFocus:!0,neverFocus:!1,position:["center",100],positionOffsetY:0,modal:!0,minHeight:50,resizable:!1,width:"auto",showCloseX:!0,title:null,hideTitle:!1,isFixed:!1,closeCallback:null,initAccessibility:!1,closeOnOverlayClick:!0},_autoFocus:function(){this.options.neverFocus||(this.options.autoFocus?c.ui.dialog.prototype._autoFocus.call(this):
this.uiDialog.focus())},_create:function(){c.ui.dialog.prototype._create.apply(this);this.uiDialog.wrapInner('\x3cdiv class\x3d"ui-dialog-liner" /\x3e');this.options.isFixed&&(this.uiDialog.css("position","fixed"),this._position(this.options.position));this.options.hideTitle&&this.uiDialog.addClass("ui-dialog-no-title");this._initAccessibility()},_initAccessibility:function(){if(this.options.initAccessibility&&this.options.modal){var a=this.uiDialog,b="lastItem-"+this.options.dialogClass,d=jq("\x3cinput\x3e").attr({type:"text",
id:b,name:b}).css({position:"absolute",height:"0px",width:"0px",top:"0px",opacity:0,fontSize:"1px",lineHeight:"0px",outline:"none",color:"transparent",background:"transparent"});a.append(d);a.on("focus.lastItem","#"+b,function(b){a.focus()})}},open:function(){var a;if(!this._isOpen)return c.ui.dialog.prototype.open.apply(this),a=this.uiDialog.find(".ui-dialog-titlebar-close"),this.options.showCloseX?(a.show(),this.options.closeOnOverlayClick&&jq(".ui-widget-overlay").click(function(){jq(".ui-dialog-content").r9dialog("close")}),
this.options.closeCallback&&jq.isFunction(this.options.closeCallback)&&a.click(this.options.closeCallback)):a.hide(),this}});c.widget("ui.r9popover",c.ui.r9dialog,{options:{at:"auto",draggable:!1,position:"body",clazz:"",multiPopovers:!1,showCloseX:!0},_create:function(){this.options.multiPopovers||this._destroyAll();var a=c.ui.dialog.overlay.oldInstances.length;a&&c.ui.dialog.overlay.oldInstances[a-1].height(c(document).height());c.ui.r9dialog.prototype._create.apply(this);this.uiDialog.addClass("ui-popover").addClass({right:"ui-popover-right",
top:"ui-popover-top","bottom center":"ui-popover-bottom-center","top center":"ui-popover-top-center"}[this.options.at]||"ui-popover-left");""!=this.options.clazz&&this.uiDialog.addClass(this.options.clazz);this.uiPopoverArrow=jq("\x3cdiv/\x3e",{"class":"ui-popover-arrow"}).insertAfter(this.element);0===this.options.title.length&&this.uiDialogTitlebar.find(".ui-dialog-title").remove()},_destroyAll:function(){c.ui.r9popover.destroy()},_onOverlayClick:function(){jq(".ui-dialog-content").r9popover("close")},
_position:function(a){(isVisible=this.uiDialog.is(":visible"))||this.uiDialog.show();var b=jq.isArray(a);this.uiDialog.css({left:0,top:0}).position({my:("right"==this.options.at?"right":"left")+" top",at:this._positionAt(),offset:this._positionOffset(),of:b?jq.Event("click",{pageX:a[0],pageY:a[1]}):jq(a||c.ui.r9popover.prototype.options.position),collision:"auto"==this.options.at?"flip":"none"});"auto"==this.options.at&&!b&&jq(a||c.ui.r9popover.prototype.options.position).offset().left>this.uiDialog.offset().left&&
this.uiDialog.removeClass("ui-popover-left").addClass("ui-popover-right");isVisible||this.uiDialog.hide()},_positionAt:function(){var a=this.options.at;return"bottom center"==a?"top center":"top center"==a?"bottom center":"top"==a?"left bottom":("right"==a?"left":"right")+" center"},_positionOffset:function(){return"bottom center"==this.options.at?"-"+this.uiDialog.width()/2+" -"+(this.uiPopoverArrow.height()+this.uiDialog.height()+this.options.positionOffsetY):"top center"==this.options.at?"-"+this.uiDialog.width()/
2+" "+(this.uiPopoverArrow.height()+this.options.positionOffsetY):"top"==this.options.at?"0 "+this.uiPopoverArrow.height():("right"==this.options.at?"-":"")+this.uiPopoverArrow.width()+" -"+(this.uiPopoverArrow.height()/2+this.uiPopoverArrow.position().top)},open:function(){if(!this._isOpen)return c.ui.dialog.prototype.open.apply(this),this.element.show(),this.options.showCloseX||this.uiDialog.find(".ui-dialog-titlebar-close").hide(),this.options.modal&&jq(".ui-widget-overlay").addClass("ui-popover-overlay").click(this._onOverlayClick),
this}});c.widget("ui.r9tooltip",{timer:null,_create:function(){var d=this;this.element.hover(function(){a();var c={modal:!1,position:d.element,clazz:"ui-tooltip-popover",width:d.options.width,hideTitle:d.options.hideTitle,at:d.options.at,showCloseX:d.options.showCloseX},e=jq("#r9tt-"+d.options.ttid),h=d.options.content;0==h.length&&0<d.options.textAttribute.length&&(h=d.element.attr(d.options.textAttribute).split("|")[1]);0<d.options.ttid.length&&0<e.size()?e.hasClass("ui-popover")?e.r9popover("open"):
(e.r9popover(c),e.show(),e.parent().parent().hover(a,b)):(e=d.options.title,0==e.length&&0<d.options.textAttribute.length&&(e=d.element.attr(d.options.textAttribute).split("|")[0]),e={title:e,width:d.options.width},0<d.options.ttid.length&&(e.id="r9tt-"+d.options.ttid),jq("\x3cdiv/\x3e",e).append(h).addClass(d.options.ttclass).appendTo("body").r9popover(c).parent().parent().hover(a,b));d.options.callback()},b)},options:{title:"",textAttribute:"",content:"",ttclass:"",ttid:"",width:"auto",hideTitle:!1,
at:"auto",showCloseX:!0,callback:function(){}}});c.ui.r9popover.destroy=function(){c.ui.r9popover.get().r9popover("destroy")};c.ui.r9popover.get=function(){return c(".ui-popover").find(".ui-dialog-content")};c.ui.r9tooltip.destroy=function(){c(".ui-tooltip-popover").find(".ui-dialog-content").r9popover("destroy")};c.ui.r9popover.close=function(){c.ui.r9popover.get().r9popover("close")};c.widget("ui.r9LinkedInput",{options:{linkclass:"",linktooltip:"",selectOnOpen:!1,click:c.noop,change:c.noop,autoSize:!0},
_create:function(){if("SELECT"==this.element.prop("tagName")||"INPUT"==this.element.prop("tagName")){var a=this,b=this.link=jq("\x3ca id\x3d'"+this.element.attr("id")+"-link' title\x3d'"+this.options.linktooltip+"' class\x3d'actionlink linkFromInput "+("SELECT"==this.element.prop("tagName")?"selectLinkFromInput ":"")+this.options.linkclass+"' href\x3d'javascript:void(0)'\x3e"+jq("\x3cdiv/\x3e").text(this.getText()).html()+"\x3c/a\x3e").insertAfter(this.element.hide());b.bind("click",function(d){a.options.autoSize&&
a.element.width(jq(this).outerWidth());b.hide();a.element.show();a.options.selectOnOpen&&a.element.select();a.options.click()});this.element.bind("change blur",function(d){var c=!0;a.options.change.call(this,d)&&(c=!1);c?(b.text(a.getText()).show(),a.options.autoSize&&a.element.width(b.width()),a.element.hide()):a.options.selectOnOpen&&a.element.select()})}},getText:function(){return"SELECT"==this.element.prop("tagName")?this.element.children(":selected").text():this.element.val()},_destroy:function(){this.link.remove();
this.element.show()}})})(jq);jq.fn.hintInputBox=function(c){c=jq.extend({message:"",blurClass:"blur"},c);return this.each(function(){function a(){b.val()===c.message&&b.hasClass(c.blurClass)&&b.val("").removeClass(c.blurClass)}var b=jq(this),d=jq(this.form),e=jq(window);b.blur(function(){""===this.value&&b.addClass(c.blurClass).val(c.message)}).focus(a).blur();d.submit(a);e.unload(a)})};
(function(c){c.ellipsisTooltip=function(a){this.init(a||{});return this};c.extend(c.ellipsisTooltip,{checkIfPossible:function(){return void 0!==c.fn.textOverflow&&void 0!==c.fn.tipTip},prototype:{settings:{activation:"hover",position:"top",edgeOffset:3,delay:0,fadeIn:200,fadeOut:200,content:"",ellipseString:"\x26#x2026;"},init:function(a){this.settings=c.extend({},this.settings,a)},processNode:function(a){a=c(a);var b=c.support.textOverflow?a.width():null,d=a.text();if(c.support.textOverflow){if(this.getTextWidth(a)<
b+1)return}else if(a.textOverflow(this.settings.ellipseString),!a.text().match(/\u00e2\u0080\u0160$/))return;a.tipTip(c.extend(this.settings,{content:d}))},getTextWidth:function(a){var b=a.clone();b.css({width:"auto",display:"none","max-width":"none"});b.appendTo(a.parent());a=b.width();b.remove();return a}}});c.fn.ellipsisTooltip=function(a){return c.ellipsisTooltip.checkIfPossible()?this.each(function(){(new c.ellipsisTooltip(a)).processNode(this)}):this}})(window.jq||window.jQuery);
(function(c){c.emailValidator=function(a){this.init(a||{});return this};c.extend(c.emailValidator,{prototype:{settings:{activation:"blur",validateInvalid:!0,warnTypos:!0,boldSuggestions:!0,at:"auto",callback:null},init:function(a){this.settings=c.extend({},this.settings,a)},registerEvents:function(a){var b=this;a=c(a);a.data("emailValidatorInit")||(a.bind(b.settings.activation,function(){!a.data("no-popup")&&a.is(":visible")?b.checkEmail(this):a.data("no-popup",!1)}),a.change(function(){a.data("emailValidatorWarned",
!1)}),a.data("emailValidatorInit",!0))},checkEmail:function(a){var b=this,d=jq(a);if(!d.data("emailValidatorWarned")&&d.val().length){var c="email\x3d"+encodeURIComponent(d.val());jq.ajax({type:"POST",dataType:"json",url:"/k/run/spellcheckemail",data:c,success:function(d){"function"==typeof b.settings.callback?b.settings.callback.call(b,a,d):b.callback(a,d)}});d.data("emailValidatorWarned",!0)}},callback:function(a,b){!b.validAddress&&this.settings.validateInvalid||b.warnTypo&&this.settings.warnTypos&&
jq(a).is(":visible")?this.showErrorMessage(a,b.errorMessage,b.errorTitle):jq("#emailValidatorWarnBox").r9popover("destroy").remove()},showErrorMessage:function(a,b,d){jq("\x3cdiv title\x3d'"+d+"' id\x3d'emailValidatorWarnBox' class\x3d'emailValidatorWarn'\x3e"+b+"\x3c/div\x3e").r9popover({autoFocus:!1,position:jq(a),width:250,modal:!1,at:this.settings.at,dialogClass:"emailValidatorWarnBoxDlg",minHeight:130});this.settings.boldSuggestions&&jq(".emailValidatorWarn span").css("font-weight","bold")}}});
c.fn.emailValidator=function(a){return this.each(function(){(new c.emailValidator(a)).registerEvents(this)})}})(jq);
(function(c){var a={extend:function(){var a=Array.prototype.slice.call(arguments);if(a.length){var d=R9;if("string"==typeof a[0]){var e=a.shift();if(!a.length)return R9;for(var e=e.split("."),f=0;f<e.length;f++)d[e[f]]=d[e[f]]||{},d=d[e[f]]}e=!1;"boolean"==typeof a[0]&&(e=a.shift());a.unshift(d);e&&a.unshift(!0);c.extend.apply(c,a)}return R9}};"object"===typeof window.R9&&0<Object.keys(window.R9).length?window.R9.extend=a.extend:window.R9=a})(window.jq||window.jQuery);
window.console||(window.console={log:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){}});R9.extend("Analytics",{API:function(c){this.initialize(c)}});R9.extend("Analytics.API",{handlers:{pageView:[],event:[],autoEvent:[]},registerPlugin:function(c,a){c=R9.Analytics.API.handlers[c];"undefined"!=typeof c&&c.push(a)}});
R9.extend("Analytics.API.prototype",{initialize:function(c){this._options=c},trackPageView:function(c,a){(R9.globals.analytics||{}).doNotTrack||(c=this._makePageData(c),this._handle(R9.Analytics.API.handlers.pageView,c,a))},trackEvent:function(c,a){(R9.globals.analytics||{}).doNotTrack||(c=this._makeEventData(c),this._handle(R9.Analytics.API.handlers.event,c,a))},trackAutoEvent:function(c,a){(R9.globals.analytics||{}).doNotTrack||(c=this._makeEventData(c),c.auto=!0,this._handle(R9.Analytics.API.handlers.autoEvent,
c,a))},setSubPageId:function(c){R9.globals.analytics.subPageId=c},setPageId:function(c){R9.globals.analytics.pageId=c},setVertical:function(c){R9.globals.analytics.vertical=c},_handle:function(c,a,b){setTimeout(function(){for(var d=c.length,e=[],f,g=0;g<d;g++)f=jq.Deferred(),e.push(f),c[g](a,function(){var a=f;return function(){a.resolve()}}());b&&jq.when.apply(jq,e).done(b)})},_makeEventData:function(c){"string"===typeof c&&(c={category:c});var a=this._makeCommonData(c),b=null;R9.currentSearch&&
(b=R9.currentSearch.getSearchId());b||(b=window.SearchID);b&&(a.searchid=b);c&&(a.category=c.category,a.params=c.params,a.searchid=a.searchid||c.searchid,a.action=c.action,a.label=c.label,a.value=c.value);return a},_makePageData:function(c){return this._makeCommonData(c)},_makeCommonData:function(c){var a={},b=R9.globals.analytics||{};c?(a.vertical=c.vertical||b.vertical||R9.globals.vertical,a.locale=c.locale||R9.globals.locale.loc,a.affiliate=c.affiliate||R9.globals.affiliate,a.affiliateskin=c.affiliateskin||
c.brand||R9.globals.affiliateskin||R9.globals.brand,a.experiment=c.experiment||R9.globals.experiment,a.pageId=c.pageId||b.pageId,a.subPageId=c.subPageId||b.subPageId,a.whiskyProvider=c.whiskyProvider||b.whiskyProvider,a.presentation=c.presentation||b.presentation||R9.globals.presentation,a.pixelContext=c.pixelContext||b.pixelContext||{},a.loginState=c.loginState||b.loginState,a.sessionId=c.sessionId||b.sessionId,a.placement=c.placement||R9.globals.placement):(a.vertical=b.vertical||R9.globals.vertical,
a.locale=R9.globals.locale.loc,a.affiliate=R9.globals.affiliate,a.affiliateskin=R9.globals.affiliateskin||R9.globals.brand,a.experiment=R9.globals.experiment,a.pageId=b.pageId,a.subPageId=b.subPageId,a.whiskyProvider=b.whiskyProvider,a.presentation=b.presentation||R9.globals.presentation,a.pixelContext=b.pixelContext||{},a.loginState=b.loginState,a.sessionId=b.sessionId,a.placement=R9.globals.placement);return a}});
(function(){function c(a,b,d,e){var f=e.split(".");d&&(1<f.length?c(a,b,d[f[0]],f.slice(1).join(".")):d[e]&&(a[b]=d[e]))}function a(a,b){var d={},e;for(e in q){var f=q[e];f.key&&(f.index&&c(d,"dimension"+f.index,a,f.key),f.metric&&c(d,"metric"+f.metric,a,f.key))}d["dimension"+q.PRESENTATION.index]=R9.globals.presentation;d["dimension"+q.GA_CLIENT_ID.index]=t;d.title=document.title;d.location=document.location.href;d.hitCallback=b;if("search_started"===a.action)switch(d["metric"+q.SEARCHES_TOTAL.metric]=
1,a.vertical){case "flight":d["metric"+q.SEARCHES_FLIGHT.metric]=1;break;case "hotel":d["metric"+q.SEARCHES_HOTEL.metric]=1;break;case "car":d["metric"+q.SEARCHES_CAR.metric]=1;break;case "packagetour":d["metric"+q.SEARCHES_PACKAGE.metric]=1;break;case "cruise":d["metric"+q.SEARCHES_CRUISE.metric]=1;break;case "train":d["metric"+q.SEARCHES_TRAIN.metric]=1}return d}function b(b,d){if(R9.config.getBoolean("ui.ga.v2",!1))return a(b,d);var c={};c.dimension1=b.vertical;c.dimension2=b.pageId;c.dimension3=
b.subPageId;c.dimension4=b.locale;c.dimension5=b.affiliate;c.dimension7=b.affiliateskin;c.dimension6=b.experiment;c.dimension8=b.presentation;c.dimension9=b.loginState;c.dimension29=b.whiskyProvider;c.dimension10=b.pixelContext.destination&&b.pixelContext.destination.cityId;c.dimension11=b.pixelContext.hotelId;c.dimension12=b.pixelContext.originCode;c.dimension13=b.pixelContext.destinationCode;c.dimension14=b.pixelContext.obfuscatedTrackingCookie;c.dimension15=t;c.dimension28=b.sessionId;c.dimension33=
b.placement;c.title=document.title;c.location=document.location.href;c.hitCallback=d;return c}function d(b,d){var c={};R9.config.getBoolean("ui.ga.v2",!1)?c=a(b,d):(c.dimension1=b.vertical,c.dimension2=b.pageId,c.dimension3=b.subPageId,c.dimension4=b.locale,c.dimension5=b.affiliate,c.dimension7=b.affiliateskin,c.dimension6=b.experiment,c.dimension8=b.presentation,c.dimension9=b.loginState,c.dimension29=b.whiskyProvider,c.dimension14=b.pixelContext&&b.pixelContext.obfuscatedTrackingCookie,c.dimension15=
t,c.dimension28=b.sessionId,c.dimension33=b.placement,c.title=document.title,c.location=document.location.href,c.hitCallback=d,b.pixelContext&&(c.metric1=b.pixelContext.lengthOfStay,c.metric2=b.pixelContext.advancedBookingWindow));c.eventCategory=b.category;c.eventAction=b.action||(b.auto?"auto":"click");b.auto&&(c.nonInteraction=1);b.label&&(c.eventLabel=b.label);b.value&&(c.eventValue=b.value);return c}function e(a){return a&&0<a.length?a.toLowerCase():a}function f(a){a=("; "+document.cookie).split("; "+
a+"\x3d");if(2===a.length)return a.pop().split(";").shift()}function g(a){var b={};b.dimension2=a.dimension15;b.dimension3=a.dimension14;b.dimension14=e(a.dimension13);b.dimension21=e(a.dimension12);b.dimension154="kayak";b.dimension59=null!==f("mm-ab-seg")?f("mm-ab-seg"):f("cf-ab-seg");b.eventCategory=a.eventCategory;b.eventAction=a.eventAction;"search_started"===a.eventAction&&("flight"===a.dimension1||"main"===a.dimension1?b.metric1=1:"hotel"===a.dimension1&&(b.metric9=1));return b}function h(a,
b,d){var c=b.dimension1||"",e=c+"/"+(b.dimension2||"");b=e+"/"+(b.dimension3||"");d=d?d+".set":"set";a(d,"contentGroup1",c);a(d,"contentGroup2",e);a(d,"contentGroup3",b)}function l(){if(document.cookie){var a=document.cookie.split(";").filter(function(a){return a&&a.trim&&0===a.trim().indexOf("DATA_CONSENT")});if(a.length)return"true"===a[0].trim().split("\x3d")[1]?!0:!1}return null}function k(a,b){if(R9.config.getBoolean("ui.ga.v3",!0))n(a,b);else if(r)__gaTracker(function(a){t=a&&a.get&&a.get("clientId");
b&&b()});else{var d=["create",R9.config.getString("ui.ga.tid")],c=R9.globals.analytics&&R9.globals.analytics.google&&"true"===R9.globals.analytics.google.optimizeEnabled,e;c&&(e=R9.globals.analytics.google.optimizeContainerId);a?d.push({userId:a}):d.push("auto");c&&d.push({allowLinker:!0});__gaTracker.apply(null,d);R9.globals.wlgoogle&&(a={name:R9.globals.wlgoogle.name},"true"===R9.globals.wlgoogle.autolinker&&(a.allowLinker=!0),__gaTracker("create",R9.globals.wlgoogle.id,"auto",a),__gaTracker(R9.globals.wlgoogle.name+
".require","ecommerce"));__gaTracker(function(a){t=a&&a.get&&a.get("clientId");b&&b()});c&&e&&(__gaTracker("require",e),R9.globals.optimizeExperiments&&R9.globals.optimizeExperiments.length&&__gaTracker("set","exp",R9.globals.optimizeExperiments.join("!")));__gaTracker("require","displayfeatures");__gaTracker("require","ecommerce");r=!0}}function p(){var a=R9.globals.additionalGAIds||{};Object.keys(a).forEach(function(b){__gaTracker("create",a[b],"auto",b);__gaTracker(b+".require","ecommerce")})}
function n(a,b){if(R9.globals.wlgoogle){if(r){__gaTracker(function(a){t=a&&a.get&&a.get("clientId");b&&b()});return}a={name:R9.globals.wlgoogle.name};"true"===R9.globals.wlgoogle.autolinker&&(a.allowLinker=!0);__gaTracker("create",R9.globals.wlgoogle.id,"auto",a);__gaTracker(R9.globals.wlgoogle.name+".require","ecommerce");p();__gaTracker(function(a){t=a&&a.get&&a.get("clientId");b&&b()})}else{if(!l()&&R9.config.getBoolean("ui.gdpr",!1))return;if(r){__gaTracker(function(a){t=a&&a.get&&a.get("clientId");
b&&b()});return}var d=["create",R9.config.getString("ui.ga.tid")],c=R9.globals.analytics&&R9.globals.analytics.google&&"true"===R9.globals.analytics.google.optimizeEnabled,e;c&&(e=R9.globals.analytics.google.optimizeContainerId);a?d.push({userId:a}):d.push("auto");c&&d.push({allowLinker:!0});__gaTracker.apply(null,d);p();__gaTracker(function(a){t=a&&a.get&&a.get("clientId");b&&b()});c&&e&&(__gaTracker("require",e),R9.globals.optimizeExperiments&&R9.globals.optimizeExperiments.length&&__gaTracker("set",
"exp",R9.globals.optimizeExperiments.join("!")));__gaTracker("require","displayfeatures");__gaTracker("require","ecommerce")}r=!0}var q={VERTICAL:{index:"1",key:"vertical"},PAGE:{index:"2",key:"pageId"},SUB_PAGE:{index:"3",key:"subPageId"},LOCALE:{index:"4",key:"locale"},AFFILIATE:{index:"5",key:"affiliate"},EXPERIMENT:{index:"6",key:"experiment"},BRAND:{index:"7",key:"affiliateskin"},PRESENTATION:{index:"8"},LOGIN_STATE:{index:"9",key:"loginState"},TRACKINC_COOKIE:{index:"13",key:"pixelContext.obfuscatedTrackingCookie"},
GA_CLIENT_ID:{index:"14"},DEST_ID:{index:"25",key:"pixelContext.destination.cityId"},HOTEL_ID:{index:"26",key:"pixelContext.hotelId"},SESSION_ID:{index:"28",key:"sessionId"},USER_ID:{index:"",key:"pixelContext.obfuscatedTrackingCookie"},PLACEMENT:{index:"33",key:"placement"},ORIGIN_ID:{index:"36",key:"pixelContext.origin.cityId"},ORIGIN_NAME:{index:"37",key:"pixelContext.origin.cityName"},ORIGIN_IATA:{index:"38",key:"pixelContext.originCode"},DESTINATION_ID:{index:"39",key:"pixelContext.destination.cityId"},
DESTINATION_NAME:{index:"40",key:"pixelContext.destination.cityName"},DESTINATION_IATA:{index:"41",key:"pixelContext.destinationCode"},TRAVEL_TYPE:{index:"42",key:"pixelContext.flightSearchType"},TRAVEL_CLASS:{index:"43",key:"pixelContext.cabinClass"},DEPARTURE_DATE:{index:"44",key:"pixelContext.departureDate"},RETURN_DATE:{index:"45",key:"pixelContext.returnDate"},DATE_OPTIONS:{index:"46",key:"pixelContext.flightDateOptions"},ADULTS:{index:"47",key:"pixelContext.travelersAdults"},SENIORS:{index:"48",
key:"pixelContext.travelersSeniors"},YOUTH:{index:"49",key:"pixelContext.travelersChildrenYouth"},CHILDREN:{index:"50",key:"pixelContext.travelersChildrenChild"},SEAT_INFANT:{index:"51",key:"pixelContext.travelersChildrenSeat"},LAP_INFANT:{index:"52",key:"pixelContext.travelersChildrenLap"},ROOMS:{index:"53",key:"pixelContext.rooms"},DROP_OFF:{index:"54",key:"pixelContext.dropOff"},CRUISE_LINE:{index:"55",key:"pixelContext.cruiseLine"},LENGTH_OF_STAY:{index:"56",key:"pixelContext.lengthOfStay",metric:"1"},
ADVANCED_BOOKING_WINDOW:{index:"57",key:"pixelContext.advancedBookingWindow",metric:"2"},START_DOW:{index:"58",key:"pixelContext.startDOW"},END_DOW:{index:"59",key:"pixelContext.endDOW"},SEARCHES_TOTAL:{metric:"5"},SEARCHES_FLIGHT:{metric:"6"},SEARCHES_HOTEL:{metric:"7"},SEARCHES_CAR:{metric:"8"},SEARCHES_PACKAGE:{metric:"9"},SEARCHES_CRUISE:{metric:"10"},SEARCHES_TRAIN:{metric:"11"}},r=!1,t;window.__gaTrackEcommerceConversion=function(a){if(R9.globals.analytics&&R9.globals.analytics.google&&"true"===
R9.globals.analytics.google.trackEvent){k(R9.globals.analytics.utoken);var b=function(b){__gaTracker(b+".ecommerce:addTransaction",a);__gaTracker(b+".ecommerce:addItem",{id:a.id,name:a["item name"],quantity:1});__gaTracker(b+".ecommerce:send")};R9.globals.wlgoogle&&b(R9.globals.wlgoogle.name);Object.keys(R9.globals.additionalGAIds||{}).forEach(b,this)}};R9.Analytics.API.registerPlugin("pageView",function(a,d){var c="true"===R9.globals.analytics.google.trackPageView;R9.globals.analytics&&R9.globals.analytics.google&&
(c||R9.globals.wlgoogle)?k(R9.globals.analytics.utoken,function(){var e=b(a,d);if(R9.globals.wlgoogle)if("true"===R9.globals.wlgoogle.unleashed){var f=g(e);__gaTracker(R9.globals.wlgoogle.name+".send","pageview",f)}else __gaTracker(R9.globals.wlgoogle.name+".send","pageview");if(c){var l={location:"/",dimension13:a.pixelContext&&a.pixelContext.obfuscatedTrackingCookie,hitCallback:d};"true"===R9.globals.analytics.google.trackPageView_send_extra_dims&&(l=e,h(__gaTracker,l));__gaTracker("set","anonymizeIp",
!0);__gaTracker("send","pageview",l);Object.keys(R9.globals.additionalGAIds||{}).forEach(function(a){h(__gaTracker,e,a);__gaTracker(a+".set","anonymizeIp",!0);__gaTracker(a+".send","pageview",l)})}}):d&&d()});R9.Analytics.API.registerPlugin("event",function(a,b){var c="true"===R9.globals.analytics.google.trackEvent;R9.globals.analytics&&R9.globals.analytics.google&&(c||R9.globals.wlgoogle)?k(R9.globals.analytics.utoken,function(){var e=d(a,b);if(R9.globals.wlgoogle){var f=e.eventCategory;"true"===
R9.globals.wlgoogle.unleashed?(f=g(e),__gaTracker(R9.globals.wlgoogle.name+".send","event",f)):(0===f.lastIndexOf("details/inlinemultibook")||0===f.lastIndexOf("results/button/resultclick")||0===f.lastIndexOf("results/multibooklinks")||0===f.lastIndexOf("details/resultclick/button")||0===f.lastIndexOf("results/inline/click")||0===f.lastIndexOf("clickout/results/offers/cheapest_price/button")||0===f.lastIndexOf("clickout/results/offers/inline_vertical_multibook")||0===f.lastIndexOf("clickout/listview/detailslayer/offers/cheapest_price/button")||
0===f.lastIndexOf("clickout/mapview/detailslayer/offers/cheapest_price/button")||0===f.lastIndexOf("clickout/results/offers/inline_horizontal_multibook")||0===f.lastIndexOf("mapview/popup/results/button/resultclick")||0===f.lastIndexOf("clickout/mapview/detailslayer/offers/cheapest_price/button")||0===f.lastIndexOf("mapview/results/multibooklinks")||0===f.lastIndexOf("details/rates/button/resultclick")||0<=f.lastIndexOf("/multibook/buttonClicked")||0===f.lastIndexOf("inline/hmultibook/resultclick")||
0<=f.lastIndexOf("/multibook/linkClicked")||0===f.lastIndexOf("hotel/inline/rates/show")||0===f.lastIndexOf("results/inline/horizontal/click")||0===f.lastIndexOf("restaurants/resultitem/provider-clickout")||0===f.lastIndexOf("resultItem/horizontal/multibook/click")||0===f.lastIndexOf("resultItem/button/click")||0===f.lastIndexOf("resultItem/click_on/pricing/book")||0===f.lastIndexOf("inlineDetails/button/click")||0===f.lastIndexOf("booking-link"))&&__gaTracker(R9.globals.wlgoogle.name+".send","event",
"kayak_"+e.dimension1+"_offerlist","ota_click")}c&&(h(__gaTracker,e),__gaTracker("send","event",e),Object.keys(R9.globals.additionalGAIds||{}).forEach(function(a){h(__gaTracker,e,a);__gaTracker(a+".send","event",e)}))}):b&&b()});(function(a,b,d,c,e,f,g){a.GoogleAnalyticsObject=e;a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)};a[e].l=1*new Date;var h=setInterval(function(){R9&&R9.globals&&R9.globals.uiconfig&&R9.config&&R9.config.getBoolean&&(clearInterval(h),R9.config.getBoolean("ui.ga.forceOff",
!1)?a[e]=function(){arguments&&2<arguments.length&&arguments[2]&&"function"===typeof arguments[2].hitCallback&&arguments[2].hitCallback()}:(f=b.createElement(d),g=b.getElementsByTagName(d)[0],f.async=1,f.src=c,g.parentNode.insertBefore(f,g)))},100)})(window,document,"script","//www.google-analytics.com/analytics.js","__gaTracker")})();
(function(){var c=function(a,b){if(R9.globals.analytics&&R9.globals.analytics.vslog&&"true"==R9.globals.analytics.vslog.trackEvent){var d={type:"POST"};d.url="/vs/"+a.vertical+"/"+a.pageId+(a.subPageId?"/"+a.subPageId:"")+"/"+a.category+(a.action?"/"+a.action:"")+(a.label?"/"+a.label:"")+(a.value?"/"+a.value:"")+(a.auto?"/nonInteraction":"");d.url=d.url.replace(/\/+/g,"/");d.data=a.params||{};d.data.action="vs";d.data.searchid=a.searchid;d.success=b;d&&jq.ajax(d)}else b&&b()};R9.Analytics.API.registerPlugin("pageView",
function(a,b){if(R9.globals.analytics&&R9.globals.analytics.vslog&&"true"==R9.globals.analytics.vslog.trackPageView){var d={type:"POST"};d.url="/vs/page/"+a.vertical+"/"+a.pageId+(a.subPageId?"/"+a.subPageId:"");d.data=a.params||{};d.data.action="vs";d.data.searchid=a.searchid;d.success=b;d&&jq.ajax(d)}else b&&b()});R9.Analytics.API.registerPlugin("event",c);R9.Analytics.API.registerPlugin("autoEvent",c)})();R9.Analytics.api=new R9.Analytics.API({});
(function(c){R9.extend(!0,{Ajax:function(a,b){"string"==typeof a?this.options.url=a:b=b||a||{};var d=this;this.options.success=function(a){d.handleSuccess(a)};this.options.error=function(){d.handleError()};this.options=c.extend(!0,{},this.options,b||{});this.setResponse()}});R9.extend("Ajax",!0,{execute:function(a,b){return(new R9.Ajax(a,b)).execute()}});R9.extend("Ajax.prototype",!0,{ajax:null,response:null,options:{type:"POST",beforePublish:null,afterPublish:null,errorDialog:null},execute:function(){this.ajax=
c.ajax(this.options);return this},handleSuccess:function(a){this.setResponse(a);this.executePrePublishScripts();0<this.getResponse().status?this.showError():this.publishDomNodes();this.executePostPublishScripts();return this},handleError:function(){this.showError();return this},showError:function(){return this},publishDomNodes:function(){var a,b,d,e=this.getResponse().nodes,f=c("body"),g;for(g in e)e.hasOwnProperty(g)&&(d=c("\x3cdiv\x3e\x3c/div\x3e").append(e[g]).children(),b="#"+g,a=c(b),a.length?
d.is(b)?a.replaceWith(d):a.html(d):(d.is(b)||(d=c('\x3cdiv id\x3d"'+g+'"\x3e\x3c/div\x3e').append(d)),f.append(d)));return this},executePrePublishScripts:function(){R9.utils.evaluateScript(this.getResponse().preScript);this.options.beforePublish&&this.options.beforePublish.call(this);return this},executePostPublishScripts:function(){R9.utils.evaluateScript(this.getResponse().postScript);this.options.afterPublish&&this.options.afterPublish.call(this);return this},setResponse:function(a){this.response=
c.extend({status:1,message:"",nodes:{},preScript:"",postScript:"",payload:{}},a||{});return this},getResponse:function(){return this.response},getErrorDialog:function(){null==this.errorDialog&&(this.errorDialog=this.setErrorDialog(R9.ErrorDialog.getInstance()));return this.errorDialog},setErrorDialog:function(a){return this.errorDialog=a}})})(jq||jQuery);
(function(c,a){c.Common=c.Common||{};c.Common.SwindlePublisher={publish:function(a){if("string"===typeof a)try{localStorage.setItem("swindle",a.removeAccentedChars())}catch(d){}}}})(R9,window.jq||window.jQuery);
(function(c,a){function b(a,b){b=Math.floor((b-a.length)/2);for(var d=0;d<b;d++)a=" "+a;return a}c.Common=c.Common||{};c.Common.enableConsoleBanner=function(a,c,f){a=a||"Want to work with an amazing team, building the best search engine in Travel?";var d=!1,e=window.setInterval(function(){try{if((window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||160<window.outerWidth-window.innerWidth||160<window.outerHeight-window.innerHeight)&&!d){window.clearInterval(e);d=!0;var g=a;isSafari=
-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Edge");console.log("\n\n");isSafari||(f?console.log("\n                                           _\n                                          | |\n  ___ ___   ___   ___ ___   ___   ___   __| | ___\n/  _ ` _ \\ / _ \\/  _ ` _  \\/ _ \\/  _ \\ / _  |/ _ \\\n| | | | | | (_) | | | | | | (_) | | | | (_| | (_) |\n|_| |_| |_|\\___/|_| |_| |_|\\___/|_| |_|\\____,\\___/\n\n"):console.log("\n.--------------..--------------..-------------..--------------..--------------.\n|     _  __    ||      __      ||   __   __   ||      __      ||     _  __    |\n|    | |/ /    ||     /  \\     ||   \\ \\ / /   ||     /  \\     ||    | |/ /    |\n|    | ' /     ||    / /\\ \\    ||    \\ V /    ||    / /\\ \\    ||    | ' /     |\n|    | . \\     ||   /  --  \\   ||     | |     ||   /  --  \\   ||    | . \\     |\n|    |_|\\_\\    ||  /_/----\\_\\  ||     |_|     ||  /_/----\\_\\  ||    |_|\\_\\    |\n|              ||              ||             ||              ||              |\n'--------------''--------------''-------------''--------------''--------------'\n\n"));
console.log("\n"+b(g,f?51:79)+"\n"+b(c,f?51:79)+"\n\n\n")}}catch(k){console.error(k)}},500)};c.Common.enableKonamiCode=function(b){if(b){var d="";a(document).keydown(function(a){d+=a.keyCode;20<d.length&&(d=d.substr(d.length-20));if("38384040373937396665"==d)return window.open(decodeURIComponent(b),"_blank"),d="",a.preventDefault(),!1})}}})(R9,window.jq||window.jQuery);
(function(c,a,b){function d(){var d=b.performance.getEntries(),l={},k=g;d.forEach(function(a){var b;b=(b=a.name.match(/^https?:\/\/(www\.)?([^/]+)\/(.*)/i))?b[2]:null;var d;if(d=b)a:{for(d=0;d<f.length;d++)if(b.match(f[d])){d=!1;break a}d=!0}d&&a.startTime>g&&(l[b]=l[b]||[],l[b].push(a),a.startTime>k&&(k=a.startTime))});var p={};Object.keys(l).forEach(function(a){var b=e(l[a]);0<b&&(p[a]=b)});0<Object.keys(p).length&&c.ajax({type:"POST",url:"/s/horizon/tools/performance/TagPerformanceMonitor",data:{timing:JSON.stringify(p),
formtoken:a.globals.formtoken}});g=k}function e(a){var b=0,d=0;a.sort(function(a,b){return a.startTime-b.startTime});a.forEach(function(a){var c=a.startTime+a.duration;a.startTime<=b&&c>b?(d+=c-b,b=c):(b=c,d+=a.duration)});return Math.round(d)}var f=[/localhost/,/kayak/,/swoodoo/,/checkfelix/,/r9cdn/,/runwaynine/],g=0;a.Common=a.Common||{};a.Common.TagPerformanceMonitor={collect:function(){b.performance.getEntries&&"complete"===document.readyState?d():b.performance.getEntries&&b.addEventListener("load",
d,!1)}}})(window.jQuery||window.jq||window.$,R9,window);
(function(c){R9.Common=R9.Common||{};R9.Common.SnapAgentControls={refresh:function(){var a=window.location.toString();"undefined"!==typeof FilterList&&(a=window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?fs\x3d"+encodeURIComponent(FilterList.getStateString()));this.setUrl(a)},setUrl:function(a){c("#snap-agent-copy-field").val(a)},install:function(){(new Clipboard("#snap-agent-copy-button")).on("success",function(a){c("#snap-agent-copy-alert").animate({opacity:1},500).delay(2E3).animate({opacity:0},
500)})}}})(window.jq||window.jQuery);
(function(c){function a(d){return d?null!=b[d]?(R9.utils.log("Duplicate instance creation was attempted. ID -\x3e ",d),d=++g,null==b[d]?d:a()):d:(d=++g,null==b[d]?d:a())}var b={},d={},e={},f=null,g=0;R9.extend({ViewState:function(d,c){this.instanceId=a(d);this.setOptions(c);this.lastURLViewState=this.options.currentUrlState;b[this.instanceId]=this}});R9.extend("ViewState",{getInstance:function(d,c){if(!d&&!c||"object"==typeof d&&!c)f=f||a();var e=f||d;null!=f&&(c=d);null==b[e]?b[e]=new R9.ViewState(e,
c||{}):null!=c&&b[e].setOptions(c);return b[e]},getStateString:function(a){return R9.ViewState.getInstance(a).getStateString()},saveState:function(a,b){return R9.ViewState.getInstance(b).saveState(!1,a)},getUrlStateString:function(a){return this.getInstance(a).getUrlStateString()},isPageReloadState:function(){return!0},isLegacyLocationURL:function(){return 0<=window.location.pathname.indexOf("/r/")}});R9.extend("ViewState.prototype",{instanceId:null,lastURLViewState:"",options:{currentUrlState:"",
stateDelimiter:";",vertical:null,searchBaseUrl:null,urlStateRequestKey:"urlViewState",saving:{url:"/s/sparkle",searchIdKey:"searchid",searchType:"type",requestType:"POST",dataType:"json",actionKey:"action",actionValue:"viewState",ignoreWindowScrollPositionOnce:!1,requestKey:"viewState",resetValue:"RESET"},viewStatesKeys:{windowScroll:"ws",clickedResultIdListKey:"t",lastClickedResultIdKey:"lt",hotelDetailsOpenedIndex:"hdoix",hotelDetailsOpenedId:"hdoid",hotelDetailsOpenedTab:"hdot",hotelMiniDetailsOpenedId:"hmdoid",
hotelMiniDetailsOpenedTab:"hmdot",hotelMiniDetailsOpenedIdPage:"hmdoip",hotelMapFilterOpenedId:"hmfoid",showLayoverFilter:"lay",resultPageNumber:"pn",showMatrix:"mtx",showPlusMinusThree:"fflx",flightMatrixGridRawVisible:"fmgr",mapViewPortCenter:"mvpc",mapZoomLevel:"mzl",landingTimeSliders:"lts",flightDetailsOpenedIndexes:"fodi",carDetailsOpenedIndexes:"codi",carClassGroupsFiltered:"ccids",hotelMapMiniDetailsId:"hmmd",multiCityFlightFilterLeg:"mcleg",chosenDepartureId:"cdid",chosenReturnId:"crid",
activeDestinationAirport:"frdest"},urlViewStateKeys:{resultViewMode:"vw",mapTypeId:"mtid"},noPushState:!1},setOptions:function(a){this.options=c.extend(!0,{},this.options,a||{})},add:function(a,b){null==d[this.instanceId]&&(d[this.instanceId]={});a?d[this.instanceId][a]=b:R9.utils.log("State name cannot be empty: ",a);return this},addUrlState:function(a,b){null==e[this.instanceId]&&(e[this.instanceId]={});a?e[this.instanceId][a]=b:R9.utils.log("State name cannot be empty: ",a);return this},get:function(a){if(a){if(null!=
d[this.instanceId]&&null!=d[this.instanceId][a])return d[this.instanceId][a];if(null!=e[this.instanceId]&&null!=e[this.instanceId][a])return e[this.instanceId][a]}return null},remove:function(a){a&&null!=d[this.instanceId]&&null!=d[this.instanceId][a]&&delete d[this.instanceId][a];a&&null!=e[this.instanceId]&&null!=e[this.instanceId][a]&&delete e[this.instanceId][a];return this},restore:function(a){try{"string"==typeof a&&(a=c.parseJSON(a)),"object"==typeof d[this.instanceId]?c.extend(d[this.instanceId],
a):d[this.instanceId]=a}catch(k){R9.utils.log("Failed to parse JSON string: ",k)}return this},restoreUrlStates:function(a){try{"string"==typeof a&&(a=c.parseJSON(a)),e[this.instanceId]=a}catch(k){R9.utils.log("Failed to parse JSON string: ",k)}return this},reset:function(){d[this.instanceId]=null;return this},getStateString:function(){this.refreshRequiredViewStates();var a=c.extend({},e[this.instanceId]||{},d[this.instanceId]||{});c.isArray(a.ws)||"undefined"===typeof a.ws||delete a.ws;return h.stringify(a)},
getUrlStateString:function(){return this.options.currentUrlState},saveState:function(a,b){var d={};d[this.options.saving.actionKey]=this.options.saving.actionValue;d[this.options.saving.searchIdKey]=window.SearchID;d[this.options.saving.searchType]=R9.globals.vertical;d[this.options.saving.requestKey]=this.getStateString();var e=this;c.ajax(this.options.saving.url,{type:this.options.saving.requestType,dataType:this.options.saving.dataType,data:d,success:function(d){d&&0<parseInt(d.status,10)&&(e.restoreUrlStates(d.stateValues),
e.updateUrlState(d.state));(a||1==parseInt(d.reset,10))&&e.reset();"function"==typeof b&&b()},error:function(){}});return this},updateUrlState:function(a){if(!this.options.vertical||!this.options.searchBaseUrl&&!R9.ViewState.isLegacyLocationURL()||this.lastURLViewState==a)return this;this.options.currentUrlState=a;if(this._handleLegacyURLUpdate(a))return this;this.lastURLViewState=a;a=this.options.searchBaseUrl||"";var b=this.getUrlStateString();b&&(a+=this.options.stateDelimiter+b);var b=window.location.pathname.indexOf("/"+
this.options.vertical),d=window.location.hash.indexOf("/"+this.options.vertical);if(0>b&&0>d)return this;R9.ViewState.isPageReloadState()&&(a="/"+this.options.vertical+"/"+a,R9.Tabs&&R9.Tabs.SearchTabs?(R9.Tabs.SearchTabs.changeCurrentTabUrl(a),void 0!==history.pushState?history.replaceState(history.state,document.title,a):R9App.AppInstance.updateBrowserLocationWithoutNavigation(a)):window.location.pathname=a);return this},refreshRequiredViewStates:function(){if(this.options.saving.ignoreWindowScrollPositionOnce)return this.options.saving.ignoreWindowScrollPositionOnce=
!1,this;this.add(this.options.viewStatesKeys.windowScroll,[this.getScrollPositionHorizontalWindow(),this.getScrollPositionVerticalWindow()]);return this},getScrollPositionHorizontal:function(a){return c(a).length?c(a).get(0).scrollLeft:0},getScrollPositionVertical:function(a){return c(a).length?c(a).get(0).scrollTop:0},getScrollPositionHorizontalWindow:function(){return window.scrollX||window.pageXOffset||0},getScrollPositionVerticalWindow:function(){return window.scrollY||window.pageYOffset||0},
addResultClicked:function(a){value=this.getNormalizedIntegerValue(a);if(0<=value){this.add(this.options.viewStatesKeys.lastClickedResultIdKey,value);var b=c.isArray(this.get(this.options.viewStatesKeys.clickedResultIdListKey))?this.get(this.options.viewStatesKeys.clickedResultIdListKey):[];0>c.inArray(value,b)&&b.push(value);this.add(this.options.viewStatesKeys.clickedResultIdListKey,b);a=c("#tbd"+a);a.parent().children(".lastclicked").removeClass("lastclicked");a.addClass("clicked lastclicked")}return this},
addHotelDetailsOpenedValues:function(a,b,d){a=this.getNormalizedIntegerValue(a);this.addResultClicked(a);this.add(this.options.viewStatesKeys.hotelDetailsOpenedIndex,a);b=this.getNormalizedIntegerValue(b);0<=b&&(this.add(this.options.viewStatesKeys.hotelDetailsOpenedId,b),this.addHotelDetailsOpenTabValue(d));return this},addHotelDetailsOpenTabValue:function(a){this.add(this.options.viewStatesKeys.hotelDetailsOpenedTab,a);return this},addHotelMiniDetailsOpenedValues:function(a,b,d){a=this.getNormalizedIntegerValue(a);
this.addResultClicked(a);this.add(this.options.viewStatesKeys.hotelDetailsOpenedIndex,a);b=this.getNormalizedIntegerValue(b);0<=b&&(a=this.get(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage)||{},a[b]=d,this.add(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage,a));return this},getHotelMiniDetailsOpened:function(){return this.get(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage)},removeHotelMiniDetailsOpenedValues:function(){this.remove(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage);
return this},removeSingleHotelMiniDetailsOpenedValues:function(a){a=this.getNormalizedIntegerValue(a);if(0<=a){var b=this.get(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage)||{};null!=b[a]&&delete b[a];this.add(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage,b)}return this},removeHotelDetailsOpenedValues:function(){this.remove(this.options.viewStatesKeys.hotelDetailsOpenedId);this.remove(this.options.viewStatesKeys.hotelDetailsOpenedTab);return this},addResultViewModeValue:function(a,
b){this.addUrlState(this.options.urlViewStateKeys.resultViewMode,a);this.options.noPushState=b;return this},addActiveDestinationAirport:function(a){this.add(this.options.viewStatesKeys.activeDestinationAirport,a);return this},addResultPageNumber:function(a){a=parseInt(a,10);a=isNaN(a)||0>=a?0:a-1;this.add(this.options.viewStatesKeys.resultPageNumber,a);this.resetViewStatesOnPageChange();return this},resetViewStatesOnPageChange:function(){this.resetOpenedFlightDetails();this.resetOpenedCarDetails();
return this},resetViewStatesOnFilters:function(){this.addResultPageNumber(0);this.resetOpenedFlightDetails();this.resetOpenedCarDetails();return this},resetViewStatesOnSort:function(){this.addResultPageNumber(0);this.resetOpenedFlightDetails();this.resetOpenedCarDetails();return this},addMapTypeId:function(a){this.addUrlState(this.options.urlViewStateKeys.mapTypeId,a);return this},addMapCenterPoint:function(a,b){null!=a&&null!=b&&this.add(this.options.viewStatesKeys.mapViewPortCenter,{lat:a,lng:b});
return this},addMapZoomLevel:function(a){a&&this.add(this.options.viewStatesKeys.mapZoomLevel,a);return this},addToOpenedDetailsList:function(a,b){b=this.getNormalizedIntegerValue(b);if(!(0>b)){var d=c.isArray(this.get(a))?this.get(a):[];0>c.inArray(b,d)&&(d.push(b),this.addResultClicked(b));var e=-1*b;for(b=0;b<d.length;b++)if(1/d[b]===1/e){d.splice(b,1);break}this.add(a,d);return this}},removeFromOpenedDetailsList:function(a,b){b=this.getNormalizedIntegerValue(b);if(!(0>b)){var d,e=c.isArray(this.get(a))?
this.get(a):[];for(d=0;d<e.length;d++)if(e[d]==b){e.splice(d,1);break}b*=-1;0>c.inArray(b,e)&&e.push(b);this.add(a,e);return this}},resetOpenedDetailsList:function(a){this.add(a,this.options.saving.resetValue);return this},addOpenedFlightDetails:function(a){return this.addToOpenedDetailsList(this.options.viewStatesKeys.flightDetailsOpenedIndexes,a)},removeOpenedFlightDetails:function(a){return this.removeFromOpenedDetailsList(this.options.viewStatesKeys.flightDetailsOpenedIndexes,a)},resetOpenedFlightDetails:function(){return this.resetOpenedDetailsList(this.options.viewStatesKeys.flightDetailsOpenedIndexes)},
addOpenedCarDetails:function(a){return this.addToOpenedDetailsList(this.options.viewStatesKeys.carDetailsOpenedIndexes,a)},addCarClassGroupsFiltered:function(a){return this.add(this.options.viewStatesKeys.carClassGroupsFiltered,a)},resetCarClassGroupsFiltered:function(){return this.addCarClassGroupsFiltered("")},removeOpenedCarDetails:function(a){return this.removeFromOpenedDetailsList(this.options.viewStatesKeys.carDetailsOpenedIndexes,a)},resetOpenedCarDetails:function(){return this.resetOpenedDetailsList(this.options.viewStatesKeys.carDetailsOpenedIndexes)},
addHotelMapMiniDetailsId:function(a){a=this.getNormalizedIntegerValue(a);0<=a&&this.add(this.options.viewStatesKeys.hotelMapMiniDetailsId,a);return this},removeHotelMapMiniDetailsId:function(){this.add(this.options.viewStatesKeys.hotelMapMiniDetailsId,-1);return this},addFlightLayoverAirportsState:function(a){"undefined"==typeof a&&(a=!0);this.add(this.options.viewStatesKeys.showLayoverFilter,a);return this},addFlightMultiCityFilterLegState:function(a){"undefined"!=typeof a&&this.add(this.options.viewStatesKeys.multiCityFlightFilterLeg,
a);return this},setIsAirlineFilterInAirlineView:function(a){"undefined"!=typeof a&&this.add(this.options.viewStatesKeys.airlineFilterIsAirlineView,a);return this},addFlightLandingTimeSlidersFilterState:function(a){"undefined"==typeof a&&(a=!0);this.add(this.options.viewStatesKeys.landingTimeSliders,a);return this},addShowMatrixViewState:function(a){"undefined"==typeof a&&(a=!1);this.add(this.options.viewStatesKeys.showMatrix,a);return this},addShowPlusMinusThreeViewState:function(a){"undefined"==
typeof a&&(a=!1);this.add(this.options.viewStatesKeys.showPlusMinusThree,a);return this},addflightMatrixGridRawVisibleState:function(a){"undefined"==typeof a&&(a=-1);this.add(this.options.viewStatesKeys.flightMatrixGridRawVisible,a);return this},setIgnoreWindowScrollPositionOnce:function(){this.options.saving.ignoreWindowScrollPositionOnce=!0;return this},getNormalizedIntegerValue:function(a){a=parseInt(a,10);"number"!=typeof a&&(a=-1);return a},addHotelMapFilterOpenedId:function(a){this.add(this.options.viewStatesKeys.hotelMapFilterOpenedId,
a);return this},removeHotelMapFilterOpenedId:function(a){this.get(this.options.viewStatesKeys.hotelMapFilterOpenedId)==a&&this.add(this.options.viewStatesKeys.hotelMapFilterOpenedId,"none_opened");return this},_handleLegacyURLUpdate:function(a){if(!R9.ViewState.isLegacyLocationURL())return!1;var b=window.location.pathname,d=b.indexOf(this.options.stateDelimiter+this.lastURLViewState);0<=d&&(b=b.substring(0,d));if(!a)return window.location.pathname=b,!0;a="";(d=this.getUrlStateString())&&(a+=this.options.stateDelimiter+
d);window.location.pathname=b+a;return!0},addChosenDepartureId:function(a){"undefined"!=typeof a&&this.add(this.options.viewStatesKeys.chosenDepartureId,a);return this},addChosenReturnId:function(a){"undefined"!=typeof a&&this.add(this.options.viewStatesKeys.chosenReturnId,a);return this},removeChosenDepartureId:function(){this.add(this.options.viewStatesKeys.chosenDepartureId,"RESET");return this},removeChosenReturnId:function(){this.add(this.options.viewStatesKeys.chosenReturnId,"RESET");return this}});
var h=window.JSON;"undefined"===typeof h&&(h={});"undefined"===typeof h.stringify&&c.extend(h,{stringify:function(a){var b=[];switch(typeof a){case "string":return'"'+a.replace(/(["\\\/\b\f\n\r\t]{1})/g,"{1}")+'"';case "number":case "boolean":return a.toString();case "undefined":return"undefined";case "object":if(c.isArray(a)){for(var d=0;d<a.length;d++)b.push(h.stringify(a[d]));return"["+b.join(",")+"]"}if(null==a)return"null";for(d in a)a.hasOwnProperty(d)&&b.push('"'+d.toString()+'":'+h.stringify(a[d]));
return"{"+b.join(",")+"}"}return""}})})(jq||jQuery);
(function(c){R9.extend("utils",{log:function(){"undefined"!=typeof console&&null!=console&&(null!=console.exception?console.exception.apply(window,arguments):(null!=console.error&&console.error(Array.prototype.slice.call(arguments)),null!=console.trace&&console.trace()))},formToObject:function(a){var b={};a=c(a).serializeArray();c.each(a,function(){b[this.name]="undefined"!=typeof b[this.name]?b[this.name]+","+this.value:this.value});return b},slugify:function(a){return a.replace(/[^A-Za-z0-9\-_]/g,"")},
roundTo:function(a,b){if(!a||isNaN(parseInt(a,10)))return 0;b=Math.pow(10,parseInt(b,10)||0);return Math.round(a*b)/b},roundToNearest:function(a,b,d){null==d&&(d=!0);var c=Math.floor(a/b);return 0<a%b?d?(c+1)*b:c*b:a},evaluateScript:function(a,b){var d=null;try{switch(typeof a){case "string":d=a;break;case "number":a=this;default:d=a.innerText||a.textContent}d&&(d=d.replace(/([^\r])\n/,"$1\r\n"),c.globalEval(d))}catch(e){b&&e instanceof TypeError?window.setTimeout(function(){evaluateScript(d,!1)},
1):(this.log(e,d),window.Rollbar&&Rollbar.error("Error while evaluating script. script\x3d"+d.substring(0,64),e))}},applyMethod:function(a,b,d){b=a&&a[b];return"function"===typeof b?b.apply(a,d):null},onEnterPress:function(a){return function(b){b=window.event||b;13===b.keyCode&&a.call(b.target||b.srcElement||this,b)}},clickByEnter:function(a){R9.utils.onEnterPress(function(a){c(this).trigger(c.Event(a,{type:"click"}))})(a)}})})(jq||jQuery);
(function(c){R9.extend("conditions",{isNull:function(a){if(null!==a)throw Error("Expected null.");},isNotNull:function(a){if(null===a)throw Error("Expected not null.");},isNumber:function(a){if(!c.isNumeric(a))throw Error("Expected number.");},isFunction:function(a){if(!c.isFunction(a))throw Error("Expected function.");},isString:function(a){if("string"!==c.type(a))throw Error("Expected string.");},isNotNullNotUndefinedNotEmptyNotWhitespaceString:function(a){if(R9.Common.Utils.String.isNullOrUndefinedOrEmptyOrWhitespace(a))throw Error("Expected string.");
},isNullOrNotUndefinedNotEmptyNotWhitespaceString:function(a){if(null!==a&&R9.Common.Utils.String.isNullOrUndefinedOrEmptyOrWhitespace(a))throw Error("Expected string.");}})})(jq||jQuery);
(function(c){R9.extend("conditions.jquery",{isJqObject:function(a){if(!a)throw Error("Invalid input.");if(!(a instanceof c))throw Error("Expected jQuery object.");},hasExactlyNJqElements:function(a,b){R9.conditions.isNumber(a);R9.conditions.jquery.isJqObject(b);if(b.length!==a)throw Error("Can only check exactly "+a+" form element(s) at a time, was passed "+b.length+" element(s).");},hasExactlyOneJqElement:function(a){R9.conditions.jquery.isJqObject(a);R9.conditions.jquery.hasExactlyNJqElements(1,
a)}})})(jq||jQuery);
(function(c){R9.extend("config",{getString:function(a,b){var d;d=window.R9&&window.R9.globals&&window.R9.globals.uiconfig?window.R9.globals.uiconfig:{};if(!a)return b;var c=d[a];if("string"===typeof c)return"__"===c?b:c;var f=d,c=a.split(".",20),g;for(g=0;g<c.length-1;g++)if(f=f[c[g]],"undefined"===typeof f)return d[a]="__",b;g=c[c.length-1];"enabled"===g?(c=f.e,"undefined"===typeof c&&(c=f[g])):c=f[g];"object"===typeof c&&(c=c._);return"undefined"===typeof c?(d[a]="__",b):d[a]=c},getBoolean:function(a,
b){a=R9.config.getString(a,"");var d=typeof a;return"number"===d?0!=a:"boolean"===d?a:a?"true"===a.toLowerCase():b},getInt:function(a,b){a=R9.config.getString(a,"");return"number"===typeof a?a:a?parseInt(a):b}})})(window.jq||window.jQuery);
(function(c,a){var b=function(){var a=0;return function(){return a++}}();c.extend("Header",{TripsCounter:function(){var b=Array.prototype.slice.call(arguments);3===b.length&&("string"===typeof b[0]&&"number"===typeof b[1]&&"number"===typeof b[2]?(a.extend(this,{counterElementSelector:b[0],count:0<=b[1]?b[1]:0,upcomingTripsCount:b[2]}),this.init()):"function"===typeof console.error&&console.error("Incorrect arguments for TripsCounter. Expects element ID / classname and number"))},TripsDropdownBubble:function(b,
c){this.options=a.extend({},this.options,c);this.init(b)}});c.extend("Header.TripsCounter.prototype",{options:{profileMenu:"#accountTooltip",tripsMenuTrigger:null,tripsMenu:null,tripsMenuContainer:"#tripsMenuDropDown, #tripsMenuIconDropDown",tripsMenuOpenClass:"dropdown-open"},counterElementSelector:null,counterElement:null,count:0,upcomingTripsCount:0,init:function(){this.instance=this;this.counterElement=a(this.counterElementSelector);this.options.tripsMenuTrigger=".colTripsIcon";this.options.tripsMenu=
".tripsIconLink";this.addEventListeners().setTripsCount(this.count);this.updateMenu()},addEventListeners:function(){a(document).on("tripAdded",a.proxy(this.up,this));a(document).on("tripRemoved tripsBubbleHelpRemove",a.proxy(this.down,this));a(document).on("updateTripsCount",a.proxy(this.setTripsCount,this));a(document).on("trips.upcomingCount",a.proxy(this.setUpcomingTripsCount,this));return this},setUpcomingTripsCount:function(a){this.upcomingTripsCount=a||0;this.updateMenu()},setTripsCount:function(){var a=
Array.prototype.slice.call(arguments);this.count=a.length&&"number"===typeof a[a.length-1]&&0<=a[a.length-1]?a[a.length-1]:this.count;this.update()},up:function(){this.count+=1;this.setTripsCount();this.updateMenu()},down:function(){0>--this.count&&(this.count=0);this.setTripsCount();this.updateMenu()},updateMenu:function(){0===this.count&&0===this.upcomingTripsCount?this.disableMenu():this.enableMenu()},update:function(){this.counterElement.length&&"number"===typeof this.count&&this.counterElement.html(this.count)},
disableMenu:function(){a(this.options.tripsMenuTrigger).off("mouseenter mouseleave");a(this.options.tripsMenu).off("mouseeneter mouseleave")},enableMenu:function(){this.disableMenu();var b=this,e,f;a(b.options.tripsMenu).length&&(a(b.options.tripsMenuTrigger).on("mouseenter",function(d){f=setTimeout(function(){var d=a(b.options.tripsMenu);d.length&&(d.is(":hidden")||!d.hasClass(b.options.tripsMenuOpenClass)?("undefined"!==typeof a(document).data("dialog")&&(a("#moreHeaderLink").removeClass("show-tooltip"),
a(b.options.profileMenu).is(":visible")&&a(b.options.profileLink).click()),c.config.getBoolean("ui.trips.withchallenger",!1)&&(a("#userDisplayEmailArrow").removeClass("arrow-up").addClass("arrow-down"),a("#accountTooltip").hide(),a(".username").removeClass("open"),a("#moreNavLink").removeClass("open"),a(".new-more-menu").removeClass("open")),a(b.options.tripsMenu).addClass(b.options.tripsMenuOpenClass),a(document).data("dialog",{close:function(){a(b.options.tripsMenu).removeClass(b.options.tripsMenuOpenClass)}})):
clearTimeout(e))},300)}).on("mouseleave",function(){clearTimeout(f);a(b.options.tripsMenu).length&&(e=setTimeout(function(){a(b.options.tripsMenu).removeClass(b.options.tripsMenuOpenClass)},300))}),a(b.options.tripsMenuContainer).on("mouseenter",function(){clearTimeout(e)}).on("mouseleave",function(){a(b.options.tripsMenuContainer);e=setTimeout(function(){a(b.options.tripsMenu).removeClass(b.options.tripsMenuOpenClass)},300)}))}});c.extend("Header.TripsDropdownBubble.prototype",{options:{cookieKey:void 0},
element:void 0,helpWrapper:void 0,removeBubbleHelpLink:void 0,tripsSummariesWrapper:void 0,instanceNum:void 0,init:function(d){this.instanceNum=b();this.element=a("#"+d);this.helpWrapper=this.element.find(".tripsBubbleHelpCol");this.removeBubbleHelpLink=this.helpWrapper.find(".remove");this.tripsSummariesWrapper=this.element.find(".tripsSummariesGrid");this.addEventListeners()},addEventListeners:function(){var b=this;a(document).on("tripAdded."+this.instanceNum,a.proxy(this.tripAdded,this));a(document).on("tripRemoved."+
this.instanceNum,a.proxy(this.tripRemoved,this));a(document).on("tripsBubbleHelpRemove."+this.instanceNum,a.proxy(this.tripsBubbleHelpRemove,this));a(document).on("updateTripsHeader."+this.instanceNum,a.proxy(this.updateTripsHeader,this));this.removeBubbleHelpLink.click(function(){a(document).trigger("tripsBubbleHelpRemove");setMetaCookie(b.options.cookieKey,!0)})},tripAdded:function(a,b){this.updateTripsHeader()},tripRemoved:function(a,b){this.updateTripsHeader()},tripsBubbleHelpRemove:function(a,
b){this.helpWrapper.remove()},updateTripsHeader:function(){var b=this;a.ajax({type:"GET",url:"/k/headerajax",cache:!1,data:{tripsDropdown:!0,visible:b.element.is(":visible"),dropDownId:b.element.attr("id")},dataType:"html",success:function(a){b.element&&b.element.replaceWith(a);b._destroy()}})},_getTripById:function(a){return this.tripsSummariesWrapper.find('*[data-tripId\x3d"'+a+'"]')},_destroy:function(){this.tripsSummariesWrapper=this.removeBubbleHelpLink=this.helpWrapper=this.element=null;a(document).off("tripAdded."+
this.instanceNum);a(document).off("tripRemoved."+this.instanceNum);a(document).off("tripsBubbleHelpRemove."+this.instanceNum);a(document).off("updateTripsHeader."+this.instanceNum)}})})(window.R9,window.jq||window.jQuery);
(function(c,a){R9.extend("Utils.Date",{getDaysInMonth:function(a){return a?32-(new Date(a.getFullYear(),a.getMonth(),32)).getDate():0},formatToDatetime:function(a,d){if(!a)return null;var b=(a.getMonth()+1).toString();1==b.length&&(b="0"+b);var c=a.getDate().toString();1==c.length&&(c="0"+c);"undefined"===typeof d&&(d="-");return[a.getFullYear().toString(),b,c].join(d)},parseFromDatetime:function(a,d){"undefined"===typeof d&&(d="-");d=["^((?:20|19)[0-9]{2})","(0?[1-9]|1[012])","(0?[1-9]|[12][0-9]|3[01])$"].join(d);
var b=(new RegExp(d)).exec(a);return b?(a=parseInt(b[1],10),d=parseInt(b[2],10)-1||0,b=parseInt(b[3],10),new Date(a,d,b)):null},getDayDifference:function(a,d){if(!a||!d)return 0;a=new Date(a.getFullYear(),a.getMonth(),a.getDate());d=new Date(d.getFullYear(),d.getMonth(),d.getDate());return Math.floor((a.getTime()-d.getTime())/864E5)},getMonthDifference:function(a,d){return a&&d?12*a.getFullYear()+a.getMonth()-(12*d.getFullYear()+d.getMonth()):0}})})(window.jq||window.jQuery,window.moment);
(function(c,a){a.openTooltipInstances={};var b=!1;R9.extend("Widgets",{Tooltip:function(a,b){this.element=c(a);this.element.data(this.widgetName,this);this.setOptions(b,!0)}});R9.extend("Widgets.Tooltip",{validateElement:function(a){return void 0===c(a).data(this.prototype.widgetName)},getInstance:function(a,b){return this.validateElement(a)?new R9.Widgets.Tooltip(a,b):(a=c(a).data(this.prototype.widgetName),b?a.setOptions(b):a)},removeWidget:function(a){this.validateElement(a)||this.getInstance(a).removeWidget()},
setDebug:function(a){b=a},isDebug:function(){return b}});R9.extend("Widgets.Tooltip.prototype",{element:null,widgetNamespace:"r9-tooltip",widgetBaseClass:"r9-tooltip",widgetName:"tooltip",positionTarget:"data-tooltip-position-target",isOpen:!1,options:{delay:200,fadeIn:200,fadeOut:200,edgeOffset:3,baseClass:null,content:null,positionTarget:null,position:"top",activation:"hover",showImmediately:!1,subNameSpace:"",onOpen:null,fixedPositioning:null,onClose:null,positionUpdate:!1,appendTo:"body",offsetLeft:0,
offsetAgainstEdge:!0,keepOpenOnContentHover:!1,keepOpenOnPositionTargetHover:!1,readContentOnOpen:!1,keepOpenOnRelatedTargetHover:!0,closeDelay:0,fallbackPosition:null,forceDesiredPosition:!1},_timer:null,_closeTimer:null,_originalTitle:null,_positionUpdater:null,init:function(){this._removeAllWidgetBindings();openTooltipInstances.hasOwnProperty(this.options.subNameSpace)||(openTooltipInstances[this.options.subNameSpace]=null);var a=this,b=a._getContainerElement(),f=a._getArrowElement();switch(this.options.activation){case "click":this.element.on("click."+
this.widgetName,function(b){null===openTooltipInstances[a.options.subNameSpace]&&(a.isOpen=!1);a.isOpen?a.close(b):setTimeout(a.open.bind(a,b),0)});this.options.keepOpenOnContentHover||this.bindContainerHoverEvents();this.options.showImmediately&&this.element.trigger("click."+this.widgetName);break;case "focus":this.element.on("focus."+this.widgetName,function(b){a.open(b)});this.element.on("blur."+this.widgetName,function(b){a.close(b)});this.options.showImmediately&&this.element.trigger("focus."+
this.widgetName);break;default:this.element.on("mouseenter."+this.widgetName,function(b){clearTimeout(a._closeTimer);a.open(b)}),(this.options.keepOpenOnPositionTargetHover?this._getPositionTarget():this.element).on("mouseleave."+this.widgetName,function(d){a.options.keepOpenOnRelatedTargetHover&&(c(d.relatedTarget).closest(b).length||c(d.relatedTarget).closest(f).length)||(a.options.closeDelay?a._closeTimer=setTimeout(function(){a.close(d)},a.options.closeDelay):a.close(d))}),this.options.showImmediately&&
this.element.trigger("mouseenter."+this.widgetName),this.options.keepOpenOnContentHover&&this.bindContainerHoverEvents()}return this},bindContainerHoverEvents:function(){var a=this;this._getContainerElement().on("mouseenter."+this.widgetName,function(){a.isOpen&&clearTimeout(a._closeTimer)}).on("mouseleave."+this.widgetName,function(b){a.isOpen&&!c(b.relatedTarget).closest(a._getArrowElement()).length&&(a._closeTimer=setTimeout(function(){a.close(b)},a.options.closeDelay))})},setOptions:function(a,
b){a&&(this.options=c.extend({},this.options,a));(a||b)&&this.init();return this},open:function(b){var d=this.getContent(b);if(!d||this.isOpen)return this;var f=!1;openTooltipInstances[this.options.subNameSpace]&&openTooltipInstances[this.options.subNameSpace]!==this&&(f=!0,openTooltipInstances[this.options.subNameSpace].close(b,f));var g=this._getWrapperElement(),h=this._getContainerElement(),l=this._getArrowElement();this.renderContent(d,h);this._resetElements(g,h,l);d=this._getPositionMap(g,l);
this._updateArrowElement(d,l);this._updateWrapperElement(d,g);this._updateContainerElement(d,h);if(this.options.fixedPositioning){var k=this;Object.keys(this.options.fixedPositioning).forEach(function(a){g.css(a,k.options.fixedPositioning[a])});g.css("position","fixed")}this._timer&&clearTimeout(this._timer);this._closeTimer&&clearTimeout(this._closeTimer);this.isOpen=!0;openTooltipInstances[this.options.subNameSpace]=this;if(this.options.delay){var p=this;this._timer=setTimeout(function(){p._open(g,
b,f)},this.options.delay)}else this._open(g,b,f);this._positionUpdater&&clearInterval(this._positionUpdater);c(a).on("resize",c.proxy(this._updatePosition,this));return this},renderContent:function(a,b){b.html(a)},close:function(b,e){if(!R9.Widgets.Tooltip.isDebug()){this._timer&&clearTimeout(this._timer);this._closeTimer&&clearTimeout(this._closeTimer);this._positionUpdater&&clearInterval(this._positionUpdater);c(a).off("resize",this._updatePosition);b=this._getWrapperElement();b.stop(!0,!0);this.isOpen=
!1;openTooltipInstances[this.options.subNameSpace]=null;var d=this;this.options.fadeOut&&!e?b.fadeOut(this.options.fadeOut,function(){d._close()}):(b.hide(),this._close());return this}},getContent:function(a){var b=this.element.attr("title");b&&(this._originalTitle=b,this.element.attr("title",""));return this.options.content?"function"==typeof this.options.content?this.options.content.call(this,a):this.options.content:this._originalTitle?this._originalTitle:null!=this.element.data("title")?this.element.data("title"):
this.element.text()},removeWidget:function(){this._removeAllWidgetBindings();this.element.removeData(this.widgetName);this.close();return this},_updatePosition:function(){var a=this._getWrapperElement(),b=this._getContainerElement(),c=this._getArrowElement(),g=this._getPositioning(a,c);this._updateArrowElement(g,c);"rtl"!==document.dir&&a.css({top:g.newWrapperTop+"px",left:g.newWrapperLeft+"px"});this._updateContainerElement(g,b)},_getWrapperElement:function(){var a=c("#"+this._getIdValue("-wrapper"));
a.length||(a=this._createDOMElement("-wrapper"),this.options.readContentOnOpen?a.attr("role","alert"):a.attr("role","tooltip"),c(this.options.appendTo).append(a));return a},_getContainerElement:function(){var a=c("#"+this._getIdValue("-container"));a.length||(a=this._createDOMElement("-container"),this._getWrapperElement().append(a));return a},_getArrowElement:function(){var a=c("#"+this._getIdValue("-arrow"));a.length||(a=this._createDOMElement("-arrow"),this._getWrapperElement().append(a));return a},
_createDOMElement:function(a){var b=c("\x3cdiv\x3e\x3c/div\x3e").attr("id",this._getIdValue(a));this._setStyleClasses(b,a);return b},_removeAllWidgetBindings:function(){this.element.off("click."+this.widgetName).off("focus."+this.widgetName).off("blur."+this.widgetName).off("mouseenter."+this.widgetName).off("mouseleave."+this.widgetName);return this},_getPositionTarget:function(){var a=this.options.positionTarget||this.element.attr(this.positionTarget);return a&&(a=this.options.positionTarget?c("#"+
this.options.positionTarget):c(a,this.element),0<a.length)?a:this.element},_getOffsetInformation:function(a,b,f){var d=this._getPositionTarget();this.options.fixedPositioning&&this._getContainerElement();var e=d.outerWidth(),l=d.outerHeight();a="width"===a?f.outerWidth():f.outerHeight();return{arrowSize:Math.round(a/2),elementWidth:e,elementHeight:l,wrapperWidth:b.outerWidth(),wrapperHeight:b.outerHeight(),offset:{top:Math.floor(d.offset().top-c(this.options.appendTo).offset().top),left:Math.floor(d.offset().left-
c(this.options.appendTo).offset().left)}}},_getPositionMap:function(a,b){a.attr("style","").css({top:"-1000px",left:"-5000px",display:"block"});return this._getPositioning(a,b)},_getPositioning:function(a,b,c){switch(c||this.options.position){case "bottom":return this._getBottomPositioning(a,b);case "left":return this._getLeftPositioning(a,b);case "right":return this._getRightPositioning(a,b);default:return this._getTopPositioning(a,b)}},_getCommonPositioningMap:function(){return{newArrowTop:0,newArrowLeft:0,
newWrapperTop:0,newWrapperLeft:0,wrapperClass:""}},getLeftRightOffsetAgainstEdge:function(a,b,f){if(this.options.offsetAgainstEdge){var d=c(this.options.appendTo).offset(),e=d?d.left+c(this.options.appendTo).width():c(this.options.appendTo).width(),l,k=null!=d&&a<d.left,p=!isNaN(e)&&a+f.wrapperWidth>e;k?l=Math.floor(d.left+this.options.edgeOffset):p&&(l="rtl"===document.dir?Math.floor(f.wrapperWidth-(f.offset.left+f.elementWidth)-f.elementWidth/2):Math.floor(e-f.wrapperWidth-this.options.edgeOffset));
if(k||p)b="rtl"===document.dir?f.elementWidth/2+f.arrowSize:b+a-l,a=l}return{wrapperLeft:a,arrowLeft:b}},_getTopPositioning:function(a,b){var d=this._getOffsetInformation("height",a,b),e=d.elementWidth/2,h="-top",l=d.wrapperHeight,k=d.offset.top-this.options.edgeOffset-d.arrowSize-d.wrapperHeight;if(!this.options.forceDesiredPosition&&0>=k){if(this.options.fallbackPosition&&"top"!==this.options.fallbackPosition)return this._getPositioning(a,b,this.options.fallbackPosition);h="-bottom";k=d.offset.top+
d.elementHeight+this.options.edgeOffset+d.arrowSize;l=-1*d.arrowSize}a=this.getLeftRightOffsetAgainstEdge(d.offset.left+e-d.wrapperWidth/2+this.options.offsetLeft,d.wrapperWidth/2-d.arrowSize,d);return c.extend(this._getCommonPositioningMap(),{newArrowTop:Math.round(l),newArrowLeft:Math.round(a.arrowLeft),newWrapperTop:Math.round(k),newWrapperLeft:Math.round(a.wrapperLeft),wrapperClass:h})},_getBottomPositioning:function(b,e){var d=this._getOffsetInformation("height",b,e),g=d.elementWidth/2,h="-bottom",
l=-1*d.arrowSize,k=d.offset.top+d.elementHeight+this.options.edgeOffset+d.arrowSize;if(!this.options.forceDesiredPosition&&k+d.wrapperHeight>=jq(a).scrollTop()+c(a).height()){if(this.options.fallbackPosition&&"bottom"!==this.options.fallbackPosition)return this._getPositioning(b,e,this.options.fallbackPosition);h="-top";k=d.offset.top-this.options.edgeOffset-d.arrowSize-d.wrapperHeight;l=d.wrapperHeight}b=this.getLeftRightOffsetAgainstEdge(d.offset.left+g-d.wrapperWidth/2+this.options.offsetLeft,
d.wrapperWidth/2-d.arrowSize,d);return c.extend(this._getCommonPositioningMap(),{newArrowTop:Math.round(l),newArrowLeft:Math.round(b.arrowLeft),newWrapperTop:Math.round(k),newWrapperLeft:Math.round(b.wrapperLeft),wrapperClass:h})},_getLeftPositioning:function(a,b){var d=this._getOffsetInformation("width",a,b),e=d.elementHeight/2,h=d.wrapperHeight/2,l="-left",k=d.wrapperWidth,p=d.offset.left-this.options.edgeOffset-d.arrowSize-d.wrapperWidth;if(!this.options.forceDesiredPosition&&0>=p){if(this.options.fallbackPosition&&
"left"!==this.options.fallbackPosition)return this._getPositioning(a,b,this.options.fallbackPosition);l="-right";p=d.offset.left+d.elementWidth+this.options.edgeOffset+d.arrowSize;k=-1*d.arrowSize}return c.extend(this._getCommonPositioningMap(),{newArrowTop:Math.round(h-d.arrowSize),newArrowLeft:Math.round(k),newWrapperTop:Math.round(d.offset.top+e-h),newWrapperLeft:Math.round(p),wrapperClass:l})},_getRightPositioning:function(b,e){var d=this._getOffsetInformation("border-right-width",b,e),g=d.elementHeight/
2,h=d.wrapperHeight/2,l="-right",k=-1*d.arrowSize,p="rtl"===document.dir?d.wrapperWidth-d.offset.left+d.arrowSize:d.offset.left+d.elementWidth+this.options.edgeOffset+d.arrowSize;if(!this.options.forceDesiredPosition&&p+d.wrapperWidth>=c(a).width()){if(this.options.fallbackPosition&&"right"!==this.options.fallbackPosition)return this._getPositioning(b,e,this.options.fallbackPosition);b=d.offset.left-this.options.edgeOffset-d.arrowSize-d.wrapperWidth;0<=b&&(l="-left",p=b,k=d.wrapperWidth)}return c.extend(this._getCommonPositioningMap(),
{newArrowTop:Math.round(h-d.arrowSize),newArrowLeft:Math.round(k),newWrapperTop:Math.round(d.offset.top+g-h),newWrapperLeft:Math.round(p),wrapperClass:l})},_setStyleClasses:function(a,b,c){a.attr("class","");this._addStyleClasses(a,b,c);return this},_addStyleClasses:function(a,b,c){b&&(a.addClass(this.widgetBaseClass+b),c&&a.addClass(this.widgetBaseClass+b+c),this.options.baseClass&&(a.addClass(this.options.baseClass+b),c&&a.addClass(this.options.baseClass+b+c)));return this},_updateWrapperElement:function(a,
b){this._addStyleClasses(b,"-wrapper",a.wrapperClass);b.attr("style","");"number"===typeof a.newWrapperTop&&b.css("top",a.newWrapperTop+"px");"number"===typeof a.newWrapperLeft&&("rtl"===document.dir?b.css({right:a.newWrapperLeft+"px",left:""}):b.css({left:a.newWrapperLeft+"px",right:""}));return this},_updateArrowElement:function(a,b){this._addStyleClasses(b,"-arrow",a.wrapperClass);b.css({top:a.newArrowTop+"px"});"rtl"===document.dir?b.css({right:a.newArrowLeft+"px",left:""}):b.css({left:a.newArrowLeft+
"px",right:""});return this},_updateContainerElement:function(a,b){this._addStyleClasses(b,"-container",a.wrapperClass);this.options.updateContainerOnResize&&b.css({top:a.newArrowTop+5+"px",left:a.newArrowLeft-b.width()+"px"});return this},_getIdValue:function(a){return this.widgetNamespace+this.options.subNameSpace+a},_open:function(a,b,f){var d=this;a.stop(!0,!0);var e=function(a){this.options.onOpen&&this.options.onOpen.call(this,a);this.options.positionUpdate&&(this._positionUpdater=setInterval(c.proxy(this._updatePosition,
this),1E3/60))};this.options.fadeIn&&!f?a.fadeIn(this.options.fadeIn,function(){e.call(d,b)}):(a.show(),e.call(d,b));return this},_close:function(){this._originalTitle&&(this.element.attr("title",this._originalTitle),this._originalTitle=null);this.options.onClose&&this.options.onClose.call(this,null);return this},_resetElements:function(a,b,c){this._setStyleClasses(a,"-wrapper");this._setStyleClasses(b,"-container");this._setStyleClasses(c,"-arrow");return this}})})(jq||jQuery,window);
(function(c){c.fn.tipTip=function(a){return this.each(function(){return R9.Widgets.Tooltip.getInstance(this,a)})}})(jq||jQuery);
(function(c,a){function b(){for(var a={},b=0;b<arguments.length;b++)for(var d in arguments[b])arguments[b].hasOwnProperty(d)&&(a[d]=arguments[b][d]);return a}function d(a){var b=a.containerElement||document.body,d=a.theme?"theme-"+a.theme:"theme-default",c=b.querySelector(":scope \x3e .r9-toast-container."+d);c||(c=document.createElement("div"),c.className="r9-toast-container "+d+" "+a.extraCssClass,b.appendChild(c));return c}function e(a){a.element.addEventListener("mouseenter",function(){k.hoverOnToast=
a});a.element.addEventListener("mouseleave",function(){setTimeout(function(){var b,d,c,e=k.hoverOnToast?k.hoverOnToast.id:-1;for(b in k)d=k[b],(c=b<=a.id&&d.isOld&&d.queue===a.queue)&&(b>e?g(d):f(d))},a.options.reasonableTimeout);delete k.hoverOnToast})}function f(a){a.element.classList.remove("is-visible")}function g(a){f(a);setTimeout(function(){a.element.classList.remove("is-solid")},a.options.reasonableTimeout);setTimeout(function(){try{a.element.parentNode.removeChild(a.element)}catch(n){}delete k[a.id]},
2*a.options.reasonableTimeout)}var h={auto:!0,button:!0,delay:6E3,escaped:!1,icon:"",reasonableTimeout:400,theme:"",extraCssClass:""},l=0,k={};c.Widgets=c.Widgets||{};c.Widgets.Toaster={};c.Widgets.Toaster.addToast=function(a,n){var p=d(n),r={element:document.createElement("div"),id:l,options:b(h,n),queue:n.theme||"default",remove:function(){g(this)}};k[l]=r;l+=1;r.element.classList.add("r9-toast-bubble");r.element.classList.add("is-solid");c.config.getBoolean("ui.hotelbookurgency.bdcStyle",!1)?r.element.classList.add("bdcStyle"):
c.config.getBoolean("ui.hotelbookurgency.bdcStackedStyle",!1)&&r.element.classList.add("bdcStackedStyle");n=document.createElement("div");n.classList.add("r9-toast-message");r.options.escaped?n.innerHTML=a:n.appendChild(document.createTextNode(a));r.element.appendChild(n);r.options.icon&&(r.element.classList.add("has-icon"),r.element.classList.add("icon-"+r.options.icon));r.options.button&&(r.closeButton=document.createElement("div"),r.closeButton.classList.add("r9-toast-close"),r.closeButton.onclick=
function(){g(r)},r.element.appendChild(r.closeButton));r.options.auto&&(r.timer=setTimeout(function(){k.hoverOnToast&&r.id<=k.hoverOnToast.id&&r.queue===k.hoverOnToast.queue?(r.isOld=!0,r.id<k.hoverOnToast.id&&f(r)):g(r)},r.options.delay),e(r));p.appendChild(r.element);setTimeout(function(){r.element.classList.add("is-visible")},1);return r};c.Widgets.Toaster.removeAllToasts=function(){for(var a in k)g(k[a])};c.Widgets.Toaster.removeQueueToasts=function(a){var b,d;for(b in k)d=k[b],d.queue===a&&g(d)}})(R9,
jq);(function(c,a){try{c.querySelector(":scope body")}catch(b){["querySelector","querySelectorAll"].forEach(function(b){var d=a[b];a[b]=function(a){if(/(^|,)\s*:scope/.test(a)){var e=this.id;this.id="ID_"+Date.now();a=a.replace(/((^|,)\s*):scope/g,"$1#"+this.id);a=c[b](a);this.id=e;return a}return d.call(this,a)}})}})(window.document,Element.prototype);
(function(){var c=new Date;c.setFullYear(c.getFullYear()+1);jq.datepicker.setDefaults({altFormat:"D M d yy",closeText:"Close",currentText:"Current",dateFormat:"mm/dd/yy",dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesMin:"SMTWTFS".split(""),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),firstDay:0,maxDate:c,minDate:new Date,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
prevText:"Prev",nextText:"Next",showAnim:"",showMonthAfterYear:!1})})();jq.r9datepicker={parseDate:function(c){return jq.datepicker.parseDate("mm/dd/yy",c)}};
jq.fn.r9datepicker=function(c){c.allowEmpty=!1===c.allowEmpty?!1:!0;var a=c.defaultDate,b=c.dateFormat||"mm/dd/yy";a?(this.val(jq.datepicker.formatDate(b,a,c)),jq(c.altField).text(jq.datepicker.formatDate(c.altFormat||"D M d yy",a,c))):""===this.val()&&jq(c.altField).text("mm/dd/yyyy");var d=c.beforeShow,e=c.onClose,f=c.onSelect,g=this;c.beforeShow=function(a,b){jq(g).trigger("sbopen",[b]);d&&d(b,a)};c.onClose=function(a,b){jq(g).trigger("sbclose",[b]);e&&e(b,a)};c.onSelect=function(a,b){jq(g).trigger("sbset",
[b]);f&&f(b,a)};return this.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"}).datepicker(c)};R9=R9||{};
R9.dp=function(){function c(a,c){return(b(c)-b(a))/864E5}function a(a,b){var d=a[b];delete a[b];return d}function b(a){return Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())}return{doublePicker:function(b,e){var d=b.defaultDate,g=e.defaultDate,h=jq(b.altField),l=jq(e.altField),k=a(b,"onSelect")||jq.noop,p=a(e,"onSelect")||jq.noop,n=jq(a(b,"selector")),q=jq(a(e,"selector")),r=b.resetAfterDays||30,t=b.minRangeDays||0,u=e.numberOfMonths||2,w=void 0==b.pop2?!0:b.pop2;n.r9datepicker(jq.extend({beforeShowDay:function(a){return[!0,
a&&g&&a.getTime()==g.getTime()?"ui-datepicker-marked-day":""]},numberOfMonths:b.numberOfMonths||2,onSelect:function(a,b){function e(){q.focus()}d=n.datepicker("getDate");var f=g&&c(d,g);if(!g||f>r||f<t)q.datepicker("setDate",null).datepicker("option","defaultDate",d),l.text("mm/dd/yyyy");k.call(this,a,b);w&&(!q.is(":visible")||"hidden"==q.css("visibility")||q.is("[disabled]")||q.is("[readonly]")||window.setTimeout(e,50))}},b));q.r9datepicker(jq.extend({beforeShowDay:function(a){return[!0,d&&a&&d.getTime()==
a.getTime()?"ui-datepicker-marked-day":""]},numberOfMonths:u,onSelect:function(a,b){g=q.datepicker("getDate");var e=d&&c(d,g);if(!d||e<t)n.datepicker("setDate",null).datepicker("option","defaultDate",g),h.text("mm/dd/yyyy");p.call(this,a,b);q.r9datepicker("hide")}},e))}}}();
R9.extend("Social",{deleteControlCookie:function(){document.cookie="ssocontrol\x3d; expires\x3dThu, 01 Jan 1970 00:00:00 GMT"},doNotLoadThirdPartyScripts:function(){return null!=document.location.href.match("/hotelreservation")||null!=document.location.href.match("/flightreservation")||null!=document.location.href.match("/carreservation")||null!=document.location.href.match("/bookings/")||null!=document.location.href.match("/trips/")||null!=document.location.href.match("/trips-preferences")?!0:!1},
doNotLoadSocialResources:function(){return R9.config&&R9.globals&&R9.globals.uiconfig?R9.config.getBoolean("ui.social.forceOff",!1):!1}});
R9.extend("Social.FB",{logger:null,getLogger:function(){return this.logger=this.logger||new R9.logger},apiLoadPromise:null,ensureAPILoaded:function(){return R9.Social.doNotLoadSocialResources()?jq.Deferred().reject("Social resource loading disabled"):null!==this.apiLoadPromise&&"pending"===this.apiLoadPromise.state()?this.apiLoadPromise:window.FB?jq.Deferred().resolve():this.apiLoadPromise=this.loadSDK()},loadSDK:function(){var c=this,a=function(a){!R9.globals.adBlock&&R9.config.getBoolean("ui.social.debug",
!1)&&c.getLogger().warn(a);return jq.Deferred().reject(a)};return jq.getScript("//connect.facebook.net/en_US/sdk.js").then(function(){window.FB.init({appId:R9.globals.facebookAppId,cookie:!1,status:!1,xfbml:!1,version:"v3.2"});if(!c.isLoginAvailable())return a("FB SDK failed to initialize")},a.bind(this,"FB SDK failed to load"))},isLoginAvailable:function(){return window.FB&&"function"===typeof window.FB.login},login:function(c){c=jq.extend({error:jq.noop,perms:R9.config.getString("ui.facebook.login.permissions",
""),success:jq.noop},c);this.isLoginAvailable()?(jq.get("/vs/fd/topstrip/facebooklogin?action\x3dvs"),FB.login(function(a){a.authResponse?(jq.get("/vs/fd/topstrip/facebooklogin/accept?action\x3dvs"),c.success(a.authResponse.accessToken,a.authResponse.userID)):(jq.get("/vs/fd/topstrip/facebooklogin/reject?action\x3dvs"),c.error("FB login failed due to invalid authResponse"))},{scope:c.perms,auth_type:"rerequest"})):c.error("FB login attempted while unavailable");return!1},link:function(c,a){return null!=
FB.getAuthResponse()?(FB.logout(function(){AjaxReg.ui.fbLinkWarning(c,a)}),!1):R9.Social.FB.login({success:function(a,d){AjaxReg.facebook.link(c,a,d)},perms:a||""})},logout:function(){window.FB&&window.FB.logout()},verifyLoginStatus:function(){R9.Social.doNotLoadThirdPartyScripts()||(-1!==document.cookie.indexOf("ssocontrol\x3dfbstatus")?this.ensureAPILoaded().then(function(){FB.getLoginStatus(function(c){null==c.authResponse&&R9.Analytics.api.trackEvent("facebook/status/unknown")})}):-1!==document.cookie.indexOf("ssocontrol\x3dfblogout")&&
this.ensureAPILoaded().then(function(){FB.getLoginStatus(function(c){c.authResponse?FB.logout(function(a){R9.Social.deleteControlCookie()}):R9.Social.deleteControlCookie()})}))}});
R9.extend("Social.Google",{logger:null,getLogger:function(){return this.logger=this.logger||new R9.logger},apiLoadPromise:null,ensureAPILoaded:function(){var c=this.getLogger();if(R9.Social.doNotLoadSocialResources())return jq.Deferred().reject("Social resource loading disabled");if(null!==this.apiLoadPromise&&"pending"===this.apiLoadPromise.state())return this.apiLoadPromise;if(window.gapi&&window.gapi.auth2)return jq.Deferred().resolve();var a=this.apiLoadPromise=jq.Deferred();window.gapi&&"function"===
typeof window.gapi.load?this.loadAuth2(this.apiLoadPromise):jq.getScript("https://apis.google.com/js/platform.js").then(this.loadAuth2.bind(this,this.apiLoadPromise),function(){!R9.globals.adBlock&&R9.config.getBoolean("ui.social.debug",!1)&&c.warn("gapi failed to load");a.reject("gapi failed to load")});return this.apiLoadPromise},loadAuth2:function(c){var a=this.getLogger(),b=function(b){!R9.globals.adBlock&&R9.config.getBoolean("ui.social.debug",!1)&&a.warn(b);return c.reject(b)};window.gapi&&
window.gapi.load?window.gapi.load("auth2",{callback:function(){window.gapi.auth2.init({client_id:R9.globals.googleClientId,scope:"profile email"}).then(c.resolve.bind(this,null),function(a){b("gapi.auth2 failed to initialize: "+a.error)})},onerror:b.bind(this,"gapi.auth2 failed to load")}):b("gapi loader not available")},isLoginAvailable:function(){return window.gapi&&window.gapi.auth2},login:function(c){var a=this.getLogger();if(this.isLoginAvailable()){var b=window.gapi.auth2.getAuthInstance();
b.signIn().then(function(d){var e=d.getAuthResponse();e&&e.id_token?(d=b.currentUser.get().getBasicProfile().getEmail(),R9.Social.WebCredentials.tryStoreGoogleLoginInWebCredentials(d),R9.Social.WebCredentials.postGoogleLogin(e).then(function(){c(e)},function(b){a.error("GoogleAuth: post login failed",b);c(e)})):(a.error("GoogleAuth: invalid auth response"),c(e))})}else a.error("GoogleAuth: login unavailable");return!1},logout:function(c){gapi.auth2.getAuthInstance().signOut()},link:function(c){gapi.auth2.getAuthInstance().signIn().then(function(a){a=
a.getAuthResponse();AjaxReg.google.link(c,a.id_token)})}});
R9.extend("Social.Google.Gmail",{ensureApiLoaded:function(){var c=jq.Deferred();"undefined"===typeof gapi||"undefined"===typeof gapi.auth?jq.getScript("https://apis.google.com/js/client.js",function(){gapi.load("auth",function(){gapi.auth.init(function(){c.resolve()})})}):c.resolve();return c.promise()},authorize:function(c,a){"function"!==typeof c&&(c=function(){});"function"!==typeof a&&(a=function(){});gapi.auth.authorize({client_id:R9.globals.gmailIScraperClientId,scope:"https://www.googleapis.com/auth/gmail.readonly profile email",
immediate:!1,access_type:"offline",approval_prompt:"force",response_type:"code",redirect_uri:"postmessage"},function(b){function d(a){var b=null;if(null!=a)try{b=jq.parseJSON(a)}catch(g){}return b}"undefined"!==typeof b.error?a("G",b.error):jq.ajax({type:"POST",url:"/k/run/inbox/requests/gmail/subscription",headers:{"X-CSRF":R9.globals.formtoken},data:"code\x3d"+b.code}).done(function(b){jq.ajax({type:"POST",dataType:"json",contentType:"application/json",url:"/inbox/gmail/subscribe",headers:{"X-CSRF":R9.globals.formtoken},
data:JSON.stringify(b)}).done(function(a){c(a)}).fail(function(b){var c=d(b.responseText),e=null;null!=c&&null!=c.errorCode&&(e=c.errorCode);a("I",e,null,b.responseText,b.status)})}).fail(function(b){var c=d(b.responseText),e=null,h=null;null!=c&&null!=c.responseError&&null!=c.responseError.error&&jq.isArray(c.responseError.error)&&0<c.responseError.error.length&&(e=c.responseError.error[0].errorCode,h=c.responseError.error[0].errorMessage);a("K",e,h,b.responseText,b.status)})});return!1},unauthorize:function(c,
a,b){"function"!==typeof a&&(a=function(){});"function"!==typeof b&&(b=function(){});jq.ajax({type:"POST",dataType:"json",url:"/k/run/inbox/requests/gmail/unsubscription",headers:{"X-CSRF":R9.globals.formtoken},data:"email\x3d"+c}).done(function(d){jq.ajax({type:"POST",dataType:"json",contentType:"application/json",url:"/inbox/gmail/unsubscribe",headers:{"X-CSRF":R9.globals.formtoken},data:JSON.stringify(d)}).done(function(b){a(b)}).fail(function(a){b(a.responseText,a.status)})}).fail(function(a){b(a.responseText,
a.status)});return!1}});
R9.extend("Social.WebCredentials",{isWebCredentialsSupported:function(){return R9.globals.loginEnabled&&R9.globals.webCredentialsEnabled&&"https:"===document.location.protocol&&window.self===window.top&&"undefined"!==typeof navigator.credentials&&"function"===typeof navigator.credentials.store&&window.PasswordCredential?!0:!1},postPasswordLoginForm:function(c){var a=jq.Deferred();if(c){if("undefined"!==typeof c.password){var b=new URLSearchParams;b.append("username",c.id);b.append("passwd",c.password);
b.append("sticky","1");c=fetch("/k/run/auth/login",{method:"POST",credentials:"include",body:b,headers:new Headers({"X-CSRF":R9.globals.formtoken})})}else c.passwordName="passwd",c.additionalData=new URLSearchParams,c.additionalData.append("sticky",1),c=fetch("/k/run/auth/login",{method:"POST",credentials:c,headers:new Headers({"X-CSRF":R9.globals.formtoken})});c.then(function(b){b&&200==b.status?b.json().then(function(b){0==b.status?(a.resolve(!0),R9.Analytics.api.trackEvent("webcredentials/password/success")):
a.reject()}):a.reject()}).catch(a.reject)}else a.reject();return a.promise()},postGoogleLogin:function(c){var a=jq.Deferred();c&&c.id_token||a.reject();jq.ajax({type:"POST",url:"/k/run/googleauth/login",data:{confcode:"",confirm:1,idToken:c.id_token,sticky:!0,formtoken:R9.globals.formtoken}}).then(function(b){0===b.status?(a.resolve(),R9.Analytics.api.trackEvent("webcredentials/federated/success")):a.reject({status:b.status,message:b.message})},function(){a.reject()});return a.promise()},tryGoogleLogin:function(c){var a=
window.gapi.auth2.getAuthInstance();if(a.isSignedIn.get()){var b=a.currentUser.get();if(b.getBasicProfile().getEmail()===c.id)return R9.Social.WebCredentials.postGoogleLogin(b.getAuthResponse())}var d=jq.Deferred();a.signIn({login_hint:c.id||""}).then(function(a){R9.Social.WebCredentials.postGoogleLogin(a.getAuthResponse()).then(d.resolve,d.reject)});return d.promise()},handleCredential:function(c){var a=jq.Deferred();c&&"password"===c.type?R9.Social.WebCredentials.postPasswordLoginForm(c).then(a.resolve,
a.reject):c&&"federated"===c.type?R9.Social.Google.ensureAPILoaded().then(this.tryGoogleLogin.bind(this,c)).then(a.resolve,a.reject):a.reject("Web credentials unavailable");return a.promise()},tryAutoSignIn:function(){if(!R9.Social.WebCredentials.isWebCredentialsSupported()||R9.globals.isSeo&&R9.globals.disableSeoAutoSignIn)return jq.Deferred().reject("Web credentials unsupported or disabled");var c=jq.Deferred(),a=R9.Social.WebCredentials.getCredentials();if(a){var b={password:!0};"function"!==typeof a.preventSilentAccess?
b.unmediated=!0:b.mediation="silent";a.get(b).then(R9.Social.WebCredentials.handleCredential).then(c.resolve).catch(c.reject)}else c.reject("Web credentials unavailable");return c.promise()},trySignIn:function(c){var a=jq.Deferred(),b=function(b){c?c():a.reject(b)};if(!R9.Social.WebCredentials.isWebCredentialsSupported())return b("Web Credentials not supported"),a;R9.Social.Google.ensureAPILoaded().then(function(){var d=R9.Social.WebCredentials.getCredentials();d||b("Credential Manager not available");
return d.get({password:!0,federated:{providers:["https://accounts.google.com"]}}).then(R9.Social.WebCredentials.handleCredential).then(a.resolve).catch(b)}.bind(this),b);return a},tryStorePasswordLoginInWebCredentials:function(c,a){if(R9.Social.WebCredentials.isWebCredentialsSupported()){var b=R9.Social.WebCredentials.getCredentials();b&&c&&a&&(c=new PasswordCredential({id:c,password:a}),b.store(c))}},tryStoreGoogleLoginInWebCredentials:function(c){if(R9.Social.WebCredentials.isWebCredentialsSupported()&&
window.FederatedCredential){var a=R9.Social.WebCredentials.getCredentials();if(a)return c=new FederatedCredential({id:c,provider:"https://accounts.google.com"}),a.store(c),!0}return!1},requireUserMediation:function(){if(R9.Social.WebCredentials.isWebCredentialsSupported()){var c=R9.Social.WebCredentials.getCredentials();c&&("function"!==typeof c.preventSilentAccess?c.requireUserMediation():c.preventSilentAccess())}},getCredentials:function(){try{return navigator.credentials}catch(c){return null}}});
(function(c){function a(a,b,d){a&&l.push(a);h||(h=!0,a=b?R9.Maps.Google.url+"\x26channel\x3d"+b:R9.Maps.Google.url,d&&(a+="\x26version\x3d"+d),R9.Common.Communication.ScriptLoader.load(a,function(){R9.Maps.Google.CustomMarker||e(window.google);h=!1;f=!0;l.forEach(function(a){a&&a()});l=[]},!0))}function b(a,b){function d(){if(0<a.length){var c=a.pop();R9.Common.Communication.ScriptLoader.load(c.name,d,c.callbackInQuery||!1)}else b&&b()}a=a.reverse();d()}function d(a,b,d){this.latLng=a;this.options=
d||{};this.options.mapPadding=c.extend(g,d.mapPadding);this.setMap(b)}function e(a){a&&a.maps&&(d.prototype=Object.create(a.maps.OverlayView.prototype),d.prototype.onAdd=function(){var a=this.div;a||(a=this.div=document.createElement("div"),a.className=this.options.cssClass||"custom-marker",a.id=this.options.id||"",this.options.content&&""===a.innerHTML?c(a).html(this.options.content):this.options.label&&c(a).text(this.options.label),a.addEventListener("click",function(a){a.stopPropagation();c("body").trigger("click")}),
"dblclick contextmenu wheel mousedown touchstart pointerdown".split(" ").forEach(function(b){a.addEventListener(b,function(a){a.stopPropagation()})}),this.getPanes().floatPane.appendChild(a));this.options.afterAddCallback&&this.options.afterAddCallback()},d.prototype.draw=function(){this.reposition();this.options.afterDrawCallback&&this.options.afterDrawCallback()},d.prototype.reposition=function(){var a=this.getProjection();if(a){var b=a.fromLatLngToDivPixel(this.latLng),d=a.fromLatLngToContainerPixel(this.latLng),
a=c(this.div),e=b.x+(this.options.xOffset||0),f=b.y+(this.options.yOffset||0);if(b&&d){var b=d.y-a.height()+(this.options.yOffset||0),g=d.x-a.width()/2+(this.options.xOffset||0),d=d.x+a.width()/2+(this.options.xOffset||0);b<this.options.mapPadding.top?a.addClass("open-down"):a.removeClass("open-down");g<this.options.mapPadding.left?(a.removeClass("open-left"),a.addClass("open-right")):d>c(this.map.getDiv()).width()-this.options.mapPadding.right?(a.removeClass("open-right"),a.addClass("open-left")):
a.removeClass("open-left open-right")}this.div&&(this.div.style.left=e+"px",this.div.style.top=f+"px")}},d.prototype.remove=function(){!this.options.preserveElementOnRemove&&this.div&&this.destroy()},d.prototype.destroy=function(){this.div&&this.div.parentNode&&this.div.parentNode.removeChild(this.div);this.div=null},d.prototype.getPosition=function(){return this.latLng},d.prototype.setActive=function(a){c(this.div).toggleClass("active",a)},d.prototype.setViewed=function(a){c(this.div).toggleClass("viewed",
a)},d.prototype.setLabel=function(a){c(this.div).text(a)},d.prototype.setZIndex=function(a){c(this.div).css("z-index",a)},d.prototype.setSaved=function(a){this.options.saved=a;c(this.div).toggleClass("saved",a)},d.prototype.setAfterDrawCallback=function(a){this.options.afterDrawCallback=a},d.prototype.getElement=function(){return c(this.div)},d.prototype.addCssClass=function(a){this.options.cssClass+=" "+a},R9.extend("Maps.Google",{CustomMarker:d}))}var f=!1,g={top:0,left:0,right:0};R9.extend("Maps.Google",
{channel:"",url:"/gmap?libraries\x3dplaces,geometry\x26description\x3dR9.Maps.Google",load:function(d,c,g){var h=this;if(!c)throw"Must specify a channel when loading google maps.";if(window.google&&window.google.maps)R9.Maps.Google.CustomMarker||e(window.google),f=!0,d&&d();else if(f)R9.Maps.Google.CustomMarker||e(window.google),d&&d();else if(R9.config.getBoolean("ui.google.maps.loading.queue",!0))h.channel=c,a(d,c,g);else{var l=[{name:c?R9.Maps.Google.url+"\x26channel\x3d"+c:R9.Maps.Google.url,
callbackInQuery:!0}];g&&(l.name+="\x26version\x3d"+g);b(l,function(){h.channel=c;e(window.google);f=!0;d&&d()})}},isLoaded:function(){return f}});var h=!1,l=[]})(jq||jQuery);
(function(c){function a(){var a=c('\x3cdiv class\x3d"scroll-bar"\x3e\x3cdiv class\x3d"gutter"\x3e\x3c/div\x3e\x3cdiv class\x3d"handle"\x3e\x3c/div\x3e\x3c/div\x3e').insertAfter(this);this.data("scrollbar",a);a.find(".handle").height(this[0].offsetHeight/this[0].scrollHeight*100+"%")}function b(){var a=this.data("scrollbar"),b=a.find(".handle");a.find(".gutter");var f=this;this.on("mousewheel DOMMouseScroll",function(a){var b=a.originalEvent,b=this.scrollTop+10*(0>(b.wheelDelta||-b.detail)?1:-1);e.bind(c(this))(b);
a.preventDefault()});a.on("click",".gutter",function(a){a=a.pageY||a.clientY;e.bind(f)(d.bind(f)(a),!0)});b.on("mousedown",function(){window.getSelection&&window.getSelection().removeAllRanges();c(document).on("mousemove.scrollhandle",function(a){a=a.pageY||a.clientY;e.bind(f)(d.bind(f)(a))});c(document).on("mouseup.scrollhandle",function(){c(document).off(".scrollhandle")})})}function d(a){var b=this.data("scrollbar"),d=b.find(".handle"),b=b.find(".gutter");a=a-b.offset().top-d.outerHeight()/2;var c=
this[0].scrollHeight-this[0].offsetHeight,d=b.height()-d.outerHeight();return c/d*a}function e(a,b){b?this.animate({scrollTop:a},{duration:100,step:f.bind(this),complete:f.bind(this)}):(this[0].scrollTop=a,f.bind(this)())}function f(){var a=this.data("scrollbar");if(a){var b=a.find(".handle"),a=a.find(".gutter"),d=this[0].scrollTop,c=this[0].scrollHeight-this[0].offsetHeight,a=(a.height()-b.outerHeight())/c*d+b.outerHeight()/2-b.outerHeight()/2+5;b.css("top",a)}}function g(a){a&&"undefined"!==typeof a.scrollTo&&
e.bind(this)(a.scrollTo);a&&a.reset&&e.bind(this)(0)}c.fn.scroller=function(d){if(!this.data("scrollbar")){if(this[0].offsetHeight>=this[0].scrollHeight)return;a.bind(this)();b.bind(this)()}g.bind(this)(d);return this}})(jq||jQuery);
(function(c){R9.extend("Widgets",{Slider:function(a,b){this.elementNode=a;this.element=c(this.elementNode);if(!this.validateElement())return this;this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.Slider.prototype",{elementNode:null,element:null,elementWidth:0,elementPositionLeft:0,activeRange:null,handles:[],activeHandle:null,activeHandleIndex:null,startValues:null,timelineDepPoints:null,timelineDepTimes:null,timelineArrTimes:null,timelineHours:null,timelinePrices:null,timelineLegSignatures:null,
timelineElements:null,timelineLabels:null,mouseMoveDelegate:c.noop,mouseUpDelegate:c.noop,options:{start:c.noop,stop:c.noop,slide:c.noop,min:0,max:100,step:1,values:[],range:!0,logarithmic:!1,snapToValue:!1,timeValueAmount:0,exponent:-1,cutoff:-1,totalRange:-1,totalStepAmount:-1,equalStepAmount:-1,cutoffPercentage:-1,equalStepRange:-1,expStepAmount:-1,useCustomDistribution:!1},init:function(){var a=this.element.data("r9RangeSlider");null!=a&&(this.options.values=a.getValues());this.element.data("r9RangeSlider",
this);var b=this;this.handles=this.element.children(".r9-rangeSlider-handle");this.activeRange=this.element.find(".r9-rangeSlider-activeRange");this.handles.off(".r9RangeSlider").on("mousedown.r9RangeSlider touchstart.r9RangeSlider",function(a){b.mouseDown(a);a.preventDefault();a.stopPropagation(!0)});a=this.options.values;if(!a||1>a.length)a=this.options.range?[this.options.min,this.options.max]:[this.options.min];this.determineSetValues(a);setTimeout(function(){b.drawActiveRange()},60)},validateElement:function(){return 0<
this.element.length&&this.element.hasClass("r9-rangeSlider")},setStartValues:function(){this.startValues=[];for(var a=0;a<this.options.values.length;a++)this.startValues[a]=this.options.values[a]},setupActiveHandle:function(a){this.activeHandle=a;this.activeHandleIndex=null;this.elementWidth=this.element.outerWidth();this.elementPositionLeft=this.element.offset().left;for(a=0;a<this.handles.length;a++)this.activeHandle==this.handles[a]&&(this.activeHandleIndex=a);c(this.activeHandle).addClass("r9-rangeSlider-handle-active")},
mouseDown:function(a){this.setupActiveHandle(a.target);var b=this;this.mouseMoveDelegate=function(a){b.mouseMove(a)};this.mouseUpDelegate=function(a){a.stopPropagation(!0);b.mouseUp(a)};c(document).bind("mousemove.r9RangeSlider touchmove.r9RangeSlider",this.mouseMoveDelegate).bind("mouseup.r9RangeSlider touchend.r9RangeSlider",this.mouseUpDelegate);this.setStartValues();this.options.start(a,this.options.values)},mouseUp:function(a){c(this.activeHandle).removeClass("r9-rangeSlider-handle-active");
this.activeHandleIndex=this.activeHandle=null;c(document).unbind("mousemove.r9RangeSlider touchmove.r9RangeSlider",this.mouseMoveDelegate).unbind("mouseup.r9RangeSlider touchend.r9RangeSlider",this.mouseUpDelegate);var b=!1;if(this.startValues)for(var d=0;d<this.options.values.length;d++){if(this.options.values[d]!=this.startValues[d]){b=!0;break}}else b=!0;this.options.stop(a,this.options.values,b)},setActiveHandleValue:function(a){var b=100*this.positionForValue(a);c(this.activeHandle).css("left",
b+"%").css("z-index","3");for(b=0;b<this.handles.length;b++)this.handles[b]==this.activeHandle&&(this.options.values[b]=a,this.setHandleAttribute("valuenow",a,b),1<this.handles.length&&(0===b?this.setHandleAttribute("valuemin",a,1):this.setHandleAttribute("valuemax",a,0)));this.drawActiveRange()},setHandleAttribute:function(a,b,d){void 0!==d?c(this.handles[d]).attr("aria-"+a,b):c(this.handles).attr("aria-"+a,b);R9.globals.testMode&&(void 0!==d?c(this.handles[d]).attr("data-test-sliderhandle-"+a,b):
c(this.handles).attr("data-test-sliderhandle-"+a,b))},mouseMove:function(a){a.preventDefault();a.stopPropagation();var b=a.originalEvent;b.touches&&0<b.touches.length?a.pageX=b.touches[0].pageX:b.changedTouches&&0<b.changedTouches.length&&(a.pageX=b.changedTouches[0].pageX);this.setActiveHandleValue(this.valueForPosition(Math.min(this.elementWidth,Math.max(0,a.pageX-this.elementPositionLeft))/this.elementWidth,this.activeHandleIndex));this.options.slide(a,this.options.values)},getValues:function(){return this.options.values.slice(0)},
getValue:function(){return 0<this.options.values.length?this.options.values[0]:0},setValues:function(a){var b=this;this.options.values=[];for(var d=0;d<a.length;d++){var e=this.trimAlignValue(a[d]),f=100*this.positionForValue(e),g=2;1<a.length&&(0==d&&90<=f||d==a.length-1&&10>=f)&&(g=3);this.options.values.push(e);c(this.handles[d]).css("left",f+"%").css("z-index",g)}setTimeout(function(){b.drawActiveRange()},60);R9.config.getBoolean("ui.slider.nonBlockingDrawActiveRange",!0)?setTimeout(this.drawActiveRange.bind(this),
1):this.drawActiveRange();this.options.slide(null,this.options.values)},determineSetValues:function(a){if(R9.config.getBoolean("ui.slider.safeSetValues",!0))return this.safeSetValues(a);this.setValues(a);return null},safeSetValues:function(a){try{return this.setValues(a),null}catch(b){return b}},errorSetValues:function(a){R9.Widgets.Slider.singleSetValuesError||(R9.Widgets.Slider.singleSetValuesError=1,R9.config.getBoolean("ui.slider.logRollbar",!1)&&window.Rollbar&&Rollbar.error?Rollbar.error("Slider setValues failed",
{error:a&&a.message?a.message:"(unknown error)",winTop:window===window.top,winParent:window.top===window.parent}):R9.config.getBoolean("ui.slider.logVs",!0)&&R9.Analytics.api.trackEvent({category:"slider",action:"error",label:"setvalues",value:(window===window.top)+"-"+(window.top===window.parent)}))},setCustomDistribution:function(a){this.options.exponent=a.exponent;this.options.cutoff=a.cutoff;this.options.totalRange=this.options.max-this.options.min;this.options.totalStepAmount=a.ranges.length;
this.options.cutoffPercentage=a.cutoffPercentage;this.options.equalStepAmount=this.options.cutoffPercentage*this.options.totalStepAmount;this.options.equalStepRange=this.options.cutoff-this.options.min;this.options.expStepAmount=this.options.totalStepAmount-this.options.equalStepAmount;this.options.useCustomDistribution=!0},resetCustomDistribution:function(){this.options.exponent=-1;this.options.cutoff=-1;this.options.totalRange=this.options.max-this.options.min;this.options.totalStepAmount=-1;this.options.equalStepAmount=
-1;this.options.cutoffPercentage=-1;this.options.equalStepRange=-1;this.options.expStepAmount=-1;this.options.useCustomDistribution=!1},setTimelinePoints:function(a,b,d,c,f,g,h){this.timelineDepPoints=a;this.timelineDepTimes=b;this.timelineArrTimes=d;this.timelineHours=c;this.timelinePrices=f;this.timelineLegSignatures=g;h&&this.clearTimelineValues();this.setTimelineValues()},clearTimelineValues:function(){this.element.find(".timelineValue").remove();this.clearTimelineHours()},setTimelineValues:function(){this.timelineElements=
[];for(var a=0;a<this.timelineDepPoints.length;a++)this.setTimelinePoint(a);this.setTimelineHours()},setTimelinePoint:function(a){var b=c("\x3cspan /\x3e").addClass("timelineValue"),d=c('\x3cdiv class\x3d"times"  /\x3e').text(this.timelineDepTimes[a]+" - "+this.timelineArrTimes[a]),e=c('\x3cdiv class\x3d"priceValue" /\x3e').text(this.timelinePrices[a]),f=c("\x3cdiv /\x3e");b.data("legSig",this.timelineLegSignatures[a]);f.append(d);f.append(e);a=100*this.positionForValue(this.timelineDepPoints[a]);
this.element.append(b);b.css("left",a+"%");b.off("mouseover.r9Timeline").on("mouseover.r9Timeline",function(){c(this).addClass("highlight")});b.off("mouseout.r9Timeline").on("mouseout.r9Timeline",function(){c(this).removeClass("highlight")});this.markFilteredOutTimeLinePoint(b);b.toolTip({delay:0,showImmediately:!1,extraClass:"timelinePoint",content:""+f.html()});this.timelineElements.push(b)},markFilteredOutTimeLinePoint:function(a){if(a&&0!==a.length){var b=this.getPositionLeftValue(this.handles[0],
0),d=this.getPositionLeftValue(this.handles[1],100),c=this.getPositionLeftValue(a,100);b>c||d<c?a.addClass("filteredOut"):a.removeClass("filteredOut")}},markFilteredOutTimeLinePoints:function(){var a=this;this.timelineElements&&0!==this.timelineElements.length&&$.each(this.timelineElements,function(b,d){a.markFilteredOutTimeLinePoint(d)})},clearTimelineHours:function(){this.element.find(".timelineHour").remove()},setTimelineHours:function(){for(var a=0,b=0;24>b;b++){var d=this.options.min+36E5*b;
if(d>this.options.min&&d<this.options.max){var e=c("\x3cspan /\x3e").addClass("timelineHour").text(this.timelineHours[a]);this.element.append(e);d=100*this.positionForValue(d);e.css("left",d+"%");a++}}},getPositionLeftValue:function(a,b){return a?parseFloat($(a)[0].style.left):b},formatHourLabel:function(a){var b=new Date(a);a=b.getUTCHours();10>a&&(a="0"+a);b=b.getUTCMinutes();10>b&&(b="0"+b);return a+":"+b},triggerStop:function(){this.options.stop({},this.options.values,!0)},setValue:function(a){var b=
this.options.values.slice(0);b[0]=a;this.determineSetValues(b)},getOption:function(a){return this.options[a]},setOption:function(a,b){if("object"==typeof a)for(a in b=a,b)b.hasOwnProperty(a)&&(this.options[a]=b[a]);else this.options[a]=b;this.determineSetValues(this.options.values)},positionForValue:function(a){if(this.options.logarithmic){var b=Math.log(this.options.min);a=(Math.log(a)-b)/((Math.log(this.options.max)-b)/1)}else a=this.options.useCustomDistribution?a>this.options.cutoff?Math.log(a-
this.options.cutoff)/this.options.exponent/this.options.expStepAmount*(1-this.options.cutoffPercentage)+this.options.cutoffPercentage:(a-this.options.min)/this.options.equalStepRange*this.options.cutoffPercentage:(a-this.options.min)/(this.options.max-this.options.min);return a.toFixed(5)},valueForPosition:function(a,b){if(this.options.logarithmic&&1!==a){var d=Math.log(this.options.min);a=Math.exp(d+(Math.log(this.options.max)-d)*a)}else a=this.options.useCustomDistribution&&1!==a&&0<a?a>this.options.cutoffPercentage?
this.options.cutoff+Math.exp((a*this.options.totalStepAmount-this.options.equalStepAmount)*this.options.exponent):1/this.options.cutoffPercentage*a*this.options.equalStepRange+this.options.min:this.options.min+(this.options.max-this.options.min)*a;a=this.trimAlignValue(a);0<b&&(a=Math.max(a,this.options.values[b-1]));b+1<this.handles.length&&(a=Math.min(a,this.options.values[b+1]));return a},drawActiveRange:function(){var a=!1,b=0,d=c(this.handles[this.handles.length-1]).css("left"),e=c(this.activeRange);
this.options.range&&(b=c(this.handles[0]).css("left"));if(d&&0<=d.indexOf("%")||b&&0<=b.indexOf("%"))a=!0;d=parseInt(d)-parseInt(b);e.css({left:b,width:(d||0)+(a?"%":"")});(1<this.handles.length?this.options.values[0]===this.options.min&&this.options.values[1]===this.options.max:this.options.values[0]===this.options.max)?e.addClass("fullRange"):e.removeClass("fullRange");this.markFilteredOutTimeLinePoints()},trimAlignValue:function(a){if(a<=this.options.min)return this.options.min;if(a>=this.options.max)return this.options.max;
var b;this.options.snapToValue?(b=10<this.options.step?this.options.step:10,b=Math.ceil(Math.pow(b,Math.floor(Math.log(a)/Math.log(b))-1))):b=0<this.options.step?this.options.step:1;var d=a%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);a=parseFloat(a.toFixed(5));a=Math.min(a,this.options.max);return a=Math.max(a,this.options.min)}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{TimeSlider:function(a,b){this.options.slide=this.slideCallBack.bind(this);this.options=c.extend({},this.options,b);R9.Widgets.Slider.call(this,a,this.options);this.init()}});R9.extend("Widgets.TimeSlider",{});R9.extend("Widgets.TimeSlider.prototype",!0,R9.Widgets.Slider.prototype,{labelEl:null,selectedIndex:12,displayValues:[],options:{labelId:"",valueOptionWidget:null,calendarLabelEl:null},init:function(){this.loadTimeValues.call(this);this.labelEl=c("#"+this.options.labelId);
R9.Widgets.Slider.prototype.init.call(this)},loadTimeValues:function(){var a=this;a.options.valueOptionWidget&&(a.options.valueOptionWidget.find("option").each(function(b,d){d=jq(d);d.is(":selected")&&(a.selectedIndex=b);a.displayValues[b]=d.text()}),a.options.values=[a.selectedIndex])},slideCallBack:function(a,b){this.labelEl&&(this.selectedIndex=b=b[0],this.updateLabels(b),null!==a&&this.updateValueWidget())},updateLabel:function(a){this.labelEl&&this.labelEl.text(a)},updateLabels:function(a){a=
a<=this.displayValues.length?this.displayValues[a]:this.displayValues[0];this.updateCalendarLabel(a);this.updateLabel(a)},updateCalendarLabel:function(a){this.options.calendarLabelEl&&this.options.calendarLabelEl.text(a)},updateValueWidget:function(){var a=this;a.options.valueOptionWidget&&a.options.valueOptionWidget.find("option").each(function(b,d){d=jq(d);b===a.selectedIndex?d.prop("selected",!0):d.prop("selected",!1)})},setSliderMinValue:function(a){this.options.min!==a&&(this.options.min=a)},
setSliderValue:function(a){a||(a=this.options.min);a<this.options.min&&(a=this.options.min);a>this.options.max&&(a=this.options.max);this.setValue(a);this.updateValueWidget()},resetSliderMinValue:function(a){this.setSliderMinValue(a||0)}})})(window.jq||window.jQuery);
(function(c){R9.extend("Widgets",{NumberBox:function(a,b){this.inputNode=c(a).find("input")[0];this.jqNode=c(a);if(!this.isValidElement())return this;this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.NumberBox.prototype",{widgetName:"r9NumberBox",inputNode:null,jqNode:null,options:{min:0,max:6,defaultValue:0,callback:c.noop,validator:null,onlyDecorateDisabledButtons:!1},boxValue:0,incrButton:null,decrButton:null,styleJamButton:null,isValidElement:function(){return this.jqNode&&
this.jqNode.children().hasClass("incrementor")&&this.jqNode.children().hasClass("decrementor")&&this.jqNode.children().hasClass("numberHolder")},canChange:function(a){return"function"===typeof this.options.validator?this.options.validator.call(this,a,this.boxValue):!0},getStyleJamButton:function(){return R9.stylejam&&R9.stylejam.common&&R9.stylejam.common.widgets&&R9.stylejam.common.widgets.button?R9.stylejam.common.widgets.button.StyleJamButton:null},increment:function(){if(this.boxValue<this.options.max&&
this.canChange(1))return this.boxValue+=1,this.updateView(),this.options.callback.call(this,1,this.boxValue),!0;this.disableButton(this.incrButton);return!1},decrement:function(){if(this.boxValue>this.options.min&&this.canChange(-1))return--this.boxValue,this.updateView(),this.options.callback.call(this,-1,this.boxValue),!0;this.disableButton(this.decrButton);return!1},updateView:function(){c(this.inputNode).val(this.boxValue);c(this.inputNode).trigger("change");c(this.jqNode).attr("aria-valuenow",
this.boxValue);this.boxValue===this.options.max?(this.enableButton(this.decrButton),this.disableButton(this.incrButton)):(this.boxValue===this.options.min?this.disableButton(this.decrButton):this.enableButton(this.decrButton),this.enableButton(this.incrButton));this.ariaLabel&&this.ariaLabel.length&&this.ariaLabelMessage&&this.updateAriaLabel()},updateAriaLabel:function(){this.ariaLabelUpdateId&&(window.clearTimeout(this.ariaLabelUpdateId),this.ariaLabelUpdateId=null);this.ariaLabelUpdateId=window.setTimeout(function(){var a;
a=-1<this.ariaLabelMessage.indexOf("|")?R9.Common.Utils.String.formatChoice(this.ariaLabelMessage,this.boxValue,this.boxValue):R9.Common.Utils.String.formatString(this.ariaLabelMessage,this.boxValue);this.ariaLabel.html(a)}.bind(this),200)},getValue:function(){return this.boxValue},setValue:function(a,b){a=parseInt(a);if(isNaN(a)||this.boxValue===a)return!1;var d=a-this.boxValue;if(!b&&!this.canChange(d))return!1;this.boxValue=a;this.updateView();this.options.callback&&this.options.callback.call(this,
d);return!0},init:function(){this.styleJamButton=this.getStyleJamButton();this.boxValue=""!=this.inputNode.value?parseInt(this.inputNode.value,10):0;this.incrButton=this.jqNode.find(".incrementor");this.decrButton=this.jqNode.find(".decrementor");this.jqNode.data(this.widgetName,this);0<this.options.defaultValue?this.setValue(this.options.defaultValue):!isNaN(this.options.max)&&this.boxValue>this.options.max&&(this.boxValue=this.options.max);c(this.inputNode).prop("readonly","readonly");this.inputNode.value=
this.boxValue;var a=this;this.incrButton.unbind("click").click(function(b){a.increment();jq(a.jqNode).trigger("increment");return!1});this.decrButton.unbind("click").click(function(b){a.decrement();jq(a.jqNode).trigger("decrement");return!1});this.updateView()},enableButton:function(a){a.removeClass("NumberBox-disabled").prop("disabled",!1).attr("aria-disabled","false");this.styleJamButton&&R9.dom.swapClasses(a,this.styleJamButton.plusMinusButtonDisabled,this.styleJamButton.plusMinusButtonEnabled)},
disableButton:function(a){a.addClass("NumberBox-disabled");this.options.onlyDecorateDisabledButtons||a.prop("disabled",!0).attr("aria-disabled","true");this.styleJamButton&&R9.dom.swapClasses(a,this.styleJamButton.plusMinusButtonEnabled,this.styleJamButton.plusMinusButtonDisabled)},disableDecrement:function(){this.disableButton(this.decrButton)},enableDecrement:function(){this.enableButton(this.decrButton)},disableIncrement:function(){this.disableButton(this.incrButton)},enableIncrement:function(){this.enableButton(this.incrButton)}})})(jq||
jQuery);(function(c){c.fn.NumberBox=function(a){return"undefined"==typeof a?c(this).data("r9NumberBox"):this.each(function(){new R9.Widgets.NumberBox(this,a)})}})(jq||jQuery);
(function(c){c.fn.r9RangeSlider=function(a){if("string"==typeof a&&"values"==a){for(var b=0;b<this.length;b++){var d=c(this[b]).data("r9RangeSlider");if(d)return d.getValues()}return[]}if("undefined"==typeof a){for(b=0;b<this.length;b++)if(d=c(this[b]).data("r9RangeSlider"))return d;return null}return this.each(function(){new R9.Widgets.Slider(this,a)})};c.fn.r9TimeSlider=function(a){if("string"==typeof a&&"values"==a){for(var b=0;b<this.length;b++){var d=c(this[b]).data("r9RangeSlider");if(d)return d.getValues()}return[]}if("undefined"==
typeof a){for(b=0;b<this.length;b++)if(d=c(this[b]).data("r9RangeSlider"))return d;return null}return this.each(function(){new R9.Widgets.TimeSlider(this,a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{Checkbox:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.icon=c(R9.Widgets.Checkbox.findIconNode(this.elementNode));this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.Checkbox",{isCheckbox:function(a){return a&&a.nodeName&&"input"==a.nodeName.toLowerCase()&&"checkbox"==a.type.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.Checkbox.prototype.widgetBaseClass+"-input")},
refresh:function(a,b){b=c(b);b[a.checked?"addClass":"removeClass"](R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon-checked");b[a.disabled?"addClass":"removeClass"](R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon-disabled")},findIconNode:function(a){return c(a).closest("[id$\x3d'-icon']")},findElementNode:function(a){return document.getElementById(a.id.substring(0,a.id.lastIndexOf("-icon")))}});R9.extend("Widgets.Checkbox.prototype",{widgetName:"checkbox",widgetBaseClass:"r9-checkbox",elementNode:null,
element:null,icon:null,options:{click:null,change:null},init:function(){this.bindInputClickEvent();this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return R9.Widgets.Checkbox.isCheckbox(this.elementNode)&&R9.Widgets.Checkbox.isWidgetControlled(this.elementNode)},bindInputEvent:function(a,b){var d=this;a+="."+
this.widgetName;this.element.unbind(a).bind(a,function(a){b.call(d,this,R9.Widgets.Checkbox.findIconNode(this),a)})},bindInputClickEvent:function(){this.bindInputEvent("click",this.handleElementClickEvent)},handleElementClickEvent:function(a,b,d){this.options.click&&this.options.click.apply(this,arguments)},handleElementChangeEvent:function(a,b,d){R9.Widgets.Checkbox.refresh(a,b);this.options.change&&this.options.change.apply(this,arguments)},handleElementFocusEvent:function(a,b,d){a.disabled||(c(b).addClass(this.widgetBaseClass+
"-state-focus"),this.options.focus&&this.options.focus.apply(this,arguments))},handleElementBlurEvent:function(a,b,d){a.disabled||(c(b).removeClass(this.widgetBaseClass+"-state-focus"),this.options.blur&&this.options.blur.apply(this,arguments))}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{CheckboxGroup:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.icon=null;this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.CheckboxGroup.prototype",!0,R9.Widgets.Checkbox.prototype,{widgetName:"checkboxGroup",options:{inputSelector:'input[type\x3d"checkbox"]',labelSelector:"label.r9-checkbox-label",iconSelector:"a."+R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon"},init:function(){this.bindInputEvent("click",
this.handleElementClickEvent);this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.bindInputEvent("mousedown",this.handleElementMouseDownEvent);this.bindLabelEvent("mousedown",this.handleElementMouseDownEvent);this.element.data(this.widgetName,this)},validateElement:function(){return void 0===this.element.data(this.widgetName)},bindInputEvent:function(a,b){var d=this;a+="."+
this.widgetName+"Input";this.element.undelegate(this.options.inputSelector,a).delegate(this.options.inputSelector,a,function(a){b.call(d,this,R9.Widgets.Checkbox.findIconNode(this),a)})},bindLabelEvent:function(a,b){var d=this;a+="."+this.widgetName+"Label";this.element.undelegate(this.options.labelSelector,a).delegate(this.options.labelSelector,a,function(a){var e=c("#"+c(this).attr("for")).get(0);b.call(d,e,a)})},handleElementClickEvent:function(a,b,d){this.options.click&&this.options.click.apply(this,
arguments)},handleElementMouseDownEvent:function(a,b,d){this.options.mousedown&&this.options.mousedown.apply(this,arguments)},trigger:function(a,b){"object"==typeof b&&(b.liveFired=void 0);c(a).trigger(b)}})})(jq||jQuery);
(function(c){(function(a){var b=a.fn.prop;a.fn.prop=function(a,c){var d=b.apply(this,arguments);"undefined"==typeof c||"checked"!=a&&"disabled"!=a||this.each(function(){R9.Widgets.Checkbox.isCheckbox(this)&&R9.Widgets.Checkbox.isWidgetControlled(this)&&R9.Widgets.Checkbox.refresh(this,R9.Widgets.Checkbox.findIconNode(this))});return d}})(c);c.fn.newCheckbox=function(a){return this.each(function(){new R9.Widgets.Checkbox(this,a)})};c.fn.checkboxGroup=function(a){return this.each(function(){new R9.Widgets.CheckboxGroup(this,
a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{TextInput:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.TextInput",{isTextInput:function(a){return a&&a.nodeName&&"input"==a.nodeName.toLowerCase()&&"text"==a.type.toLowerCase()},isWidgetControlled:function(a){return"undefined"==typeof document.createElement("input").placeholder}});R9.extend("Widgets.TextInput.prototype",{widgetName:"textinput",widgetBaseClass:"r9-textinput",
widgetPlaceholderClass:"r9-textinput-placeholder-active",elementNode:null,element:null,options:{click:null,change:null},init:function(){this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("smartyfocus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.bindFormSubmission();this.element.data(this.widgetName,this);this.element.is(":focus")||this.handleElementBlurEvent(this.elementNode)},validateElement:function(){return R9.Widgets.TextInput.isTextInput(this.elementNode)&&
R9.Widgets.TextInput.isWidgetControlled(this.elementNode)&&void 0===this.element.data(this.widgetName)},bindInputEvent:function(a,b){var d=this;a+="."+this.widgetName;this.element.unbind(a).bind(a,function(a){b.call(d,this,a)})},bindFormSubmission:function(){var a=this,b="submit."+a.widgetName+a.element.attr("id"),d="form-pre-submit."+a.widgetName+a.element.attr("id");this.element.parents("form").off(b).on(b,function(b){a.element.val()==a.element.attr("placeholder")&&a.clearPlaceholderText(a.element)});
this.element.parents("form").off(d).on(d,function(b){a.element.val()==a.element.attr("placeholder")&&a.clearPlaceholderText(a.element)})},handleElementFocusEvent:function(a,b){a.disabled||(c(a).val()==c(a).attr("placeholder")&&this.clearPlaceholderText(c(a)),this.options.focus&&this.options.focus.apply(this,arguments))},handleElementBlurEvent:function(a,b){a.disabled||(0==c.trim(c(a).val()).length&&this.setPlaceholderText(a),this.options.blur&&this.options.blur.apply(this,arguments))},clearPlaceholderText:function(a){a.removeClass(this.widgetPlaceholderClass).val("")},
setPlaceholderText:function(a){c(a).addClass(this.widgetPlaceholderClass).val(c(a).attr("placeholder"))}})})(jq||jQuery);(function(c){c.fn.textInput=function(a){return this.each(function(){new R9.Widgets.TextInput(this,a)})}})(jq||jQuery);(function(c){c.fn.textInput=function(a){return this.each(function(){new R9.Widgets.TextInput(this,a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{Switch:function(a,b){this.elementNode=a;this.element=c(this.elementNode);if(!b||b.dontValidate||this.validateElement())this.options=c.extend({},this.options,b),this.init()}});R9.extend("Widgets.Switch",{isSwitch:function(a){return a&&a.nodeName&&"input"==a.nodeName.toLowerCase()&&"checkbox"==a.type.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.Switch.prototype.widgetBaseClass+"-input")},findLabelNode:function(a){return jq(a).siblings(".r9-switch-label")},
refresh:function(a){var b=R9.Widgets.Switch.prototype,d="."+b.widgetCover,e=b.widgetOnState,b="."+b.widgetWrapper,b=c(a).parent(b),d=b.find(d),f=a.checked?b.outerWidth()-d.outerWidth():0;b[a.checked?"addClass":"removeClass"](e);d.css("margin-right",f)}});R9.extend("Widgets.Switch.prototype",!0,R9.Widgets.Checkbox.prototype,{widgetName:"switch",widgetBaseClass:"r9-switch",widgetCover:"r9-switch-cover",widgetLabelNodeClass:"r9-switch-label",widgetWrapper:"r9-switch-wrapper",widgetOffText:"r9-switch-offText",
widgetOnText:"r9-switch-onText",widgetOnState:"r9-switch-state-on",stepSize:4,options:{change:null,click:null},init:function(){R9.Common.Utils.Browsers.isMobileSafari()&&(this.options.nodraw=!0);this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("click",this.handleElementClickEvent);this.element.data(this.widgetName,this);R9.Widgets.Switch.refresh(this.elementNode)},bindInputEvent:function(a,b){a+="."+this.widgetName;var d=this;this.element.off(a).on(a,function(a){b.call(d,
this,R9.Widgets.Switch.findLabelNode(this),a)})},handleElementClickEvent:function(a,b,d){this.options.click&&this.options.click.apply(this,arguments)},handleElementChangeEvent:function(a,b,d){this._slide();this.options.change&&this.options.change.apply(this,arguments)},validateElement:function(){return R9.Widgets.Switch.isSwitch(this.elementNode)&&R9.Widgets.Switch.isWidgetControlled(this.element)&&void 0===this.element.data(this.widgetName)},_toggleOnOff:function(a,b,d){this.element.siblings("."+
this.widgetLabelNodeClass).text(a.val()).parent("."+this.widgetWrapper).removeClass(d||"").addClass(b||"").end();this.element.val(a.val())},_slide:function(){function a(){var a=".",b,c;l?(a+=d.widgetOnText,b="r9-switch-state-on",c=""):(a+=d.widgetOffText,b="",c="r9-switch-state-on");d._toggleOnOff(d.element.siblings(a),b,c)}function b(){var c=0,f=!1;0>p?a():d.options.nodraw?(g.css("margin-right",l?k:0),a()):(g.css("margin-right",e),l?(c=k-e,e+h>=k?(f=!0,e+=c):e+=h):(c=e-0,0>=e-h?(f=!0,e-=c):e-=h),
p-=f&&0<Math.abs(c)?Math.abs(c):h,setTimeout(function(){b()},10))}var d=this,e,f,g=c(this.element.siblings("."+this.widgetCover)),h=Math.round(this.options.stepSize||this.stepSize);f=g.css("margin-right");f=+(f?f.replace("px",""):0);var l=0===f,k=g.parent("."+this.widgetWrapper).outerWidth()-g.outerWidth(),p=k;e=l?0:f;b()}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{ToggleSwitch:function(a,b){this.elementNode=a;this.element=jq(this.elementNode);this.options=jq.extend({},this.options,b);this.init()}});R9.extend("Widgets.ToggleSwitch",{isToggleSwitch:function(a){return jq(a).hasClass(R9.Widgets.ToggleSwitch.prototype.widgetBaseClass)},isOn:function(a){return jq(a).parent().hasClass(R9.Widgets.ToggleSwitch.prototype.widgetCheckedClass)},toggleCss:function(a){var b=jq(a).closest(".toggleswitch");jq(b).is(".toggleswitch-checked")?
(jq(b).removeClass("toggleswitch-checked"),jq(a).removeAttr("checked")):(jq(b).addClass("toggleswitch-checked"),jq(a).attr("checked","checked"))}});R9.extend("Widgets.ToggleSwitch.prototype",{that:this,widgetName:"toggleswitch",widgetBaseClass:"toggleswitch-checkbox",widgetCheckedClass:"toggleswitch-checked",options:{click:function(){},afterSwitch:function(){},switchOnLogPath:null,switchOffLogPath:null,noToggleUiOnClick:!1},init:function(){var a=this.element.closest("."+this.widgetName+" \x3e input");
this.element.attr("name");this.element.attr("id");a.on("click",{self:this},this.handleClickEvent)},handleClickEvent:function(a){var b=a.data.self;if("checkbox"===a.target.type){b.options.click&&b.options.click();if(b.options.noToggleUiOnClick&&!R9.Widgets.ToggleSwitch.isOn(this))return!1;R9.Widgets.ToggleSwitch.toggleCss(jq(this));b.logSwitchChange(R9.Widgets.ToggleSwitch.isOn(this));b.options.afterSwitch&&b.options.afterSwitch(a)}},logSwitchChange:function(a){a&&this.options.switchOnLogPath?R9.Analytics.api.trackEvent(this.options.switchOnLogPath):
!a&&this.options.switchOffLogPath&&R9.Analytics.api.trackEvent(this.options.switchOffLogPath)}})})(window.jq||window.jQuery);
(function(c){(function(a){var b=a.fn.prop;a.fn.prop=function(a,c){var d=b.apply(this,arguments);"undefined"==typeof c||"checked"!=a&&"disabled"!=a||this.each(function(){R9.Widgets.Switch.isSwitch(this)&&R9.Widgets.Switch.isWidgetControlled(this)&&R9.Widgets.Switch.refresh(this,R9.Widgets.Switch.findIconNode(this))});return d}})(c);c.fn.r9Switch=function(a){return this.each(function(){new R9.Widgets.Switch(this,a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{Dropdown:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.status=c(R9.Widgets.Dropdown.findStatusNode(this.elementNode));this.wrapper=c(R9.Widgets.Dropdown.findWrapperNode(this.elementNode));this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.Dropdown",{isDropdown:function(a){return a&&a.nodeName&&"select"==a.nodeName.toLowerCase()},isDropdownOption:function(a){return a&&a.nodeName&&"option"==
a.nodeName.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.Dropdown.prototype.widgetBaseClass+"-select")},isWidgetControlledOption:function(a){return R9.Widgets.Dropdown.isWidgetControlled(a.parentNode)},refresh:function(a,b,d){b=c(b);a.disabled?b.addClass(R9.Widgets.Dropdown.prototype.widgetBaseClass+"-wrapper-disabled"):b.removeClass(R9.Widgets.Dropdown.prototype.widgetBaseClass+"-wrapper-disabled");var e=a.selectedIndex;0>e&&(e=0);e=a.options[e];d=c(d);var f=c(a).data(R9.Widgets.Dropdown.prototype.widgetName);
(f=f?f.options.status:null)?f(a,b,d,e):(d.text(e.title||e.text||e.value),a.title=e.title||e.text||e.value)},findStatusNode:function(a){return c(a).closest("a").find("[id$\x3d'-status']")},findOptionStatusNode:function(a){return document.getElementById(a.parentNode.id+"-status")},findWrapperNode:function(a){return document.getElementById(a.id+"-wrapper")},findOptionWrapperNode:function(a){return document.getElementById(a.parentNode.id+"-wrapper")},findOptionSelectNode:function(a){return a.parentNode}});
R9.extend("Widgets.Dropdown.prototype",{widgetName:"dropdown",widgetBaseClass:"r9-dropdown",elementNode:null,element:null,status:null,wrapper:null,refreshTimer:null,lastSelectedIndex:-1,options:{click:null,change:null,status:null},init:function(){this.bindSelectEvent("click",this.handleElementClickEvent);this.bindSelectEvent("change",this.handleElementChangeEvent);this.bindSelectEvent("keydown",this.handleElementKeydownEvent);this.bindSelectEvent("keyup",this.handleElementKeyupEvent);this.bindSelectEvent("focus",
this.handleElementFocusEvent);this.bindSelectEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return R9.Widgets.Dropdown.isDropdown(this.elementNode)&&R9.Widgets.Dropdown.isWidgetControlled(this.element)},bindSelectEvent:function(a,b){var d=this;a+="."+this.widgetName;this.element.unbind(a).bind(a,function(a){b.call(d,this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this),a)})},handleElementClickEvent:function(a,
b,d,c){this.options.click&&this.options.click.apply(this,arguments);R9.Widgets.Dropdown.refresh(a,b,d);this.stopRefreshLoop(a,b,d)},handleElementChangeEvent:function(a,b,d,c){this.options.change&&this.options.change.apply(this,arguments);R9.Widgets.Dropdown.refresh(a,b,d);this.stopRefreshLoop(a,b,d)},handleElementKeydownEvent:function(a,b,d,c){this.startRefreshLoop(a,b,d)},handleElementKeyupEvent:function(a,b,d,c){R9.Widgets.Dropdown.refresh(a,b,d);this.stopRefreshLoop(a,b,d)},handleElementFocusEvent:function(a,
b,d,e){a.disabled||c(b).addClass(this.widgetBaseClass+"-state-focus")},handleElementBlurEvent:function(a,b,d,e){a.disabled||(c(b).removeClass(this.widgetBaseClass+"-state-focus"),R9.Widgets.Dropdown.refresh(a,b,d),this.stopRefreshLoop(a,b,d))},startRefreshLoop:function(a,b,d){var c=this;this.lastSelectedIndex=a.selectedIndex;this.refreshTimer=setInterval(function(){c.doRefresh(a,b,d)},100)},stopRefreshLoop:function(a,b,d){null!=this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=
null,this.lastSelectedIndex=-1)},doRefresh:function(a,b,d){a.selectedIndex!=this.lastSelectedIndex&&(this.lastSelectedIndex=a.selectedIndex,R9.Widgets.Dropdown.refresh(a,b,d))}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{Select:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.status=c(this.findStatusNode(this.elementNode));this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.Select",{});R9.extend("Widgets.Select.prototype",{widgetName:"select",dropdownOptions:null,content:null,list:null,status:null,value:null,elementNode:null,element:null,options:{change:null,matchMinWidth:!0,topOffset:"0",flippable:!0,direction:"down"},init:function(){this.createContent(this.elementNode);
this.dropdownOptions=this.content.find("li");this.list=this.findItemList(this.elementNode);this.focusSelected();this.element.data(this.widgetName,this);this.addEventHandlers()},findStatusNode:function(a){return c(a).closest("div").find("#"+a.id+"-status")},findItemList:function(a){return c(a).find("#"+a.id+"_dropdownDialogList")},createContent:function(a){this.content=c(a).find("#"+a.id+"_content")},isNodeDisabled:function(a){return a.length&&a.hasClass("disabled")},focusSelected:function(){if(this.content.find("li.selected").length){var a=
this.content.find("li.selected").addClass("focused");a.siblings().removeClass("focused");this.setInputValue(a);this.element.attr("aria-activedescendant",a.attr("id"))}else a=c(this.content.find("li")[0]),a.length&&(a.addClass("focused").siblings().removeClass("focused"),this.setInputValue(a),this.element.attr("aria-activedescendant",a.attr("id")))},selectByValue:function(a,b){a=this.content.find("li[data-value\x3d'"+a+"']");a.length&&this.updateValue(a,b)},setInputValue:function(a){this.value=a.attr("data-value");
this.status.text(a.attr("data-title"));this.status.attr("value",a.attr("data-value"));this.status.attr("title",a.attr("data-title"))},updateValue:function(a,b){this.isNodeDisabled(a)||(a.addClass("focused").siblings().removeClass("focused"),this.element.attr("aria-activedescendant",a.attr("id")),this.isOpen&&this.ensureVisible(a),a.addClass("selected").siblings().removeClass("selected"),this.setInputValue(a),b&&"function"===typeof this.options.change&&this.element.trigger("change"))},addEventHandlers:function(){function a(a){a=
c(a.target).closest(".r9-select-content");b.content[0]!=a[0]&&b.isOpen&&(b.close(),b.blur())}var b=this,d=c("body"),e=c(b.element);b.dropdownOptions.on("click",function(a){b.updateValue(c(this),!0);b.close();b.element.focus()});d.on("click",a);e.click(function(c){b.element.closest(".r9-select-content").length||(d.off("click",a),b.element.focus(),b.toggleContent(),setTimeout(function(){d.on("click",a)},10))});c(document).keydown(function(a){27===a.which&&b.close(a,null,!0)});this.element.focusout(function(){b.element.hasClass("closed")&&
b.blur()});this.element.blur(function(){b.element.hasClass("closed")&&b.blur()});this.element.keydown(function(a){if(13===a.which||32===a.which)b.selectFocused(),b.close(),a.preventDefault();if(40===a.which){if(b.isOpen){var d=b.content.find(".focused").next();d.length&&b.updateValue(d)}else b.open();a.preventDefault();a.stopImmediatePropagation()}38===a.which&&(b.isOpen?(d=b.content.find(".focused").prev(),d.length&&b.updateValue(d)):b.open(),a.preventDefault(),a.stopImmediatePropagation());9==a.which&&
(b.close(),b.blur())});this.element.on("focus",function(){b.element.addClass("focused")});this.element.on("change",function(a){b.options.change&&"function"===typeof b.options.change&&b.options.change.call(b,a)});c(window).on("resize",function(){b.isOpen&&b.reposition()});c(document).on("scroll",function(){b.isOpen&&b.reposition()});c(".viewport").on("scroll",function(){b.isOpen&&b.reposition()});this.content.on("mouseup touchend",function(){b.element.is(":visible")&&(R9.Common.Utils.Browsers.isIE(11)||
setTimeout(function(){b.reposition()},25))})},open:function(){this.isOpen=!0;var a=this,b="body";this.focusSelected();this.options.container&&""!==this.options.container&&(b=this.options.container,c(a.options.container).off("scroll."+a.element.id()).on("scroll."+a.element.id(),function(){a.isOpen&&a.reposition()}));this.content.appendTo(b);this.reposition();a.element.addClass("open");a.content.addClass("open");a.element.removeClass("closed");a.content.removeClass("closed");a.list.scroller();b=a.content.find("li.focused");
a.ensureVisible(b,!0)},reposition:function(){var a=this.options.direction,b=this.element.offset(),d=c(window),e=b.top+this.element.outerHeight();this.shouldFlipDirection(a)&&(a="down"===a?"up":"down");"up"===a?(this.content.addClass("up"),e=b.top-this.content.outerHeight()):this.content.removeClass("up");a={top:e+"px"};"right"===this.options.alignment?a.right=d.width()-(b.left+this.getTriggerWidth())+"px":a.left="center"===this.options.alignment?b.left-this.content.outerWidth()/2+this.getTriggerWidth()/
2+"px":b.left+"px";this.options.topOffset&&"0"!=this.options.topOffset&&(a.marginTop=this.options.topOffset+"px");this.options.matchWidth?(a.minWidth=this.getTriggerWidth()+"px",a.maxWidth=a.minWidth):(a.minWidth=this.options.matchMinWidth?this.getTriggerWidth()+"px":"",a.maxWidth="");this.content.css(a)},shouldFlipDirection:function(a){if(this.options.flippable){var b=c(window).scrollTop(),d=b+c(window).outerHeight(),e=this.content.outerHeight(),f=this.element.offset().top,d=f+this.element.outerHeight()+
e>d,b=f-e<b;if("down"===a)return d&&!b;if("up"===a)return b&&!d}return!1},getTriggerWidth:function(){var a=this.elementNode.getBoundingClientRect();return a?a.right-a.left:this.element.outerWidth()},ensureVisible:function(a,b){var d=a.position().top;a=a.outerHeight(!0);var c=this.content.scrollTop(),f=this.content.height(),g=this.list.scrollTop();if(b){b=this.list[0].scrollHeight;var h=d+this.list.scrollTop(),l=(f-a)/2;if(h>l&&b-h>l){this.list.scroller({scrollTo:c+g+d-l});return}h<l?this.list.scroller({scrollTo:0}):
this.list.scroller({scrollTo:b-f})}0>d?this.list.scroller({scrollTo:c+g+d}):d+a>f&&this.list.scroller({scrollTo:c+g+(d+a-f)})},toggleContent:function(){this.isOpen?this.close(null,null,!0):this.open()},close:function(a,b,d){if(this.isOpen){var c=this;this.isOpen=!1;this.element.removeClass("open");this.content.removeClass("open");this.element.addClass("closed");this.content.addClass("closed");c.element.after(c.content);a=this.content.find("li.selected");a.length&&this.element.attr("aria-activedescendant",
a.attr("id"));d&&setTimeout(function(){c.element.focus()},1)}},blur:function(){this.element&&this.element.removeClass("closed focused");this.content.removeClass("closed")},selectFocused:function(){var a=this.content.find("li.focused");a.length&&this.updateValue(a,!0)}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{DropdownGroup:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.icon=null;this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.DropdownGroup.prototype",!0,R9.Widgets.Dropdown.prototype,{widgetName:"dropdownGroup",options:{inputSelector:"select"},init:function(){this.bindSelectEvent("click",this.handleElementClickEvent);this.bindSelectEvent("change",this.handleElementChangeEvent);this.bindSelectEvent("keydown",
this.handleElementKeydownEvent);this.bindSelectEvent("keyup",this.handleElementKeyupEvent);this.bindSelectEvent("focus",this.handleElementFocusEvent);this.bindSelectEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return void 0===this.element.data(this.widgetName)},bindSelectEvent:function(a,b){var d=this;this.element.undelegate(this.options.inputSelector,a).delegate(this.options.inputSelector,a,function(a){b.call(d,this,R9.Widgets.Dropdown.findWrapperNode(this),
R9.Widgets.Dropdown.findStatusNode(this),a)})}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{DropdownDialog:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.DropdownDialog.prototype",{element:null,elementNode:null,content:null,trigger:null,placeholder:null,label:null,icon:null,isOpen:!1,widgetName:"dropdownDialog",widgetBaseClass:"r9-dropdownDialog",options:{autoOpen:!1,iconClass:"",showIcon:!0,contentClass:"",wrapperClass:"",triggerClass:"",content:null,onInit:null,
onOpen:null,onClose:null,text:"",placeholder:""},init:function(){this.element.data(this.widgetName,this);this.createWrapper();this.createTrigger();this.createContent();this.bindEvents();this.options.autoOpen&&this.toggleContent(!0);if(this.options.onInit)this.options.onInit(this)},bindEvents:function(){var a=this;c("body").on("click",function(b){a.isOpen&&(b=c(b.target).closest("."+a.widgetBaseClass+"-wrapper"),a.element[0]!=b[0]&&a.close())});c(a.trigger).click(function(b){a.toggleContent()})},createWrapper:function(){this.element.addClass(this.widgetBaseClass+
"-wrapper "+this.options.wrapperClass);this.element.hasClass(this.widgetBaseClass+"-open")&&(this.isOpen=!0)},createContent:function(){var a=this.element.find("."+this.widgetBaseClass+"-content");this.content=a.length?a:c("\x3cdiv\x3e",{"class":this.widgetBaseClass+"-content"});this.options.content&&c(this.options.content).appendTo(this.content);a.length||this.element.append(this.content)},createTrigger:function(){var a=this.element.find("."+this.widgetBaseClass+"-trigger");this.trigger=a.length?
a:c("\x3ca\x3e",{"class":this.widgetBaseClass+"-trigger "+this.options.triggerClass});this.label=this.trigger.find("."+this.widgetBaseClass+"-label");this.label.length||(this.label=c("\x3cspan\x3e",{"class":this.widgetBaseClass+"-label"}),this.trigger.prepend(this.label));this.placeholder=this.trigger.find("."+this.widgetBaseClass+"-placeholder");this.placeholder.length||(this.placeholder=c("\x3cspan\x3e",{"class":this.widgetBaseClass+"-placeholder",text:this.options.placeholder}),this.trigger.append(this.placeholder));
this.options.showIcon&&(this.icon=this.trigger.find("."+this.widgetBaseClass+"-icon"),this.icon.length||(this.icon=c("\x3cspan\x3e",{"class":this.widgetBaseClass+"-icon "+this.options.iconClass}),this.trigger.append(this.icon)));this.options.text?this.updateLabel(this.options.text):this.label.text()&&this.updateLabel(this.label.text());a.length||this.element.append(this.trigger)},open:function(){this.isOpen=!0;this.element.addClass(this.widgetBaseClass+"-open");if(this.options.onOpen)this.options.onOpen(this)},
close:function(){var a=this.isOpen;this.isOpen=!1;this.element.removeClass(this.widgetBaseClass+"-open");if(this.options.onClose)this.options.onClose(a,this)},toggleContent:function(a){1==a?this.open():0==a?this.close():this.isOpen?this.close():this.open()},updateLabel:function(a){this.label.html(a);"0"==a+""||a?this.trigger.addClass(this.widgetBaseClass+"-hasValue"):this.trigger.removeClass(this.widgetBaseClass+"-hasValue")},hasValue:function(){return this.trigger.hasClass(this.widgetBaseClass+"-hasValue")}})})(jq||
jQuery);
(function(){R9.extend("Widgets",{Flippy:function(c,a){this.elementNode=c;this.element=jq(this.elementNode);this.options=jq.extend({},this.options,a);this.init()}});R9.extend("Widgets.Flippy.prototype",{widgetName:"flippy",widgetBaseClass:"r9-flippy",elementNode:null,element:null,chars:null,alphabet:"0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z : - ( \x26nbsp;".split(" "),options:{wrapperClass:null,flipDelay:100,startDelay:2E3,startOnInit:!0,onStart:null,onFinish:null,newValue:null},
init:function(){this.chars=this.element.children(".%s-char".format(this.widgetBaseClass));this.options.wrapperClass&&this.element.addClass(this.options.wrapperClass);this.options.startOnInit&&this.start()},start:function(){var c=this;if("function"===typeof this.options.onStart)this.options.onStart();if(!jq.isArray(this.options.newValue)){for(var a=c.options.newValue.split(""),b=1;a.length<=c.chars.length;b++)a.push("\x26nbsp;");jq.each(a,function(a,b){setTimeout(function(){c.createChar(a,b)},c.options.startDelay+
c.options.flipDelay*a)})}},createChar:function(c,a,b){var d=this,e;a=a.replace(/[\ +]/g,"\x26nbsp;").toUpperCase();c>d.chars.length?(c=jq("\x3cspan\x3e",{"class":"%s-char".format(d.widgetBaseClass)}),b&&c.addClass(b),c.append(jq("\x3cspan\x3e",{"class":"%s-char-top".format(d.widgetBaseClass)})),c.append(jq("\x3cspan\x3e",{"class":"%s-char-split".format(d.widgetBaseClass)})),c.append(jq("\x3cspan\x3e",{"class":"%s-char-content".format(d.widgetBaseClass),html:"\x26nbsp;"})),e=d.chars.parent().append(c)):
e=d.chars.eq(c).find(".%s-char-content".format(d.widgetBaseClass));var f=e.text().trim().toUpperCase(),g=!1;0==f.length&&(g=!0);jq.each(d.alphabet,function(b,c){g&&setTimeout(function(){e.html(c)},d.options.flipDelay*b);f==c?g=!0:c==a&&(g=!1)})}})})(jq||jQuery);
(function(c){(function(a){var b=a.fn.val;a.fn.val=function(d){var c=b.apply(this,arguments);"undefined"!=typeof d&&a(this).each(function(){R9.Widgets.Dropdown.isDropdown(this)&&R9.Widgets.Dropdown.isWidgetControlled(this)&&R9.Widgets.Dropdown.refresh(this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this))});return c};var d=a.fn.prop;a.fn.prop=function(b,c){var e=d.apply(this,arguments);"undefined"!=typeof c&&("disabled"==b?a(this).each(function(){R9.Widgets.Dropdown.isDropdown(this)&&
R9.Widgets.Dropdown.isWidgetControlled(this)&&R9.Widgets.Dropdown.refresh(this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this))}):"selected"==b&&a(this).each(function(){R9.Widgets.Dropdown.isDropdownOption(this)&&R9.Widgets.Dropdown.isWidgetControlledOption(this)&&R9.Widgets.Dropdown.refresh(R9.Widgets.Dropdown.findOptionSelectNode(this),R9.Widgets.Dropdown.findOptionWrapperNode(this),R9.Widgets.Dropdown.findOptionStatusNode(this))}));return e}})(c);c.fn.dropdown=
function(a){return this.each(function(){new R9.Widgets.Dropdown(this,a)})};c.fn.dropdownGroup=function(a){return this.each(function(){new R9.Widgets.DropdownGroup(this,a)})};c.fn.selectDropDown=function(a){return this.each(function(){new R9.Widgets.Select(this,a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{RadiobuttonSet:function(a,b){this.elementNode=a;this.element=c(this.elementNode);if(!b||b.dontValidate||this.validateElement())this.options=c.extend({},this.options,b),this.init()}});R9.extend("Widgets.RadiobuttonSet",{isRadiobuttonSet:function(a){return a&&a.nodeName&&"span"===a.nodeName.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass)},findLabelNode:function(a){return document.getElementById(a.id+
"-label")},findRadiobuttonSetNode:function(a){return null!=a?a.parentNode:null},refresh:function(a){var b=!1;a.find("input."+R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass).each(function(){var a=c(R9.Widgets.RadiobuttonSet.findLabelNode(this)),e=c(this);e.prop("checked")?(b=!0,a.addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-checked")):a.removeClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-checked");e.prop("disabled")?a.addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+
"-label-disabled"):a.removeClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-disabled")});b||(a=a.find("input."+R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass).first(),a.prop("checked",!0),c(R9.Widgets.RadiobuttonSet.findLabelNode(a[0])).addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-checked"))},applyCallback:function(a,b,d,e){a&&(c.isFunction(a)?a.apply(b,d):(a=a[e.target.value],c.isFunction(a)&&a.apply(b,d)))}});R9.extend("Widgets.RadiobuttonSet.prototype",
{widgetName:"radiobuttonset",widgetBaseClass:"r9-radiobuttonset",elementNode:null,element:null,options:{change:null,click:null},init:function(){this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("click",this.handleElementClickEvent);this.element.data(this.widgetName,this);R9.Widgets.RadiobuttonSet.refresh(this.element)},bindInputEvent:function(a,b){var d="input."+
this.widgetBaseClass;a+="."+this.widgetName;var c=this;this.element.off(a,d).on(a,d,function(a){b.call(c,this,R9.Widgets.RadiobuttonSet.findLabelNode(this),a)})},validateElement:function(){return R9.Widgets.RadiobuttonSet.isRadiobuttonSet(this.elementNode)&&R9.Widgets.RadiobuttonSet.isWidgetControlled(this.element)&&void 0===this.element.data(this.widgetName)},handleElementFocusEvent:function(a,b,d){a.disabled||c(b).addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-focused")},handleElementBlurEvent:function(a,
b,d){a.disabled||c(b).removeClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-focused")},handleElementChangeEvent:function(a,b,d){a.disabled||(R9.Widgets.RadiobuttonSet.applyCallback(this.options.change,this,arguments,d),R9.Widgets.RadiobuttonSet.refresh(this.element))},handleElementClickEvent:function(a,b,d){a.disabled||(R9.Widgets.RadiobuttonSet.applyCallback(this.options.click,this,arguments,d),R9.Widgets.RadiobuttonSet.refresh(this.element))}})})(jq||jQuery);
(function(c){(function(a){var b=a.fn.prop;a.fn.prop=function(d,c){var e=b.apply(this,arguments);"undefined"==typeof c||"disabled"!=d&&"checked"!=d||a(this).each(function(){if(R9.Widgets.RadiobuttonSet.isRadiobuttonSet(R9.Widgets.RadiobuttonSet.findRadiobuttonSetNode(this))){var b=R9.Widgets.RadiobuttonSet.findRadiobuttonSetNode(this);R9.Widgets.RadiobuttonSet.isWidgetControlled(b)&&R9.Widgets.RadiobuttonSet.refresh(a(b))}});return e}})(c);c.fn.radiobuttonset=function(a){return this.each(function(){new R9.Widgets.RadiobuttonSet(this,
a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{Dialog:function(a,b){if(a.constructor===Array)for(var d=0;d<a.length;d++){if(a[d].tagName&&"DIV"===a[d].tagName){this.elementNode=a[d];break}}else this.elementNode=a;this.element=c(this.elementNode);this.options=c.extend({},this.options,b);this.init();return this}});R9.extend("Widgets.Dialog.prototype",{element:null,elementNode:null,positionUpdater:null,dialogWrapper:null,closeButton:null,buttonSetWrapper:null,buttonSet:null,viewPort:null,contentContainer:null,lastItemToFocus:null,
modalLayer:null,widgetName:"dialog",widgetBaseClass:"r9-dialog",spinnerClass:"r9-spinner",popoverBaseClass:"r9-popover",arrow:null,offsets:{right:{x:"right",y:null,height:-36,width:24},left:{x:"left",y:null,height:-36,width:-24},top:{x:null,y:"top",height:-24,width:null},bottom:{x:null,y:"bottom",height:24,width:null}},title:null,header:null,isTouchDevice:!1,options:{id:null,title:null,defaultPadding:!1,buttons:[],modal:!0,initAccessibility:null,accessibility:{role:null,ariaModal:null,ariaLabelledBy:null},
focusSelector:'input[type!\x3d"hidden"], select, a, button, textarea, [tabindex\x3d"0"]',allowMultipleDialogs:!1,modalOpacity:null,wrapperClass:"",modalBackgroundClass:"",closeButtonClass:"",viewPortClass:"",contentClass:"",titleClass:"",minWidth:275,maxWidth:null,minHeight:100,attributes:[],spinner:!1,open:null,display:function(){this.viewPort.show()},opened:null,close:null,beforeClose:null,removeOnClose:!0,useMaxHeight:!1,allowUserScroll:!1,closeOnEscape:!0,closeOnModalClick:!0,position:null,direction:"right",
top:null,centerModal:!0,adjustToScreenHeight:!1,referencePoint:null},init:function(){null==this.options.initAccessibility&&(this.options.initAccessibility=R9.config.getBoolean("ui.accessibility.features.dialog.enabled",!0));if(!this.options.allowMultipleDialogs&&c(document).data(this.widgetName)){var a=c(document).data(this.widgetName);"function"===typeof a.close?c(document).data(this.widgetName).close():a.hide()}this.element.data(this.widgetName,this);c(document).data(this.widgetName,this);null!=
this.options.referencePoint&&c(document).data(this.widgetName+"-"+this.options.referencePoint,this);this.isTouchDevice=R9.ui.isTouchDevice();this.options.modal?this.createDialogWrapper().hideDocumentScrollBar().createModalLayer():c.isNumeric(this.options.modalOpacity)&&this.createDialogWrapper().createModalLayer();this.createViewPort().createHeader().createContentContainer().createButtonWrapper().createButtons();this.options.position&&this.createArrow();this.options.allowUserScroll&&this.scrollingDialog();
this.initAccessibility(this.viewPort);this.build().calculateViewPortWidth().position().bindEvents().open()},build:function(){(this.options.modal||c.isNumeric(this.options.modalOpacity))&&this.dialogWrapper.append(this.modalLayer);this.options.position&&this.viewPort.append(this.arrow);this.header.append(this.title);this.header.append(this.closeButton);this.viewPort.append(this.header);this.contentContainer.append(this.element);this.viewPort.append(this.contentContainer);this.options.buttons.length&&
(this.buttonSetWrapper.append(this.buttonSet),this.viewPort.append(this.buttonSetWrapper));this.lastItemToFocus&&this.viewPort.append(this.lastItemToFocus);this.options.modal||c.isNumeric(this.options.modalOpacity)?c("body").append(this.dialogWrapper.append(this.viewPort.hide())):c("body").append(this.viewPort.hide());return this},bindEvents:function(){var a=this;if(this.options.modal||c.isNumeric(this.options.modalOpacity))this.modalLayer.on("click",function(){a.options.closeOnModalClick&&a.close()});
this.closeButton.on("click",function(){a.close()});this.positionUpdater=setInterval(function(){a.windowResize()},1E3/60);c(window).on("resize",c.proxy(this.eventWindowResize,a));return this},windowResize:function(a){this.calculateViewPortWidth();this.position()},open:function(){this.options.open&&this.options.open.call(this);this.options.display.call(this);if(this.options.closeOnEscape){var a=this,b=function(d){27===d.keyCode&&(c(document).unbind("keyup",b),a.close())};c(document).bind("keyup",b)}this.options.initAccessibility&&
this.focus();this.options.opened&&this.options.opened.call(this)},focusTimeout:null,focus:function(){var a=this;this.focusTimeout&&clearTimeout(this.focusTimeout);this.focusTimeout=setTimeout(function(){a.focusInner()},501)},focusInner:function(){var a;a=this.getItemsToFocus();(a=1<a.length?a.not(this.closeButton).eq(0):a.eq(0))&&a.length&&a.focus()},getItemsToFocus:function(){return this.viewPort?this.viewPort.find(this.options.focusSelector):$()},beforeClose:function(){},close:function(){this.options.beforeClose&&
this.options.beforeClose.call(this);this.options.removeOnClose?(this.dialogWrapper&&(this.dialogWrapper.remove(),this.dialogWrapper=null),this.viewPort&&(this.viewPort.remove(),this.viewPort=null)):this.reset();clearInterval(this.positionUpdater);c(window).off("resize",this.eventWindowResize);this.showDocumentScrollbar();this.options.close&&this.options.close.call(this);c(document).data(this.widgetName)&&c(document).removeData(this.widgetName)},eventWindowResize:function(){this.windowResize()},reset:function(){var a;
c(":focus").blur();this.options.modal||c.isNumeric(this.options.modalOpacity)?(a=c(this.element).closest(".r9-dialog-wrapper"),c(a).find(".r9-dialog-modalBackground").remove()):a=c(this.element).closest(".r9-dialog-viewPort");c(a).find(".r9-dialog-header").remove();c(a).find("."+this.popoverBaseClass+"-arrow").remove();c(a).find("[class^\x3d'r9-dialog-']").unwrap();c(this.element).unwrap();this.dialogWrapper&&(this.dialogWrapper=null)},createDialogWrapper:function(){this.dialogWrapper=c(document.createElement("div")).addClass(this.widgetBaseClass+
"-wrapper "+this.options.wrapperClass);this.dialogWrapper=c.extend(this.dialogWrapper,this);return this},initAccessibility:function(a){var b=this.options,d=this;if(b.initAccessibility&&a&&0!==a.length){if(b.modal){var e=this.options.id+"LastInput";this.lastItemToFocus=c("\x3cinput\x3e").attr({type:"text",id:e,name:e}).css({position:"absolute",height:"0px",width:"0px",top:"0px",opacity:0,fontSize:"1px",lineHeight:"0px",outline:"none",color:"transparent",background:"transparent"});a.on("focus","#"+
e,function(a){!d.getItemsToFocus()||1>=d.getItemsToFocus().length||(d.closeButton?d.closeButton.focus():d.focusInner())})}c(document).keypress(function(a){13==a.which&&d.closeButton&&c(a.target).is(d.closeButton)&&d.close()});var e=function(a){return"undefined"!==typeof a&&null!==a},f=b.accessibility;a.addClass("r9-dialog-no-outline");a.attr("tabindex",-1);a.attr("role",e(f.role)?f.role:b.modal?"dialog":"region");a.attr("aria-modal",e(f.ariaModal)?f.ariaModal:b.modal?!0:null);a.attr("aria-labelledby",
e(f.ariaLabelledBy)?f.ariaLabelledBy:null!==b.title?this.getTitleId():null)}},createModalLayer:function(){this.modalLayer=c(document.createElement("div")).addClass(this.widgetBaseClass+"-modalBackground "+this.options.modalBackgroundClass);null!=this.options.modalOpacity&&(void 0!==c.browser&&c.browser.msie?this.modalLayer.css("filter","alpha(opacity\x3d"+100*this.options.modalOpacity+")"):this.modalLayer.css({background:"rgba(0,0,0,"+(1-this.options.modalOpacity)+")"}));return this},createViewPort:function(){this.viewPort=
c(document.createElement("div")).addClass(this.widgetBaseClass+"-viewPort "+(this.options.spinner?this.spinnerClass:"")+" "+(this.options.defaultPadding?this.widgetBaseClass+"-defaultPadding ":"")+this.options.viewPortClass);this.options.id&&this.viewPort.attr("id","dialog"+this.options.id);return this},removeSpinner:function(){this.viewPort&&this.viewPort.removeClass(this.spinnerClass)},createButtonWrapper:function(){this.buttonSetWrapper=c(document.createElement("div")).addClass(this.widgetBaseClass+
"-buttonwrapper");this.buttonSet=c(document.createElement("div")).addClass(this.widgetBaseClass+"-buttonset");return this},createButtons:function(){var a=this,b=this.options.buttons;this.buttonSetWrapper.remove();this.buttonSet.empty();if(c.isEmptyObject(b)||c.isArray(b)&&!b.length)this.viewPort.removeClass(this.widgetBaseClass+"-buttons");else return c.each(b,function(b,e){var d;e=c.isFunction(e)?{click:e,text:b}:e;e=c.extend({type:"button","class":"ui-button"},e);d=e.click;e.click=function(){d.apply(a,
arguments)};b=e.text;delete e.text;c("\x3cbutton\x3e\x3c/button\x3e",e).append(c("\x3cspan\x3e\x3c/span\x3e").text(b)).appendTo(a.buttonSet)}),this.viewPort.addClass(this.widgetBaseClass+"-buttons"),this},createArrow:function(){this.arrow=c(document.createElement("div")).addClass(this.popoverBaseClass+"-arrow");this.viewPort.addClass(this.popoverBaseClass+"-viewPort "+this.popoverBaseClass+"-"+this.options.direction);return this},createHeader:function(){this.header=c(document.createElement("div")).addClass(this.widgetBaseClass+
"-header");this.closeButton=c(document.createElement("div")).attr("tabindex","0").attr("role","button").attr("aria-label","Close Dialog").addClass(this.widgetBaseClass+"-closeButton r9-icon-x").addClass(this.options.closeButtonClass);c(this.element).attr("title")&&!this.options.title&&(this.options.title=c(this.element).attr("title"));this.options.title&&this.createTitle();return this},createTitle:function(){this.title=c(document.createElement("div")).attr("id",this.getTitleId()).addClass(this.widgetBaseClass+
"-title "+this.options.titleClass).text(this.options.title)},getTitleId:function(){return(this.options.id||"dialog")+"Title"},createContentContainer:function(){this.contentContainer=c(document.createElement("div")).addClass(this.widgetBaseClass+"-content "+this.options.contentClass).attr("id","dialogContent"+this.options.id);return this},hideDocumentScrollBar:function(){var a=document.body,b=a.scrollTop,d=getScrollbarSize();c("html").addClass(0<d?"defaultScrollbar":"zeroScrollbar");0>=d&&b&&(a.style.top=
"-"+b+"px");return this},showDocumentScrollbar:function(){var a=document.body,b=getScrollbarSize(),d=parseInt(a.style.top.replace("-","").replace("px",""));c("html").removeClass("zeroScrollbar").removeClass("defaultScrollbar");0>=b&&d&&(a.scrollTop=d,a.style.top=null)},position:function(){if(!this.options.modal&&this.options.position)this.viewPort.css(this.calculateOffsetCss(c(this.options.position)));else{var a=parseInt(this.options.width)>c(window).width(),b={};this.options.centerModal&&(b.left=
"50%",b.marginLeft=-(parseInt(this.options.width)/2));b.minHeight="function"===typeof this.options.minHeight?this.options.minHeight():this.options.minHeight;b.minWidth="function"===typeof this.options.minWidth?this.options.minWidth():this.options.minWidth;this.options.useMaxHeight?(b.height="100%",b.top=0):(this.options.top&&(b.top=this.options.top),this.options.height&&this.viewPort.height(this.options.height));a&&c.extend(b,{left:"",marginLeft:"",top:""});this.viewPort.css(b)}return this},calculateViewPortWidth:function(){var a=
this.element.width();this.options.width?a=parseInt(this.options.width)<=c(window).width()?this.options.width:"":(0!==a&&(a+=parseInt(this.element.css("padding-left"),10)+parseInt(this.element.css("padding-right"),10)+parseInt(this.element.css("margin-left"),10)+parseInt(this.element.css("margin-right"),10)+parseInt(this.element.css("borderLeftWidth"),10)+parseInt(this.element.css("borderRightWidth"),10)),this.options.maxWidth&&a>this.options.maxWidth&&(a=this.options.maxWidth),this.options.minWidth&&
a<this.options.minWidth&&(a=this.options.minWidth),this.options.width=a);this.viewPort.css("width",a);return this},calculateOffsetCss:function(a){var b=this.getScrollTop(),d=this.getScrollLeft(),e=a.width(),f=a.height();a=a.get(0).getBoundingClientRect();var g=this.offsets[this.options.direction],e=(g.x?a[g.x]:a.right-e/2)+(g.width?g.width:-(this.options.minWidth/2)),f=(g.y?a[g.y]:a.bottom-f/2)+g.height;"left"===this.options.direction&&(e-=this.options.minWidth);"top"===this.options.direction&&(f-=
this.options.minHeight);this.dialogWrapper||(f+=b,e+=d);this.options.adjustToScreenHeight&&(b+=c(window).height(),d=f+this.viewPort.height(),b<d&&(b=d-b+5,f-=b,this.arrow.css("top",b+18+"px")));return{left:e,top:f}},getScrollTop:function(){if("undefined"!==typeof pageYOffset)return pageYOffset;var a=document.body,b=document.documentElement,b=b.clientHeight?b:a;return b.scrollTop},getScrollLeft:function(){if("undefined"!==typeof pageXOffset)return pageXOffset;var a=document.body,b=document.documentElement,
b=b.clientWidth?b:a;return b.scrollLeft},setTitle:function(a){a&&(this.title?this.title.html(a):(this.options.title=a,this.createTitle()))},scrollingDialog:function(){this.options.modal&&this.showDocumentScrollbar();this.dialogWrapper.addClass("fixed-position");var a=this.viewPort,b=window,d=this.options.height?this.options.height:a.outerHeight(!0),e=this.options.width?this.options.width:a.outerWidth(!0);null!==this.options.position?(d=this.calculateOffsetCss(c(this.options.position)),a.css({position:"absolute",
top:d.top+c(b).scrollTop()+"px",left:d.left+c(b).scrollLeft()+"px",margin:0})):a.css({position:"absolute",top:(c(b).height()-d)/2+c(b).scrollTop()+"px",left:(c(b).width()-e)/2+c(b).scrollLeft()+"px",margin:0})}})})(jq||jQuery);
(function(c){c.fn.Tabs=function(a){return(new R9.Widgets.Tabs(this.get(),a)).element};R9.extend("Widgets",{Tabs:function(a,b){this.element=c(a);this.options=c.extend({},this.options,b);this.init();return this}});R9.extend("Widgets.Tabs.prototype",{element:null,tabSets:[],options:{tabNavClass:".tabs",tabNavItemClass:".tab",tabPanelsClass:".tab-panels",tabPanelClass:".tab-panel"},init:function(){this.tabSets=[];this.getTabSets().bindEvents()},getTabSets:function(){var a=this;this.element.find(this.options.tabNavClass).each(function(){var b=
c(this).data("content"),d=b?c(b):c(this).next(a.options.tabPanelsClass);!d.length&&b&&(d=c(this).next(a.options.tabPanelsClass),d.length||console.log("WARNING: Couldn't find content panels for tabs."));var e=c(this).find(a.options.tabNavItemClass),f=d.find(a.options.tabPanelClass);e.each(function(){var b=c(this),h=b.data("order"),l=c.inArray(b.get(0),e),k=h?c(d).find(a.options.tabPanelClass+"[data-order\x3d"+h+"]"):c(f.get(l));!k.length&&h&&(k=c(f.get(l)),k.length||console.log("WARNING: Couldn't find content panel for tab."));
b.data("panel",k)});a.tabSets.push({nav:c(this),panels:d})});return this},bindEvents:function(){function a(a){c(this).on("click",function(){b.toggleTab(c(this),a)})}for(var b=this,d=0;d<this.tabSets.length;d++){var e=this.tabSets[d],f=e.nav.find(this.options.tabNavItemClass);f.each(a,[e]);this.toggleTab(f.first(),e)}return this},toggleTab:function(a,b){var d=b.nav.find(this.options.tabNavItemClass);b=b.panels.find(this.options.tabPanelClass);d.each(function(){c(this).removeClass("selected")});b.each(function(){c(this).removeClass("visible").css({display:"none"})});
a.addClass("selected").data("panel").addClass("visible").css({display:"block"})}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{UndoBox:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.UndoBox.prototype",{widgetName:"undoBox",elementNode:null,element:null,options:{contentDivSelector:"",undoMessageClass:"undoMessage",undoMessage:"",undoLinkClass:"undoLink",undoLinkText:"Undo",doTimeout:!0,timeout:6E4,undoAction:null,clickAction:null,show:"",hide:""},init:function(){this.element.data(this.widgetName,
this);this.build().bindEvents().open();this.setNewTimeout();return this},clearExistingTimeout:function(){"undefined"!==typeof this.element.data("existingtimeout")&&clearTimeout(this.element.data("existingtimeout"));return this},setNewTimeout:function(a){this.clearExistingTimeout();if(!this.options.doTimeout)return this;a=a||this.options.timeout;var b=this;a=setTimeout(function(){b.close()},a);this.element.data("existingtimeout",a);return this},bindEvents:function(){var a=this;c("."+this.options.undoLinkClass,
this.element).off("click").on("click",function(){a.action.call(a)});c(this.element).off("click").on("click",function(){"function"===typeof a.options.clickAction&&a.options.clickAction.apply(a,[a])});return this},build:function(){var a=c(this.options.contentDivSelector,this.element);0===a.length&&(a=this.element);var b=c(document.createElement("span")).addClass(this.options.undoMessageClass).html(this.options.undoMessage),d=c(document.createElement("span")).addClass(this.options.undoLinkClass).attr("title",
this.options.undoLinkText).html(this.options.undoLinkText);a.html("").append(b).append(d);return this},action:function(){"function"===typeof this.options.undoAction&&(this.options.undoAction(),this.close());return this},open:function(){this.element.show(this.options.show);return this},close:function(){this.element.hide(this.options.hide);return this}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{Favorites:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.Favorites.prototype",{widgetName:"r9Favorites",widgetBaseClass:"r9-favorites",elementNode:null,element:null,options:{},init:function(){this.element.data(this.widgetName,this);this.element.delegate(".pinnedItem","mouseover",this.mouseOver);this.element.delegate(".pinnedItem","mouseout",this.mouseOut)},
validateElement:function(){return 0<this.element.length&&this.element.hasClass(this.widgetBaseClass)&&void 0===this.element.data(this.widgetName)},mouseOver:function(a){a.currentTarget.getAttribute("id").split("-")},mouseOut:function(a){a.currentTarget.getAttribute("id").split("-")},getOption:function(a){return this.options[a]},setOption:function(a,b){if("object"==typeof a)for(var d in a)a.hasOwnProperty(d)&&(this.options[d]=a[d]);else this.options[a]=b;this.setValues(this.options.values)}})})(jq||
jQuery);
(function(c){R9.extend("Widgets",{FavoritesCount:function(a,b){this.elementNode=a;this.element=c(this.elementNode);if(!this.validateElement())return this;this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.FavoritesCount.prototype",{widgetName:"r9FavoritesCount",widgetBaseClass:"r9-favoritesCount",elementNode:null,element:null,options:{favorites:null,parentNode:null},init:function(){this.element.data(this.widgetName,this);var a=this;this.updateCount();this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_ADDED,"ts",
function(b,d,c){a.updateCount()});this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_REMOVED,"ts",function(b,d,c){a.updateCount()})},validateElement:function(){return 0<this.element.length&&this.element.hasClass(this.widgetBaseClass)&&void 0===this.element.data(this.widgetName)},updateCount:function(){var a=0;null!=this.options.favorites&&(a=this.options.favorites.count);this.element.text(" ("+a+")")},show:function(){this.options.parentNode.removeClass("hidden")},hide:function(){this.options.parentNode.addClass("hidden")}})})(jq||
jQuery);R9.messages=R9.messages||{};R9.messages.like="#msg('hrp.FAVORITES_RESULT_TEXT_TIPTIP')";R9.messages.unlike="#msg('hrp.FAVORITES_RESULT_TEXT_UNLIKE_TIPTIP')";
(function(c){R9.extend("Widgets",{Like:function(a,b){this.elementNode=a;this.element=c(this.elementNode);if(!this.validateElement())return this;this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.Like.prototype",{widgetName:"r9Like",widgetBaseClass:"r9-like",elementNode:null,element:null,options:{liked:!1,hotelid:null,favorites:null,anonymous:!0},init:function(){this.element.data(this.widgetName,this);for(var a in this.element.data())this.options.hasOwnProperty(a)&&(this.options[a]=
"hotelid"===a?this.element.attr("data-hotelid"):this.element.data(a));null!=this.options.hotelid&&this.options.favorites.isFavorite(this.options.hotelid)&&(this.options.liked=!0);this.initializeElement();var b=this;this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_ADDED,"ts",function(a,c,f){f.id!==b.options.hotelid||b.options.liked||(b.options.liked=!0,b.updateElement())});this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_REMOVED,"ts",
function(a,c,f){f.id===b.options.hotelid&&b.options.liked&&(b.options.liked=!1,b.updateElement())})},validateElement:function(){return 0<this.element.length&&this.element.hasClass(this.widgetBaseClass)&&void 0===this.element.data(this.widgetName)},handleClickEvent:function(a){stopPropagationAndDefault(a);if(this.options.anonymous){var b=this;R9.Analytics.api.trackEvent("favorites/addAnonymous");AjaxReg.regtype="favorites";AjaxReg.ui.login({success:function(){addFavorite(b.options.hotelid,!0,function(){location.reload(!0);
R9Anon=!1})}})}else this.options.liked?(R9.Analytics.api.trackEvent("favorites/remove"),removeFavorite(this.options.hotelid)):(R9.Analytics.api.trackEvent("favorites/add"),addFavorite(this.options.hotelid))},updateElement:function(){this.options.liked?this.element.addClass("thumbUpBtnActive"):this.element.removeClass("thumbUpBtnActive")},initializeElement:function(){var a=this;this.element.bind("click",function(b){a.handleClickEvent(b)});this.options.liked?this.element.addClass("thumbUpBtnActive"):
this.element.removeClass("thumbUpBtnActive")}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{FavoriteToggle:function(a,b){this.elementNode=a;this.element=c(a);if(!this.validateElement())return this;this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.FavoriteToggle.prototype",{widgetName:"r9FavoriteToggle",widgetBaseClass:"r9-FavoriteToggle",elementNode:null,element:null,options:{favorites:null,hotelDataKey:"data-hotelid",hotelID:null,userFavorite:null},init:function(){this.element.data(this.widgetName,this);this.options.hotelID||(this.options.hotelID=
this.element.attr(this.options.hotelDataKey));this.options.favorites=this.options.favorites||window.favorites;if(this.options.favorites&&this.options.hotelID){this.options.userFavorite=this.options.favorites.isFavorite(this.options.hotelID);this.initializeElement();var a=this,b=function(b,c,f){f&&f.id===a.options.hotelID&&(a.options.userFavorite=!a.options.userFavorite,a.updateElement())};this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_ADDED,"tfid",b);this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_REMOVED,
"tfid",b)}},validateElement:function(){var a=this.element;return a&&0<a.length&&a.hasClass(this.widgetBaseClass)&&void 0===a.data(this.widgetName)},handleClickEvent:function(a){stopPropagationAndDefault(a);this.element.hasClass("userPendingFavorite")||(this.element.addClass("userPendingFavorite"),this.options.userFavorite?(R9.Analytics.api.trackEvent("favorites/remove"),removeFavorite(this.options.hotelID)):(R9.Analytics.api.trackEvent("favorites/add"),addFavorite(this.options.hotelID)))},updateElement:function(){this.element.removeClass("userPendingFavorite");
this.options.userFavorite?this.element.addClass("userFavorite"):this.element.removeClass("userFavorite")},initializeElement:function(){var a=this;this.element.bind("click",function(b){a.handleClickEvent(b)});this.updateElement()}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{Share:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.options=c.extend({},this.options,b);this.init()}});R9.extend("Widgets.Share.prototype",!0,R9.Widgets.RadiobuttonSet.prototype,{widgetName:"r9Share",widgetBaseClass:"r9-radiobuttonset",elementNode:null,element:null,options:{shareUrl:"",facebookCallback:c.noop,twitterCallback:c.noop,mailCallback:c.noop,linkCallback:c.noop,defaultCallback:function(a,b,d){alert("callback not implemented")}},
handleElementClickEvent:function(a,b,d){switch(a.value){case "facebook":this.options.facebookCallback(a,b,d);break;case "twitter":this.options.twitterCallback(a,b,d);break;case "mail":this.options.mailCallback(a,b,d);break;case "link":this.options.linkCallback(a,b,d);break;default:this.options.defaultCallback(a,b,d)}},handleElementChangeEvent:function(){}})})(jq||jQuery);
(function(c){c.fn.newDialog=function(a){return(new R9.Widgets.Dialog(this.get(),a)).element};c.fn.newDropdownDialog=function(a){return(new R9.Widgets.DropdownDialog(this.get(),a)).element}})(jq||jQuery);
(function(c){R9.extend("Widgets.Smarty",{Smarty:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.Smarty.Smarty",{isInput:function(a){return a&&a.nodeName&&"input"==a.nodeName.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.Smarty.Smarty.prototype.widgetBaseClass+"-input")},getDropdownEl:function(a){return jq(a).find("#smartbox")},getDropdownId:function(a){return"smartbox"}});
R9.extend("Widgets.Smarty.Smarty.prototype",{widgetName:"smarty",widgetBaseClass:"r9-smarty",elementNode:null,element:null,dropdown:null,lastValue:null,aria:!1,trimInputElements:"span.nearbyHotels, span.nearbyRentals, span.showRank",lastClickOnScrollbar:!1,keyTimeout:null,isHighlightKeyPressed:!1,isItemSet:!1,backgroundAutocomplete:null,activeAnimation:!0,options:{minLength:0,appendTo:"body",dropdown:null,fixedDropdown:!1,initialData:null,initialDataLoadWithCallback:null,searchOnFocus:!1,showDropdownWhenEmpty:!1,
dataSource:null,dataType:"text",minWidth:10,maxWidth:1024,noAutoWidth:!1,position:"left",dropdownClass:null,setItem:null,beforeStart:null,afterDone:null,dropdownListSelector:"ul li[class!\x3d'separator']",keyDelay:200,forceSelection:!1,makeHTML:null,translateItem:null,display:"inline",showBackgroundAutocomplete:!1,backgroundAutocompleteMinLength:3,getBackgroundAutocompletePositionProps:null,delayShowDropdown:null,showDropdownDelay:200,enableRemoteHide:!1,zIndex:9999,continents:[],showContinents:!1,
onInputValueChange:function(a){},forceSelectionOfHighlightedItem:!0},init:function(){var a=this;this.aria=R9.config&&R9.config.getBoolean("ui.smarty.aria",!0);R9.config&&(this.options.zIndex=R9.config.getInt("ui.smarty.zIndex",9999));this.initDropdown();R9.globals.browserCapabilities.scrollbarRetainsInputFocus&&"false"!==R9.globals.browserCapabilities.scrollbarRetainsInputFocus||this.trackScrollbarClick();this.bindInputEvent("focus",this.handleInputFocusEvent);this.bindInputEvent("blur",this.handleInputBlurEvent);
this.bindInputEvent("keydown",this.handleInputKeydownEvent);this.bindInputEvent("textchange",this.handleInputChangeEvent);c(window).on("scroll.smarty",function(){a.position()});c(window).resize(this.handleWindowResize.bind(a));this.element.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"});this.aria&&this.element.attr({role:"combobox","aria-autocomplete":this.options.showBackgroundAutocomplete?"both":"list"});this.element.data(this.widgetName,this);this.element.is(":focus")&&this.element.focus();
this.initBackgroundAutocomplete()},unInit:function(){this.unbindInputEvent("focus");this.unbindInputEvent("blur");this.unbindInputEvent("keydown");this.unbindInputEvent("textchange");c(window).off("scroll.smarty");this.dropdown.off("mousedown.trackScrollbarClick");jq("body").off("click.trackScrollbarClick")},initDropdown:function(){var a=R9.Widgets.Smarty.Smarty.getDropdownEl(this.element),b=R9.Widgets.Smarty.Smarty.getDropdownId(this.element),a=jq(a)[0];if(null==a){var d=R9.Widgets.Smarty.Smarty.prototype.widgetBaseClass;
this.options.dropdownClass&&(d=d+" "+this.options.dropdownClass);a=jq("\x3cdiv\x3e\x3c/div\x3e",{id:b,css:{display:"none",position:"absolute",width:"auto",zIndex:1E4},role:"dialog",tabindex:"0"}).appendTo(this.options.appendTo)[0];jq(a).addClass(d)}this.dropdown=jq(a)},validateElement:function(){return R9.Widgets.Smarty.Smarty.isInput(this.elementNode)&&R9.Widgets.Smarty.Smarty.isWidgetControlled(this.element)},trackScrollbarClick:function(){var a=this;a.dropdown.on("mousedown.trackScrollbarClick",
function(b){a.lastClickOnScrollbar=!0;b.stopPropagation();jq("body").trigger("event",[b])});jq("body").on("click.trackScrollbarClick",function(b){R9.Common.Utils.Browsers.isIE()&&a.lastClickOnScrollbar&&(a.lastClickOnScrollbar=!1,a.element.blur());a.lastClickOnScrollbar=!1})},bindInputEvent:function(a,b){var d=this;a+="."+this.widgetName;this.element.off(a).on(a,function(a){return b.call(d,this,a)})},unbindInputEvent:function(a){a+="."+this.widgetName;this.element.off(a)},bindDropdownEvent:function(a,
b){var d=this;this.dropdown.off(a,this.options.dropdownListSelector).on(a,this.options.dropdownListSelector,function(a){b.call(d,this,a)})},handleInputKeydownEvent:function(a,b){this.activeAnimation=this.focusEventHandled=!1;var d=b.keyCode?b.keyCode:b.which;switch(d){case 38:return this.highlitePrevItem(),!1;case 40:return this.highliteNextItem(),!1;case 27:return!this.hideDropdown();case 13:return this.selectHighlightedItemWhenSearchCompleted(d);case 9:if(this.canItemBeActivatedByTab()){if(R9.config.getBoolean("ui.common.smarty.anywhere-on-tab-check.enabled",
!1)&&this.isItAnywhereItem())return this.selectHighlightedItemWhenSearchCompleted(d);this.options.forceSelectionOfHighlightedItem&&this.selectHighlitedItem(d)}break;default:this.handleKeydownBeforeAutocomplete(a,b),this.abortSearchCompletedEventListeners()}},isItAnywhereItem:function(){var a=this.getItemList(),b=this.getHighlitedItemIndex();return(a=a[b])?"anywhere"==a.getAttribute("data-short-name")?!0:!1:!1},canItemBeActivatedByTab:function(){var a=this.getItemList(),b=this.getHighlitedItemIndex();
return(a=c(a[b]))?!(a.hasClass("signupnow")||a.hasClass("signup")||a.hasClass("showHistory")||a.hasClass("js-not-selectable")):!1},handleInputChangeEvent:function(a,b){if(this.focusEventHandled)this.focusEventHandled=!1;else{if(!R9.Common.Utils.Browsers.isIE(10)&&!R9.Common.Utils.Browsers.isIE(11)||this.element.is(":focus")){this.abortKeyTimeout();this.abortRequest();this.onInputChange();var d=this;this.keyTimeout=setTimeout(function(){d.keyTimeout=null;d.handleInputValue()},this.options.keyDelay)}this.activeAnimation=
!1}},onInputChange:function(){this.isItemSet=!1;var a=this.getHighlitedItem();a&&!this.itemMatches(a,this.element.val())&&this.removeItemHighlight();"function"===typeof this.options.clearItem&&this.options.clearItem(this);try{this.element&&(jq(this.element).removeClass("smarty-complete"),jq(this.element).removeClass("four-twenty"),jq(this.element).addClass("smarty-incomplete"),R9.events.publish("smarty.setitem.incomplete",{id:this.element.attr("id")}))}catch(b){}},handleInputValue:function(){var a=
this.element.val();this.options.onInputValueChange(a);this.element.length&&0<a.length?(this.abortRequest(),this.runSearch(!0)):this.options.showDropdownWhenEmpty?(this.abortRequest(),this.showInitialDropdown()):(this.dropdown[0].innerHTML="",this.hideDropdown())},handleInputFocusEvent:function(a,b){jq(a).trigger("smartyfocus");var d=this;if(!d.lastClickOnScrollbar){var c=function(){d.checkAlive()&&setTimeout(c,250)};setTimeout(c,250);this.onBeforeStart(b);this.runSearchOnFocus()&&(this.focusEventHandled=
!0,0!=this.element.val().length||this.runNoQuerySearch()?this.runSearch(!!b):null!==this.options.initialDataLoadWithCallback?this.options.initialDataLoadWithCallback(function(a){d.showInitialDropdownForData(a)}):this.showInitialDropdown())}},runSearchOnFocus:function(){return this.options.searchOnFocus},runNoQuerySearch:function(){return this.options.searchNoQuery},onBeforeStart:function(a){"function"===typeof this.options.beforeStart&&this.options.beforeStart(this,a)},handleInputBlurEvent:function(a,
b){this.focusEventHandled=!1;var d=this;setTimeout(function(){if(d.lastClickOnScrollbar)R9.Common.Utils.Browsers.isIE()||(d.element.focus(),d.lastClickOnScrollbar=!1);else{d.stopInputProcessing();if(d.hideDropdown()&&d.options.forceSelection)d.onForceSelection();d.onAfterDone()}},10)},stopInputProcessing:function(){this.isUpdateInProgress()&&(this.abortKeyTimeout(),this.abortRequest(),this.removeItemHighlight())},isUpdateInProgress:function(){return this.keyTimeout||this.request},onForceSelection:function(){if(!this.isItemSet&&
""!==this.element.val()){var a=this.getHighlitedItem();a&&this.selectItem(a,null)}},onAfterDone:function(){"function"===typeof this.options.afterDone&&this.options.afterDone(this)},handleItemMouseoverEvent:function(a,b){this.getItemList().removeClass("selected");jq(a).not(".js-not-selectable").addClass("selected")},handleItemMouseoutEvent:function(a,b){jq(a).removeClass("selected")},handleItemMousedownEvent:function(a,b){b.stopPropagation();jq("body").trigger("event",[b]);this.selectItem(a,null);
this.hideDropdown()},selectHighlitedItem:function(a){var b=this.getItemList();if(b){var d=this.getHighlitedItemIndex();0>d?13==a&&this.noItemToSelect():(b=b[d])&&this.selectItem(b,a)}else 13==a&&this.noItemToSelect()},selectHighlightedItemWhenSearchCompleted:function(a){var b=this;if(this.isItemSet&&!this.isHighlightKeyPressed){if(this.isDropdownHidden()&&13===a)return!0;this.hideDropdown();return!1}this.selectHighlitedItem(a);this.hideDropdown(!this.isItemSet);if(this.isItemSet)return!1;this.element.one("searchCompleted",
function(){b.selectHighlitedItem(a);b.hideDropdown()});return!1},noItemToSelect:function(){},selectItem:function(a,b){a=this.translateItem(a);this.setItem(a,b)},translateItem:function(a){return"function"===typeof this.options.translateItem?this.options.translateItem(a):a},setItem:function(a,b){if(this.element)try{if(a){jq(this.element).addClass("smarty-complete");jq(this.element).removeClass("smarty-incomplete");jq(this.element).removeClass("four-twenty");if(R9.config.getBoolean("ui.four-twenty.enabled",
!1)&&"string"===typeof a.str){var d=!1,c=R9.config.getString("ui.four-twenty.states","").split(";"),f=a.str.match(/^[^,]+,\s+([A-Z]{2})(\s|$)/);(f=f?f[1]:null)&&-1!==c.indexOf(f)&&(d=!0);for(var g=R9.config.getString("ui.four-twenty.cities","").split(";"),c=0;c<g.length;c++)""!==g[c]&&-1!==a.str.indexOf(g[c])&&(d=!0);d&&jq(this.element).addClass("four-twenty")}R9.events&&R9.events.publish("smarty.setitem.complete",{id:this.element.attr("id")})}else jq(this.element).addClass("smarty-incomplete"),jq(this.element).removeClass("smarty-complete"),
jq(this.element).removeClass("four-twenty"),R9.events&&R9.events.publish("smarty.setitem.incomplete",{id:this.element.attr("id")})}catch(h){}"function"===typeof this.options.setItem?(this.isItemSet=!0,this.options.setItem(this,a,b)):a?(this.isItemSet=!0,this.element.val(jq(a).text())):(this.isItemSet=!1,this.element.val(""))},showInitialDropdown:function(){this.showInitialDropdownForData(this.onInitialData())},showInitialDropdownForData:function(a){a&&this.searchCompleted(a,!1)},onInitialData:function(){return"function"===
typeof this.options.initialData?this.options.initialData(this):this.options.initialData},runSearch:function(a){var b=this.element.val();if(!(b.length<this.options.minLength||this.lastValue==b)){var d=this.getRequestData(),d=this.preprocessRequest(d),c=this,f=function(d){c.request=null;c.lastValue=b;d=c.postprocessResponse(d,a);c.searchCompleted(d,a)};if("function"===typeof this.options.dataSource)this.options.dataSource(d,f,this,a);else if(R9.config.getBoolean("ui.common.smarty.get.enabled",!1)){var g=
this.getDataSource();d.cv=R9.config.getString("ui.common.smarty.get.version","1");this.request=jq.ajax({type:"GET",url:g,data:d,dataType:this.options.dataType,cache:!0,success:f})}else this.request=jq.post(this.getDataSource(),d,f,this.options.dataType)}},getDataSource:function(){return this.options.dataSource},preprocessRequest:function(a){return a},getRequestData:function(){return{value:this.element.val(),formtoken:R9.globals.formtoken}},searchCompleted:function(a,b){(a=this.canShowDropdown(a))?
this.showDropdown(a,b):(this.dropdown[0].innerHTML="",this.hideDropdown());this.element.trigger("searchCompleted",!!a)},canShowDropdown:function(a){return a},abortSearchCompletedEventListeners:function(){this.element.off("searchCompleted")},postprocessResponse:function(a,b){return a},makeHTML:function(a){return"function"===typeof this.options.makeHTML?this.options.makeHTML(a):a},animateSmartyV2:function(a){var b=this;this.dropdown.addClass("smarty-animation-v2");a?this.activeAnimation?(this.dropdown.addClass("open-animation"),
this.dropdown.removeClass("close-animation"),setTimeout(function(){b.dropdown.show()},480)):b.dropdown.show():this.activeAnimation?(this.dropdown.addClass("close-animation"),this.dropdown.removeClass("open-animation"),setTimeout(function(){b.dropdown.hide()},480)):b.dropdown.hide()},showDropdown:function(a,b){if("function"===typeof this.options.delayShowDropdown&&this.options.delayShowDropdown()&&!this.showDropdownTimeout)this.showDropdownTimeout=setTimeout(this.showDropdown.bind(this,a,b),this.options.showDropdownDelay);
else{null!==this.showDropdownTimeout&&(clearTimeout(this.showDropdownTimeout),this.showDropdownTimeout=null);b=this.dropdown[0].style;var d=this.makeHTML(a);this.dropdown[0].innerHTML=d;d=R9.Widgets.Smarty.Smarty.prototype.widgetBaseClass;this.options.dropdownClass&&(d=d+" "+this.options.dropdownClass);this.dropdown.attr("class",d);a.length?this.dropdown.removeClass("empty"):this.dropdown.addClass("empty");this.position();this.aria&&(this.element.attr({"aria-expanded":!0}),this.dropdown.find("ul").attr("role",
"listbox"),this.dropdown.find("li").not(".js-not-option").attr("role","option"));R9.config.getBoolean("ui.smarty.animate",!1)&&this.dropdown.slideDown(R9.config.getInt("ui.smarty.animation.ms",250));b.visibility="visible";b.display=this.options.display;jq.fn.zIndex&&(b.zIndex=jq(this.element).zIndex()+this.options.zIndex);this.bindDropdownEvent("mousedown",this.handleItemMousedownEvent);this.bindDropdownEvent("mouseover",this.handleItemMouseoverEvent);this.bindDropdownEvent("mouseout",this.handleItemMouseoutEvent);
this.removeItemHighlight();""!==this.element.val()&&this.highlightFirstSelectableItem();R9.config.getBoolean("ui.smarty.animation.v2",!1)&&this.animateSmartyV2(!0)}},position:function(){var a=this.dropdown[0].style,b=0;this.dropdown.parent()[0]===jq(document.body)[0]&&(b=parseInt((jq(document.body).css("top")||"0").replace("-",""))||0);this.dropdown.css("width","auto");var d=this.dropdown.outerWidth(!0),c=!1;this.options.minWidth&&d<=this.options.minWidth&&(d=Math.max(this.options.minWidth,d),c=!0);
this.options.maxWidth&&d>=this.options.maxWidth&&(d=Math.min(this.options.maxWidth,d),c=!0);a.width=c||this.options.noAutoWidth?d+"px":"auto";var c=this.element.offset(),f=jq(this.options.appendTo).offset(),g=c.left-f.left;"right"===this.options.position&&(g+=this.element.width()-d-2);a.left=g+"px";a.top=b+c.top+this.element.outerHeight()-f.top+"px"},isDropdownHidden:function(){return"none"==this.dropdown.css("display")||"hidden"==this.dropdown.css("visibility")},hideDropdown:function(a){a||(this.abortKeyTimeout(),
this.abortRequest());this.isHighlightKeyPressed=!1;this.lastValue=null;if(this.isDropdownHidden())return!1;R9.config.getBoolean("ui.smarty.animation.v2",!1)?this.animateSmartyV2(!1):this.dropdown.hide();this.aria&&this.element.attr({"aria-expanded":!1});this.setBackgroundAutocomplete();return!0},abortRequest:function(){if(this.request){try{this.request.abort()}catch(a){}this.request=null}},abortKeyTimeout:function(){this.keyTimeout&&(clearTimeout(this.keyTimeout),this.keyTimeout=null)},highliteNextItem:function(){var a=
this.getItemList(),b=nsel=this.getHighlitedItemIndex();-1==b?nsel=0:b<a.length-1&&(nsel=b+1);b!=nsel&&(jq(a[b]).removeClass("selected"),jq(a[b]).trigger("mouseout"),jq(a[nsel]).addClass("selected"),jq(a[nsel]).trigger("mouseover"),this.isHighlightKeyPressed=!0,this.setBackgroundAutocomplete(a[nsel]))},highlitePrevItem:function(){var a=this.getItemList(),b=nsel=this.getHighlitedItemIndex();-1==b?nsel=0:0<b&&(nsel=b-1);b!=nsel&&(jq(a[b]).removeClass("selected"),jq(a[b]).trigger("mouseout"),jq(a[nsel]).addClass("selected"),
jq(a[nsel]).trigger("mouseover"),this.isHighlightKeyPressed=!0,this.setBackgroundAutocomplete(a[nsel]))},highlightFirstSelectableItem:function(){for(var a=this.getItemList(),b=0;b<a.length;b++){var d=jq(a[b]);if(!d.hasClass("hist")&&!d.hasClass("js-not-selectable")){d.addClass("selected");this.setBackgroundAutocomplete(a[b]);return}}jq(a[0]).addClass("selected");this.setBackgroundAutocomplete(a[0])},removeItemHighlight:function(){jq(this.getItemList()).removeClass("selected")},getHighlitedItemIndex:function(){for(var a=
this.getItemList(),b=a.length,d=0;d<b;d++)if(jq(a[d]).hasClass("selected"))return d;return R9.config.getBoolean("ui.smarty.auto.select.1st",!1)&&0<b?0:-1},getHighlitedItem:function(){for(var a=this.getItemList(),b=a.length,d=0;d<b;d++)if(jq(a[d]).hasClass("selected"))return a[d];return R9.config.getBoolean("ui.smarty.auto.select.1st",!1)&&0<b?a[0]:null},getItemList:function(){return this.dropdown.find(this.options.dropdownListSelector)},itemMatches:function(a,b){return a?0<=jq(a).text().toLowerCase().indexOf(b.toLowerCase()):
!1},checkAlive:function(){return this.element.closest("html").length?this.element.is(":visible")?!0:(this.hideDropdown(),!1):(this.hideDropdown(),this.unInit(),!1)},initBackgroundAutocomplete:function(){!this.backgroundAutocomplete&&this.options.showBackgroundAutocomplete&&(this.options.backgroundAutocompleteMinLength=R9.config.getInt("ui.common.smarty.background.autocomplete.min.length",3),this.backgroundAutocomplete=jq("\x3cinput/\x3e",{id:this.element.attr("id")+"-bg-autocomplete","class":this.element.attr("class"),
type:"text",tabindex:"-1"}).insertBefore(this.element),this.updateBackgroundAutocompletePosition(),this.backgroundAutocomplete.css("color",this.element.css("color").replace(")",", 0.27)").replace("rgb","rgba")),this.backgroundAutocomplete.addClass("smarty-bg-autocomplete"),this.element.addClass("smarty-with-bg-autocomplete"))},updateBackgroundAutocompletePosition:function(){if(this.options.showBackgroundAutocomplete)if("function"===typeof this.options.getBackgroundAutocompletePositionProps)this.backgroundAutocomplete.css(this.options.getBackgroundAutocompletePositionProps());
else{var a=this.element.is(":visible")?this.element.outerHeight():this.element.height();this.backgroundAutocomplete.css({"margin-bottom":"-"+a+"px"})}},handleKeydownBeforeAutocomplete:function(a,b){if(this.options.showBackgroundAutocomplete){var d=this;setTimeout(function(){var a=d.backgroundAutocomplete.val(),b=d.element.val();b.length>=d.options.backgroundAutocompleteMinLength&&b.length<a.length&&!d.isDropdownHidden()?d.backgroundAutocomplete.val(b+a.substr(b.length)):d.backgroundAutocomplete.val("")},
1)}},setBackgroundAutocomplete:function(a){if(this.options.showBackgroundAutocomplete){var b=this.element.val();if(a&&b.length>=this.options.backgroundAutocompleteMinLength){var d=this.getBackgroundAutocompleteText(a);if(0<d.length){a=d.toUpperCase().indexOf(b.toUpperCase());this.backgroundAutocomplete.val(-1===a?"":b+d.substr(a+b.length));return}}this.backgroundAutocomplete.val("")}this.aria&&a&&a.attributes.id&&(b=jq(a).find(this.trimInputElements).filter(function(){return jq(this).is(":visible")}),
0<b.length&&(d=jq(a).clone(),d.find(this.trimInputElements).remove(),jq(a).attr("aria-label",d.text()+" "+b.text())),this.element.attr({"aria-activedescendant":a.attributes.id.value}))},getBackgroundAutocompleteText:function(a){a=this.translateItem(a);return"string"===typeof a.str?a.str:""},handleWindowResize:function(){this.updateBackgroundAutocompletePosition()}})})(jq||jQuery);
R9.extend("Widgets.Smarty",{FlareSmarty:function(c,a){R9.Widgets.Smarty.Smarty.call(this,c,jq.extend({dataSource:"/mv/marvel"},a));var b=this;jq(".mapViewOuter .filterWrapper").scroll(function(){R9.Widgets.Smarty.Smarty.prototype.handleInputBlurEvent.call(b)})}});R9.extend("Widgets.Smarty.FlareSmarty",!0,{setRunSearchNextFocus:function(c){R9.Widgets.Smarty.FlareSmarty.runSearchNextFocus=c},runSearchNextFocus:!0});
R9.extend("Widgets.Smarty.FlareSmarty.prototype",!0,R9.Widgets.Smarty.Smarty.prototype,{translateItem:function(c){if(!c)return null;var a=jq(c).clone()[0];c=a.id.split("-");var b="";1<c.length&&0>c[1].indexOf(" ")&&(b=c[1]);jq(a).find("span.airportCode, span.region-label, span.nearbyHotels, span.nearbyRentals, span.smarty-emoji, span.smarty-label, span.smarty-popular, span.smarty-city-popular, span.smarty-air-popular, span.showRank").remove();var d=jq(a).attr("data-text-to-select"),d=d&&0<jq.trim(d).length?
d:jq(a).text(),a={type:c[0],id:b,str:d,name:d,short_str:jq(a).attr("data-short-name"),cc:jq(a).attr("data-cc")||"",apicode:a.getAttribute("data-apicode")};"isl"===a.type&&1<c.length&&(b=c[1].split("/"),a.str=b[0]);2<c.length&&(a.hc=c[2]);3<c.length&&("hotel"===a.type?a.hid=c[3]:"rest"===a.type?a.rtid=c[3]:"freereg"===a.type?a.frid=c[3]:"reg"===a.type?a.rid=c[3]:"ctry"===a.type?a.cid=c[3]:"ctgroup"===a.type?a.cgid=c[3]:"hood"===a.type?a.nhid=c[3]:a.lmid=c[3]);return a},preprocessRequest:function(c){var a=
{};this.options.extendRequest&&(a="function"===typeof this.options.extendRequest?this.options.extendRequest(this,c):this.options.extendRequest);var b={};this.options.v&&(b.v=this.options.v);b.f="h";this.options.f&&(b.f=this.options.f);b.where=c.value;b.s=this.getFlareSmartyType()||-1;b.lc_cc=R9.globals.locale.lc_cc;b.lc=R9.globals.locale.lc;return jq.extend(b,a)},runSearchOnFocus:function(){var c=R9.Widgets.Smarty.FlareSmarty.runSearchNextFocus;R9.Widgets.Smarty.FlareSmarty.runSearchNextFocus=!0;
return R9.Widgets.Smarty.Smarty.prototype.runSearchOnFocus.call(this)&&c},onInitialData:function(){var c=this.generateTopDestinations()||R9.Widgets.Smarty.Smarty.prototype.onInitialData.call(this)||this.makeRecentList(null,!0),a=this.generateAnywhereMarkup(),b=this.generateLoginBar(c||a),d=this.generateContinentsMarkup();if(c)return this.placeAnywhereMarkup(c,(a?a:"")+b);c=[];this.appendToInitialData(c);a&&c.push(a);d&&c.push(d);this.options.smartyControlGroup&&R9.globals.canLogin&&"undefined"!==
typeof b&&c.push(b);return c.length?"\x3cul\x3e"+c.join("")+"\x3c/ul\x3e":""},appendToInitialData:function(c){},generateTopDestinations:function(){if(this.options.smartyControlGroup){var c=this.options.smartyControlGroup.getTopDestinations();if(c){var a=c.getItems(),b=c.getMaxItems();return(c=a&&a.filter(function(a,c){return c<b}).map(this.createTopDestinationItem.bind(this)).join(""))&&""!==c?"\x3cul\x3e"+c+"\x3c/ul\x3e":null}}},createTopDestinationItem:function(c){return""},generateAnywhereMarkup:function(c){},
generateContinentsMarkup:function(){},placeAnywhereMarkup:function(c,a){return c?R9.config.getBoolean("ui.smarty.anywhereFirst",!1)?c.replace("\x3cul\x3e","\x3cul\x3e"+a):c.replace("\x3c/ul\x3e",a+"\x3c/ul\x3e"):c},placeContinentsMarkup:function(c,a){return c?c.replace("\x3c/ul\x3e",a+"\x3c/ul\x3e"):c},postprocessResponse:function(c,a){var b=c&&/<li/i.test(c),d=this.makeRecentList(a?this.element.val().toUpperCase():null,!b),e=this.generateOtherMarkup(b);a=this.generateAnywhereMarkup(b);var f=this.generateContinentsMarkup();
if(!d&&!b&&!a)return null;if(!b)return c=d?d:"\x3cul\x3e\x3c/ul\x3e",c=e?c.replace("\x3c/ul\x3e",e+"\x3c/ul\x3e"):c,c=this.placeAnywhereMarkup(c,a?a:""),c=this.placeContinentsMarkup(c,f),c+=this.generateLoginBar(!1);c=e?c.replace("\x3c/ul\x3e",e+"\x3c/ul\x3e"):c;c=this.placeAnywhereMarkup(c,a?a:"");d&&(c=c.replace("\x3c/ul\x3e",d+"\x3c/ul\x3e"));return c.replace("\x3c/ul\x3e",this.generateLoginBar(!0)+"\x3c/ul\x3e")},generateOtherMarkup:function(c){return null},selectItem:function(c,a){jq(c).hasClass("hist")&&
this.options.smartyControlGroup?(c=jq(c).data("history-idx"),a=this.options.smartyControlGroup.getHistory(),this.options.smartyControlGroup.setFieldsFromHistoryItem(a.history[c],!1),"undefined"!==typeof this.tempState&&delete this.tempState,R9.Analytics.api.trackEvent("smartyHistory/click/historyItem")):jq(c).hasClass("showHistory")?(window.location.assign("/history"),R9.Analytics.api.trackEvent("smartyHistory/click/seeAllHistory")):jq(c).hasClass("signup")?(AjaxReg.ui.register({promoType:"smarty"}),
R9.Analytics.api.trackEvent("smartyHistory/click/signUp")):jq(c).hasClass("signupnow")?(R9.config.getBoolean("ui.login.staticSignUp")?R9.authentication.showDefault({promoType:"smarty"}):R9.authentication.showSignup(),R9.Analytics.api.trackEvent("smartyHistory/click/signUp"),R9.events.publish("smarty.setitem.complete",{id:this.element.attr("id")})):(c=this.translateItem(c),this.setItem(c,a))},makeRecentList:function(c,a){var b=this.options.recentList,d=null;if(b&&0<b.length){for(var d="",e=0;e<b.length;e++)if(!c||
-1!=b[e].display.toUpperCase().indexOf(c)){var f=b[e].display;c&&(f=this.highliteText(f,c));d+="\x3cli id\x3d'"+b[e].code+"' class\x3d'"+b[e].className+"' data-short-name\x3d'"+b[e].shortName+"'\x3e"+f+"\x3c/li\x3e"}d=""!=d?(a?"\x3cul\x3e":"")+"\x3cli class\x3d'separator'\x3e\x3cb\x3eRecently searched:\x3c/b\x3e\x3c/li\x3e"+d+(a?"\x3c/ul\x3e":""):null}return d},highliteText:function(c,a){a&&(a=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26"),c=c.replace(new RegExp("("+a+")","ig"),"\x3cb\x3e$1\x3c/b\x3e"));
return c},getFlareSmartyType:function(){return this.options.flareSmartyType},setFlareSmartyType:function(c){this.options.flareSmartyType=c},matchAndBold:function(c,a,b,d){if(!c||!a)return a;b=b||"\x3cb\x3e";d=d||"\x3c/b\x3e";var e=0,f=0,g="",h=a,l=c.length;for(c=c.toUpperCase();;){if(0!==e||0!==(f=a.toUpperCase().indexOf(c,e)))if(-1<(f=a.toUpperCase().indexOf(" "+c,e)))f++;else break;e=a.substring(e,f);h=a.substring(f,f+l);g+=e+b+h+d;h=a.substring(f+l,a.length);e=f+l}return g+h},handleItemMouseoverEvent:function(c,
a){this.getItemList().removeClass("selected");jq(c).addClass("selected");!this.isDisabledHistoryPreview()&&jq(c).hasClass("hist")&&this.options.smartyControlGroup&&"undefined"===typeof this.tempState&&(this.tempState=this.options.smartyControlGroup.saveFieldsToHistoryItem(),c=jq(c).data("history-idx"),a=this.options.smartyControlGroup.getHistory(),this.options.smartyControlGroup.setFieldsFromHistoryItem(a.history[c],!0))},handleItemMouseoutEvent:function(c,a){jq(c).removeClass("selected");this.isDisabledHistoryPreview()||
"undefined"===typeof this.tempState||(this.options.smartyControlGroup.setFieldsFromHistoryItem(this.tempState,!0),delete this.tempState)},isDisabledHistoryPreview:function(){return!1},generateLoginBar:function(c){if(!this.options.smartyControlGroup||!R9.globals.canLogin)return"";var a="admin";c&&(a+=" addSeparation");return"undefined"!==typeof R9Anon&&R9Anon?"\x3cli class\x3d'signup "+a+"'\x3eSign up to access recent searches anywhere\x3c/li\x3e":"\x3cli class\x3d'showHistory "+a+"'\x3e See all search history\x3c/li\x3e"},
generateRecentHeader:function(){R9.Common.SmartyHistory.currentSmarty=this;R9.Common.SmartyHistory.currentSmartyHistory=this.options.smartyControlGroup.getHistory();this.hasClearRecentEvent||(this.hasClearRecentEvent=!0,this.dropdown.on("click","ul li.searchHistorySeparator",function(c){c.stopPropagation();c.stopImmediatePropagation()}),this.dropdown.on("mousedown","ul li .clearRecent",function(c){c.stopPropagation();jq("body").trigger("event",[c]);R9.Common.SmartyHistory.SmartyClearHistory()}));
return"\x3cli class\x3d'separator searchHistorySeparator'\x3e\x3cspan class\x3d'separatorLabel'\x3eRecent Searches\x3c/span\x3e\x3ca class\x3d'clearRecent'\x3eclear\x3c/a\x3e\x3c/li\x3e"}});R9.extend("Widgets.Smarty",{EmailSmarty:function(c,a){R9.Widgets.Smarty.Smarty.call(this,c,a)}});R9.extend("Widgets.Smarty.EmailSmarty.prototype",!0,R9.Widgets.Smarty.Smarty.prototype,{});
R9.extend("Widgets.Smarty",{HotelsSmarty:function(c,a){var b=" smartbox smartbox-hotel smartbox-v2";R9.config.getBoolean("ui.smarty.greyIcons",!1)&&(b+=" greyIcons");R9.config.getBoolean("ui.smarty.labels",!1)&&(b+=R9.config.getString("ui.smarty.labelsClasses","greyLabels"));R9.config.getBoolean("ui.hotel.smarty-history",!1)?R9.Widgets.Smarty.FlareSmarty.call(this,c,jq.extend({minWidth:250,dropdownClass:b,forceSelection:!0,flareSmartyType:29,searchOnFocus:!0,extendRequest:{v:"v2"}},a)):R9.Widgets.Smarty.FlareSmarty.call(this,
c,jq.extend({minWidth:250,dropdownClass:b,forceSelection:!0,flareSmartyType:29,extendRequest:{v:"v2"}},a))}});
R9.extend("Widgets.Smarty.HotelsSmarty.prototype",!0,R9.Widgets.Smarty.FlareSmarty.prototype,{makeRecentList:function(c,a){if(this.options.smartyControlGroup){var b=this.options.smartyControlGroup.getHistory();c=jq.trim(c);for(var b=b.filter(c,""==c?10:5),d="",e=0;e<b.length;e++){var f=b[e],g=!1;e==b.length-1&&(g=!0);d+=this.generateSmartyItem(this.matchAndBold(c,f.location),f.checkinDate,f.checkoutDate,f.idx,f.isPast,g)}return d=""!=d?(a?"\x3cul\x3e":"")+this.generateRecentHeader()+d+(a?"\x3c/ul\x3e":
""):null}},generateSmartyItem:function(c,a,b,d,e,f){a=new moment(a);b=new moment(b);return'\x3cli class\x3d"hist '+(f?" last":"")+'" data-history-idx\x3d"'+d+'"\x3e\x3cspan class\x3d"smartyRecentHotels"\x3e'+c+'\x3c/span\x3e\x3cspan class\x3d"smartyRecentDate '+(e?"past":"")+'"\x3e'+a.format(this.options.smartyControlGroup.options.startFormat)+" - "+b.format(this.options.smartyControlGroup.options.endFormat)+"\x3c/span\x3e\x3c/li\x3e"}});
R9.extend("Widgets.Smarty",{FlightsSmarty:function(c,a){var b=" smartbox smartbox-air smartbox-v2";R9.config.getBoolean("ui.smarty.greyIcons",!1)&&(b+=" greyIcons");R9.config.getBoolean("ui.smarty.labels",!1)&&(b+=R9.config.getString("ui.smarty.labelsClasses","greyLabels"));if(R9.config.getBoolean("ui.flight.smarty-history",!1)){R9.Widgets.Smarty.Smarty.call(this,c,jq.extend({dataSource:"/mv/marvel",minWidth:250,dropdownClass:b,forceSelection:!0,flareSmartyType:1,searchOnFocus:!0,extendRequest:{v:"v2"}},
a));var d=this}else R9.Widgets.Smarty.Smarty.call(this,c,jq.extend({dataSource:"/mv/marvel",minWidth:250,dropdownClass:b,forceSelection:!0,flareSmartyType:1,searchOnFocus:!0,extendRequest:{v:"v2"}},a)),d=this;jq(".mapViewOuter .filterWrapper").scroll(function(){R9.Widgets.Smarty.Smarty.prototype.handleInputBlurEvent.call(d)})}});
R9.extend("Widgets.Smarty.FlightsSmarty.prototype",!0,R9.Widgets.Smarty.FlareSmarty.prototype,{makeRecentList:function(c,a){if(this.options.smartyControlGroup){var b=this.options.smartyControlGroup.getHistory(),d="origin"==this.elementNode.name,e="destination"==this.elementNode.name,f;f=this.options.smartyControlGroup.isRoundTrip();c=jq.trim(c);var g=""==c?10:5;if(e)var h=jq(this.options.smartyControlGroup.options.originCode).val();b=b.filter(c,d,g,f,h);e="";for(f=0;f<b.length;f++)g=b[f],h=!1,f==
b.length-1&&(h=!0),e=d?e+this.generateSmartyItem(this.matchAndBold(c,g.departShortName),g.destShortName,g.startDate,g.endDate,g.idx,g.isRoundTrip,g.isPast,h):e+this.generateSmartyItem(g.departShortName,this.matchAndBold(c,g.destShortName),g.startDate,g.endDate,g.idx,g.isRoundTrip,g.isPast,h);return e=""!=e?(a?"\x3cul\x3e":"")+this.generateRecentHeader()+e+(a?"\x3c/ul\x3e":""):null}},generateSmartyItem:function(c,a,b,d,e,f,g,h){b=new moment(b);d=new moment(d);g=g?"past":"";h=h?" last":"";var l=f?"doubleArrow":
"singleArrow";f=f?" - "+d.format(this.options.smartyControlGroup.options.endFormat):"";return'\x3cli class\x3d"hist '+h+'" data-history-idx\x3d"'+e+'"\x3e\x3cspan class\x3d"smartyRecentAirports"\x3e'+c+'\x3cspan class\x3d"arrow '+l+'"\x3e\x3c/span\x3e'+a+'\x3c/span\x3e\x3cspan class\x3d"smartyRecentDate '+g+'"\x3e'+b.format(this.options.smartyControlGroup.options.startFormat)+f+"\x3c/span\x3e\x3c/li\x3e"}});
R9.extend("Widgets.Smarty",{CarsSmarty:function(c,a){var b=this,d=R9.config.getBoolean("ui.car.smarty-history",!1),e=R9.config.getString("ui.cars.search.smartbox.without.history.dropdownClass.suffix","smartbox");d&&(e=R9.config.getString("ui.cars.search.smartbox.with.history.dropdownClass.suffix","smartbox"));e+=this.extraIconClasses(R9.config.getBoolean("ui.smarty.cars.greyIcons",!1));e+=this.extraLabelClasses(R9.config.getBoolean("ui.smarty.cars.labels",!1));R9.Widgets.Smarty.Smarty.call(this,c,
jq.extend({dataSource:"/mv/marvel",minWidth:250,dropdownClass:e,forceSelection:!0,flareSmartyType:R9.config.getInt("ui.car.smarty.flareSmartyType",37),searchOnFocus:!0,extendRequest:{v:"v2"}},a));jq(".mapViewOuter .filterWrapper").scroll(function(){R9.Widgets.Smarty.Smarty.prototype.handleInputBlurEvent.call(b)})}});
R9.extend("Widgets.Smarty.CarsSmarty.prototype",!0,R9.Widgets.Smarty.FlareSmarty.prototype,{extraIconClasses:function(c){return c?" "+R9.config.getString("ui.smarty.iconClasses","greyIcons")+" ":""},extraLabelClasses:function(c){return c?R9.config.getString("ui.smarty.labelsClasses","greyLabels"):""},makeRecentList:function(c,a){var b=this.options.smartyControlGroup;if(b){var d=b.getHistory(),e="location"===this.elementNode.name,b=b.isOneWay();c=jq.trim(c);for(var d=d.filter(c,e,""===c?10:5,b),f=
"",g=0;g<d.length;g++){var h=d[g],l=!1;g===d.length-1&&(l=!0);f=e?f+this.generateSmartyItem(this.matchAndBold(c,h.location),h.location2,this.matchAndBold(c,h.airportCode),h.airportCode2,h.cityName,h.cityName2,h.startDate,h.endDate,h.idx,b,h.isPast,l):f+this.generateSmartyItem(h.location,this.matchAndBold(c,h.location2),h.airportCode,this.matchAndBold(c,h.airportCode2),h.cityName,h.cityName2,h.startDate,h.endDate,h.idx,b,h.isPast,l)}return f=""!==f?(a?"\x3cul\x3e":"")+this.generateRecentHeader()+f+
(a?"\x3c/ul\x3e":""):null}},generateSmartyItem:function(c,a,b,d,e,f,g,h,l,k,p,n){a=new moment(g);h=new moment(h);p=p?"past":"";n=n?" last":"";return k?'\x3cli class\x3d"hist '+n+'" data-history-idx\x3d"'+l+'"\x3e\x3cspan class\x3d"smartyRecentCars"\x3e'+(b||e)+'\x3cspan class\x3d"arrow singleArrow"\x3e\x3c/span\x3e'+(d||f)+'\x3c/span\x3e\x3cspan class\x3d"smartyRecentDate '+p+'"\x3e'+a.format(this.options.smartyControlGroup.options.startFormat)+" - "+h.format(this.options.smartyControlGroup.options.endFormat)+
"\x3c/span\x3e\x3c/li\x3e":'\x3cli class\x3d"hist '+n+'" data-history-idx\x3d"'+l+'"\x3e\x3cspan class\x3d"smartyRecentCars"\x3e'+(null!==b?'\x3cspan class\x3d"airportCode"\x3e'+b+"\x3c/span\x3e"+c:c)+'\x3c/span\x3e\x3cspan class\x3d"smartyRecentDate '+p+'"\x3e'+a.format(this.options.smartyControlGroup.options.startFormat)+" - "+h.format(this.options.smartyControlGroup.options.endFormat)+"\x3c/span\x3e\x3c/li\x3e"},highlightFirstSelectableItem:function(){for(var c=R9.config.getBoolean("ui.car.smarty.highlight.first.airport",
!1),a=-1,b=this.getItemList(),d=0;d<b.length;d++){var e=jq(b[d]);if(!e.hasClass("hist")){if(c){if(a===d){e.addClass("selected");this.setBackgroundAutocomplete(b[d]);return}if(1===(parseInt(e.data("airports-count"),10)||0)){a=d+1;continue}}e.addClass("selected");this.setBackgroundAutocomplete(b[d]);return}}jq(b[0]).addClass("selected");this.setBackgroundAutocomplete(b[0])}});
R9.extend("Widgets.Smarty",{DealsSmarty:function(c,a){R9.Widgets.Smarty.FlareSmarty.call(this,c,jq.extend({minWidth:250,dropdownClass:" smartbox smartbox-deal",forceSelection:!0,flareSmartyType:7},a))}});R9.extend("Widgets.Smarty.DealsSmarty.prototype",!0,R9.Widgets.Smarty.FlareSmarty.prototype,{});
(function(c,a){R9.extend("Widgets.Smarty",{PackageToursSmarty:function(a,d){this.ptOptions=c.extend({},this.ptOptions,d.ptOptions);R9.Widgets.Smarty.Smarty.call(this,a,jq.extend({dataSource:this.ptOptions.smartUrl,dropdownClass:" smartbox smartbox-packagetour smartbox-v2 greyIcons fixed",forceSelection:!0,searchOnFocus:!0,flareSmartyType:17},d));var b=this;jq(".mapViewOuter .filterWrapper").scroll(function(){R9.Widgets.Smarty.Smarty.prototype.handleInputBlurEvent.call(b)})}});R9.extend("Widgets.Smarty.PackageToursSmarty.prototype",
!0,R9.Widgets.Smarty.FlareSmarty.prototype,{hiddenInput:null,searchInput:null,suggestionsXml:null,setItemFromSmarty:!1,triggerSmartBoxFocusTimeout:null,hasTags:!0,tagsContainer:null,tags:{},tagsIds:[],isSubmitEnabled:!1,skipActiveSubmit:!1,skipSuggestionsShowing:!1,isPlaceHolderSupported:!1,ptOptions:{kpackMobile:!1,loadSuggestions:null},init:function(){R9.Widgets.Smarty.FlareSmarty.prototype.init.call(this);this.extendOptions();this.hasTags=!0;this.tags={};this.tagsIds=[];this.searchInput=c(this.element);
this.hiddenInput=c(this.ptOptions.hiddenInput);this.isPlaceHolderSupported=this.checkIsPlaceHolderSupported();this.initTags();this.bindSearchInputEvents()},extendOptions:function(){var a=this;c.extend(!0,this.options,{initialData:function(){return a.getSuggestions(this.ptOptions.suggestions)},initialDataLoadWithCallback:function(b){a.ptOptions&&"function"===typeof a.ptOptions.loadSuggestions&&a.ptOptions.loadSuggestions(function(d){d=a.getSuggestions(d);"function"===typeof b&&b(d)})},setItem:function(b,
c,f){b=a.searchInput;a.hasTags&&c.isSuggestionParent?b.val("").removeClass("focus"):(a.setItemFromSmarty=!0,b=c.name,c&&c.id&&b&&(c=c.id,b=a.clearHtml(b),a.addSearchValue(c,b,!0)))}})},makeHTML:function(a){var b=this;a=a.replace("\x3c/ul\x3e\x3c/ul\x3e","\x3c/ul\x3e").replace('\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',"");a=c(a);a.find("li").each(function(a){var d=c(this);if(a=b.getSmartBoxElementData(d,!1)){d.attr("data-attr",JSON.stringify(a));var d=c("\x3cdiv\x3e"),e=a.nearbyHotels;e&&
0!==e.length&&d.append(c("\x3cspan\x3e").addClass("nearbyHotels").append(e));var e=c("\x3cspan\x3e",{"class":"fullNameHolder",css:{display:"block",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}}).css("oveflow","hidden"),h=a.name;h&&0!==h.length&&e.append(c("\x3cspan\x3e").addClass("name").append(h));(h=a.parentPath)&&0!==h.length&&(h=c("\x3cspan\x3e").addClass("parentPath").append(h),a.isSuggestion?e.append(", "):e.append(a.isHotel||a.isNeighborhood?" - ":", "),e.append(h));
d.append(e);R9.config.getBoolean("ui.smarty.labels",!1)&&(a=c("span.smarty-label",this),d.append(a));this.innerHTML=d[0].innerHTML}});return'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n'+a.wrap("\x3cdiv\x3e").parent().html()},translateItem:function(a){a=c(a).attr("data-attr");return c.parseJSON(a)},initTags:function(){var a=this.ptOptions.tags;a&&a.tagsContainerSelector?(this.tagsContainer=c(a.tagsContainerSelector),this.tagsContainer.length?(this.bindTagsContainerEvents(),this.bindTagEvents(),
this.bindTagsKeyboardEvents(),this.initPlaceHolderStyles(),this.togglePlaceHolder()):this.hasTags=!1):this.hasTags=!1},bindTagsContainerEvents:function(){var a=this;this.tagsContainer.on("click",function(b){a.searchInputFocus(0<a.tagsIds.length)})},bindTagEvents:function(){var a=this,d=this.ptOptions.tags,e=d.tagSelector,f=d.selectedClass;this.ptOptions.kpackMobile||(this.tagsContainer.off("click",e).on("click",e,function(b){b.preventDefault();b.stopPropagation();b=c(this);b.hasClass(f)?b.removeClass(f):
(b.addClass(f),b.siblings(e).removeClass(f));a.searchInputFocus(!0)}),this.tagsContainer.off("click",d.tagCloseSelector).on("click",d.tagCloseSelector,function(b){b=c(this).closest(d.tagSelector);a.removeTag(b,!0);return!1}))},searchInputFocus:function(a){this.skipSuggestionsShowing=a;this.triggerSmartBoxFocusWithTimeout()},searchInputFocusOut:function(){this.searchInput.focusout()},bindTagsKeyboardEvents:function(){var a=this,d=this.ptOptions.tags,e=d.tagSelector,f=d.selectedClass,g=this.searchInput,
h=this.tagsContainer;g.on("keydown",function(b){if(!g.val())if(13===b.which)a.isSubmitEnabled&&(0<a.tagsIds.length&&a.disableSmartBox(),a.skipActiveSubmit=!1,g.closest("form").submit()),a.skipActiveSubmit=!0,a.isSubmitEnabled=!0;else if(0!==a.tagsIds.length)switch(b.which){case 8:b=c(e+"."+f,h);if(b.length)a.removeTag(b,!0);else{b=c(e,h).last();if(!b.length)break;b.addClass(f)}a.hideSmartBox();break;case 46:b=c(e+"."+f,h);if(!b.length)break;a.removeTag(b,!0);break;case 27:c(e,h).removeClass(f);break;
case 37:b=c(e+"."+f,h);if(b.length){var d=b.prev(e);if(!d.length)if(1<a.tagsIds.length)d=c(e,h).last();else break;b.removeClass(f);d.addClass(f)}else b=c(e,h).last(),b.length&&b.addClass(f);break;case 39:if(b=c(e+"."+f,h),b.length){d=b.next(e);if(!d.length)if(1<a.tagsIds.length)d=c(e,h).first();else break;b.removeClass(f);d.addClass(f)}}})},maxTagsReached:function(){var a=this.ptOptions.tags,d=this.getCurrentHiddenData();return d&&a.maxTags<=d.length?!0:!1},removeLastTag:function(a,d){this.removeTagById(this.tagsIds[this.tagsIds.length-
1],a,d)},addTag:function(a,d,e){var b=this,g=this.ptOptions.tags;if(!a||!d)return!1;var h=c('[data-id\x3d"'+a+'"]',this.tagsContainer);if(0<h.length&&(!this.tags||this.tags===[]||this.tags==={}))return!1;if(void 0!==this.tags[a])return h.fadeOut(100,function(){h.fadeIn(100);b.searchInput.val("")}),!1;this.maxTagsReached()&&this.removeLastTag(!0,!0);var l=c(g.tagTemplate.replace("[[TEXT]]",d));l.attr("data-id",a);var k=c(g.tagSelector,this.tagsContainer).last();k.length?k.after(l):this.tagsContainer.prepend(l);
this.tags[a]=d;this.tagsIds.push(a);this.tagsIds.length>=g.maxTags&&(b.disableSmartBox(),this.searchInput.addClass(g.hiddenClass));this.searchInput.val("");!0===e&&this.tagsIds.length<g.maxTags?this.searchInputFocus(!0):this.searchInputFocusOut();this.removeItemHighlight();this.addHiddenData(a,d);return!0},getItemText:function(a){var b="";c(a).each(function(a){if("name"===this.className)return b=c(this).text(),!1});return b},removeTag:function(a,d,e){var b=this;if(a.length){this.setBackgroundAutocomplete();
var g=function(){var e=b.ptOptions.tags,f=a.attr("data-id"),g=b.tagsIds.indexOf(f);delete b.tags[f];b.tagsIds.splice(g,1);a.remove();b.enableSmartBox();b.tagsContainer.removeClass(e.disabledClass);b.searchInput.removeClass(e.hiddenClass);b.removeHiddenData(f);c.isEmptyObject(b.tags)&&b.clearSearchValues();!0===d&&b.searchInputFocus(0<b.tagsIds.length)};e?g():a.fadeOut(200,function(){g()})}},removeTagById:function(a,d,e){a=c(this.ptOptions.tags.tagSelector,this.tagsContainer).filter("[data-id\x3d"+
a+"]");this.removeTag(a,d,e)},getSuggestions:function(a){if(!(this.hasTags&&this.maxTagsReached()||this.skipSuggestionsShowing||c("#"+this.ptOptions.targetId).is(":visible")||!this.searchInput.is(":visible")||this.searchInput.is(":disabled"))){if(this.suggestionsXml)return this.suggestionsXml;var b=a.data;if(b&&0!==b.length){var e=function(b,d,e){var f=b.id,g=b.type,h=c.trim(b.name),l=c.trim(b.nearbyHotels);b=b.children;if(""!==h)return d=c("\x3cli\x3e").html("").attr("id",e+"-PT_"+g+f).addClass(d+
" type_"+g),l&&0!==l.length&&d.append(c("\x3cspan\x3e").addClass("nearbyHotels").append(a.nearbyHotelsMsg.replace("[[NEARBY_HOTELS_COUNT]]",l))),d.append(c("\x3cdiv\x3e").append(h)),b&&0<b.length&&d.addClass("has_children"),d},f=c("\x3cdiv\x3e"),g=c("\x3cul\x3e").addClass("suggestions"),h;for(h=0;h<b.length;h++){var l=b[h];if(l.children&&0<l.children.length){var k=e(l,"pt_suggestion parent","pt_suggestion_parent"),p;g.append(k);for(p=0;p<l.children.length;p++)k=e(l.children[p],"pt_suggestion children",
"pt_suggestion_child"),g.append(k)}else k=e(l,"pt_suggestion children","pt_suggestion_child"),g.append(k)}f.html(g);return this.suggestionsXml='\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e'+f.html()}}},isSearchInputEmpty:function(){var a=c.trim(this.searchInput.val()),d=c.trim(c("#dstEmptyPlaceHolderText").html()),e=c.trim(c("#dstNotEmptyPlaceHolderText").html());return a&&""!==a&&a!==d&&a!==e?!1:!0},initPlaceHolderStyles:function(){var a=this.searchInput;a.siblings(".placeholdertext").css({position:"absolute",
top:-9999999,left:-9999999999,width:"auto",fontSize:a.css("fontSize"),padding:a.css("padding"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),letterSpacing:a.css("letterSpacing"),whiteSpace:"nowrap"})},checkIsPlaceHolderSupported:function(){return void 0!==document.createElement("input").placeholder},togglePlaceHolder:function(){var a=this.searchInput.siblings(".placeholdertext"),d=c("#dstEmptyPlaceHolderText").html();this.hasHiddenData()&&(d=c("#dstNotEmptyPlaceHolderText").html());
a.html(d);this.isPlaceHolderSupported&&this.searchInput.prop("placeholder",d);a=a.width();this.searchInput.css("min-width",(40>a?40:a)+10)},disableSmartBox:function(){this.searchInput.attr("disabled","disabled");this.searchInput.hide();this.hideSmartBox()},hideSmartBox:function(){c("#"+this.ptOptions.targetId).hide()},enableSmartBox:function(){this.maxTagsReached()?this.disableSmartBox():(this.searchInput.removeAttr("disabled"),this.searchInput.css("display","inline"))},issetHiddenValue:function(a){for(var b=
this.getCurrentHiddenData(),c=b.length,f=0;f<c;f++)if(a===b[f].id)return f+1;return!1},getCurrentHiddenData:function(){var a=c.trim(this.hiddenInput.val());return a&&c.parseJSON(a)||[]},hasHiddenData:function(){var a=this.getCurrentHiddenData();return!!(a&&0<a.length)},createHiddenValue:function(a,d){return{id:a,name:d}},addHiddenData:function(a,d){this.issetHiddenValue(a)||(a=this.createHiddenValue(a,d),this.hasTags?(d=this.getCurrentHiddenData(),d.push(a)):d=[a],this.hiddenInput.changeHiddenParam(JSON.stringify(d)),
this.hasTags&&(this.maxTagsReached()?this.disableSmartBox():this.enableSmartBox()),this.togglePlaceHolder(),this.onHiddenChange())},onHiddenChange:function(){"function"===typeof this.ptOptions.onHiddenChange&&this.ptOptions.onHiddenChange.call()},removeHiddenData:function(a){a=this.issetHiddenValue(a);var b=this.getCurrentHiddenData();a&&b.splice(a-1,1);this.hiddenInput.changeHiddenParam(JSON.stringify(b));this.enableSmartBox();this.togglePlaceHolder();this.onHiddenChange()},addSearchValue:function(a,
d,c){if(this.hasTags)return this.addTag(a,d,c);!0===c?this.searchInputFocus(!0):this.searchInputFocusOut();this.removeItemHighlight();this.searchInput.val(d);this.addHiddenData(a,d);return!0},clearSearchValues:function(){this.hasTags&&(c(this.ptOptions.tags.tagSelector,this.tagsContainer).remove(),this.tags=[],this.tagsIds=[]);this.togglePlaceHolder();this.searchInput.val("").removeClass("focus");this.hiddenInput.changeHiddenParam("[]")},bindSearchInputEvents:function(){var a=this,d=this.searchInput;
if(!this.hasTags)d.on("change",function(b){if(d.is(":disabled"))return!1;b.stopPropagation();a.isSearchInputEmpty()&&(a.clearSearchValues(),a.onHiddenChange())});d.on("click",function(b){if(d.is(":disabled"))return!1;a.searchInputFocus(!1)});d.on("focus",function(b){a.smartBoxFocus();a.isSubmitEnabled=!1;a.skipActiveSubmit=!1});d.on("focusout",function(b){b.stopPropagation();a.setItemFromSmarty?(a.setItemFromSmarty=!1,a.searchInputFocus(!0)):(a.smartBoxFocusOut(),"function"===typeof a.ptOptions.onFocusout&&
a.ptOptions.onFocusout.call());return!1});"function"===typeof c.fn.autoGrowInput&&this.searchInput.autoGrowInput();d.on("keyup keydown blur update",function(b){a.togglePlaceHolder()});d.on("blur",function(){a.skipActiveSubmit=!1})},smartBoxFocus:function(){this.isSearchInputEmpty()&&(this.searchInput.val(""),this.searchValue="");this.searchInput.addClass("focus")},triggerSmartBoxFocusWithTimeout:function(){var a=this;this.triggerSmartBoxFocusTimeout&&(clearTimeout(a.triggerSmartBoxFocusTimeout),this.triggerSmartBoxFocusTimeout=
null);this.triggerSmartBoxFocusTimeout=setTimeout(function(){a.searchInput&&a.searchInput.is(":visible")&&(a.triggerSmartBoxFocusTimeout=null)},50)},smartBoxFocusOut:function(){""===this.searchInput.val()&&this.searchInput.removeClass("focus");this.togglePlaceHolder()},autoAutocomplete:function(a,d){var b=this,f=a.split(" "),g=f.length,h=[];if(this.isSearchInputEmpty())"function"===typeof d&&d(h);else{var l=function(){if(f.length===g&&0<h.length&&"function"===typeof d)d(h);else if(0<f.length){var a=
f.splice(0,1)[0];k(a)}else"function"===typeof d&&d(h)},k=function(a){var d=b.ptOptions;0===c.trim(a).length?l():(a={f:"h",lc:d.langCode,lc_cc:d.countryCode,s:17,where:a},b.options.extendRequest&&(a.v=b.options.extendRequest.v),c.ajax({url:d.smartUrl,type:"POST",dataType:"text",data:a,success:function(a){a=c(a).find("li:first");0<a.length&&(a=b.getSmartBoxElementData(c(a),!0))&&h.push(b.createHiddenValue(a.id,a.name))},complete:function(){l()}}))};k(a)}},getSmartBoxElementData:function(a,d){var b=
a.attr("id"),c,g=!1,h=!1,l="",k=a.html();c=a.find("div");0<c.length&&(k=c.html());a=a.find("span.nearbyHotels");0<a.length&&(l=a.html());-1!==b.indexOf("pt_suggestion_parent")?(h=!0,c=k.split("\n")):-1!==k.indexOf("#####")?(g=!0,c=k.split("#####")):c=-1!==k.indexOf("##")?k.split("##"):k.split("\n");if(0===c.length)return null;b=this.extractValidId(b);k=c[0];a="";1<c.length&&(a=c[1]);k=this.fixBoldTags(k);a=this.fixBoldTags(a);c=0===b.indexOf("H");var p=0===b.indexOf("S");!0===d&&(k=this.clearHtml(k),
a=this.clearHtml(a));return{id:b,name:k,parentPath:a,nearbyHotels:l,isHotel:c,isNeighborhood:p,isSuggestion:g,isSuggestionParent:h}},extractValidId:function(a){if(0<=a.indexOf("-PT_")){var b=a.match(/PT_(?:SPT_)?([A-Z0-9]+)/);b&&1<b.length&&(a=b[1])}return a},fixBoldTags:function(a){a=c.trim(a);var b=-1!==a.toLowerCase().indexOf("\x3cb\x3e"),e=a.toLowerCase().indexOf("\x3c/b\x3e"),f=-1!==e;!f||0!==e&&b?!b||"\x3cb\x3e"!==a.substr(-3).toLowerCase()&&f||(a+="\x3c/b\x3e"):a="\x3cb\x3e"+a;return a},clearHtml:function(a){a=
a.replace(/<b>|<\/b>/gmi,"");a=a.replace(/<div>|<\/div>/gmi,"");return a=a.replace(/&amp;/gmi,"\x26")},getBackgroundAutocompleteText:function(a){a=this.translateItem(a);return"string"===typeof a.name?this.clearHtml(a.name):""}})})(jq||jQuery,window);
R9.extend("Widgets.Smarty",{LandmarksSmarty:function(c,a){R9.Widgets.Smarty.Smarty.call(this,c,jq.extend({dataSource:R9.config.getString("ui.landmarks.smartUrl","/f/smarty"),minWidth:250,dropdownClass:" smartbox",featureClass:"",forceSelection:!0,flareSmartyType:21,searchOnFocus:!0,searchNoQuery:!0,showDropdownWhenEmpty:!0,f:"j",v:"v1"},a));var b=this;jq(".mapViewOuter .filterWrapper").scroll(function(){R9.Widgets.Smarty.Smarty.prototype.handleInputBlurEvent.call(b)})}});
R9.extend("Widgets.Smarty.LandmarksSmarty.prototype",!0,R9.Widgets.Smarty.FlareSmarty.prototype,{geocoder:null,translateItem:function(c){if(!c)return null;c=jq(c);return{type:c.attr("data-type"),id:c.attr("id"),str:c.text(),short_str:c.attr("data-short-name"),lat:c.attr("data-lat"),lon:c.attr("data-lon")}},onBeforeStart:function(){"function"===typeof this.options.beforeStart&&this.options.beforeStart(this)},noItemToSelect:function(){if("function"===typeof this.options.onNoItemToSelect)this.options.onNoItemToSelect(this)},
runSearch:function(c){if(!(this.element.val().length<this.options.minLength)){var a=this.element.val();if(this.lastValue!==a){this.lastValue=a;var b=this.getRequestData();c||(b.value="");var d=this.preprocessRequest(b),e=this,f={};0<a.length&&R9.Maps.Google.load(null,"landmarks-smarty");f.useGoogle=R9.Maps.Google.isLoaded()&&0<a.length;var g=function(){if(f.useGoogle||null==f.smarty)null!=f.smarty&&null!=f.google&&(a=e.postprocessResponse(f),e.searchCompleted(a,c));else{var a=e.postprocessResponse(f);
e.searchCompleted(a,c)}};this.smartyRequest=jq.post(this.options.dataSource,d,function(a){f.smarty=a;g()},this.options.dataType);f.useGoogle&&(this.geocoder||(this.geocoder=new google.maps.Geocoder),a=this.preprocessGoogleRequest(b),this.geocoder.geocode(a,function(a,b){"OK"===b&&(f.google=a,g())}))}}},isUpdateInProgress:function(){return this.keyTimeout||this.smartyRequest||this.googleRequest},abortRequest:function(){if(this.smartyRequest){try{this.smartyRequest.abort()}catch(c){}this.smartyRequest=
null}if(this.googleRequest){try{this.googleRequest.abort()}catch(c){}this.googleRequest=null}},postprocessResponse:function(c){var a,b,d;c.smarty&&(b=JSON.parse(c.smarty),d=b.landmarks);if(null!=d)a=this.makePopularContent(d,this.options.recentLandmarks);else if(b||c.google)a=this.makeRegularContent(b,c.google);a||(a=this.makeEmptyContent());return a},makeEmptyContent:function(){return this.options.emptyItemContent},makePopularContent:function(c,a){var b=[];if(c&&0<c.length){b.push("\x3cdiv\x3e\x3cdiv class\x3d'smartyheader'\x3e");
b.push(this.options.popularLandmarksHeader);b.push("\x3c/div\x3e\x3c/div\x3e");b.push("\x3cul\x3e");for(var d=0;d<c.length;d++){var e=this.makeSmartyResult(c[d]);e&&b.push(e)}b.push("\x3c/ul\x3e")}if(a&&0<a.length){b.push("\x3cdiv\x3e\x3cdiv class\x3d'smartyheader'\x3e");b.push(this.options.recentLocationsHeader);b.push("\x3c/div\x3e\x3c/div\x3e");b.push("\x3cul\x3e");for(d=0;d<a.length;d++)c=a[d],(e=this.makeResult(c.type.uiCode,c.id,c.landmarkName,c.latitude,c.longitude))&&b.push(e);b.push("\x3c/ul\x3e")}return b.join("")},
makeRegularContent:function(c,a){var b=[],d=0,e=10;if(c)for(var f=0;f<e&&f<c.length;f++,d++){var g=this.makeSmartyResult(c[f]);g&&b.push(g)}if(a)for(e-=d,f=0;f<e&&f<a.length;f++,d++)(c=this.makeGoogleResult(a[f]))&&b.push(c);return 0<b.length?"\x3cul\x3e"+b.join("")+"\x3c/ul\x3e":null},makeSmartyResult:function(c){var a=c.loctype,b=c.id,d=c.lat,e=c.lng;c=c.displayname;c=this.highliteText(c,this.lastValue);return this.makeResult(a,b,c,d,e)},makeGoogleResult:function(c){if(this.googleHasType(c.types,
["street_address","neighborhood","sublocality_level_4","sublocality_level_5"])){var a=c.geometry.location.lat(),b=c.geometry.location.lng();if(this.isInBounds(a,b))return c=c.formatted_address,c=this.highliteText(c,this.lastValue),this.makeResult("adr",null,c,a,b)}return null},makeResult:function(c,a,b,d,e){return"\x3cli data-type\x3d'"+c+"' class\x3d'"+c+"' "+(a?"id\x3d'"+a+"' ":"")+(d?" data-lat\x3d'"+d+"' ":"")+(e?" data-lon\x3d'"+e+"' ":"")+"\x3e"+b+"\x3c/li\x3e"},isInBounds:function(c,a){return this.options.swBounds&&
this.options.neBounds&&(c<this.options.swBounds.lat||c>this.options.neBounds.lat||a<this.options.swBounds.lon||a>this.options.neBounds.lon)?!1:!0},googleHasType:function(c,a){for(var b=0;b<c.length;b++)for(var d=0;d<a.length;d++)if(c[b]===a[d])return!0;return!1},preprocessGoogleRequest:function(c){var a={};a.language=R9.globals.locale.lc;a.address=c.value;this.options.swBounds&&this.options.neBounds&&(a.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(this.options.swBounds.lat,this.options.swBounds.lon),
new google.maps.LatLng(this.options.neBounds.lat,this.options.neBounds.lon)));return a}});R9.extend("Widgets.Smarty",{TimePickerSmarty:function(c,a){R9.Widgets.Smarty.Smarty.call(this,c,a)}});
R9.extend("Widgets.Smarty.TimePickerSmarty.prototype",!0,R9.Widgets.Smarty.Smarty.prototype,{init:function(){var c=this;R9.Widgets.Smarty.Smarty.prototype.init.call(this);var a=function(){c.checkAlive()&&setTimeout(a,250)};setTimeout(a,250)},handleInputChangeEvent:function(){this.abortKeyTimeout();this.abortRequest();this.onInputChange()},runSearch:function(){this.showInitialDropdown()},showInitialDropdown:function(){var c=this.onInitialData();if(c){this.searchCompleted(c,!1);var c=this.element.val(),
a=!1===this.options.is24hour?moment(c,"hh:mm,A"):moment(c,"HH:mm");if(null!=a){var c=parseInt(a.format("HH")),b=0;30<=parseInt(a.format("mm"))&&(b=1);var a=this.dropdown.find("li:first-child").outerHeight(),d=this.dropdown.height();this.dropdown.find("ul").scrollTop(Math.max((2*c+b)*a-(d-a)/2,0));this.getItemList().removeClass("selected")}}},hideDropdown:function(){this.abortKeyTimeout();this.abortRequest();this.lastValue=null;if("none"==this.dropdown.css("display"))return!1;this.dropdown.hide();
return!0},onInputChange:function(){this.isItemSet=!1;this.removeItemHighlight()},appendTo:"#tripform"});R9.extend("Widgets.Smarty",{CustomSmarty:function(c,a){R9.Widgets.Smarty.Smarty.call(this,c,a)}});
R9.extend("Widgets.Smarty.CustomSmarty.prototype",!0,R9.Widgets.Smarty.Smarty.prototype,{runSearch:function(c){if(!(this.element.val().length<this.options.minLength)){var a=this.element.val();if(this.lastValue!=a){this.lastValue=a;var b=a.length,d=jq(this.onInitialData());d.find("li").each(function(){jq(this).html().substr(0,b).toLowerCase()!=a.toLowerCase()&&jq(this).remove()});this.searchCompleted(1>d[0].childElementCount?"":d[0].outerHTML,c)}}}});
R9.extend("Widgets.Smarty",{TripAddressSmarty:function(c,a){R9.Widgets.Smarty.Smarty.call(this,c,a)}});
R9.extend("Widgets.Smarty.TripAddressSmarty.prototype",!0,R9.Widgets.Smarty.Smarty.prototype,{runSearch:function(c){if(!(this.element.val().length<this.options.minLength)){var a=this.element.val();if(this.lastValue!=a){var b=this;this.request=jq.get(this.options.dataSource,{address:a},function(d){b.request=null;b.lastValue=a;d=b.postprocessResponse(d,c);b.searchCompleted(d,c)},this.options.dataType)}}},postprocessResponse:function(c,a){return c.slice(1,c.length-1)},searchCompleted:function(c,a){9<
c.length?this.showDropdown(c,a):this.hideDropdown()}});R9.extend("Widgets.Smarty",{NearbySmarty:function(c,a){R9.Widgets.Smarty.FlareSmarty.call(this,c,jq.extend({dropdownClass:" smartbox smartbox-hotel",forceSelection:!0,searchOnFocus:!0,searchNoQuery:!0,flareSmartyType:28,f:"j",v:"v1"},a))}});
R9.extend("Widgets.Smarty.NearbySmarty.prototype",!0,R9.Widgets.Smarty.FlareSmarty.prototype,{geocoder:null,placesService:null,nearbyPlaceTypes:{airport:"ap",restaurant:"rest"},translateItem:function(c){return c?{type:jq(c).data("type"),id:c.id,str:jq(c).text(),lat:jq(c).data("lat"),lon:jq(c).data("lon"),ggpid:jq(c).data("ggpid")}:null},runSearch:function(c){if(!(this.element.val().length<this.options.minLength)){var a=this.element.val();if(this.lastValue!==a){this.lastValue=a;var b=this.getRequestData();
c||(b.value="");var d=this.preprocessRequest(b),e=this,f={};f.setRegularResponse=0<a.length;var g=function(){if(null!=f.smarty){var a=e.postprocessResponse(f,f.setRegularResponse);e.searchCompleted(a,c)}};this.smartyRequest=jq.post(this.options.dataSource,d,function(a){f.smarty=a},this.options.dataType);this.nearbyPromise=this.getGoogleSmartyPlaces(b,f);f.setRegularResponse&&(this.geocoder||(this.geocoder=new google.maps.Geocoder),a=this.preprocessGoogleRequest(b),this.geocoder.geocode(a,function(a,
b){"OK"===b&&(f.geocoder=a,g())}));jq.when(this.smartyRequest,this.nearbyPromise).done(function(){g()})}}},getGoogleSmartyPlaces:function(c,a){var b=jq.Deferred();if(!this.placesService){var d=hotelResultsMap.mapController.getMap().getGMap();this.placesService=new google.maps.places.PlacesService(d)}c=this.preprocessNearbyRequest(c);R9.Analytics.api.trackEvent("placesService/nearbySearch/nearby-smarty");this.placesService.nearbySearch(c,function(d,c){c==google.maps.places.PlacesServiceStatus.OK&&
(a.nearby=d);b.resolve()});return b.promise()},filterOutHotels:function(c){var a=[],b;if(c)for(var d=0;d<c.length;d++)b=c[d].loctype,"hotel"!=b&&a.push(c[d]);return a},postprocessResponse:function(c,a){var b,d,e;c.smarty&&(d=JSON.parse(c.smarty));c.nearby&&0<c.nearby.length&&(e=c.nearby);if(!a&&0<this.options.popularContent.length)b=this.makePopularContent(this.options.popularContent,d,e);else if(d||c.geocoder||c.nearby)b=this.makeRegularContent(d,c.geocoder,e);b||(b=this.makeEmptyContent());return b},
makeResult:function(c,a,b,d,e,f){return"\x3cli data-type\x3d'"+c+"' class\x3d'"+c+"' "+(a?"id\x3d'"+a+"' ":"")+(d?" data-lat\x3d'"+d+"' ":"")+(e?" data-lon\x3d'"+e+"' ":"")+(f?" data-ggpid\x3d'"+f+"' ":"")+"\x3e"+b+"\x3c/li\x3e"},makeSmartyResult:function(c){var a=c.loctype,b=c.lat,d=c.lng,e=c.displayname,f;c.id?f=c.id:c.ctid&&(f=c.ctid);this.lastValue&&0<this.lastValue.length&&(e=this.highliteText(e,this.lastValue));return this.makeResult(a,f,e,b,d,null)},makeGoogleResult:function(c){if(this.googleHasType(c.types,
["street_address","neighborhood","sublocality_level_4","sublocality_level_5"])){var a=c.geometry.location.lat(),b=c.geometry.location.lng();if(this.isInBounds(a,b))return c=c.formatted_address,this.lastValue&&(c=this.highliteText(c,this.lastValue)),this.makeResult("adr",null,c,a,b,null)}return null},makeGoogleNearbyResult:function(c){var a,b;for(b in this.nearbyPlaceTypes)if(-1<jq.inArray(b,c.types)){a=this.nearbyPlaceTypes[b];break}b=c.place_id;var d=c.geometry.location.lat(),e=c.geometry.location.lng();
c=c.name;this.lastValue&&0<this.lastValue.length&&(c=this.highliteText(c,this.lastValue));return this.makeResult(a,b,c,d,e,b)},makeEmptyContent:function(){return this.options.emptyItemContent},makePopularContent:function(c,a,b){var d=[];c&&0<c.length&&d.push(c);if(c=this.filterOutHotels(a)){d.push("\x3cdiv\x3e\x3cdiv class\x3d'smartyheader'\x3e");d.push(this.options.popularLandmarksHeader);d.push("\x3c/div\x3e\x3c/div\x3e");d.push("\x3cul\x3e");a=10;for(var e=0;e<a&&e<c.length;e++){var f=this.makeSmartyResult(c[e]);
f&&d.push(f)}d.push("\x3c/ul\x3e")}if(b){a=5;d.push("\x3cul\x3e");for(e=0;e<a&&e<b.length;e++)(f=this.makeGoogleNearbyResult(b[e]))&&d.push(f);d.push("\x3c/ul\x3e")}return d.join("")},makeRegularContent:function(c,a,b){var d=[],e=0,f=15;if(c)for(var g=0;g<f&&g<c.length;g++,e++){var h=this.makeSmartyResult(c[g]);h&&d.push(h)}if(a)for(f-=e,g=0;g<f&&g<a.length;g++,e++)(c=this.makeGoogleResult(a[g]))&&d.push(c);if(b)for(f-=e,g=0;g<f&&g<b.length;g++,e++)(c=this.makeGoogleNearbyResult(b[g]))&&d.push(c);
return 0<d.length?"\x3cul\x3e"+d.join("")+"\x3c/ul\x3e":null},isInBounds:function(c,a){return this.options.swBounds&&this.options.neBounds&&(c<this.options.swBounds.lat||c>this.options.neBounds.lat||a<this.options.swBounds.lon||a>this.options.neBounds.lon)?!1:!0},googleHasType:function(c,a){for(var b=0;b<c.length;b++)for(var d=0;d<a.length;d++)if(c[b]===a[d])return!0;return!1},preprocessGoogleRequest:function(c){var a={};a.language=R9.globals.locale.lc;a.address=c.value;this.options.swBounds&&this.options.neBounds&&
(a.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(this.options.swBounds.lat,this.options.swBounds.lon),new google.maps.LatLng(this.options.neBounds.lat,this.options.neBounds.lon)));return a},preprocessNearbyRequest:function(c){var a={};0<c.value.length&&(a.name=c.value);a.types=["airport","restaurant"];this.options.swBounds&&this.options.neBounds&&(a.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(this.options.swBounds.lat,this.options.swBounds.lon),new google.maps.LatLng(this.options.neBounds.lat,
this.options.neBounds.lon)));return a}});
(function(c){c.fn.r9FlightSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.FlightsSmarty(this,a)})};c.fn.r9AirportsSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.FlightsSmarty(this,c.extend({flareSmartyType:13},a))})};c.fn.r9RealAirportsSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.FlightsSmarty(this,c.extend({flareSmartyType:34},a))})};c.fn.r9AirlineSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.FlareSmarty(this,c.extend({dataSource:"/m/smarty",
flareSmartyType:"airline"},a))})};c.fn.r9KNSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.KNSmarty(this,a)})};c.fn.r9HotelSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,a)})};c.fn.r9HotelsOnlySmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,c.extend({flareSmartyType:11},a))})};c.fn.r9AlertsHotelsSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,c.extend({flareSmartyType:3},
a))})};c.fn.r9CitiesOnlySmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,c.extend({flareSmartyType:4},a))})};c.fn.r9TripDestinationSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.FlareSmarty(this,c.extend({dataSource:"/f/smarty",flareSmartyType:6},a))})};c.fn.r9NearbySmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.NearbySmarty(this,a)})};c.fn.r9HotelsAndCitiesSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,
c.extend({flareSmartyType:12},a))})};c.fn.r9LandmarksSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.LandmarksSmarty(this,a)})};c.fn.r9CarSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.CarsSmarty(this,a)})};c.fn.r9DealSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.DealsSmarty(this,a)})};c.fn.r9EmailSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.EmailSmarty(this,c.extend({searchOnFocus:!0,showDropdownWhenEmpty:!0,
dataSource:"/s/run/users/emailsmarty",minWidth:250,setItem:function(a,d,c){d?(ji=jq(d),ji.hasClass("clearaddresses")&&9!=c?jq.post("/s/run/users/clearsmartyemail",{formtoken:R9.globals.formtoken}):a.element.val(ji.text())):a.element.val("")},afterDone:function(a){a=a.element.val();0<a.length&&jq.post("/s/run/users/addsmartyemail",{value:a,formtoken:R9.globals.formtoken})}},a))})};c.fn.r9PackageTourSmarty=function(a){this.each(function(){c(this).data("r9PackageTourSmarty",new R9.Widgets.Smarty.PackageToursSmarty(this,
a))});return this};c.fn.r9TimePickerSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.TimePickerSmarty(this,c.extend({searchOnFocus:!0,showDropdownWhenEmpty:!0,dropdownClass:"timePickerDropdown",initialData:function(){var b=document.createElement("ul");if(!1===a.is24hour)for(var d=["AM","PM"],c=["00","30"],f=[12,1,2,3,4,5,6,7,8,9,10,11],g=0;g<d.length;g++)for(var h=d[g],l=0;l<f.length;l++)for(var k=f[l],p=0;p<c.length;p++){var n=c[p],q=document.createElement("li");jq(q).html(k+
":"+n+" "+h);jq(b).append(q)}else for(c=["00","30"],l=0;24>l;l++)for(p=0;p<c.length;p++)n=c[p],q=document.createElement("li"),jq(q).html(l+":"+n),jq(b).append(q);return b.outerHTML},setItem:function(b,d,c){d?(d=jq(d).text(),!1===a.is24hour?(d=moment(d,"hh:mm A"),null!=d&&b.element.val(d.format("hh:mm A"))):(d=moment(d,"HH:mm"),null!=d&&b.element.val(d.format("HH:mm")))):b.element.val("")}},a))})};c.fn.r9CustomSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.CustomSmarty(this,a)})};
c.fn.r9TripAddressSmarty=function(a){return this.each(function(){new R9.Widgets.Smarty.TripAddressSmarty(this,a)})}})(jq||jQuery);
(function(c,a){c.extend("DatePicker.BuzzData",{});var b={},d=null,e=null,f=c.DatePicker.BuzzData=function(){if(e)return e;e=this;return this};f.prototype={constructor:f,datePicker:null,form:null,vertical:"",update:function(a,b){this.datePicker=a;this.form=b;this.vertical=b.vertical;a=c.config.getBoolean("ui.calendar.buzz.hotels.enabled",!1);b=c.config.getBoolean("ui.calendar.buzz.flights.enabled",!1);a&&"hotels"===this.vertical&&this.updatePickerAccordingData(this.form.cityId,this.updateDatePicker.bind(this));
b&&"flights"===this.vertical&&this.updatePickerAccordingData(this.getFlightUrl(),this.updateDatePicker.bind(this))},fetch:function(a,b){this.form=a;this.vertical=a.vertical;a=c.config.getBoolean("ui.calendar.buzz.hotels.enabled",!1);var d=c.config.getBoolean("ui.calendar.buzz.flights.enabled",!1);a&&"hotels"===this.vertical&&this.updatePickerAccordingData(this.form.cityId,b);d&&"flights"===this.vertical&&this.updatePickerAccordingData(this.getFlightUrl(),b)},getFlightUrl:function(){var a=this.form,
b=this.getAirportCode(a.origin),d=this.getAirportCode(a.destination),c=a.departDate,a=a.isOneWay,e="";if(this.isEmpty(b))return null;e+=b+"/";if(this.isEmpty(d))return null;e=e+(d+"")+("?oneWay\x3d"+(a?"true":"false"));c&&(e+="\x26departDate\x3d"+c);return e},isEmpty:function(a){return!a||0===a.length},getAirportCode:function(b){if("undefined"!==typeof b){var d=/(([A-Z]{3}))/g,c=b.substr(0,3);if(""==c||0==c.indexOf("C-"))c=b.value+"",c=c.replace(/ /g,""),-1!=c.indexOf("(")&&(b=d.exec(c),null!=b&&
(c=b[0]));return a.trim(c)}return null},updatePickerAccordingData:function(b,c){if(b){var e=this.getCacheData(b),f=this;null!==e?c(e):(d&&4!==d.readyState&&d.abort(),d=a.ajax({type:"GET",url:"/api/search/buzzCalendar/"+this.vertical+"/"+b,dataType:"json"}).done(function(a){a.success&&(f.putCacheData(b,a),c(a))}))}},getCacheData:function(a){a=this.getKey(a);return b.hasOwnProperty(a)?b[a]:null},putCacheData:function(a,d){a=this.getKey(a);b[a]=d},getKey:function(a){return this.vertical+"_"+a},updateDatePicker:function(b){var d=
c.config.getBoolean("ui.calendar.buzz.prices",!1),e=c.config.getBoolean("ui.calendar.buzz.prices.low",!1),f="buzz-date-low";d&&(f="buzz-prices-low");a(".r9-datepicker-item",this.datePicker).each(function(){var c=a(this);c.removeClass(f);d&&a(".buzz-price",c).html("");var g=c.data("val");"undefined"!==typeof g&&(g=moment(g).format("YYYY-MM-DD"),b.dates&&b.dates.hasOwnProperty(g)&&"LOW"===b.dates[g]&&c.addClass("buzz-date-low"),d&&b.prices&&b.prices.hasOwnProperty(g)&&(g=b.prices[g],a(".buzz-price",
c).html(g.price),e&&"LOW"===g.rate&&c.addClass("buzz-prices-low")))})}}})(window.R9,window.jq||window.jQuery);
(function(c){R9.extend("Widgets.BaseCalendarWidget",{});(R9.Widgets.BaseCalendarWidget=function(){this.updateSettings()}).prototype={advanceStyling:!0,loadBuzzData:!1,buzzDataClass:"",buzzPrices:!1,updateSettings:function(){this.advanceStyling=R9.config.getBoolean("ui.calendar.advanceStyling",!0);this.loadBuzzData=R9.config.getBoolean("ui.calendar.loadBuzzData",!1);this.buzzDataClass=(this.buzzPrices=R9.config.getBoolean("ui.calendar.buzz.prices",!1))?"datepicker-buzz-prices":"datepicker-buzz-data";
this.wholeMonthSearch=!1;jq("body").hasClass("FlightsSearch")&&0<jq(".flexOpenflex").length&&0<jq(".Flights-Search-FlightSearchPage.vm-fd").length&&(this.wholeMonthSearch=R9.config.getBoolean("ui.flights.whole-month-search.enabled",!1),this.daterangePickerDefaultNavTab="specificDate",this.noOfNightsValue="6-8",this.flexSelectedYear=this.flexSelectedMonth="",this.flexPlusMinusChecked=!1)},buzzGraph:jq("\x3cdiv\x3e",{"class":"r9-datepicker-buzz-graph"}),buzzGraphFooter:jq("\x3cdiv\x3e",{"class":"r9-datepicker-buzz-graph-footer"}),
buzzGraphFooterInner1:jq("\x3cdiv\x3e",{"class":"noairports hidden"}),buzzGraphFooterInner2:jq("\x3cdiv\x3e",{"class":"duration hidden"}),buzzGraphFooterInner3:jq("\x3cdiv\x3e",{"class":"fixedstart hidden"}),buzzGraphFooterInner4:jq("\x3cdiv\x3e",{"class":"oneway hidden"}),buzzGraphFooterDetail:jq("\x3cspan\x3e",{"class":"detail"}),buzzGraphPriceRule:jq("\x3cdiv\x3e",{id:"graphpricebar","class":"r9-datepicker-buzz-graph-price"}),buzzGraphLowestPriceRule:jq("\x3cdiv\x3e",{id:"graphlowpricebar","class":"r9-datepicker-buzz-graph-price"}),
buzzGraphPriceValue:jq("\x3cdiv\x3e",{id:"graphprice","class":"r9-datepicker-buzz-graph-price-value"}),makeCalendarHTML:function(a){var b=function(){var a=this.makeBelowCalendarHTML();a&&0<a.length&&(d.push("\x3cdiv id\x3d'%s' class\x3d'belowCalendar'\x3e".format("below")),d.push(a),d.push("\x3c/div\x3e"))},d=[];this.options.showBuzzGraph&&(this.buzzGraph.html(this.buzzGraphPriceRule.prop("outerHTML")+this.buzzGraphLowestPriceRule.prop("outerHTML")+this.buzzGraphPriceValue.prop("outerHTML")),this.buzzGraphFooterInner1.html("Select airports to see recent best prices. \x3cspan class\x3d'detail'\x3e\x3c/span\x3e"),
this.buzzGraphFooterInner2.html("Best prices for \x3cspan id\x3d\"durationNumber\"\x3e\x3c/span\x3e day trips. \x3cspan class\x3d'detail'\x3e\x3c/span\x3e"),this.buzzGraphFooterInner3.html("Best prices for trips departing on \x3cspan id\x3d\"flexDepartDate\"\x3e\x3c/span\x3e. \x3cspan class\x3d'detail'\x3e\x3c/span\x3e"),this.buzzGraphFooterInner4.html("Best prices for one-way trips \x3cspan class\x3d'detail'\x3e\x3c/span\x3e"),this.buzzGraphFooter.html(this.buzzGraphFooterInner1.prop("outerHTML")+
this.buzzGraphFooterInner2.prop("outerHTML")+this.buzzGraphFooterInner3.prop("outerHTML")+this.buzzGraphFooterInner4.prop("outerHTML")));d.push("\x3cdiv class\x3d'r9-datepicker-pointer'\x3e\x3c/div\x3e");d.push("\x3cspan role\x3d'button' class\x3d'r9-datepicker-close'\x3e\x26times;\x3c/span\x3e");!0===this.options.belowContentOnTop&&b.call(this);d.push(this.makeTitleHTML(this.options.title));this.wholeMonthSearch&&d.push(this.makeCalendarTabNavHTML());var c=moment().startOf("day"),f=this.minDate,
f=f?moment(f):c;a=a?moment(a):f;if(null==a||!this.isPastDateAllowed()&&a<c)a=c;c=moment(a).subtract(1,"months");f=moment(a).add(1,"months");d.push(this.makeMonthCalendarHTML(a,c,"r9-datepicker-month-first",this.options.prevTitle));a.add(1,"months");d.push(this.makeMonthCalendarHTML(a,f,"r9-datepicker-month-last",this.options.nextTitle));d.push("\x3cdiv class\x3d'r9-datepicker-month-break'\x3e\x3c/div\x3e");this.options.showBuzzGraph&&(d.push(this.buzzGraph.prop("outerHTML")),d.push(this.buzzGraphFooter.prop("outerHTML")));
this.wholeMonthSearch&&d.push(this.makeCalendarSelectMonthHTML());this.options.belowContentOnTop||b.call(this);return d.join("")},makeTitleHTML:function(a){return'\x3cdiv class\x3d"r9-datepicker-title"\x3e\x3cspan\x3e'+a+'\x3c/span\x3e\x3ca class\x3d"r9-datepicker-title-close"\x3eX\x3c/a\x3e\x3c/div\x3e'},makeCalendarTabNavHTML:function(){var a=jq(document.createElement("div")),b=jq(document.createElement("div")).addClass("CalendarWidget-TabNav"),d=jq(document.createElement("div")).addClass("keel-grid distribute mainGrid"),
c=jq(document.createElement("div")).addClass("col-auto leftNavItems"),f=jq(document.createElement("div")).addClass("col-auto rightNavItems"),g=jq(document.createElement("div")).addClass("keel-grid leftNavItemsGrid"),h=jq(document.createElement("div")).addClass("keel-grid rightNavItemsGrid"),l=jq(document.createElement("div")).addClass("tabWrapper specificDate"),k=jq(document.createElement("div")).addClass("col-auto dateCol"),p=jq(document.createElement("span")).addClass("icon calendar").html('\x3csvg viewBox\x3d"0 0 13 14" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath d\x3d"M9.75 1.647h1.247c1.106 0 2.003.888 2.003 1.999v8.356A1.999 1.999 0 0 1 10.997 14H2.003A1.997 1.997 0 0 1 0 12.002V3.646a2 2 0 0 1 2.003-1.999H3.25V0h.813v1.647h4.875V0h.812v1.647zm0 .824h1.428c.558 0 1.01.446 1.01 1.007v8.691c0 .557-.446 1.007-1.01 1.007H1.822c-.558 0-1.01-.446-1.01-1.007V3.478c0-.556.446-1.007 1.01-1.007H3.25v.823h.813v-.823h4.875v.823h.812v-.823zM.812 4.94h11.376v.824H.812V4.94zM2.6 6.364h2v2h-2v-2z" fill\x3d"currentColor" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e'),
n=jq(document.createElement("div")).addClass("tabWrapper wholeMonth"),q=jq(document.createElement("div")).addClass("col-auto dateMonth"),r=jq(document.createElement("span")).addClass("icon trend").html('\x3csvg viewBox\x3d"0 0 15 12" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath d\x3d"M0 12V5h3v7H0zm4 0V0h3v12H4zm4 0V5h3v7H8zm4 0V8h3v4h-3z" fill\x3d"currentColor" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e'),t=jq(document.createElement("div")).addClass("col-auto plusMinus"),u=jq(document.createElement("span")).addClass("input flexPlusMinus"),
w=jq(document.createElement("div")).addClass("tabUnderlay no-transition");"undefined"!==typeof R9.storage&&(null!==R9.storage.get("daterangePickerDefaultNavTab")&&"wholeMonth"!==R9.storage.get("daterangePickerDefaultNavTab")||R9.storage.set("daterangePickerDefaultNavTab","specificDate"),this.daterangePickerDefaultNavTab=R9.storage.get("daterangePickerDefaultNavTab"),null===R9.storage.get("flexPlusMinusChecked")&&R9.storage.set("flexPlusMinusChecked",!1),this.flexPlusMinusChecked=R9.storage.get("flexPlusMinusChecked"));
"wholeMonthSearch"==this.daterangePickerDefaultNavTab?(n.addClass("selected"),w.addClass("wholeMonth"),t.hide()):(l.addClass("selected"),w.addClass("specificDate"));this.flexPlusMinusChecked&&u.addClass("checked");a.append(b.append(d.append(c.append(g.append(k.append(l.text("Date").addClass("v-c-p").prepend(p)),q.append(n.text("Flex Month").prepend(r).append(jq(document.createElement("span")).addClass("newTag").text("new"))))),f.append(h.append(t.append(jq(document.createElement("div")).addClass("likeTabWrapper").append(u.text("\u00b1 3 days")))))),
w));return a.html()},makeCalendarSelectMonthHTML:function(){"undefined"!==typeof R9.storage&&(null===R9.storage.get("flexNoOfNights")&&R9.storage.set("flexNoOfNights","6-8"),this.noOfNightsValue=R9.storage.get("flexNoOfNights"));var a=jq(document.createElement("div")),b=jq(document.createElement("div")).addClass("CalendarWidget-MonthSelect"),d=jq(document.createElement("div")).addClass("keel-grid mainGrid"),c=jq(document.createElement("div")).addClass("col"),f=jq(document.createElement("div")).addClass("col"),
g=jq(document.createElement("div")).addClass("keel-grid keel-form topColGrid"),h=jq(document.createElement("div")).addClass("keel-grid bottomColGrid"),l=jq(document.createElement("div")).addClass("col"),k=jq(document.createElement("div")).addClass("col noOfNightsInputCol"),p=jq(document.createElement("input")).addClass("Common-Widgets-Text-TextInput selectTextOnFocus noOfNightsInput").attr({type:"text",id:"noOfNightsInput",name:"noOfNightsInput",value:this.noOfNightsValue}),n=jq(document.createElement("label")).addClass("nightsAtDestination").text("nights"),
q=jq(document.createElement("div")).addClass("col subTextCol"),r=jq(document.createElement("div")).addClass("col"),t=jq(document.createElement("div")).addClass("keel-grid monthSelectGrid");a.append(b.append(d.append(c.append(g.append(l.text("Number of nights:"),k.append(p,n),q.text("Not sure how long? Use a range, like 10-12 nights."))),f.append(h.append(r.append(t))))));for(b=0;12>b;b++)"undefined"!==typeof R9.storage&&(null===R9.storage.get("flexSelectedMonth")&&R9.storage.set("flexSelectedMonth",
moment().format("M")),null===R9.storage.get("flexSelectedYear")&&R9.storage.set("flexSelectedYear",moment().format("Y")),this.flexSelectedMonth=R9.storage.get("flexSelectedMonth"),this.flexSelectedYear=R9.storage.get("flexSelectedYear")),d=jq(document.createElement("div")).addClass("col-1-3 col-1-4-l centre"),c=jq(document.createElement("div")).addClass("monthWrapper"),f=moment().add(b,"M").format("M"),g=moment().add(b,"M").daysInMonth(),h=moment().add(b,"M").format("Y"),l=jq(document.createElement("div")).addClass("monthName").text(moment().add(b,
"M").format("MMMM")),k=jq(document.createElement("div")).addClass("shortMonthName").text(moment().add(b,"M").format("MMM")),p=jq(document.createElement("div")).addClass("monthYear").text(moment().add(b,"M").format("Y")),this.flexSelectedMonth==f&&this.flexSelectedYear==h&&c.addClass("selected"),t.append(d.append(c.append(l,k,p).attr("data-month",f).attr("data-year",h).attr("data-end-of-month",g)));return a.html()},makeBelowCalendarHTML:function(){return""},runBelowCalendarCallback:function(){},makeMonthCalendarHTML:function(a,
b,d,c){var e=[];e.push("\x3cdiv class\x3d'r9-datepicker-month "+d+"'\x3e");e.push(this.makeMonthHeaderHTML(a,b,c));e.push(this.makeMonthBodyHTML(a,c));e.push("\x3c/div\x3e");return e.join("")},showMonth:function(a){var b=[];b.push("\x3cspan class\x3d'r9-datepicker-month-name'\x3e");b.push(a.format(this.options.titleMonthFormat).substring(0,1).toUpperCase()+a.format(this.options.titleMonthFormat).substring(1,this.options.titleMonthFormatLen));b.push("\x3c/span\x3e");return b.join("")},showYearWithSpecialSymbol:function(a){var b=
[],d;R9&&R9.globals&&(d=R9.globals.reverseDatePickerMonthAndYear);b.push("\x3cspan class\x3d'r9-datepicker-year'\x3e");b.push(a.format(this.options.titleYearFormat)+d+" ");b.push("\x3c/span\x3e");return b.join("")},showMonthAndYear:function(a){var b=[];b.push(this.showMonth(a));b.push(this.showYearWithSpecialSymbol(a));return b.join("")},makeMonthHeaderHTML:function(a,b,d){var c=[],f=moment().startOf("month"),g=moment().add(11,"months"),h=moment(b).startOf("month"),l=moment(b).endOf("month"),k=this.maxDate,
p=this.minDate,n=this.getStartDate&&moment(this.getStartDate()),q=this.getEndDate&&moment(this.getEndDate()),n=n&&l.isBefore(n)&&this.isPastDateAllowed(),q=q&&l.isBefore(q),p=p&&l.isBefore(p),k=k&&h.isAfter(k),f=!n&&!q&&(p||k||!this.isPastDateAllowed()&&l.isBefore(f)||h.isAfter(g));c.push("\x3cspan class\x3d'r9-datepicker-month-header'\x3e");c.push("\x3ca title\x3d'"+d+"' class\x3d'r9-datepicker-switch-month "+(f?"r9-datepicker-disabled":"r9-datepicker-enabled")+"' data-val\x3d'"+b.valueOf()+"'\x3e");
c.push(this.makeMonthHeaderPickerHTML(d));c.push("\x3c/a\x3e");c.push("\x3cspan class\x3d'r9-datepicker-month-title'\x3e");c.push(this.showMonthAndYear(a));c.push("\x3c/span\x3e");c.push("\x3c/span\x3e");return c.join("")},makeMonthHeaderPickerHTML:function(a){var b=[];b.push("\x3cspan\x3e");b.push(a);b.push("\x3c/span\x3e");return b},makeMonthBodyHTML:function(a,b){var d=[];d.push("\x3cspan class\x3d'r9-datepicker-month-body'\x3e");d.push(this.makeWeekDaysHTML(a));d.push(this.makeMonthDatesHTML(a,
b));d.push("\x3c/span\x3e");return d.join("")},makeWeekDaysHTML:function(a){a=[];a.push("\x3cspan class\x3d'r9-datepicker-month-days'\x3e");for(var b=0+this.getFirstWeekDay();b<7+this.getFirstWeekDay();b++){var d=b%7;a.push("\x3cspan class\x3d'r9-datepicker-day'\x3e");a.push(this.getVeryShortDayName(d));a.push("\x3c/span\x3e")}a.push("\x3c/span\x3e");return a.join("")},makeMonthDatesHTML:function(a,b){var d=[];d.push("\x3cspan class\x3d'r9-datepicker-month-dates'\x3e");var c=this.getMonthLeadDays(a),
f=this.getDaysInMonth(a),g=moment().startOf("day"),h=moment(a).subtract(1,"months").startOf("month"),l=h.daysInMonth(),k=moment(a).add(1,"months").startOf("month"),p=moment(g).add(1,"year"),n=this.maxDate,q,r,t,u,w=this.minDate,y=1;b=b.toLowerCase();this.getStartDate&&this.getStartDate();for(var m=0;42>m;m++){q=m-c+1;u=moment([a.year(),a.month(),q]);r=m%7;t=Math.ceil((m+1)/7);0==r&&d.push("\x3cspan class\x3d'r9-datepicker-month-row "+(this.loadBuzzData?this.buzzDataClass:"")+"' aria-label\x3d'Week "+
t+"' role\x3d'week'\x3e");if(m<c&&"prev"===b&&!this.advanceStyling){var v=moment([h.year(),h.month(),l+m-c+1]);t="r9-datepicker-item r9-datepicker-othermonth-item";t=(u.isBefore(g)||u.isAfter(p))&&!this.isPastDateAllowed()||w&&u.isBefore(w)||n&&u.isAfter(n)?t+" r9-datepicker-disabled":t+" r9-datepicker-enabled";this.addGraphBar(!1,v.valueOf());d.push("\x3cspan role\x3d'gridcell' class\x3d'"+t+"' data-val\x3d'"+v.valueOf()+"'\x3e");d.push("\x3cspan\x3e"+(l+m-c+1));this.loadBuzzData&&(this.buzzPrices?
d.push("\x3cspan class\x3d'buzz-price'\x3e\x3c/span\x3e"):(d.push("\x3cspan class\x3d'buzz-message'\x3eGreat price\x3c/span\x3e"),d.push("\x3ci\x3e\x3c/i\x3e")));d.push("\x3c/span\x3e\x3c/span\x3e")}else if(m>=c+f&&"next"===b&&!this.advanceStyling)v=moment([k.year(),k.month(),y]),t="r9-datepicker-othermonth-item r9-datepicker-item",t=(u.isBefore(g)||u.isAfter(p))&&!this.isPastDateAllowed()||w&&u.isBefore(w)||n&&u.isAfter(n)?t+" r9-datepicker-disabled":t+" r9-datepicker-enabled",d.push("\x3cspan role\x3d'gridcell' class\x3d'"+
t+"' data-val\x3d'"+v.valueOf()+"'\x3e"),d.push("\x3cspan\x3e"+y++),this.loadBuzzData&&(this.buzzPrices?d.push("\x3cspan class\x3d'buzz-price'\x3e\x3c/span\x3e"):(d.push("\x3cspan class\x3d'buzz-message'\x3eGreat price\x3c/span\x3e"),d.push("\x3ci\x3e\x3c/i\x3e"))),d.push("\x3c/span\x3e\x3c/span\x3e"),this.addGraphBar(!1,v.valueOf());else if(m>=c+f&&("next"!==b||this.advanceStyling))break;else m<c&&("Prev"!==b||this.advanceStyling)?d.push("\x3cspan role\x3d'gridcell' class\x3d'r9-datepicker-item r9-datepicker-disabled'\x3e\x3cspan\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e"):
(t="r9-datepicker-item",(u.isBefore(g)||u.isAfter(p))&&!this.isPastDateAllowed()||w&&u.isBefore(w)||n&&u.isAfter(n)?(t+=" r9-datepicker-disabled",v=!1):(t+=" r9-datepicker-enabled",v=!0),u.isSame(g)&&(t+=" r9-datepicker-today"),d.push("\x3cspan role\x3d'gridcell' class\x3d'"+t+"' "),this.addGraphBar(v,u.valueOf()),d.push("data-val\x3d'"+u.valueOf()+"'"),d.push("\x3e\x3cspan\x3e"),d.push(q),this.loadBuzzData&&(this.buzzPrices?d.push("\x3cspan class\x3d'buzz-price'\x3e\x3c/span\x3e"):(d.push("\x3cspan class\x3d'buzz-message'\x3eGreat price\x3c/span\x3e"),
d.push("\x3ci\x3e\x3c/i\x3e"))),d.push("\x3c/span\x3e\x3c/span\x3e"));if(6==r&&(d.push("\x3c/span\x3e"),q===f||1<y))break}d.push("\x3c/span\x3e");return d.join("")},getFirstWeekDay:function(){return moment().startOf("week").day()},getVeryShortDayName:function(a){return moment().day(a).format("dd").substring(0,this.options.shortDayNameLen)},getMonthLeadDays:function(a){a=this.getFirstMonthDay(a)-this.getFirstWeekDay();0>a&&(a=6);return a},getFirstMonthDay:function(a){a=moment(a);a.startOf("month");
return a.day()},getDaysInMonth:function(a){return a.daysInMonth()},insideLastCalendar:function(a){return!!this.dropdown.find(".r9-datepicker-item-"+a).closest(".r9-datepicker-month").hasClass("r9-datepicker-month-last")},isPastDateAllowed:function(){return"undefined"!=this.options.allowPastDate?this.options.allowPastDate:!1},addGraphBar:function(a,b){this.options.showBuzzGraph&&(a=jq("\x3cdiv\x3e",{"class":"r9-datepicker-buzz-day "+(a?"r9-datepicker-enabled":"r9-datepicker-disabled"),"data-val":b}),
a.append(jq("\x3cdiv\x3e",{"class":"r9-datepicker-buzz-bar"})),this.buzzGraph.append(a))}}})(jq||jQuery);
(function(c){function a(a,d,c){var b,e,h,l,k,p=Date.now||function(){return(new Date).getTime()},n=function(){var f=p()-l;f<d&&0<=f?b=setTimeout(n,d-f):(b=null,c||(k=a.apply(h,e),b||(h=e=null)))};return function(){h=this;e=arguments;l=p();var f=c&&!b;b||(b=setTimeout(n,d));f&&(k=a.apply(h,e),h=e=null);return k}}R9.extend("Widgets",{DaterangePicker:function(a,d){R9.Widgets.BaseCalendarWidget.apply(this);this.elementNode=a;this.element=c(this.elementNode);this.validateElement()&&(this.startSection=c(R9.Widgets.DaterangePicker.findStartSection(this.elementNode)),
this.startDisplay=c(R9.Widgets.DaterangePicker.findStartDisplay(this.elementNode)),this.startPlaceholderDisplay=c(R9.Widgets.DaterangePicker.findStartPlaceholderDisplay(this.elementNode)),this.endSection=c(R9.Widgets.DaterangePicker.findEndSection(this.elementNode)),this.endDisplay=c(R9.Widgets.DaterangePicker.findEndDisplay(this.elementNode)),this.endPlaceholderDisplay=c(R9.Widgets.DaterangePicker.findEndPlaceholderDisplay(this.elementNode)),this.summaryDisplay=c(R9.Widgets.DaterangePicker.findSummaryDisplay(this.elementNode)),
this.clearDisplay=c(R9.Widgets.DaterangePicker.findClearDisplay(this.elementNode)),this.closeLink=c(R9.Widgets.DaterangePicker.findCloseLink(this.elementNode)),this.tabInput=c(R9.Widgets.DaterangePicker.findTabInput(this.elementNode)),this.startInput=c(R9.Widgets.DaterangePicker.findStartInput(this.elementNode)),this.endInput=c(R9.Widgets.DaterangePicker.findEndInput(this.elementNode)),this.options=c.extend({},this.options,d),this.init())}});R9.extend("Widgets.DaterangePicker",{isDatepicker:function(a){return a&&
a.nodeName&&"div"==a.nodeName.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.DaterangePicker.prototype.widgetBaseClass+"-wrapper")},findStartSection:function(a){return c(a).closest("form").find("#"+a.id+"-start")},findStartDisplay:function(a){return c(a).closest("form").find("#"+a.id+"-start-display")},findStartPlaceholderDisplay:function(a){return c(a).closest("form").find("#"+a.id+"-start-placeholder")},findEndSection:function(a){return c(a).closest("form").find("#"+
a.id+"-end")},findEndDisplay:function(a){return c(a).closest("form").find("#"+a.id+"-end-display")},findEndPlaceholderDisplay:function(a){return c(a).closest("form").find("#"+a.id+"-end-placeholder")},findSummaryDisplay:function(a){return c(a).closest("form").find("#"+a.id+"-summary-display")},findClearDisplay:function(a){return c(a).closest("form").find("#"+a.id+"-clear")},findCloseLink:function(a){return c(a).closest("form").find("#"+a.id+" .r9-datepicker-title-close")[0]},findStartInput:function(a){return c(a).closest("form").find("#"+
a.id+" .r9-datepicker-input.r9-datepicker-start")[0]},findEndInput:function(a){return c(a).closest("form").find("#"+a.id+" .r9-datepicker-input.r9-datepicker-end")[0]},findTabInput:function(a){return c(a).closest("form").find("#"+a.id+"-tab")},getDropdownId:function(a){return"datepicker"},getDropdownEl:function(a){return jq(a).find("#datepicker")}});R9.extend("Widgets.DaterangePicker.prototype",!0,R9.Widgets.BaseCalendarWidget.prototype,{widgetName:"datepicker",widgetId:"datepicker",widgetBaseClass:"r9-datepicker",
accessibilityBreakpoint:768,elementNode:null,element:null,startSection:null,startDisplay:null,startPlaceholderDisplay:null,endSection:null,endDisplay:null,endPlaceholderDisplay:null,summaryDisplay:null,clearDisplay:null,closeLink:null,startInput:null,endInput:null,tabInput:null,clicks:[],timers:null,hideTimeoutValue:100,unitFormat:null,unitAdjustment:0,preventBlur:!1,actOnStart:!0,buzzCall:!1,canShowCalendar:!0,canCloseCalendar:!0,options:{initAccessibility:!1,accessible:!0,appendTo:"body",dateItemsSelector:"span.r9-datepicker-item",
shortDayNameLen:1,title:"Prev",prevTitle:"Prev",nextTitle:"Next",offsetWidth:0,titleMonthFormat:"MMMM",titleYearFormat:"YYYY",startFormat:"ddd MMM D",startInputFormat:"YYYY/M/D",endFormat:"ddd MMM D",endInputFormat:"YYYY/M/D",nightsFormat:"0#same day|1#{0} night|2#{0} nights",daysFormat:"0#same day|1#{0} day|2#{0} days",useDaysFormat:!1,secondClickHideDelay:200,minRangeDays:0,change:null,show:null,hide:null,minDateFunc:null,focusAfterClick:!0,allowPastDate:!1,widgetId:null,useLongDisplayFormat:!1,
singlePickerWithSingleField:!1,showBuzzGraph:!1,originControl:!1,destControl:!1,isOneWay:!1,skipForceSetDefaultStartOnFocusBlur:!1,skipForceSetDefaultEndOnFocusBlur:!1,doNotFillWhenEmpty:!1,datepickerWrapperSelector:".r9-datepicker-wrapper",handleNegativeSummary:!0,delayShowDropdown:null,showDropdownDelay:200},getWidgetId:function(){this.options&&this.options.widgetId&&(this.widgetId=this.options.widgetId);return this.widgetId},getDropdownId:function(a){return this.options&&this.options.widgetId?
this.options.widgetId:R9.Widgets.DaterangePicker.getDropdownId(a)},getDropdownEl:function(a){return this.options&&this.options.widgetId?jq(a).find("#"+this.options.widgetId):R9.Widgets.DaterangePicker.getDropdownEl(a)},isAccessibilityEnabled:function(){return this.options.initAccessibility},init:function(){this.options.useDaysFormat?(this.unitFormat=this.options.daysFormat,this.unitAdjustment=1):(this.unitFormat=this.options.nightsFormat,this.unitAdjustment=0);this.options.useLongDisplayFormat&&(this.options.startFormat=
this.options.startInputFormat,this.options.endFormat=this.options.endInputFormat);this.advanceStyling&&(this.options.skipForceSetDefaultStartOnFocusBlur=!0,this.options.skipForceSetDefaultEndOnFocusBlur=!0,this.options.doNotFillWhenEmpty=!0);this.options.offsetWidth=2;this.initDropdown();this.timers={};this.bindEvent(this.tabInput,"focus",this.handleInputFocusEvent);this.bindEvent(this.tabInput,"blur",this.handleInputBlurEvent);this.bindEvent(this.tabInput,"keydown",this.handleInputKeydownEvent);
this.bindEvent(this.element,"mousedown",this.handleElementClickEvent);this.endStartIsSameField()||this.bindEvent(this.endSection,"mousedown",this.handleEndClickEvent);this.bindEvent(this.startSection,"mousedown",this.handleStartClickEvent);this.bindEvent(this.clearDisplay,"mousedown",this.handleClearClickEvent);this.bindEvent(this.closeLink,"mousedown",this.handleClearClickEvent);this.bindEvent(this.dropdown,"mousedown",this.handleDropdownClickEvent);this.bindEvent(this.overlay,"mousedown",this.handleItemClickEvent);
this.element.data(this.widgetName,this);this.update();var a=this.element.find(".r9-datepicker-display");void 0!==a&&1<a.length||(this.element.off("mousedown focus").on("mousedown focus",function(a){a.preventDefault();a.stopPropagation();jq(this).find(".r9-datepicker-display").focus();jq("body").trigger("event",[a])}),this.bindCommandUtilities(),this.start_custom_value=this.end_custom_value="",this.utils=this.options.commands.utilities,this.today=moment().startOf("day").toDate(),this.bindAccessibilityEvents(),
this.updateClicks(),this.updateDOM())},validateElement:function(){return R9.Widgets.DaterangePicker.isDatepicker(this.elementNode)&&R9.Widgets.DaterangePicker.isWidgetControlled(this.elementNode)&&void 0===this.element.data(this.widgetName)},bindEvent:function(a,c,e){var b=this;c+="."+this.getWidgetId();a.off(c).on(c,function(a){return e.call(b,this,a)})},bindCommandUtilities:function(){var a=this;this.options.commands={keys:{TAB:9,ENTER:13,UP:38,DOWN:40,LEFT:37,RIGHT:39,DOLLAR:52,CARAT:54,ESC:27},
utilities:{changeCalendar:function(b,c){c=c||1;var d=a.dropdown.find(".r9-datepicker-switch-month.r9-datepicker-enabled"),d="prev"===b?d.first():d.last();for(b=Math.abs(c);0<b;b--)a.handleNextPrevClickEvent(d);return a},isCharacterKeyPress:function(b){var c=a.options.commands.keys;return"undefined"==typeof b.which?!0:"number"==typeof b.which&&0<b.which?!b.ctrlKey&&!b.metaKey&&!b.altKey&&b.keyCode!=c.TAB&&b.keyCode!=c.ENTER&&16!=b.keyCode&&b.keyCode!=c.UP&&b.keyCode!=c.DOWN&&b.keyCode!=c.LEFT&&b.keyCode!=
c.RIGHT:!1},getRowInfo:function(b){b=a.dropdown.find(".r9-datepicker-item-"+b);var c=b.parent().children().not(".r9-datepicker-disabled");return{len:c.length-1,index:c.index(b)}},isValidDateObject:function(a){return a instanceof Date?!isNaN(a.getTime()):this.isValidDate(new Date(a))},isValidDatePair:function(a,b){return moment(a).isBefore(moment(b))},isValidDate:function(b){return this.isValidDateObject(b)&&(this.isValidDatePair(moment().subtract(1,"d"),moment(b))||a.isPastDateAllowed())},applyEndVal:function(){if(""!==
a.end_custom_value&&moment(a.end_custom_value,a.options.endInputFormat).isValid()){var b=this.formatLocaleDate(a.end_custom_value,a.options.endInputFormat);if(b&&this.isValidDate(b)){var c=a.getStartDate()||a.today;this.isValidDatePair(c,b)&&a.setEndDate(b);a.fetchBuzzData();a.options.change&&a.options.change.call(a);a.end_custom_value=""}}},applyStartVal:function(){if(""!==a.start_custom_value&&moment(a.start_custom_value,a.options.startInputFormat).isValid()){var b=this.formatLocaleDate(a.start_custom_value,
a.options.startInputFormat);if(b&&this.isValidDate(b)){a.setStartDate(b);var c=a.getEndDate()||a.today;this.isValidDatePair(b,c)||a.setEndDate(b);a.start_custom_value="";a.fetchBuzzData();a.options.change&&a.options.change.call(a)}}},validate:function(b){b=b||moment().startOf("day").toDate();return!a.isPastDateAllowed()&&b.getTime()<=a.today.getTime()?a.today:b},formatLocaleDate:function(b,c){c=c||a.options.startInputFormat;try{var d=b.split(/\D+/g)[2];4!==d.length&&(b=b.substr(0,b.length-2)+"20"+
d);return moment(b,c).toDate()}catch(g){return new Date}},incrementDay:function(b,c,f){f=f||jq.noop;b=moment(b).add(c||1,"days");f.call(a,this.validate(b.toDate()));return b},decrementDay:function(b,c,f){f=f||jq.noop;b=moment(b).subtract(c||1,"days");f.call(a,this.validate(b.toDate()));return b},dateDiff:function(a,b){return(a.getTime()-b.getTime())/864E5}}};this.utils=this.options.commands.utilities;return this},bindAccessibilityEvents:function(){var a=this;this.options.accessible="true"===jq(this.startDisplay).attr("contenteditable");
jq(this.startDisplay).attr("aria-label")||jq(this.startDisplay).attr({"aria-label":this.options.startLabel||"Start Date"});jq(this.endDisplay).attr("aria-label")||jq(this.endDisplay).attr({"aria-label":this.options.endLabel||"End Date"});this.clickTarget=this.blurTarget=null;jq(document).mousedown(function(b){a.clickTarget=jq(b.target);a.isDropdownVisible()&&jq(a.blurTarget).blur()}).mouseup(function(b){a.clickTarget=null});this.endStartIsSameField()||(this.bindEvent(this.endDisplay,"focus",this.handleEndDisplayFocusEvent),
this.bindEvent(this.endDisplay,"blur",this.handleEndDisplayBlurEvent),this.bindEvent(this.endDisplay,"keydown",this.handleEndDisplayKeydownEvent),this.bindEvent(this.endDisplay,"keyup",this.handleEndDisplayKeyupEvent));this.bindEvent(this.startDisplay,"focus",this.handleStartDisplayFocusEvent);this.bindEvent(this.startDisplay,"blur",this.handleStartDisplayBlurEvent);this.bindEvent(this.startDisplay,"keydown",this.handleStartDisplayKeydownEvent);this.bindEvent(this.startDisplay,"keyup",this.handleStartDisplayKeyupEvent);
this.isAccessibilityEnabled()&&(this.bindEvent(jq(document),"keypress",this.handleItemKeypressEvent),this.bindEvent(jq(document),"click",this.handleOutsideClickEvent))},handleClearClickEvent:function(a,c){this.clearDaterange();c.stopPropagation();this.fetchBuzzData();this.options.change&&this.options.change.apply(this,arguments);jq("body").trigger("event",[c]);return!this.element.hasClass("r9-datepicker-focus")},handleElementClickEvent:function(a,c){return this.isDropdownVisible()?this.handleClickEvent(a,
c,this.actOnStart):this.handleStartClickEvent(a,c)},handleStartClickEvent:function(a,c){return this.handleClickEvent(a,c,!0)},handleEndClickEvent:function(a,c){return this.handleClickEvent(a,c,!1)},handleClickEvent:function(a,c,e){this.actOnStart=e;var b=this.getWrapperElement(),d=this;!this.isDropdownVisible()&&this.options.focusAfterClick?setTimeout(function(){d.isDropdownVisible()||b.find(".r9-datepicker-tab").focus()},1):(this.markDropdownElements(),this.preventBlur=!0);c.stopPropagation();jq("body").trigger("event",
[c]);return!0},getWrapperElement:function(){return this.element},getStartWrapperElement:function(){return this.element},getEndWrapperElement:function(){return this.element},handleDropdownClickEvent:function(a,c){return!1},handleInputKeydownEvent:function(a,c){if(!a.disabled){var b=c.keyCode?c.keyCode:c.which,d=jq(a).parent();switch(b){case 9:return!0;case 27:this.isDropdownVisible()&&this.hideDropdown(d);break;case 32:this.isDropdownVisible()?this.hideDropdown(d):(this.actOnStart=!0,this.showDropdown(d));
break;case 8:this.clearDaterange(),this.fetchBuzzData(),this.options.change&&this.options.change.apply(this,arguments)}return!1}},handleInputFocusEvent:function(a,c){if(!a.disabled){this.preventBlur=!1;var b=jq(a).parent();this.addFocusClass(b);this.isDropdownVisible()||this.showDropdown(b);this.options.focus&&this.options.focus.apply(this,arguments)}},handleInputBlurEvent:function(a,c){if(this.preventBlur)return this.preventBlur=!1,setTimeout(function(){a.focus()},1),!1;if(a.disabled)return!0;this.hideDropdown(jq(a).parent());
this.options.blur&&this.options.blur.apply(this,arguments);return!0},handleItemHoverEvent:function(a,c){a=jq(a);a.hasClass("r9-datepicker-enabled")&&this.updateDropdownSelection(a);jq(".r9-datepicker-buzz-day[data-val\x3d%s]".format(a.attr("data-val"))).addClass("hover");return!1},handleItemHoverEndEvent:function(a,c){this.updateDropdownSelection(null);jq(".r9-datepicker-buzz-day[data-val\x3d%s]".format(jq(a).attr("data-val"))).removeClass("hover");return!1},handleItemKeypressEvent:function(a,c){if(13===
c.which&&jq(c.target).is(this.options.dateItemsSelector))return a=jq(c.target).closest(this.options.dateItemsSelector),c.stopPropagation(),c.preventDefault(),c.cancelBubble=!0,this.clickTarget=a,this.handleItemClickEvent(a,c),!1;if(13===c.which&&jq(c.target).is(".r9-datepicker-switch-month.r9-datepicker-enabled"))return a=jq(c.target).closest(".r9-datepicker-switch-month.r9-datepicker-enabled"),c.stopPropagation(),c.preventDefault(),c.cancelBubble=!0,this.clickTarget=a,this.handleNextPrevClickEvent(a,
c),!1},handleOutsideClickEvent:function(a,d){this.clickTarget=c(d.target);this.isDropdownVisible()&&!this.clickTarget.closest(".r9-datepicker, .r9-datepicker-wrapper").length&&(this.clickTarget=null,d.stopPropagation(),this.hideDropdown())},focusSelectedDay:function(a){var b=this;this.isAccessibilityEnabled()&&a&&a.length&&(this.clickTarget=null,this.dropdown.attr("tabindex",-1),this.dropdown.removeClass("r9-calendar-no-outline").addClass("r9-calendar-no-outline"),this.setTabIndexes(this.dropdown.find(".r9-datepicker-switch-month.r9-datepicker-enabled, .r9-datepicker-item.r9-datepicker-enabled")),
this.timers.focusTimeout&&clearTimeout(this.timers.focusTimeout),b.setCanClose(!1),this.timers.focusTimeout=window.setTimeout(function(){var c=b.isEndWrapper(a)?b.dropdown.find(".r9-datepicker-item-end"):b.dropdown.find(".r9-datepicker-item-start");c.length||(c=b.dropdown.find(".r9-datepicker-item.r9-datepicker-enabled").first()||null);c&&c.length&&c.focus();b.timers.setCanClose&&clearTimeout(b.timers.setCanClose);b.timers.setCanClose=setTimeout(function(){b.setCanClose(!0)},200)},300))},isEndWrapper:function(a){return a&&
this.isEndWrapperId(a.attr("id"))},isEndWrapperId:function(a){return a&&"travel_dates-end-wrapper"==a},setTabIndexes:function(a){(a=jq(a))&&0!==a.length&&a.each(function(){jq(this).attr("tabindex","0")})},focusDisplay:function(a){var b=this;if(this.isAccessibilityEnabled()){var c=jq("#"+a);c&&0!==c.length&&(this.timers.focusDisplayTimeout&&clearTimeout(this.timers.focusDisplayTimeout),!this.isDropdownVisible()&&this.clickTarget&&this.clickTarget.closest(".r9-datepicker").length&&(this.clickTarget=
null,this.addFocusClass(c),this.setCanShow(!1),this.setCanClose(!1),this.timers.focusDisplayTimeout=window.setTimeout(function(){c.find(".r9-datepicker-tab").focus();b.timers.setCanShow&&clearTimeout(b.timers.setCanShow);b.timers.setCanShow=setTimeout(function(){b.setCanShow(!0);b.setCanClose(!0)},200)},1)))}},canShow:function(){return!this.isAccessibilityEnabled()||this.canShowCalendar},setCanShow:function(a){this.canShowCalendar=a},canClose:function(){return!this.isAccessibilityEnabled()||this.canCloseCalendar},
setCanClose:function(a){this.canCloseCalendar=a},clearFocusClass:function(){this.removeFocusClass(jq(".r9-datepicker-focus"))},removeFocusClass:function(a){a.removeClass("r9-datepicker-focus")},addFocusClass:function(a){this.clearFocusClass();a.addClass("r9-datepicker-focus")},handleItemClickEvent:function(a,c){if(!0===this.isBeforeStart(a)&&!1===this.actOnStart)return this.preventBlur=!0,c.preventDefault(),this;var b=this,d=jq(a),g,h;if(d.hasClass("r9-datepicker-enabled")){g=parseInt(d.attr("data-val"));
var l=this.actOnStart;h=l?1:0;this.clicks[l?0:1]=g;this.clicks[0]&&this.clicks[1]&&(d=moment(this.clicks[1]).diff(this.clicks[0],"days"),d<this.options.minRangeDays&&(this.clicks[h]=0));this.updateDropdownSelection(null);this.clicks[0]&&this.clicks[1]?setTimeout(function(){b.hideDropdown(b.element);b.options.change&&b.options.change.apply(b,[g,l]);b.options.nextFieldSelector&&jq(b.options.nextFieldSelector).focus()},this.options.secondClickHideDelay):this.switchActOn()}this.updateDOM();jq(a).trigger("daterangepicker.itemclicked");
jq("body").trigger("event",[c]);return!1},switchActOn:function(){this.actOnStart=!this.actOnStart;this.markDropdownElements()},computeHighlitedRange:function(a){var b=[this.clicks[0],this.clicks[1]];return b[0]&&b[1]?b:b=0==a?[0,0]:this.actOnStart?[a,this.clicks[1]]:this.clicks[0]?[this.clicks[0],a]:[0,0]},computeItemState:function(a,c,e,f,g){var b=!1;this.advanceStyling||(a==c?this.actOnStart?(f.hover=!0,f.start=!0):(f.hover=!0,f.end=!0,f.highlighted=g&&g.highlighted):(f.beforeStart=a<this.clicks[0]&&
!this.actOnStart,a==this.clicks[0]?(f.start=!0,f.selected=!0):a==this.clicks[1]&&(f.selected=!0,f.end=!0,f.highlighted=g&&g.highlighted,g&&g.selected&&(f.tight=!0,b=g.tight=!0)),a>e[0]&&a<e[1]&&(f.highlighted=!0,g&&g.start&&(b=g.highlighted=!0))));this.advanceStyling&&(delete f.beforeStart,delete f.hover,a>e[0]&&a<e[1]&&(f.highlighted=!0),a===this.clicks[0]&&(f.start=!0,f.selected=!0),a===this.clicks[1]&&(f.selected=!0,f.end=!0),0<c&&(e=this.getStateStartPoint(c),(this.actOnStart&&e===this.clicks[0]||
!this.actOnStart&&e===this.clicks[1])&&e&&(g=Math.max(e,c),a>Math.min(e,c)&&a<g&&(f.tempHighlight=!0))));return b},getStateStartPoint:function(a){var b=[],c=!0,f=!0,g=this.clicks[0];0<g&&(c=c&&g<a,f=f&&g>a,b.push(g));g=this.clicks[1];0<g&&(c=c&&g<a,f=f&&g>a,b.push(g));a=c?Math.max.apply(null,b):Math.min.apply(null,b);c=!(!1===f&&!1===c);return isFinite(a)?c?a:0:null},updateItem:function(a,c){var b,d;b=[];d=[];c.highlighted?b.push("r9-datepicker-item-highlighted"):d.push("r9-datepicker-item-highlighted");
c.hover?b.push("r9-datepicker-item-hover"):d.push("r9-datepicker-item-hover");c.selected?(b.push("r9-datepicker-item-selected"),a.attr("aria-selected",!0)):(d.push("r9-datepicker-item-selected"),a.attr("aria-selected",!1));c.start?b.push("r9-datepicker-item-start"):d.push("r9-datepicker-item-start");c.beforeStart?b.push("r9-datepicker-before-start"):d.push("r9-datepicker-before-start");c.end?b.push("r9-datepicker-item-end"):d.push("r9-datepicker-item-end");c.tight?b.push("r9-datepicker-item-tight"):
d.push("r9-datepicker-item-tight");this.advanceStyling&&(c.tempHighlight?b.push("r9-datepicker-item-tempHighlight"):d.push("r9-datepicker-item-tempHighlight"));a.removeClass(d.join(" "));a.addClass(b.join(" "))},updateDropdownSelection:function(a){if(!this.advanceStyling&&!0===this.isBeforeStart(a)&&!1===this.actOnStart)return this;var b=this,c=[0,0],f=null,g=null,h=this.dropdown.find(this.options.dateItemsSelector),l=0;a&&(l=parseInt(jq(a).attr("data-val")));c=this.computeHighlitedRange(l);h.each(function(a,
d){d=jq(d);a=parseInt(d.attr("data-val"));var e={};b.computeItemState(a,l,c,e,g)&&b.updateItem(f,g);b.updateItem(d,e);f=d;g=e});this.updateHoverDOM(a)},clearDaterange:function(a){"undefined"!=typeof a?this.clicks[a]=0:this.clicks=[0,0];this.isDropdownVisible()&&this.updateDropdownSelection();this.updateDOM()},updateHoverDOM:function(a){var b,c,f,g;c=this.clicks[0];f=this.clicks[1];a&&(b=parseInt(a.attr("data-val")),this.actOnStart?c=b:f=b);c?(g=moment(c),this.startDisplay.text(g.format(this.options.startFormat)),
this.getStartWrapperElement().removeClass("r9-datepicker-start-empty")):this.getStartWrapperElement().addClass("r9-datepicker-start-empty");f?(b=moment(f),this.endDisplay.text(b.format(this.options.endFormat)),this.summaryDisplay&&(g=b.diff(g,"days"),(b=this.options.handleNegativeSummary&&0>g)&&a&&this.actOnStart?(this.endDisplay.text(this.endPlaceholderDisplay.text()),this.summaryDisplay.text("")):b||this.summaryDisplay.text(R9.Common.Utils.String.formatChoice(this.unitFormat,g+this.unitAdjustment,
g+this.unitAdjustment))),this.getEndWrapperElement().removeClass("r9-datepicker-end-empty")):this.getEndWrapperElement().addClass("r9-datepicker-end-empty")},updateDOM:function(){var a,c,e;if(0!=this.clicks[0]){if(a=moment(this.clicks[0]),this.startDisplay.text(a.format(this.options.startFormat)),this.startInput.val(a.format(this.options.startInputFormat)),this.wholeMonthSearch){var f,g;"wholeMonthSearch"==("undefined"!==typeof R9.storage.get("daterangePickerDefaultNavTab")?R9.storage.get("daterangePickerDefaultNavTab"):
"specificDate")&&jq(".searchform.rtow").hasClass("roundtrip")&&("undefined"!==typeof R9.storage&&(null===R9.storage.get("flexSelectedMonth")&&R9.storage.set("flexSelectedMonth",moment(this.clicks[0]).format("M")),null===R9.storage.get("flexSelectedYear")&&R9.storage.set("flexSelectedYear",moment(this.clicks[0]).format("Y")),null===R9.storage.get("flexNoOfNights")&&R9.storage.set("flexNoOfNights","6-8"),f=R9.storage.get("flexSelectedMonth"),g=R9.storage.get("flexSelectedYear"),e=R9.storage.get("flexNoOfNights")),
a=moment(new Date(g,f-1,1)),a.isBefore(moment())&&(a=moment().add(1,"d")),f="string"===typeof e?e.replace("-"," to "):e,e=1==e?"night":"nights",this.startDisplay.text(a.format("MMMM")+" "+a.format("Y")+", "+f+" "+e),this.startInput.val(a.format(this.options.startInputFormat)))}}else this.startDisplay.text(""),this.startInput.val("");this.endStartIsSameField()||(0!=this.clicks[1]?(c=moment(this.clicks[1]),this.endDisplay.text(c.format(this.options.endFormat)),this.endInput.val(c.format(this.options.endInputFormat))):
(this.endDisplay.text(""),this.endInput.val("")));this.summaryDisplay&&(null!=a&&null!=c?(e=c.diff(a,"days"),this.summaryDisplay.text(R9.Common.Utils.String.formatChoice(this.unitFormat,e+this.unitAdjustment,e+this.unitAdjustment))):this.summaryDisplay.text(""));null==a?this.getStartWrapperElement().addClass("r9-datepicker-start-empty"):this.getStartWrapperElement().removeClass("r9-datepicker-start-empty");this.endStartIsSameField()||(null==c?this.getEndWrapperElement().addClass("r9-datepicker-end-empty"):
this.getEndWrapperElement().removeClass("r9-datepicker-end-empty"))},endStartIsSameField:function(){var a=this.getStartWrapperElement().get(0).id,c=this.getEndWrapperElement().get(0).id;return a===c&&!0===this.options.singlePickerWithSingleField},updateClicks:function(){this.clicks=[0,0];var a;this.startInput.val()&&(a=moment(this.startInput.val(),this.options.startInputFormat),null!=a&&a.isValid()&&(this.clicks[0]=a.valueOf()));this.endInput.val()&&(a=moment(this.endInput.val(),this.options.endInputFormat),
null!=a&&a.isValid()&&(this.clicks[1]=a.valueOf()))},handleNextPrevClickEvent:function(a,c){a=moment(parseInt(jq(a).attr("data-val")));this.dropdown[0].innerHTML=this.makeCalendarHTML(a);this.runBelowCalendarCallback();this.options.showBuzzGraph&&(this.bindBuzzGraphEvents(),this.displayBuzzGraph());this.updateDropdownSelection(null);this.loadBuzzData&&this.displayBuzzData();this.focusSelectedDay(jq("#"+this.dropdown.prop("data-owner")));return!1},bindItemEvent:function(a,c){var b=this;this.dropdown.off(a,
this.options.dateItemsSelector).on(a,this.options.dateItemsSelector,function(a){return c.call(b,this,a)})},bindOverlayEvent:function(a,c){var b=this;this.overlay.off(a).on(a,function(a){return c.call(b,this,a)})},bindNextPrevEvent:function(a,c){var b=this;this.dropdown.off(a,".r9-datepicker-switch-month.r9-datepicker-enabled").on(a,".r9-datepicker-switch-month.r9-datepicker-enabled",function(a){return c.call(b,this,a)})},bindCloseEvent:function(a,c){var b=this;this.dropdown.off(a,".r9-datepicker-close").on(a,
".r9-datepicker-close",function(a){return c.call(b,this,a)})},initDropdown:function(){var a=this.getDropdownId(this.element),c=this.getDropdownEl(this.element).get(0);if(null==c){var e=R9.Widgets.DaterangePicker.prototype.widgetBaseClass;this.options.dropdownClass&&(e=e+" "+this.options.dropdownClass);c=jq("\x3cdiv\x3e\x3c/div\x3e",{id:a,css:{display:"none",position:"absolute",zIndex:10009}}).appendTo(this.options.appendTo)[0];jq(c).addClass(e);this.advanceStyling&&jq(c).addClass("r9-advance-styling");
this.wholeMonthSearch&&jq(c).addClass("CalendarWidget-WholeMonthSearch")}this.dropdown=jq(c);this.overlay=jq("#"+this.widgetBaseClass+"-overlay");this.overlay.length||(this.overlay=jq('\x3cdiv id\x3d"'+this.widgetBaseClass+'-overlay" class\x3d"'+this.widgetBaseClass+'-overlay"\x3e\x3c/div\x3e').appendTo(this.options.appendTo))},debounceChangeFn:function(){this._debouncedChange&&this._debouncedChange.apply(this,arguments);this._debouncedChange=a(this.options.change||function(){},20);this._debouncedChange.apply(this,
arguments)},isDropdownVisible:function(){return"none"!=this.dropdown.css("display")},markDropdownElements:function(){this.unmarkDropdownElements();this.element.addClass("r9-datepicker-dropdown");this.actOnStart?this.element.addClass("r9-datepicker-dropdown-start"):this.element.addClass("r9-datepicker-dropdown-end")},unmarkDropdownElements:function(){this.element.removeClass("r9-datepicker-dropdown r9-datepicker-dropdown-start r9-datepicker-dropdown-end")},positionDropdown:function(a){var b=a.offset(),
c=jq(this.options.appendTo).offset(),f=0,g=this.dropdown[0].style;this.dropdown.parent()[0]===jq(document.body)[0]&&(f=parseInt((jq(document.body).css("top")||"0").replace("-",""))||0);jq("#datepicker").removeClass("r9-datepicker-responsive-right-position");if(606>jq(window).width()&&jq(".fdSearchForm-hotel").length&&jq("#travel_dates-end-wrapper").hasClass("r9-datepicker-focus")){jq("#datepicker").addClass("r9-datepicker-responsive-right-position");var h=b.left-c.left-144}else{var h=b.left-c.left,
l=h+this.dropdown.outerWidth();l>window.innerWidth&&(l-=window.innerWidth,h=h-l-15,this.dropdown.find(".r9-datepicker-pointer").css("left",l+36+"px"))}g.left=h+"px";g.top=f+b.top+a.outerHeight()-c.top+"px"},_hideDropdown:function(a){if("none"==this.dropdown.css("display")||null!=a&&this.dropdown.prop("data-owner")!=a.attr("id"))return!1;this.clearFocusClass();this.options.hide&&this.options.hide.apply(this,arguments);this.hideOverlay();this.preventBlur=!1;this.updateDOM();this.unmarkDropdownElements();
this.dropdown.hide();this.actOnStart=!0;this.focusDisplay(this.dropdown.prop("data-owner"));jq(window).unbind("resize",this.resizeHandler);return!0},hideDropdown:function(a){var b=this;if(!this.canClose())return!1;this.clearFocusClass();if("none"==this.dropdown.css("display")||null!=a&&this.dropdown.prop("data-owner")!=a.attr("id")||this.preventBlur)return this.preventBlur=!1;this.options.hide&&this.options.hide.apply(this,arguments);this.preventBlur=!1;this.updateDOM();this.unmarkDropdownElements();
this.actOnStart=!0;this.timers.hideTimeout&&clearTimeout(this.timers.hideTimeout);this.timers.hideTimeout=setTimeout(function(){b._hideDropdown.call(b,a)},this.hideTimeoutValue)},hideMultipleDropdowns:function(){this.options.datepickerWrapperSelector&&jq(this.options.datepickerWrapperSelector).not(this.getStartWrapperElement()).not(this.getEndWrapperElement()).each(function(a,c){jq(c).daterangePickerTwoFields("hideDropdown")})},showDropdown:function(a){this.timers.hideTimeout&&clearTimeout(this.timers.hideTimeout);
if("function"===typeof this.options.delayShowDropdown&&this.options.delayShowDropdown()&&!this.showDropdownTimeout)this.showDropdownTimeout=setTimeout(this.showDropdown.bind(this,a),this.options.showDropdownDelay);else if(null!==this.showDropdownTimeout&&(clearTimeout(this.showDropdownTimeout),this.showDropdownTimeout=null),this.canShow()){this.options.show&&this.options.show.apply(this,arguments);this.hideMultipleDropdowns();this.showOverlay();this.markDropdownElements();this.updateClicks();"function"===
typeof this.options.minDateFunc&&this.options.minDateFunc(this);this.dropdown[0].innerHTML=this.makeCalendarHTML(!this.actOnStart&&this.clicks[1]?this.clicks[1]:this.clicks[0]);this.updateDropdownSelection(null);var b=R9.Widgets.DaterangePicker.prototype.widgetBaseClass;this.options.dropdownClass&&(b=b+" "+this.options.dropdownClass);this.addFocusClass(a);this.dropdown.addClass(b);b=this.dropdown[0].style;this.runBelowCalendarCallback();this.positionDropdown(a);var c=this,f=jq(window).width();this.resizeHandler=
function(){var b=jq(window).width();10<Math.abs(b-f)&&(f=b,c.positionDropdown(a))};jq(window).on("resize",this.resizeHandler);this.bindItemEvent("mousedown",this.handleItemClickEvent);if(R9.globals.isTouch){var g=this;this.bindOverlayEvent("mousedown",function(){g.hideDropdown(g.element)})}else this.bindItemEvent("mouseover",this.handleItemHoverEvent),this.bindItemEvent("mouseout",this.handleItemHoverEndEvent);this.options.showBuzzGraph&&(this.bindBuzzGraphEvents(),this.displayBuzzGraph());this.bindNextPrevEvent("mousedown",
this.handleNextPrevClickEvent);this.bindCloseEvent("mousedown",function(){c.hideDropdown(c.element)});this.dropdown.prop("data-owner",a.attr("id"));this.loadBuzzData&&this.displayBuzzData();b.display="inline";this.focusSelectedDay(a)}},showOverlay:function(){this.overlay.show()},displayBuzzData:function(){"function"===typeof this.options.getFormData&&(new R9.DatePicker.BuzzData).update(this.dropdown,this.options.getFormData(this.actOnStart))},hideOverlay:function(){this.overlay.hide()},getStartDate:function(){this.updateClicks();
return 0!=this.clicks[0]?new Date(this.clicks[0]):null},getEndDate:function(){this.updateClicks();return 0!=this.clicks[1]?new Date(this.clicks[1]):null},parseDateString:function(a,c){try{return moment(a,c||this.options.startInputFormat)._d}catch(e){return""}},setFocusAfterClick:function(a){this.options.focusAfterClick=a},setStartDate:function(a){a?("string"===typeof a?a=this.parseDateString(a,this.options.startInputFormat):"number"===typeof a?a=new Date(a):"object"===typeof a?moment.isMoment(a)?
a.isValid()&&(a=a.toDate()):moment(a).isValid()&&(a="toDate"in a?a.toDate():a):a=new Date(0),void 0!=a.getTime&&(this.clicks[0]=a.getTime())):this.clicks[0]=0;this.updateDOM()},setEndDate:function(a){a?("string"===typeof a?a=this.parseDateString(a,this.options.endInputFormat):"number"===typeof a?a=new Date(a):"object"===typeof a?moment.isMoment(a)?a.isValid()&&(a=a.toDate()):moment(a).isValid()&&(a="toDate"in a?a.toDate():a):a=new Date(0),void 0!=a.getTime&&(this.clicks[1]=a.getTime())):this.clicks[1]=
0;this.updateDOM()},setUseDaysFormat:function(a){this.options.useDaysFormat=a;this.options.useDaysFormat?(this.unitFormat=this.options.daysFormat,this.unitAdjustment=1):(this.unitFormat=this.options.nightsFormat,this.unitAdjustment=0)},update:function(){this.updateClicks();this.updateDOM()},isBeforeStart:function(a){a instanceof jq&&(a=jq(a).attr("data-val"));return a&&null!==this.getStartDate()&&moment(parseInt(a)).isBefore(this.getStartDate())?!0:!1},decrementEndDay:function(a){var b=this.insideLastCalendar("end"),
c=this.getEndDate()||this.today,f=this.getStartDate()||this.today;a=this.utils.decrementDay(c,a);a.date()!==a.daysInMonth()||b||this.prevCalendar();f&&moment(c)>moment(f)&&this.setEndDate(a.toDate());this.fetchBuzzData();this.debounceChangeFn();this.updateDropdownSelection();return this.getEndDate()},decrementStartDay:function(a){var b=this.insideLastCalendar("start");a=this.utils.decrementDay(this.utils.validate(this.getStartDate()),a,this.setStartDate);a.date()!==a.daysInMonth()||b||this.prevCalendar();
this.fetchBuzzData();this.debounceChangeFn();this.updateDropdownSelection();return this.getEndDate()},incrementEndDay:function(a){var b=this.insideLastCalendar("end"),c=this.getEndDate();a=this.utils.incrementDay(c||this.today,a,this.setEndDate);1<=a.date()&&a.month()!==c.getMonth()&&b&&this.nextCalendar();this.fetchBuzzData();this.debounceChangeFn();this.updateDropdownSelection();return this.getEndDate()},incrementStartDay:function(a){var b=this.insideLastCalendar("start"),c=this.getStartDate()||
this.today,f=this.getEndDate();1===this.utils.incrementDay(c,a,this.setStartDate).date()&&b&&this.nextCalendar();(!f||moment(c)>=moment(f))&&this.setEndDate(this.getStartDate());this.fetchBuzzData();this.debounceChangeFn();this.updateDropdownSelection();return this.getStartDate()},handleStartDisplayFocusEvent:function(a,c){var b="",d=this.getStartWrapperElement(),g=this;this.markDropdownElements();this.addFocusClass(d);var h=jq(a);h.text()||!0!==this.options.skipForceSetDefaultStartOnFocusBlur&&this.setStartDate(this.today);
null!==(startdate=this.getStartDate())&&(b=jq(this.startInput).val()||moment(startdate).format(this.options.startInputFormat));this.actOnStart=!0;this.hideDropdown(this.getEndWrapperElement());this.showDropdown(d);this.options.accessible&&setTimeout(function(){h.text(b);g.selectDisplayBox(a)},1);c.stopPropagation();c.stopImmediatePropagation();jq("body").trigger("event",[c]);return this},handleStartDisplayBlurEvent:function(a,c){if(null!==this.clickTarget&&0<this.clickTarget.closest(".r9-datepicker").length)this.blurTarget=
a;else{var b=this.getStartWrapperElement(),d=this.getStartDate();this.hideDropdown(b);a=jq(a);""===a.text()&&!0===this.options.doNotFillWhenEmpty&&(this.setStartDate(null),this.options.change&&this.options.change.apply(this,arguments));""===a.text()&&null===d?!0!==this.options.skipForceSetDefaultStartOnFocusBlur&&this.setStartDate(this.today):""!==this.start_custom_value&&this.utils.applyStartVal();this.updateDropdownSelection();this.updateClicks();return this}},callNTimes:function(a,c){for(var b=
0;b<c;b++)a.call(this)},handleStartDisplayKeydownEvent:function(a,d){var b=d.keyCode||d.which,f=this.options.commands.keys,g=jq(this.endDisplay);a=jq(a);var h=0!==g.length&&!g.is(":hidden");if((b===f.TAB&&h||b===f.ENTER)&&!d.shiftKey){if(!1===g.is(":hidden")){var h=c(this.options.nextFieldAfterStartDateSelector),l=c(".gridCellFlexDepartPlusMinus").first();h.length?h.focus():0===l.length||!1===l.is(":visible")?(d.preventDefault(),d.stopPropagation(),setTimeout(function(){g.focus()},1)):0<l.length&&
l.find("select").focus()}if(b===f.ENTER&&g.is(":hidden"))return a.closest("form").find("[type\x3dsubmit]").trigger("click"),d.preventDefault(),d.stopPropagation(),!1;this.utils.applyStartVal();this.updateDropdownSelection();return!1}a=this.options.commands.keys;switch(b){case a.UP:this.callNTimes(this.decrementStartDay,7);d.preventDefault();d.stopPropagation();break;case a.RIGHT:this.incrementStartDay();d.preventDefault();d.stopPropagation();break;case a.LEFT:this.decrementStartDay();d.preventDefault();
d.stopPropagation();break;case a.DOWN:this.callNTimes(this.incrementStartDay,7);d.preventDefault();d.stopPropagation();break;case a.ESC:this.isDropdownVisible()&&this.hideDropdown(this.getStartWrapperElement())}this.vim(d,"start");jq("body").trigger("event",[d]);return this},handleEndDisplayFocusEvent:function(a,c){var b="",d=this.getEndWrapperElement(),g=this;g.markDropdownElements();this.addFocusClass(jq(d));var h=jq(a),l=g.clicks[0]||g.today.getTime();(!h.text()||g.clicks[1]<=l)&&!0!==this.options.skipForceSetDefaultEndOnFocusBlur&&
g.setEndDate(moment(l).toDate());null!==(enddate=g.getEndDate())&&(b=jq(g.endInput).val()||moment(enddate).format(g.options.endInputFormat));g.actOnStart=!1;g.showDropdown(d);g.options.accessible&&(jq(g.endDisplay).attr("contenteditable","true"),setTimeout(function(){h.text(b);g.selectDisplayBox(a)},1));c.stopPropagation();c.stopImmediatePropagation();jq("body").trigger("event",[c]);return this},handleEndDisplayBlurEvent:function(a,c){var b=this.getEndWrapperElement();this.options.accessible&&jq(this.endDisplay).attr("contenteditable",
"false");if(null!==this.clickTarget&&0<this.clickTarget.closest(".r9-datepicker").length)this.blurTarget=a;else return this.hideDropdown(b),a=jq(a),""===a.text()&&!0===this.options.doNotFillWhenEmpty&&(this.setEndDate(null),this.options.change&&this.options.change.apply(this,arguments)),""==a.text()&&null===this.getEndDate()?!0!==this.options.skipForceSetDefaultEndOnFocusBlur&&(null!==this.getStartDate()?this.setEndDate(moment(this.getStartDate()).add(1,"days")):this.setEndDate(moment().toDate())):
this.utils.applyEndVal(),this.updateDropdownSelection(),this},handleEndDisplayKeydownEvent:function(a,d){var b=d.keyCode||d.which;a=jq(a);a.text();var f=this.options.commands.keys;if(b===f.TAB&&!0===d.shiftKey){var g=c(this.options.nextFieldAfterStartDateSelector),h=c(".gridCellFlexDepartPlusMinus").first(),l=jq(this.startDisplay);g.length?setTimeout(function(){g.focus()}):h.is(":visible")?setTimeout(function(){h.children(".flexPlusMinusChoices").focus()}):!1===l.is(":hidden")&&(d.preventDefault(),
d.stopPropagation(),setTimeout(function(){l.focus()}))}else{if(b===f.ENTER)return this.utils.applyEndVal(),a.closest("form").find("[type\x3dsubmit]").trigger("click"),this.updateDropdownSelection(),d.preventDefault(),d.stopPropagation(),this.hideDropdown(this.getEndWrapperElement()),!1;a=this.options.commands.keys||{};switch(b){case a.UP:this.callNTimes(this.decrementEndDay,7);d.preventDefault();d.stopPropagation();break;case a.RIGHT:this.incrementEndDay();d.preventDefault();d.stopPropagation();break;
case a.LEFT:this.decrementEndDay();d.preventDefault();d.stopPropagation();break;case a.DOWN:this.callNTimes(this.incrementEndDay,7);d.preventDefault();d.stopPropagation();break;case a.ESC:this.isDropdownVisible()&&this.hideDropdown(this.getEndWrapperElement())}this.vim(d,"end")}jq("body").trigger("event",[d]);return this},handleStartDisplayKeyupEvent:function(a,c){this.utils.isCharacterKeyPress(c)&&(this.start_custom_value=jq(a).text());return this},handleEndDisplayKeyupEvent:function(a,c){this.utils.isCharacterKeyPress(c)&&
(this.end_custom_value=jq(a).text());return this},nextCalendar:function(a){return this.utils.changeCalendar("next",a)},prevCalendar:function(a){return this.utils.changeCalendar("prev",a)},selectDisplayBox:function(a){clearTimeout(this.timers.selectDisplayBox);this.timers.selectDisplayBox=window.setTimeout(function(){var b,c;window.getSelection&&document.createRange?(b=window.getSelection(),b.removeAllRanges(),c=document.createRange(),c.selectNodeContents(a),b.addRange(c)):document.body.createTextRange&&
(c=document.body.createTextRange(),c.moveToElementText(a),R9.Common.Utils.Browsers.isIE(8)||c.select())},1)},vim:function(a,c){var b=this.options.commands.keys||{};switch(a.keyCode||a.which){case b.DOLLAR:a.shiftKey&&(this.endOfLine(c),a.preventDefault());break;case b.CARAT:a.shiftKey&&(this.startOfLine(c),a.preventDefault())}return this},startOfLine:function(a){var b=this.utils.getRowInfo(a);"start"==a?this.decrementStartDay(b.index):this.decrementEndDay(b.index)},endOfLine:function(a){var b=this.utils.getRowInfo(a),
b=b.len-b.index;"start"==a?this.incrementStartDay(b):this.incrementEndDay(b)},bindBuzzGraphEvents:function(){var a=this;jq(".r9-datepicker-buzz-day").hover(function(){jq(".r9-datepicker-item[data-val\x3d%s]".format(jq(this).attr("data-val"))).addClass("r9-datepicker-item-hover");jq(".r9-datepicker-buzz-graph-footer \x3e div \x3e .detail").html(jq(this).children(".r9-datepicker-buzz-bar").attr("footertitle"))},function(){jq(".r9-datepicker-item[data-val\x3d%s]".format(jq(this).attr("data-val"))).removeClass("r9-datepicker-item-hover");
jq(".r9-datepicker-buzz-graph-footer \x3e div \x3e .detail").html("")});jq(".r9-datepicker-buzz-day").click(function(){var b=Number(jq(this).children(".r9-datepicker-buzz-bar").attr("dtstart"));if(a.actOnStart){var c=Number(jq(this).children(".r9-datepicker-buzz-bar").attr("dtend"));a.clearDaterange();a.setStartDate(b);a.options.isOneWay||a.setEndDate(c);a.updateDropdownSelection(null);a.options.isOneWay?(a.setEndDate(b),jq(".r9-datepicker-item[data-val\x3d%s]".format(jq(this).attr("data-val"))).mousedown(),
R9.Analytics.api.trackEvent("/flexgraph/oneway/click")):(a.endDisplay.focus(),R9.Analytics.api.trackEvent("/flexgraph/startdate/click"))}else a.setEndDate(b),jq(".r9-datepicker-item[data-val\x3d%s]".format(jq(this).attr("data-val"))).mousedown(),R9.Analytics.api.trackEvent("/flexgraph/enddate/click")})},fetchBuzzGraphData:function(){var a=this;jq("#flexgraphOK").size();var c="y"==jq("#onewaytrip").filter(":checked").val()||"y"==jq("#multi").filter(":checked").val();a.options.isOneWay=c;var e=a.getStartDate()||
a.today,f=a.getEndDate(),g=c?1:3;null==f||c||(g=Math.floor(a.utils.dateDiff(f,e)+1));var h=Number(jq(".r9-datepicker-month-first").find(".r9-datepicker-enabled:first").attr("data-val"));if(""==a.options.originControl.val()||""==a.options.destControl.val())jq(".r9-datepicker-buzz-graph-footer \x3e div").addClass("hidden"),jq(".r9-datepicker-buzz-graph-footer .noairports").removeClass("hidden");else if(a.actOnStart){var l=moment(h).format("YYYY-MM-DD");a.buzzCall&&a.buzzCall.abort();a.buzzCall=c?jq.ajax({type:"GET",
url:"/h/run/flexgraph",data:{q:"oneway",o:a.options.originControl.val().substr(0,3),d:a.options.destControl.val().substr(0,3),depart:l,daysout:70,duration:g,json:1},dataType:"json",success:function(b){try{responseObject=b,a.graphDataReadyCallback(responseObject,g,h,!0,e.getTime())}catch(n){}a.buzzCall=!1},error:function(b,c,d){a.buzzCall=!1},cache:!1}):jq.ajax({type:"GET",url:"/h/run/flexgraph",data:{q:"fixed",o:a.options.originControl.val().substr(0,3),d:a.options.destControl.val().substr(0,3),depart:l,
daysout:70,duration:g,json:1},dataType:"json",success:function(b){try{responseObject=b,a.graphDataReadyCallback(responseObject,g,h,!1,e.getTime())}catch(n){}a.buzzCall=!1},error:function(b,c,d){a.buzzCall=!1},cache:!1})}else{var l=moment(e.getTime()).format("YYYY-MM-DD"),k=(f||a.today).getTime();a.buzzCall&&a.buzzCall.abort();a.buzzCall=jq.ajax({type:"GET",url:"/h/run/flexgraph",data:{q:"start",o:a.options.originControl.val().substr(0,3),d:a.options.destControl.val().substr(0,3),depart:l,daysout:70,
json:1},dataType:"json",success:function(b){try{responseObject=b,a.graphDataReadyCallback(responseObject,g,e.getTime(),!1,k)}catch(n){}a.buzzCall=!1},error:function(b,c,d){a.buzzCall=!1},cache:!1})}},displayBuzzGraph:function(){this.fetchBuzzData(!0)},fetchBuzzData:function(a){this.options.showBuzzGraph&&a&&(jq(".r9-datepicker-buzz-day.r9-datepicker-enabled .r9-datepicker-buzz-bar").each(function(){jq(this).css("height","2px").attr("footertitle","")}),this.fetchBuzzGraphData())},graphDataReadyCallback:function(a,
c,e,f,g){this.actOnStart?f?(jq(".r9-datepicker-buzz-graph-footer \x3e div").addClass("hidden"),jq(".r9-datepicker-buzz-graph-footer .oneway").removeClass("hidden")):(jq(".r9-datepicker-buzz-graph-footer \x3e div").addClass("hidden"),jq(".r9-datepicker-buzz-graph-footer .duration #durationNumber").html(c),jq(".r9-datepicker-buzz-graph-footer .duration").removeClass("hidden")):(jq(".r9-datepicker-buzz-graph-footer \x3e div").addClass("hidden"),jq(".r9-datepicker-buzz-graph-footer .fixedstart #flexDepartDate").html(moment(e).format(this.options.startInputFormat)),
jq(".r9-datepicker-buzz-graph-footer .fixedstart").removeClass("hidden"));e=c=500;var b=0,d=0,k=0,p;for(p in a){k++;var n=Number(a[p].localPrice);n>c&&(c=n);n<e&&1<n&&(e=n,d=p);p==g&&(b=n)}if(0==k)jq(".r9-datepicker-buzz-graph").hide(),jq(".r9-datepicker-buzz-graph-footer").hide();else{k=0;for(p in a){var n=a[p].localPrice,q=a[p].localPriceAsString,r=a[p].departMilli,t=a[p].returnMilli,u=moment(a[p].departMilli).format(this.options.startInputFormat),w=moment(a[p].returnMilli).format(this.options.startInputFormat),
y=this.actOnStart?jq(".r9-datepicker-buzz-day[data-val\x3d'"+p+"']").find("div"):jq(".r9-datepicker-buzz-day[data-val\x3d'"+t+"']").find("div");1==y.size()&&(n=Math.floor(n/c*100),y.css("height",n+"%"),k++,f?y.attr("footertitle",u+" "+q):y.attr("footertitle",u+"-"+w+" "+q),this.actOnStart?y.attr("dtstart",r):y.attr("dtstart",t),y.attr("dtend",t),this.actOnStart?p==g&&(y.addClass("selected"),jq("#graphpricebar").css("bottom",n-1+"px").show(),jq("#graphprice").html(q).css("bottom",n-7+"px").show()):
t==g&&(y.addClass("selected"),jq("#graphpricebar").css("bottom",n-1+"px").show(),jq("#graphprice").html(q).css("bottom",n-7+"px").show()),p==d&&(0<b&&b>e&&e<.9*b?jq("#graphlowpricebar").css("bottom",n-1+"px").show():jq("#graphlowpricebar").hide()))}0==k?(jq(".r9-datepicker-buzz-graph").hide(),jq(".r9-datepicker-buzz-graph-footer").hide()):jq(".r9-datepicker-buzz-graph").is(":visible")||(jq(".r9-datepicker-buzz-graph").show(),jq(".r9-datepicker-buzz-graph-footer").show())}}})})(jq||jQuery);
(function(c){c.extend("Widgets.DaterangePicker.prototype.options",{prevTitle:"Prev",nextTitle:"Next",nightsFormat:"0#same day|1#1 night|2#{0} nights",daysFormat:"0#same day|1#1 day|2#{0} days",startInputFormat:"MM/DD/YYYY",endInputFormat:"MM/DD/YYYY",startFormat:"ddd M/D",endFormat:"ddd M/D"})})(window.R9);
(function(c){R9.extend("Widgets",{DaterangePickerTwoFields:function(a,b){R9.Widgets.BaseCalendarWidget.apply(this);this.endNode=a;this.endElement=c(this.endNode);this.startElement=jq(this.endElement).closest("form").find('[id$\x3d"start-wrapper"]');1!=this.startElement.length&&(this.startElement=jq("#"+this.endElement.attr("id").replace("end-wrapper","start-wrapper")));this.validateElement()&&(this.startDisplay=c(R9.Widgets.DaterangePickerTwoFields.findDisplay(this.startElement[0])),this.startClearDisplay=
c(R9.Widgets.DaterangePickerTwoFields.findClearDisplay(this.startElement[0])),this.startPlaceholderDisplay=c(R9.Widgets.DaterangePickerTwoFields.findPlaceholderDisplay(this.startElement[0])),this.startInputTab=c(R9.Widgets.DaterangePickerTwoFields.findInputTab(this.startElement[0])),this.startInput=c(R9.Widgets.DaterangePickerTwoFields.findInput(this.startElement[0])),this.endDisplay=c(R9.Widgets.DaterangePickerTwoFields.findDisplay(this.endElement[0])),this.endClearDisplay=c(R9.Widgets.DaterangePickerTwoFields.findClearDisplay(this.endElement[0])),
this.endPlaceholderDisplay=c(R9.Widgets.DaterangePickerTwoFields.findPlaceholderDisplay(this.endElement[0])),this.endInputTab=c(R9.Widgets.DaterangePickerTwoFields.findInputTab(this.endElement[0])),this.endInput=c(R9.Widgets.DaterangePickerTwoFields.findInput(this.endElement[0])),this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.DaterangePickerTwoFields",{isDatepicker:function(a){return a&&a.nodeName&&"div"==a.nodeName.toLowerCase()},isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.DaterangePicker.prototype.widgetBaseClass+
"-wrapper")},findDisplay:function(a){var b=c(a).closest("form").find("#"+a.id.replace("wrapper","display"))[0];b||(b=document.getElementById(a.id.replace("wrapper","display")));return b},findClearDisplay:function(a){var b=c(a).closest("form").find("#"+a.id.replace("wrapper","clear"))[0];b||(b=document.getElementById(a.id.replace("wrapper","clear")));return b},findPlaceholderDisplay:function(a){var b=c(a).closest("form").find("#"+a.id.replace("wrapper","placeholder"))[0];b||(b=document.getElementById(a.id.replace("wrapper",
"placeholder")));return b},findInputTab:function(a){var b=c(a).closest("form").find("#"+a.id.replace("wrapper","tab"))[0];b||(b=document.getElementById(a.id.replace("wrapper","tab")));return b},findInput:function(a){var b=jq(a).closest("form").find("#"+a.id+" .r9-datepicker-input")[0];b||(b=jq("#"+a.id+" .r9-datepicker-input")[0]);return b},getDropdownId:function(a){return"datepicker"}});R9.extend("Widgets.DaterangePickerTwoFields.prototype",!0,R9.Widgets.DaterangePicker.prototype,{endNode:null,startElement:null,
endElement:null,startDisplay:null,startClearDisplay:null,startPlaceholderDisplay:null,startInputTab:null,startInput:null,endDisplay:null,endClearDisplay:null,endPlaceholderDisplay:null,endInputTab:null,endInput:null,singleDateMode:!1,init:function(){this.advanceStyling&&(this.options.skipForceSetDefaultStartOnFocusBlur=!0,this.options.skipForceSetDefaultEndOnFocusBlur=!0,this.options.doNotFillWhenEmpty=!0);this.initDropdown();this.timers={};this.options.useLongDisplayFormat&&(this.options.startFormat=
this.options.startInputFormat,this.options.endFormat=this.options.endInputFormat);this.endStartIsSameField()||(this.bindEvent(this.endInputTab,"focus",this.handleEndInputFocusEvent),this.bindEvent(this.endInputTab,"blur",this.handleInputBlurEvent),this.bindEvent(this.endInputTab,"keydown",this.handleInputKeydownEvent),this.bindEvent(this.endElement,"mousedown",this.handleEndClickEvent),this.bindEvent(this.endClearDisplay,"mousedown",this.handleEndClearClickEvent));this.bindEvent(this.startInputTab,
"focus",this.handleStartInputFocusEvent);this.bindEvent(this.startInputTab,"blur",this.handleInputBlurEvent);this.bindEvent(this.startInputTab,"keydown",this.handleInputKeydownEvent);this.bindEvent(this.startElement,"mousedown",this.handleStartClickEvent);this.bindEvent(this.startClearDisplay,"mousedown",this.handleStartClearClickEvent);this.endElement.data(this.widgetName,this);jq(".r9-datepicker-wrapper").each(function(){var a=jq(this).find(".r9-datepicker-display");if(!(void 0!==a&&1<a.length))jq(this).off("mousedown focus").on("mousedown focus",
function(a){a.preventDefault();a.stopPropagation();jq("body").trigger("event",[a]);jq(this).find(".r9-datepicker-display").focus()})});this.bindCommandUtilities();this.start_custom_value=this.end_custom_value="";this.utils=this.options.commands.utilities;this.today=moment().startOf("day").toDate();this.bindAccessibilityEvents();this.updateClicks();this.updateDOM()},validateElement:function(){return R9.Widgets.DaterangePicker.isDatepicker(this.endNode)&&R9.Widgets.DaterangePicker.isWidgetControlled(this.endNode)&&
void 0===this.endElement.data(this.widgetName)},getWrapperElement:function(){return this.actOnStart?this.startElement:this.endElement},getStartWrapperElement:function(){return this.startElement},getEndWrapperElement:function(){return this.endElement},switchActOn:function(){var a=!this.actOnStart;this.hideDropdown(this.getWrapperElement());this.actOnStart=a;(this.actOnStart?this.startInputTab:this.endInputTab).focus()},markDropdownElements:function(){this.unmarkDropdownElements();this.actOnStart?this.startElement.addClass("r9-datepicker-dropdown r9-datepicker-dropdown-start"):
this.endElement.addClass("r9-datepicker-dropdown r9-datepicker-dropdown-end")},unmarkDropdownElements:function(){this.startElement.removeClass("r9-datepicker-dropdown r9-datepicker-dropdown-start");this.endElement.removeClass("r9-datepicker-dropdown r9-datepicker-dropdown-end")},setSingleDateMode:function(a,b){this.singleDateMode!=a&&(this.singleDateMode=a,b||this.updateDOM())},getSingleDateMode:function(){return this.singleDateMode},handleStartClearClickEvent:function(a,b){this.clearDaterange(0);
this.options.change&&this.options.change.apply(this,arguments);return!this.startElement.hasClass("r9-datepicker-focus")},handleEndClearClickEvent:function(a,b){this.clearDaterange(1);this.options.change&&this.options.change.apply(this,arguments);return!this.endElement.hasClass("r9-datepicker-focus")},handleStartInputFocusEvent:function(a,b){if(!a.disabled){this.preventBlur=!1;var c=this.getStartWrapperElement();c.addClass("r9-datepicker-focus");this.startDisplay.text()||this.setStartDate(this.today);
this.actOnStart=!0;this.showDropdown(c);this.options.focus&&this.options.focus.apply(this,arguments)}},handleEndInputFocusEvent:function(a,b){if(!a.disabled){this.preventBlur=!1;var c=this.getEndWrapperElement();c.addClass("r9-datepicker-focus");this.endDisplay.text()||this.setEndDate(moment(this.getStartDate()).toDate());this.actOnStart=!1;this.showDropdown(c);this.options.focus&&this.options.focus.apply(this,arguments)}},handleItemClickEvent:function(a,b){var c=this,e=jq(a);return this.singleDateMode?
(e.hasClass("r9-datepicker-enabled")&&(a=parseInt(e.attr("data-val")),this.clicks[0]=a,this.clicks[1]<this.clicks[0]&&(this.clicks[1]=this.clicks[0]),this.updateDropdownSelection(null),setTimeout(function(){c.hideDropdown(null);c.options.change&&c.options.change.apply(c,arguments);c.options.nextFieldSelector&&jq(c.options.nextFieldSelector).focus()},this.options.secondClickHideDelay)),this.updateDOM(),!1):R9.Widgets.DaterangePicker.prototype.handleItemClickEvent.call(this,a,b)},handleClickEvent:function(a,
b,c){return!0},updateItem:function(a,b){this.singleDateMode?(b.hover?a.addClass("r9-datepicker-item-hover"):a.removeClass("r9-datepicker-item-hover"),a.removeClass("r9-datepicker-item-selected"),a.removeClass("r9-datepicker-item-start"),b.selected&&!b.end?(a.addClass("r9-datepicker-item-selected"),a.attr("aria-selected",!0)):b.selected||a.attr("aria-selected",!1),b.start&&a.addClass("r9-datepicker-item-start")):R9.Widgets.DaterangePicker.prototype.updateItem.call(this,a,b)}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{DaterangePickerFixed:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.validateElement()&&(this.startDisplay=c(R9.Widgets.DaterangePicker.findStartDisplay(this.elementNode)),this.sepDisplay=c(R9.Widgets.DaterangePicker.findSepDisplay(this.elementNode)),this.endDisplay=c(R9.Widgets.DaterangePicker.findEndDisplay(this.elementNode)),this.clearDisplay=c(R9.Widgets.DaterangePicker.findClearDisplay(this.elementNode)),this.nightsDisplay=c(R9.Widgets.DaterangePicker.findNightsDisplay(this.elementNode)),
this.placeholderDisplay=c(R9.Widgets.DaterangePicker.findPlaceholderDisplay(this.elementNode)),this.input=c(R9.Widgets.DaterangePicker.findInputNode(this.elementNode)),this.startInput=c(R9.Widgets.DaterangePicker.findStartInput(this.elementNode)),this.endInput=c(R9.Widgets.DaterangePicker.findEndInput(this.elementNode)),this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.DaterangePickerFixed",{isDatepicker:function(a){return a&&a.nodeName&&"div"==a.nodeName.toLowerCase()},
isWidgetControlled:function(a){return c(a).hasClass(R9.Widgets.DaterangePicker.prototype.widgetBaseClass+"-wrapper")},findStartDisplay:function(a){return document.getElementById(a.id+"-start")},findEndDisplay:function(a){return document.getElementById(a.id+"-end")},findSepDisplay:function(a){return document.getElementById(a.id+"-sep")},findClearDisplay:function(a){return document.getElementById(a.id+"-clear")},findNightsDisplay:function(a){return document.getElementById(a.id+"-nights")},findPlaceholderDisplay:function(a){return document.getElementById(a.id+
"-placeholder")},findStartInput:function(a){return jq("#"+a.id+" .r9-datepicker-input.r9-datepicker-start")[0]},findEndInput:function(a){return jq("#"+a.id+" .r9-datepicker-input.r9-datepicker-end")[0]},findInputNode:function(a){return document.getElementById(a.id+"-tab")},getDropdownId:function(a){return"datepicker"}});R9.extend("Widgets.DaterangePickerFixed.prototype",!0,R9.Widgets.DaterangePicker.prototype,{options:{rangeDays:34},handleItemClickEvent:function(a,b){var c=this;a=jq(a);a.hasClass("r9-datepicker-enabled")&&
(a=parseInt(a.attr("data-val")),this.clicks[0]=a,this.clicks[1]=moment(a).add(this.options.rangeDays,"days").valueOf(),this.updateDropdownSelection(null),setTimeout(function(){c.hideDropdown(null);c.options.change&&c.options.change.apply(c,arguments);c.options.nextFieldSelector&&jq(c.options.nextFieldSelector).focus()},this.options.secondClickHideDelay));this.updateDOM();return!1},getHighlitedRange:function(a,b){a=[0,0];if(null==b)return a;a[0]=parseInt(b.attr("data-val"));a[1]=moment(a[0]).add(34,
"days").valueOf();return a},setStartDate:function(a){null!=a&&(this.clicks[0]=a.getTime(),this.clicks[1]=moment(this.clicks[0]).add(this.options.rangeDays,"days").valueOf(),this.updateDOM())},setEndDate:function(a){null!=a&&(this.clicks[1]=a.getTime(),this.clicks[0]=moment(this.clicks[1]).subtract(this.options.rangeDays,"days").valueOf(),this.updateDOM())}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{DaterangePickerOrSingleDate:function(a,b){R9.Widgets.DaterangePicker.call(this,a,b)}});R9.extend("Widgets.DaterangePickerOrSingleDate",{});R9.extend("Widgets.DaterangePickerOrSingleDate.prototype",!0,R9.Widgets.DaterangePicker.prototype,{minDate:null,singleDateMode:!1,setSingleDateMode:function(a,b){this.singleDateMode=a;b||this.updateDOM()},getSingleDateMode:function(){return this.singleDateMode},updateDOM:function(){var a;this.singleDateMode?(this.element.addClass("r9-datepicker-single-date-mode"),
this.dropdown.addClass("r9-datepicker-single-date-mode"),this.endDisplay.text(""),this.endInput.val(""),0!=this.clicks[0]?(a=moment(this.clicks[0]),this.startDisplay.text(a.format(this.options.startFormat)),this.startInput.val(a.format(this.options.startInputFormat))):(this.startDisplay.text(""),this.startInput.val("")),null==a?this.element.addClass("r9-datepicker-start-empty"):this.element.removeClass("r9-datepicker-start-empty")):(this.element.removeClass("r9-datepicker-single-date-mode"),this.dropdown.removeClass("r9-datepicker-single-date-mode"),
R9.Widgets.DaterangePicker.prototype.updateDOM.call(this))},updateHoverDOM:function(a){this.singleDateMode||R9.Widgets.DaterangePicker.prototype.updateHoverDOM.call(this,a)},computeState:function(a,b,c,e,f,g){this.singleDateMode?b==c[0]?f.start=!0:b==a&&(f.highlited=!0):R9.Widgets.DaterangePicker.prototype.computeState.call(this,a,b,c,e,f,g)},handleItemClickEvent:function(a,b){var c=this,e=jq(a);return this.singleDateMode?(e.hasClass("r9-datepicker-enabled")&&(a=parseInt(e.attr("data-val")),this.clicks[0]=
a,this.updateDropdownSelection(null),setTimeout(function(){c.hideDropdown(null);c.options.change&&c.options.change.apply(c,arguments);c.options.nextFieldSelector&&jq(c.options.nextFieldSelector).focus()},this.options.secondClickHideDelay)),this.updateDOM(),!1):R9.Widgets.DaterangePicker.prototype.handleItemClickEvent.call(this,a,b)}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{DaterangePickerTwoFieldsWithPastDate:function(a,b){this.options=c.extend({},this.options,b);R9.Widgets.DaterangePickerTwoFields.call(this,a,this.options);if(this.options.scrollContainer){var d=this;jq(this.options.scrollContainer).scroll(function(){R9.Widgets.DaterangePickerTwoFields.prototype.hideDropdown.call(d)})}}});R9.extend("Widgets.DaterangePickerTwoFieldsWithPastDate",{});R9.extend("Widgets.DaterangePickerTwoFieldsWithPastDate.prototype",!0,R9.Widgets.DaterangePickerTwoFields.prototype,
{options:{minDateFunc:function(a){a.minDate=moment("01/01/2000");a.maxDate=moment().startOf("month").add(10,"years")},allowPastDate:!0,useLongDisplayFormat:!0,scrollContainer:null},handleEndDisplayFocusEvent:function(a,b){this.getEndWrapperElement().is(".disabled")||R9.Widgets.DaterangePickerTwoFields.prototype.handleEndDisplayFocusEvent.call(this,a,b)},handleStartDisplayFocusEvent:function(a,b){this.getStartWrapperElement().is(".disabled")||R9.Widgets.DaterangePickerTwoFields.prototype.handleStartDisplayFocusEvent.call(this,
a,b)}})})(jq||jQuery);
(function(c){R9.extend("Widgets",{DaterangeTimePickerTwoFields:function(a,b){this.options.dropdownClass=this.options.dropdownClass?this.options.dropdownClass+" hasBelowContent phoenixCalendar":" hasBelowContent phoenixCalendar";this.options.belowContentOnTop=!0;this.options=c.extend({},this.options,b);R9.Widgets.DaterangePickerTwoFields.call(this,a,this.options);this.startTimeInput=this.findStartTimeInput(this.startElement[0]);this.endTimeInput=this.findEndTimeInput(this.endElement[0]);this.loadCalendarTimeLabelValues(this.startTimeInput,
"#inlinepickup_hour");this.loadCalendarTimeLabelValues(this.endTimeInput,"#inlinedropoff_hour")}});R9.extend("Widgets.DaterangeTimePickerTwoFields",{});R9.extend("Widgets.DaterangeTimePickerTwoFields.prototype",!0,R9.Widgets.DaterangePickerTwoFields.prototype,{startTimeInput:null,endTimeInput:null,startSlider:null,endSlider:null,findStartTimeInput:function(a){return c(a).closest("form").find("#"+a.id+" .r9-datepicker-display-start-time")},findEndTimeInput:function(a){return c(a).closest("form").find("#"+
a.id+" .r9-datepicker-display-end-time")},makeBelowCalendarHTML:function(){var a=[];a.push(this.makeSliderHtml());return a.join("")},makeSliderHtml:function(){var a=[];a.push('\x3cdiv class\x3d"time-picker-wrapper"\x3e');a.push('\x3cdiv class\x3d"start-time-wrapper"\x3e');a.push('\x3cdiv class\x3d"slider-inner-wrap"\x3e');a.push('\x3cdiv class\x3d"start-time-label"\x3ePick-up at \x3cspan id\x3d"start-label"\x3e\x3c/span\x3e\x3c/div\x3e');a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"end-time-wrapper"\x3e');
a.push('\x3cdiv class\x3d"slider-inner-wrap"\x3e');a.push('\x3cdiv class\x3d"end-time-label"\x3eDrop-off at \x3cspan id\x3d"end-label"\x3e\x3c/span\x3e\x3c/div\x3e');a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");return a.join("")},runBelowCalendarCallback:function(){this.startSlider=this.loadSlider("startTimeSlider","start-label","#inlinepickup_hour",this.startTimeInput);this.endSlider=this.loadSlider("endTimeSlider","end-label","#inlinedropoff_hour",this.endTimeInput);"function"===
typeof this.options.afterSlidersInit&&this.options.afterSlidersInit()},loadSlider:function(a,b,d,e){a=c("#"+a);var f=null;a&&0<a.length&&(f=a.r9TimeSlider({range:!1,min:0,max:23,step:1,labelId:b,valueOptionWidget:c(d),calendarLabelEl:e}));return f},loadCalendarTimeLabelValues:function(a,b){a&&a.length&&(b=c(b).find("option:selected"))&&b.length&&a.text(b.text())},makeMonthHeaderPickerHTML:function(a){var b=[];b.push("\x3cdiv\x3e");b.push(a);b.push("\x3c/div\x3e");return b}})})(jq||jQuery);
(function(c){c.fn.daterangePicker=function(a){if("string"==typeof a){for(var b=0;b<this.length;b++){var d=c(this[b]).data(R9.Widgets.DaterangePicker.prototype.widgetName);if(d)return R9.utils.applyMethod(d,a,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){new R9.Widgets.DaterangePicker(this,a)})};c.fn.daterangePickerTwoFields=function(a){if("string"==typeof a){for(var b=0;b<this.length;b++){var d=c(this[b]).data(R9.Widgets.DaterangePicker.prototype.widgetName);if(d)return R9.utils.applyMethod(d,
a,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){new R9.Widgets.DaterangePickerTwoFields(this,a)})};c.fn.daterangePickerTwoFieldsWithPastDate=function(a){if("string"==typeof a){for(var b=0;b<this.length;b++){var d=c(this[b]).data(R9.Widgets.DaterangePicker.prototype.widgetName);if(d)return R9.utils.applyMethod(d,a,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){new R9.Widgets.DaterangePickerTwoFieldsWithPastDate(this,a)})};c.fn.daterangePickerFixed=
function(a){if("string"==typeof a){for(var b=0;b<this.length;b++){var d=c(this[b]).data(R9.Widgets.DaterangePicker.prototype.widgetName);if(d)return R9.utils.applyMethod(d,a,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){new R9.Widgets.DaterangePickerFixed(this,a)})};c.fn.daterangePickerOrSingleDate=function(a){if("string"==typeof a){for(var b=0;b<this.length;b++){var d=c(this[b]).data(R9.Widgets.DaterangePicker.prototype.widgetName);if(d)return R9.utils.applyMethod(d,
a,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){new R9.Widgets.DaterangePickerOrSingleDate(this,a)})};c.fn.daterangeTimePickerTwoFields=function(a){if("string"==typeof a){for(var b=0;b<this.length;b++){var d=c(this[b]).data(R9.Widgets.DaterangePicker.prototype.widgetName);if(d)return R9.utils.applyMethod(d,a,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){new R9.Widgets.DaterangeTimePickerTwoFields(this,a)})}})(jq||jQuery);
(function(c){R9.extend("Widgets",{ScrollingFixedPanel:function(a,b){this.elementNode=a;this.element=c(this.elementNode);this.validateElement()&&(this.options=c.extend({},this.options,b),this.init())}});R9.extend("Widgets.ScrollingFixedPanel",{elementInViewport:function(a){for(var b=a.offsetTop,c=a.offsetLeft,e=a.offsetWidth,f=a.offsetHeight;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b<window.pageYOffset+window.innerHeight&&c<window.pageXOffset+window.innerWidth&&b+f>window.pageYOffset&&
c+e>window.pageXOffset}});R9.extend("Widgets.ScrollingFixedPanel.prototype",{widgetName:"scrollingFixedPane",elementNode:null,element:null,scrollTimerID:null,oldscrolltop:null,railoffsettop:null,railsoffsetleft:null,railheight:null,windowheight:null,minTop:null,maxTop:null,options:{footerElementID:"ft",scrollTimeoutMS:40},init:function(){this.bindWindowEvents();this.initializeOffsetsAndPosition()},validateElement:function(){return this.element.is(":visible")},bindWindowEvents:function(){var a=this,
b="scroll."+this.widgetName;jq(window).unbind(b).bind(b,function(b){null!=a.scrollTimeID&&window.clearTimeout(a.scrollTimeID);a.scrollTimeID=window.setTimeout(function(){R9.Widgets.ScrollingFixedPanel.prototype.scrollContent.apply(a)},a.options.scrollTimeoutMS)});b="resize."+ +this.widgetName;jq(window).unbind(b).bind(b,function(b){a.initializeOffsetsAndPosition();a.scrollContent()})},scrollContent:function(){this.scrollTimerID=null;var a=jq(window).scrollTop(),b=a-this.oldscrolltop,c=parseInt(this.element.css("top"))-
b;0>b&&0<c?0<a-this.railoffsettop&&(c=0):c<this.minTop&&!R9.Widgets.ScrollingFixedPanel.elementInViewport(document.getElementById(this.options.footerElementID))?c=this.minTop:c>this.maxTop&&(c=this.maxTop);this.element.css({position:"fixed",left:this.railoffsetleft+"px",top:c});this.oldscrolltop=a},initializeOffsetsAndPosition:function(){this.element.css({position:"static"});this.oldscrolltop=jq(window).scrollTop();this.railoffsettop=this.element.offset().top;this.railoffsetleft=this.element.offset().left;
this.railheight=this.element.height();this.windowheight=jq(window).height();this.minTop=-1*(this.railheight-this.windowheight);this.maxTop=this.element.offset().top;this.element.css("top",this.railoffsettop)}})})(jq||jQuery);
(function(c,a){c.extend("Widgets",{EmailInput:function(b,c){this.elementNode=b;this.element=a(this.elementNode);this.options=a.extend({},this.options,c);this.init()}});c.extend("Widgets.EmailInput.prototype",{widgetName:"r9EmailInput",widgetBaseClass:"r9-emailinput",elementNode:null,element:null,options:{maxEmails:-1,customCheckValidity:null},inputWrapper:null,inputElem:null,placeHolderText:null,init:function(){this.createWrapper();this.processDefaultValue();this.addEventHandlers()},addEventHandlers:function(){var b=
this,c=this.inputWrapper;this.addInputEventHandlers();c.on("click",".email",function(){a(this).remove();b.checkRestrictions();b.updateValue()})},addInputEventHandlers:function(){var b=this,c=!0;b.inputElem.on("keyup",function(d){switch(d.which){case 32:b.handleSpaceKey();break;case 8:d=b.inputElem.val();var e=d.split(" "),e=b.addEmail(e);a.trim(d)!==a.trim(e)&&b.inputElem.val(e);c=!0;break;default:b.checkComma()}}).on("keydown",function(d){switch(d.which){case 13:case 9:b.handleReturnKey(d);break;
case 8:0===b.getCaretPosition()&&c&&(d=b.inputWrapper.find(".email"),a(d.get(d.length-1)).remove(),b.checkRestrictions(),b.updateValue()),c=!1}}).on("focus",function(){b.inputWrapper.addClass("focused")}).on("blur",function(a){b.handleReturnKey(a);b.inputWrapper.removeClass("focused")})},checkComma:function(){var b=a.trim(this.inputElem.val());","===b[b.length-1]&&(b=this.addEmail([b.substring(0,b.length-1)]),""===a.trim(b)&&this.inputElem.val(""))},handleSpaceKey:function(){""===this.addEmail([this.inputElem[0].value])&&
(this.inputElem[0].value="")},handleReturnKey:function(b){var c=this.inputElem[0].value,e=c.split(" ");this.addEmail(e,!0);this.inputElem[0].value="";if(13===b.which||""!==a.trim(c))b.stopPropagation(),b.preventDefault()},getCaretPosition:function(){var a=0,c=this.inputElem[0];if(document.selection)c.focus(),a=document.selection.createRange(),a.moveStart("character",-c.value.length),a=a.text.length;else if(c.selectionStart||"0"==c.selectionStart)a=c.selectionStart;return a},val:function(a){if("undefined"!==
typeof a)this.processValue(a);else return this.getValue()},createWrapper:function(){this.inputWrapper=a("\x3cdiv class\x3d'Common-Widgets-Text-EmailInput' /\x3e");this.inputElem=a("\x3cinput class\x3d'email-input'/\x3e").appendTo(this.inputWrapper);this.element.hide();this.inputElem.val(this.element.val());this.inputWrapper.insertAfter(this.element);this.inputWrapper.append(this.inputElem);this.placeHolderText=this.element.attr("placeholder")||""},processValue:function(a){this.inputWrapper.find(".email").remove();
this.updateValue();this.inputElem[0].value=this.addEmail(a.split(","))},processDefaultValue:function(){this.processValue(this.inputElem.val())},isValidEmail:function(b){b=a.trim(b);return this.options.customCheckValidity?this.options.customCheckValidity(b):/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(b)},prepareEmailElem:function(b){return""===a.trim(b)?!1:a("\x3cdiv class\x3d'email'\x3e"+a.trim(_.escape(b))+"\x3c/div\x3e")},addEmail:function(b,c){var d=this,f=
"";a.each(b,function(a,e){if(0<d.options.maxEmails&&a>=d.options.maxEmails)return!1;if(d.isValidEmail(e)){if(a=d.prepareEmailElem(e))a.insertBefore(d.inputElem),d.checkRestrictions(),d.updateValue()}else{b.splice(0,a);a=b.join(" ");if(c){if(a=d.prepareEmailElem(a))a.insertBefore(d.inputElem),d.checkRestrictions(),d.updateValue()}else f=a;return!1}});return f},updateValue:function(){this.element.val(this.inputWrapper.find(".email").map(function(){return a(this).text()}).get().join())},getValue:function(){var b=
this.element.val(),c=a.trim(this.inputElem.val());""!==c&&(b+=","+c);return b},checkRestrictions:function(){0<this.options.maxEmails&&(this.inputWrapper.find(".email").length>=this.options.maxEmails?this.inputElem.prop("disabled",!0):this.inputElem.prop("disabled",!1).focus());this.inputWrapper.find(".email").length?this.inputElem.prop("placeholder",""):this.inputElem.prop("placeholder",this.placeHolderText)},addClass:function(){this.inputWrapper.addClass.apply(this.inputElem,arguments)},removeClass:function(){this.inputWrapper.removeClass.apply(this.inputElem,
arguments)},toggleClass:function(a,c){this.inputWrapper.toggleClass(a,c)}})})(R9,jQuery||jq);(function(c){c.fn.scrollingFixedPanel=function(a){return this.each(function(){new R9.Widgets.ScrollingFixedPanel(this,a)})}})(jq||jQuery);
(function(c){c.fn.expansiveTextArea=function(a){var b=jq(this),c="50px";a&&a.minHeight&&(c=a.minHeight);if("true"!=b.attr("expansive")){var e=jq(document.createElement("div")),f=null;b.css({"min-height":c,resize:"vertical",overflow:"hidden"});b.attr("expansive","true");e.css({display:"none","white-space":b.css("white-space"),width:b.css("width"),"min-height":c,"font-family":b.css("font-family"),"font-size":b.css("font-size"),padding:b.css("padding"),"word-wrap":b.css("word-wrap")});e.addClass("expansiveTextAreaHelperDiv");
b.after(e);b.on("keyup",function(){f=jq(this).html();f=f.replace(/\n/g,"\x3cbr\x3e");e[0].innerHtml=f+'\x3cbr class\x3d"lbr"\x3e';jq(this).css("height",e.height()+10);e.height()>parseInt(b.css("max-height"))?b.css("overflow-y","scroll"):b.css("overflow-y","hidden")})}b.keyup()}})(jq||jQuery);R9.extend("Common.Init",{initEllipsisFields:function(){jq(".fdEllipsis").ellipsisTooltip()}});
R9.extend("Common.Form",{Loader:function(c,a,b){this.element=jq(c);this.targetElement=a;this.options=jq.extend(!0,{},this.defaultOptions,{success:this.successCallback},b||{})}});R9.extend("Common.Form.Loader",{getInstance:function(c,a,b){return new R9.Common.Form.Loader(a,c,b)},getFullForm:function(c,a,b){return R9.Common.Form.Loader.getInstance(a,c,b).execute()}});
R9.extend("Common.Form.Loader.prototype",{element:null,targetElement:null,defaultOptions:{dataType:"text",error:null,success:null,additionalParams:{uselast:!1,getFormOnly:1,responseContentIDAndClass:"inlineSearchForm"},fieldFilters:[{attr:"name",val:"action"}],responseWrapperSelector:"#inlineSearchForm",dialogClass:"inlineSearchFormDlg",draggable:!1,triggerAnchor:null,dialogPlacement:"right"},execute:function(c){if(!this.element.length)return!1;this._disableTriggerElement();var a=this;jq.ajax({type:this.element.attr("type"),
dataType:this.options.dataType,url:this.element.attr("action"),data:jq.extend(this.options.additionalParams,this.collectFormParams(),c||{}),error:function(){"function"==typeof a.options.error&&(a.options.error.apply(a,arguments),a._enableTriggerElement())},success:function(){"function"==typeof a.options.success&&(a.options.success.apply(a,arguments),a._enableTriggerElement())}});R9.Analytics.api.trackEvent("inlinesearch/moreoptions");return!1},successCallback:function(c){this.element.after(c);var a=
null,b=this;c={draggable:this.options.draggable,dialogClass:this.options.dialogClass,open:function(c,e){var d=this;a=loadResults;loadResults=function(c,e){d&&(b.options.triggerAnchor?jq(d).r9popover("destroy"):jq(d).r9dialog("destroy"),loadResults=a);a.apply(this,arguments)}},close:function(b,c){a&&(loadResults=a);jq(this).r9dialog("destroy");jq(this).remove()}};this.options.triggerAnchor?jq(this.options.responseWrapperSelector).r9popover(jq.extend(c,{position:jq(this.options.triggerAnchor),at:this.options.dialogPlacement})):
jq(this.options.responseWrapperSelector).r9dialog(c)},collectFormParams:function(){var c={},a=this;jq("input, select",this.element).each(function(){var b=jq(this);a.isSubmitableParameter(b)&&("INPUT"!=b.prop("tagName")||"radio"!=b.attr("type")&&"checkbox"!=b.attr("type")?c[b.attr("name")]=b.val():b.is(":checked")&&(c[b.attr("name")]=b.val()))});jq.each({destinationcode:"destcode"},function(a,d){c[a]=c[d]});return c},isSubmitableParameter:function(c){var a=jq(c);if(!c.length||"c2s"===a.attr("id")&&
1===this.options.additionalParams.getFormOnly)return!1;for(a=0;a<this.options.fieldFilters.length;a++)if(c.attr(this.options.fieldFilters[a].attr)==this.options.fieldFilters[a].val)return!1;return!0},_disableTriggerElement:function(c){if(this.targetElement){var a=c||null==c?"wait":"";jq(this.targetElement).prop("disabled",null==c?!0:c).trigger("mouseout").css("cursor",a);jq("body").css("cursor",a)}},_enableTriggerElement:function(){this._disableTriggerElement(!1)}});
R9.extend("Common.RemoveAccents",{translate_re:/[\u00f6\u00e4\u00fc\u00d6\u00c4\u00dc\u00e1\u00e0\u00e2\u00e9\u00e8\u00ea\u00fa\u00f9\u00fb\u00f3\u00f2\u00f4\u00c1\u00c0\u00c2\u00c9\u00c8\u00ca\u00da\u00d9\u00db\u00d3\u00d2\u00d4\u00df\u00e6\u00e7\u00d8\u00f8\u00f0\u00c7\u00d0\u00cc\u00cd\u00ce\u00cf\u00ec\u00ed\u00ee\u00ef\u00d1\u00f1\u0160\u0161\u0178\u00ff\u00fd\u017d\u017e\u0152\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u0410\u0411\u0412\u0413\u0414\u0415\u0401\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u0391\u03b1\u0386\u03ac\u0392\u03b2\u0393\u03b3\u0394\u03b4\u0395\u03b5\u0388\u03ad\u0396\u03b6\u0397\u03b7\u0389\u03ae\u0398\u03b8\u0399\u03b9\u038a\u03af\u03aa\u03ca\u0390\u039a\u03ba\u039b\u03bb\u039c\u03bc\u039d\u03bd\u039e\u03be\u039f\u03bf\u038c\u03cc\u03a0\u03c0\u03a1\u03c1\u03a3\u03c3\u03c2\u03a4\u03c4\u03a5\u03c5\u038e\u03cd\u03ab\u03cb\u03b0\u03a6\u03c6\u03a7\u03c7\u03a8\u03c8\u03a9\u03c9\u038f\u03ce\u0102\u0103\u015e\u015f\u014e\u014f\u0162\u0163\u016e\u016f\u00dd\u010c\u010d\u010e\u010f\u011a\u011b\u0147\u0148\u0158\u0159\u0164\u0165]/g,
translate:{"\u00e4":"a","\u00f6":"o","\u00fc":"u","\u00c4":"A","\u00d6":"O","\u00dc":"U","\u00e1":"a","\u00e0":"a","\u00e2":"a","\u00e9":"e","\u00e8":"e","\u00ea":"e","\u00fa":"u","\u00f9":"u","\u00fb":"u","\u00f3":"o","\u00f2":"o","\u00f4":"o","\u00c1":"A","\u00c0":"A","\u00c2":"A","\u00c9":"E","\u00c8":"E","\u00ca":"E","\u00da":"U","\u00d9":"U","\u00db":"U","\u00d3":"O","\u00d2":"O","\u00d4":"O","\u00df":"s","\u00e6":"o","\u00e7":"c","\u00d8":"O","\u00f8":"o","\u00f0":"e","\u00c7":"C","\u00d0":"D",
"\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u0160":"S","\u0161":"s","\u0178":"Y","\u00ff":"y","\u00fd":"y","\u017d":"Z","\u017e":"z","\u0152":"O","\u0107":"c","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"jo","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"jj","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t",
"\u0443":"u","\u0444":"f","\u0445":"kh","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"shh","\u044a":'"',"\u044b":"y","\u044c":"'","\u044d":"eh","\u044e":"ju","\u044f":"ja","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0401":"JO","\u0416":"ZH","\u0417":"Z","\u0418":"I","\u0419":"JJ","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"KH","\u0426":"C","\u0427":"CH",
"\u0428":"SH","\u0429":"SHH","\u042a":'""',"\u042b":"Y","\u042c":"''","\u042d":"EH","\u042e":"JU","\u042f":"JA","\u0391":"A","\u03b1":"a","\u0386":"A","\u03ac":"a","\u0392":"V","\u03b2":"v","\u0393":"G","\u03b3":"g","\u0394":"D","\u03b4":"d","\u0395":"E","\u03b5":"e","\u0388":"E","\u03ad":"e","\u0396":"Z","\u03b6":"z","\u0397":"I","\u03b7":"i","\u0389":"I","\u03ae":"i","\u0398":"Th","\u03b8":"th","\u0399":"I","\u03b9":"i","\u038a":"I","\u03af":"i","\u03aa":"I","\u03ca":"i","\u0390":"i","\u039a":"K",
"\u03ba":"k","\u039b":"L","\u03bb":"l","\u039c":"M","\u03bc":"m","\u039d":"N","\u03bd":"n","\u039e":"X","\u03be":"x","\u039f":"O","\u03bf":"o","\u038c":"O","\u03cc":"o","\u03a0":"P","\u03c0":"p","\u03a1":"R","\u03c1":"r","\u03a3":"S","\u03c3":"s","\u03c2":"s","\u03a4":"T","\u03c4":"t","\u03a5":"Y","\u03c5":"y","\u038e":"Y","\u03cd":"y","\u03ab":"Y","\u03cb":"y","\u03b0":"y","\u03a6":"F","\u03c6":"f","\u03a7":"Ch","\u03c7":"ch","\u03a8":"Ps","\u03c8":"ps","\u03a9":"O","\u03c9":"o","\u038f":"O","\u03ce":"o",
"\u0102":"A","\u0103":"a","\u015e":"S","\u015f":"s","\u0162":"T","\u0163":"t","\u014e":"O","\u014f":"o","\u016e":"U","\u016f":"u","\u00dd":"Y","\u010c":"C","\u010d":"c","\u010e":"D","\u010f":"d","\u011a":"E","\u011b":"e","\u0147":"N","\u0148":"n","\u0158":"R","\u0159":"r","\u0164":"T","\u0165":"t"},removeAccentedChars:function(c){var a=this;return c.replace(a.translate_re,function(b){return a.translate[b]})}});String.prototype.removeAccentedChars=function(){return R9.Common.RemoveAccents.removeAccentedChars(this)};
try{psevents=window.parent.psevents||{}}catch(c){psevents={}}function publish(c,a,b){var d=psevents[c];if(d){var e,f;for(f in d){var g=d[f],h=g.handler;if(h instanceof Function||"function"==typeof h)if(!0===b&&(a=e),e=b&&!0!==b?h.call(b,c,a,e):g.context?h.call(g.context,c,a,e):h.call(a,c,a,e),!1===e)return!1}return e||a||!0}return a}
function subscribe(c,a,b){if(a instanceof Function){c=c.split(",");for(var d=0;d<c.length;++d){var e=c[d].trim();psevents[e]||(psevents[e]=[]);psevents[e].push({context:b,handler:a})}}}R9.extend("Common",{AsyncQueue:function(){var c=[],a,b={run:function(d){c.push(d);void 0===a&&b.next();return d},next:function(){(a=c.shift())&&a.apply(null,arguments)}};return b}});
(function(c){function a(a,c,e,f){f.garbageCollectorInterval||(f.garbageCollectorInterval=setInterval(function(){var a=(new Date).getTime(),b;for(b in f.cache)f.cache.hasOwnProperty(b)&&a-f.cache[b].timeCreated>=f.cache[b].lifeSpam&&delete f.cache[f.orderedKeys.splice(f.orderedKeys.indexOf(b),1)[0]];0==f.orderedKeys.length&&clearInterval(f.garbageCollectorInterval)},f.garbageCollectionTime));e=e||f.defaultLifeSpam;e>f.maxLifeSpam&&(e=f.maxLifeSpam);f.orderedKeys.length>=f.maxCacheEntrySize&&delete f.cache[f.orderedKeys.splice(0,
1)[0]];f.cache[a]?(f.cache[a].value=c,f.cache[a].timeCreated=(new Date).getTime(),f.cache[a].lifeSpam=e,f.orderedKeys.push(f.orderedKeys.splice(f.orderedKeys.indexOf(a),1))):(f.cache[a]={value:c,timeCreated:(new Date).getTime(),lifeSpam:e},f.orderedKeys.push(a))}R9.extend("Common",{Cache:function(b){var d=c.extend({},this.options,b,{cache:{},orderedKeys:[],garbageCollectorInterval:null});c.extend(this,{get:function(a){a=d.cache[a]?d.cache[a].value:void 0;return a},set:function(b,c,g){a(b,c,g,d)},
getKeys:function(){var a=[];for(key in d.cache)a.push(key);return a}})}});R9.extend("Common.Cache.prototype",{options:{maxLifeSpam:9E5,defaultLifeSpam:6E4,garbageCollectionTime:3E4,maxCacheEntrySize:15},get:function(){},set:function(){}})})(jq||jQuery);
R9.extend("Common",{GoogleMapsAugmentation:function(){return{addSetMapAnimation:function(c,a){var b=[],d,e=c.setMap,f=jq.extend(c,{setMap:function(b,c){function g(){Object.keys(h);var a=!0;jq.each(function(b,c){a=a&&h[key]});a&&(e.apply(f,[null]),d=b)}void 0===c&&(c=!0);if(null===b){var h={};f.stopAnimations();jq.each(a,function(a,b){h[b.propertyName]=!1;c?f.animateProperty(b,b.initialValue,function(){h[b.propertyName]=!0;g()}):(h[b.propertyName]=!0,g())})}else d=b,f.stopAnimations(),jq.each(a,function(a,
b){a={};a[b.propertyName]=b.initialValue;f.setOptions(a)}),e.apply(f,[d]),jq.each(a,function(a,b){f.animateProperty(b,b.finalValue)})},stopAnimations:function(){jq.each(b,function(a,b){clearTimeout(b)});b=[]},animateProperty:function(a,d,e){function g(){u&&b.splice(b.indexOf(u),1);var a=R9.Common.GoogleMapsAugmentation.LINEAR(r,d,Math.max(Math.min(t/l,1),0));q(a);t+=1;a!=d?(u=setTimeout(g,30),b.push(u)):e&&e()}var h=a.propertyName,l=a.duration/30,q=a.setter||function(a){var b={};b[h]=a;c.setOptions(b)},
r=(a.getter||function(){return f[h]})(),t=0,u;setTimeout(g)}})}}}()});R9.Common.GoogleMapsAugmentation.LINEAR=function(c,a,b){return c*(1-b)+a*b};R9.Common.GoogleMapsAugmentation.EASE_IN_OUT=function(c,a,b){return c+(a-c)*(1-Math.sin(Math.PI/2+b*Math.PI))/2};R9.extend("Common.Init",{initEllipsisFields:function(){jq(".fdEllipsis").ellipsisTooltip()}});
R9.extend("Common",{Places:{food:["restaurant","food","cafe"],shopping:["shopping_mall","book_store","clothing_store","department_store","electronics_store"],nightlife:["night_club","bar"],beautyAndLifestyle:["spa","beauty_salon","hair_care"],publicTransportation:["subway_station","train_station","bus_station","transit_station"]}});R9.extend("Common",{Session:function(){return function(c){var a=jq.extend({},{sessionId:""},c);return{getSessionId:function(){return a.sessionId}}}}()});
(function(c,a){function b(b){return a.isMoment(b)?b:b?a(b):null}R9.extend("Common.Utils",{getId:function(){var a=(new Date).getTime();return function(){return++a}}(),getBrowserCookieValue:function(a){return(a=RegExp(a+"\x3d([^;]+)").exec(document.cookie))&&0<a.length?a[1]:null},formatPrice:function(a,b){return this.formatOptionalPrice(a,b,!1)},formatRoundedPrice:function(a,b,c,g,h){a=a.toFixed(g);g=(c=c&&!0===R9.globals._PRICE_USE_CURR_CODE)?R9.globals._LEFT_CURCODE+" ":R9.globals._LEFT_CURSYMBOL;
c=c?" "+R9.globals._RIGHT_CURCODE:R9.globals._RIGHT_CURSYMBOL;return(!1!==b?g:"")+R9.Common.Utils.formatThousandsSeparator(a,"",h)+(!1!==b?c:"")},formatOptionalPrice:function(a,b,c){var d=(c=c&&!0===R9.globals._PRICE_USE_CURR_CODE)?R9.globals._LEFT_CURCODE+" ":R9.globals._LEFT_CURSYMBOL;c=c?" "+R9.globals._RIGHT_CURCODE:R9.globals._RIGHT_CURSYMBOL;return(!1!==b?d:"")+R9.Common.Utils.formatThousandsSeparator(parseInt(1*a+.5))+(!1!==b?c:"")},getShortTime:function(a,b){return a.formatUTCDate(b?"D T":
"T")},getShortDate:function(a){return a.formatUTCDate("j M")},formatThousandsSeparator:function(a,b,c){b=b||R9.globals._PRICE_THOUSANDS_SEPARATOR;c=c||".";var d=a.toString().split(".");a=d[0];c=1<d.length?c+d[1]:"";d=/(\d+)(\d{3})/;if(0<b.length)for(;d.test(a);)a=a.replace(d,"$1"+b+"$2");return a+c},arrayDifference:function(a,b){var c=[],d=[],e=[];jq.each(a,function(a,c){0>b.indexOf(c)?d.push(c):e.push(c)});jq.each(b,function(b,d){0>a.indexOf(d)&&c.push(d)});return{added:c,removed:d,unchanged:e}},
deepEquals:function(a,b,f){var d=this;if("object"!==typeof a||"object"!==typeof b||c.isArray(a)||c.isArray(b))return null;if(!a||!b||Object.keys(a).length!==Object.keys(b).length)return!1;f=f||0;if(5<f)throw Error("Attempted to check deep equality for infinitely recursing object");return Object.keys(a).every(function(e){return c.isArray(a[e])?c.isArray(b[e])&&a[e].length===b[e].length&&a[e].every(function(c){"object"!==typeof a[e][c]&&"object"!==typeof b[e][c]||(new R9.logger("R9.Common.Utils#deepEquals")).debug("Testing deep equality for Objects/Arrays inside Array not supported. Using shallow equals");
return a[e][c]===b[e][c]}):"object"===typeof a[e]?"object"===typeof b[e]&&d.deepEquals(a[e],b[e],f+1):"number"===typeof a[e]&&isNaN(a)!==isNaN(b)?!1:a[e]===b[e]})},getDimensions:function(a){jq("body").append(a.addClass("outOfView"));var b={width:a.outerWidth(),height:a.outerHeight()};a.detach();a.removeClass("outOfView");return b},throttle:function(a,b,c){if(isNaN(a))throw new TypeError("timeLimit must be an number");a=a||100;var d=!1;return function(){d||(b.apply(c||null,arguments),d=!0,setTimeout(function(){d=
!1},a))}},getNestedObject:function(a,b){return a.split(".").reduce(function(a,b){return a?a[b]:null},b)},limit:function(a,b,c){if(isNaN(a))throw new TypeError("limit must be an number");var d=0;return function(){if(d<a){d++;var e=Array.prototype.slice.call(arguments);e.push(d===a);e.push(d);return b.apply(c||this,e)}}},after:function(a,b,c){if(isNaN(a))throw new TypeError("waitCount must be an number");var d=0;return function(){if(d>=a)return b.apply(c||this,arguments);d++}},debounce:function(a,b,
c){var d,e=0;b=b||200;return function(){var f=Array.prototype.slice.call(arguments);e+=1;clearTimeout(d);d=setTimeout(function(){f.push(e);a.apply(c||this,f)},b)}},defer:function(a){setTimeout(function(){a()},0)},throwop:function(a){return function(){throw Error((a||"unknown")+" function is abstract and must be overridden");}},onAnimationFrame:function(a){var b;return function(){b&&window.cancelAnimationFrame(b);b=window.requestAnimationFrame(a)}}});R9.extend("Common.Utils",{Browsers:{ANIMATION_END:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",
TRANSITION_END:"transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",isChrome:function(){return!!navigator.userAgent.match(/chrome\/(\d+)/i)},isIE:function(a){var b=-1;if("Microsoft Internet Explorer"==navigator.appName){if(null!==/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1)),"undefined"!==typeof a)return a===b}else if(Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject&&(b=11,"undefined"!==typeof a))return a===
b;return-1!==b},isEdge:function(){return-1<navigator.userAgent.indexOf("Edge")},isMobileSafari:function(){return-1!==navigator.userAgent.indexOf("AppleWebKit")&&-1!==navigator.userAgent.indexOf("Mobile")},getChromeVersion:function(){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a?parseInt(a[2],10):!1},supportsHover:function(){return!window.matchMedia("(any-hover: none)").matches}},URL:{getQueryParams:function(){for(var a=[],b,c=window.location.href.slice(window.location.href.indexOf("?")+
1).split("\x26"),g=0;g<c.length;g++)b=c[g].split("\x3d"),a.push(b[0]),a[b[0]]=b[1];return a},addQueryParameter:function(a,b,c){var d=a.indexOf("#"),e=-1===d?"":a.substr(d);a=-1===d?a:a.substr(0,d);var d=new RegExp("([?\x26])"+b+"\x3d.*?(\x26|$)","i"),f=-1!==a.indexOf("?")?"\x26":"?";a=a.match(d)?a.replace(d,"$1"+b+"\x3d"+c+"$2"):a+f+b+"\x3d"+c;return a+e},getParameterByName:function(a,b){a||(a=window.location.href);b=b.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+b+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(a))?
a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},removeHash:function(){var a=window.location;"pushState"in history?history.replaceState("",document.title,a.pathname+a.search):a.hash=""},stripHash:function(a){var b=a.indexOf("#");return-1!==b?a.substr(0,b):a},addHash:function(a,b){var c=a.indexOf("#");return-1===c?a+"#"+b:a.substr(0,c+1)+b}},Date:{validateCurrentDate:function(b){if(!b)return!1;b=a.isMoment(b)?b:a(b);var c=a().startOf("day"),d=a().startOf("month"),d=a(d).add(11,"months").endOf("month");
return b.isValid()&&b.isSameOrAfter(c)&&b.isSameOrBefore(d)},validateDateRange:function(a,c){a=b(a);c=b(c);return a&&c?a.isSameOrBefore(c):!0}}})})(window.jq||window.jQuery,window.moment);String.prototype.camelizeUpper=function(){return this.substr(0,1).toUpperCase()+this.substr(1)};String.prototype.format=function(){return[].slice.call(arguments).reduce(function(c,a){return c.replace("%s",a)},this.valueOf())};
String.prototype.startsWith||(String.prototype.startsWith=function(c,a){return this.substr(a||0,c.length)===c});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Object.values=Object.values||function(c){var a=[],b;for(b in c)void 0!==c.hasOwnProperty&&c.hasOwnProperty(b)&&a.push(c[b]);return a};Array.prototype.each=function(c){for(var a=0,b=this.length;a<b;a++)c(this[a])};
window.getQueryVariable=function(c){for(var a=window.location.search.substring(1).split("\x26"),b=0;b<a.length;b++){var d=a[b].split("\x3d");if(decodeURIComponent(d[0])==c)return decodeURIComponent(d[1])}};
(function(){for(var c=0,a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var d=(new Date).getTime(),e=Math.max(0,16-(d-c));b=window.setTimeout(function(){a(d+e)},e);c=d+e;return b});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();(function(c){var a="Sun Mon Tue Wed Thu Fri Sat".split(" ");c.extend("Common.Utils",{getShortTime:function(b,c,e){var d=b.getUTCHours();13<=d?d-=12:0===d&&(d=12);var g=b.getUTCMinutes();10>g&&(g="0"+g);g=":"+g;!1===e&&(g="");e=12<=b.getUTCHours()?"p":"a";return c?a[b.getUTCDay()]+" "+d+g+e:d+g+e},getShortDate:function(a){return a.formatUTCDate("M j")}})})(window.R9);
(function(c){R9.extend("Common.Utils.String",{formatString:function(a,b){var c=arguments;return a.replace(/{(\d)}/g,function(a,b){return c[(parseInt(b,10)||0)+1]})},replaceArgs:function(){for(var a=arguments[0],b=1;b<=arguments.length;b++)a=a.replace("{"+(b-1)+"}",arguments[b]);return a},formatChoice:function(a,b,c){var d=arguments,f,g;a=a.split("|",20);for(g=a.length-1;0<=g;g--)if(f=a[g].split("#",2),!(2>f.length||isNaN(f[0])||b<f[0]))return d=Array.prototype.slice.call(d,2),d=Array.prototype.concat([f[1]],
d),R9.Common.Utils.String.formatString.apply(this,d);return a},isNullOrUndefinedOrEmpty:function(a){return null===a||void 0===a||R9.Common.Utils.String.isEmpty(a)},isEmpty:function(a){return""===a},isWhitespace:function(a){return!R9.Common.Utils.String.isEmpty(a)&&R9.Common.Utils.String.isEmpty(c.trim(a))},isNullOrUndefinedOrEmptyOrWhitespace:function(a){return R9.Common.Utils.String.isNullOrUndefinedOrEmpty(a)||R9.Common.Utils.String.isWhitespace(a)},formElementValueIsNullOrUndefinedOrEmptyOrWhitespace:function(a){R9.conditions.jquery.hasExactlyOneJqElement(a);
return R9.Common.Utils.String.isNullOrUndefinedOrEmptyOrWhitespace(a.val())},cleanUrl:function(a){a=R9.Common.RemoveAccents.removeAccentedChars(a);var b=R9.config.getString("ui.cleanurl.regex","[ /)(;:\x26$#!+\x3d*^%`'\"?\x3e\x3c.,-]+"),c=R9.config.getString("ui.cleanurl.regex.sep","-");return a.replace(new RegExp(b,"g"),c).replace(new RegExp("^"+c+"+|"+c+"+$","g"),"")},cleanUrlInvalidChars:function(a){var b=R9.config.getString("ui.cleanurl.leaveCommas.regex","[ /)(;:\x26$#!+\x3d*^%`'\"?\x3e\x3c-]+"),
c=R9.config.getString("ui.cleanurl.regex.sep","-");return a.replace(/,[ ]+/g,",").replace(new RegExp(b,"g"),c).replace(new RegExp("^"+c+"+|"+c+"+$","g"),"")}})})(jq||jQuery);
R9.extend("Common.Utils",{getImageToContainerSize:function(c,a,b,d){if(c>=b&&a>=d){var e;e=b*a/c;c=d*c/a;(0<=d-e?d-e:0)<=(0<=b-c?b-c:0)?(c=b,a=e):a=d}else if(c>=b||a>=d)e=c>=b?b/c:d/a,c*=e,a*=e;c=parseInt(c);a=parseInt(a);10>Math.abs(b-c)&&(c=b);var f=e=0;c>b&&(e=parseInt(c/2-b/2));a>d&&(f=parseInt(a/2-d/2));a<d&&(f=-1*parseInt((d-a)/2));return{finalWidth:c,finalHeight:a,shiftX:e,shiftY:f}}});
(function(){function c(){return{spyMovement:function(c,d,g,h,l){b[c]={element:d,showfn:g,hidefn:h,offset:l||0,isshown:!1,lastVisible:!1};a()},remove:function(a){delete b[a]}}}function a(){jq.each(Object.values(b),function(a,b){var c=b.element;a=b.offset;var d=jq(window).scrollTop(),e=jq(c).offset().top,c=e+jq(c).height();d>e-jq(window).height()-a&&d<c+a?(b.isshown=!0,b.lastVisible!=b.isshown&&(b.showfn(),b.lastVisible=b.isshown)):(b.isshown=!1,b.lastVisible!=b.isshown&&(b.hidefn(),b.lastVisible=b.isshown))})}
if(!R9.Common.VisibilityMonitor){var b={},d;R9.extend("Common",{VisibilityMonitor:function(){return{getInstance:function(){d||(d=c());return d}}}()});setTimeout(function(){window.onscroll=window.onresize=a;a()})}})();
(function(c){var a=c(window);R9.extend("Common",{lazyLoad:function(a,d){this.nodes=a;this.options=c.extend({},this.options,d);this.init()}});R9.extend("Common.lazyLoad.prototype",{nodes:null,container:null,options:{threshold:0,event:"scroll",effect:"show",effect_speed:500,container:window,data_attribute:"original",skip_invisible:!0,appear:null,load:null,error:null},init:function(){var b=this;this.container=void 0===this.options.container||this.options.container===window?a:c(this.options.container);
0===this.options.event.indexOf("scroll")&&this.container.bind(this.options.event,function(){return b.update()});this.nodes.each(function(){var a=this,e=c(a);a.loaded=!1;a.loading=!1;a.jqImage=e.children("img[data-"+b.options.data_attribute+"]");if(a.jqImage.length)e.on("appear",function(){this.loaded||this.loading||(b.options.appear&&b.options.appear.call(a,b.nodes.length,b.options),c("\x3cimg /\x3e").on("load",function(){b.onImageLoad(a)}).on("error",function(){b.onImageLoadError(a)}).attr("src",
a.jqImage.data(b.options.data_attribute)),this.loading=!0)}),0!==b.options.event.indexOf("scroll")&&e.bind(b.options.event,function(){a.loaded||e.trigger("appear")});else b.onImageLoadError(a)});a.bind("resize",function(){b.update()});this.update()},onImageLoadError:function(a){this.options.error&&(this.options.error.call(a,this.nodes.length,this.options),a.loading=!1)},onImageLoad:function(a){a.jqImage.hide().attr("src",a.jqImage.data(this.options.data_attribute))[this.options.effect](this.options.effect_speed);
a.loaded=!0;a.loading=!1;var b=c.grep(this.nodes,function(a){return!a.loaded});this.nodes=c(b);this.options.load&&this.options.load.call(a,this.nodes.length,this.options)},update:function(){var a=this;this.nodes.each(function(){var b=c(this);if(!a.options.skip_invisible||b.is(":visible"))c.abovethetop(this,a.options)||c.leftofbegin(this,a.options)||c.belowthefold(this,a.options)||c.rightoffold(this,a.options)||b.trigger("appear")})}});c.fn.lazyLoad=function(a){return new R9.Common.lazyLoad(this,a)};
c.belowthefold=function(b,d){return(void 0===d.container||d.container===window?a.height()+a.scrollTop():c(d.container).offset().top+c(d.container).height())<=c(b).offset().top-d.threshold};c.rightoffold=function(b,d){return(void 0===d.container||d.container===window?a.width()+a.scrollLeft():c(d.container).offset().left+c(d.container).width())<=c(b).offset().left-d.threshold};c.abovethetop=function(b,d){return(void 0===d.container||d.container===window?a.scrollTop():c(d.container).offset().top)>=c(b).offset().top+
d.threshold+c(b).height()};c.leftofbegin=function(b,d){return(void 0===d.container||d.container===window?a.scrollLeft():c(d.container).offset().left)>=c(b).offset().left+d.threshold+c(b).width()};c.inviewport=function(a,d){return!c.rightoffold(a,d)&&!c.leftofbegin(a,d)&&!c.belowthefold(a,d)&&!c.abovethetop(a,d)};c.extend(c.expr[":"],{"below-the-fold":function(a){return c.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!c.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return c.rightoffold(a,
{threshold:0})},"left-of-screen":function(a){return!c.rightoffold(a,{threshold:0})},"in-viewport":function(a){return c.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!c.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return c.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!c.rightoffold(a,{threshold:0})}})})(jq||jQuery);
(function(c,a){c.extend("Common",{Emitter:function(b,c){function d(a,c){a=f.events[a];if(null==a)return f;a.fire.apply(b||f,c||[]);return f}var f=this;f.events={};f.on=function(b,d){var e=f.events[b];null==e&&(f.events[b]=e=a.Callbacks(null==c?"unique":c));e.add(d)};f.off=function(a,b){a=f.events[a];null!=a&&a.remove(b)};f.emit=d;f.trigger=d;f.fire=d;null!=b&&(b.on=function(a,b){return f.on(a,b)},b.off=function(a,b){return f.off(a,b)})}})})(window.R9,window.jq||window.jQuery);
R9.extend("Common.Patterns",{Observable:function(){var c=[];jq.extend(this,{registerListener:function(a,b,d,e){a=a||"default";!c[a]&&(c[a]=[]);jq.each(c[a],function(b,e){e.callback===d&&c[a].splice(e,1)});c[a].push({id:b,callback:d,scope:e})},registerListeners:function(a){var b=this;jq.each(a,function(a,c){b.registerListener.apply(b,c)})},notifyListeners:function(a,b,d){a=a||"default";jq.each(c[a]||[],function(c,f){f&&f.scope?f.callback.call(f.scope,a,b,d):f&&f.callback(a,b,d)})},unregisterListener:function(a,
b){a=a||"default";c[a]&&jq.each(c[a],function(d,e){e.callback===b&&c[a].splice(e,1)})},unregisterListeners:function(a){var b=this;jq.each(a,function(a,c){b.unregisterListener.apply(b,c)})},unregisterAllListeners:function(){this.unregisterListeners(c)}})}});R9.extend("Common.Patterns.Observable.prototype",{registerListener:function(){},notifyListeners:function(){},unregisterListener:function(){}});
R9.extend("Common.Patterns",{Factory:function(){var c={};return{registerProduct:function(a,b){c[a]=b;c[a].registry=new R9.Common.Cache({maxLifeSpam:9E5,defaultLifeSpam:3E5,garbageCollectionTime:3E4,maxCacheEntrySize:20})},newInstance:function(a,b){return c[a].createProduct.apply(c[a],b)}}}});R9.extend("Common.Patterns.MVC",{Model:function(){return new R9.Common.Patterns.Observable}});R9.extend("Common.Patterns.MVC",{View:function(){R9.Common.Patterns.Observable.apply(this,arguments)}});
R9.extend("Common.Patterns.MVC.View.prototype",jq.extend(!0,{},R9.Common.Patterns.Observable.prototype,{initialize:function(){},destroy:function(){}}));R9.extend("Common.Patterns.MVC",{Controller:function(){return new R9.Common.Patterns.Observable}});
R9.extend("Common.Communication",{ScriptLoader:function(){var c=[],a={load:function(b,d,e,f){e=e||!1;"undefined"==typeof f&&(f=!0);if(f&&-1<jq.inArray(b,c))e||d();else if(c.push(b),e){var g="C"+R9.Common.Utils.getId();e=document.createElement("script");a.loaderCallbacks[g]=function(){clearTimeout(h);delete a.loaderCallbacks[g];d()};b=b.replace(/^(\s)*http(s)?:\/\//i,location.protocol+"//");e.src=b;d&&(e.src+="\x26callback\x3dR9.Common.Communication.ScriptLoader.loaderCallbacks."+g);e.type="text/javascript";
var h=setTimeout(function(){delete a.loaderCallbacks[g]},3E4);b=jq("#scripts");b=b.length?b.get(0):document.getElementsByTagName("head")[0];b.appendChild(e)}else jq.getScript(b,function(){d()})},loaderCallbacks:{}};return a}()});
R9.extend("Common.Communication",{ServerRequestService:function(){function c(a,b,c){jq.ajax({url:c,data:{id:a,searchtype:window.SearchType},dataType:"json"}).done(b)}var a,b=new R9.Common.Cache({maxLifeSpam:9E5,defaultLifeSpam:3E5,garbageCollectionTime:3E4,maxCacheEntrySize:20}),d={cluster:function(a,b,c,d,e,p){a={searchid:a,action:"cluster",ne:b.toUrlValue(),sw:c.toUrlValue(),zoom:d,r:e,callback:p};window.ssUserAction||(window.ssUserAction=window.parent.ssUserAction);ssUserAction("cluster",function(){},
a)},getHotelPhotos:function(a,c,d,e){var f="/h/run/hotel/photos?hid\x3d"+a;c&&(f+="\x26width\x3d"+c);d&&(f+="\x26height\x3d"+d);var g=b.get(f);g?setTimeout(function(){e(jq.parseJSON(g))},0):jq.ajax({url:f}).done(function(a){b.set(f,a);e(jq.parseJSON(a))})},addFavorite:function(a,b){c(a,b,"/favorites/add")},removeFavorite:function(a,b){c(a,b,"/favorites/remove")},setRecentlyViewedHotel:function(a,b){var c={action:"setRecentlyViewedHotel",hid:a};setTimeout(function(){ssUserAction("setRecentlyViewed",
b,c)},0)},getPlaceDetails:function(c,d,e){var f=c.reference,g=b.get(f);g?setTimeout(function(){e(g)},0):(!a&&(a=new google.maps.places.PlacesService(d)),a.getDetails({reference:f},function(a){b.set(f,a);e(a)}))},updateXSell:function(a,b,c,d,e,p){a={ctid:a,checkIn:b,checkOut:c,guests:d,tabType:R9.globals.vertical};e&&(a.originCode=e);p&&(a.destinationCode=p);(new R9.Ajax("/s/run/fd/xsell/common",{data:a})).execute()},updateXSellByForm:function(a){(new R9.Ajax("/s/run/fd/xsell/"+a.tab.value,{data:jq(a).serialize(),
type:"POST"})).execute()}};if(R9.Common.Places&&window.google&&google.maps&&google.maps.places){var e={};jq.each(R9.Common.Places,function(b,c){e["poll"+b.camelizeUpper()]=function(d,e,f){!a&&(a=new google.maps.places.PlacesService(e));R9.Analytics.api.trackEvent("placesService/search/core");a.search({location:d.getLocation().googleLatLon,radius:600,types:c},function(a,c){c===google.maps.places.PlacesServiceStatus.OK?g[b]=a:jq.extend(g,{success:!1,error:c});f(g)});var g={success:!0}}});jq.extend(d,
e)}return d}()});
(function(c){R9.extend("Common.Model",{Favorites:function(){R9.Common.Patterns.Observable.apply(this,arguments)}});R9.extend("Common.Model.Favorites.prototype",c.extend(!0,{},R9.Common.Patterns.Observable.prototype,{count:0,favorites:[],addFavorite:function(a,b){void 0===b&&(b=!0);this.favorites.push(a);this.count++;b&&this.notifyListeners(R9.Common.Model.Favorites.Events.FAVORITE_ADDED,this,{id:a})},isFavorite:function(a){return-1<c.inArray(a,this.favorites)},removeFavorite:function(a,b){void 0===
b&&(b=!0);var c=this.favorites.indexOf(a);-1<c&&(this.favorites.splice(c,1),this.count--,b&&this.notifyListeners(R9.Common.Model.Favorites.Events.FAVORITE_REMOVED,this,{id:a}))}}));R9.Common.Model.Favorites.Events={FAVORITE_ADDED:"favoriteAdded",FAVORITE_REMOVED:"favoriteRemoved"}})(jq||jQuery);
(function(c){R9.extend("Common",{ClientStorageManager:function(a){a&&(this.options=c.extend({},this.options,a));this.init()}});R9.extend("Common.ClientStorageManager.prototype",{_storage:null,options:{defaultCookieExpire:10,storageKey:null},_loadStorageInstance:function(){return this._getLocalStorage(this.options.storageKey)},_createExpirationTimestamp:function(a){return moment().add(a||0,"hours").toDate()},_shouldExpire:function(a){return 0<moment().diff(moment(a))},_serialize:function(a){return"object"===
typeof a?JSON.stringify(a):a},_deserialize:function(a){try{return JSON.parse(a)}catch(b){return a}},_setLocalStorage:function(a,b){localStorage.setItem(a,this._serialize(b))},_getLocalStorage:function(a){return this._deserialize(localStorage.getItem(a))},getCookie:function(a){return this._deserialize(c.cookie(a))},setCookie:function(a,b,d){b=this._serialize(b);void 0===d&&(d={});d.expires||(d.expires=this._createExpirationTimestamp(this.options.defaultCookieExpire));c.cookie(a,b,d)},init:function(){this.options.storageKey&&
(this._storage=this._loadStorageInstance()||{})},save:function(){this._setLocalStorage(this.options.storageKey,this._storage)},purge:function(){localStorage.removeItem(this.options.storageKey);this._storage={}}})})(jq||jQuery);
(function(c){R9.extend("Common",{UserHistory:function(a){if(R9.Common.UserHistory.prototype._Instance)return R9.Common.UserHistory.prototype._Instance;this.options=c.extend({},this.options,a);this.init();R9.Common.UserHistory.prototype._Instance=this}});R9.extend("Common.UserHistory.prototype",{pageTab:"other",wasLastUsedPage:!1,searchHistoryLimit:3,options:{defaultCookiExpire:10,defaultSearchExpire:100,persistLocalStorage:!0,onSave:c.noop},_storage:{sticky:{origin:"",destination:"",guests:"",depart_date:"",
return_date:"",travelersObject:""},lastUsedTab:"",canary:3},_storageKey:"BKHISTORY",page:{searches:[],last_updated:null},history:[],hasSearchHistory:!1,searchHistoryMoreRecent:!1,_loadStorageInstance:function(){var a=this._storage.canary,b=this._getLocalStorage(this._storageKey);b&&b.canary&&b.canary===a||(b=this._storage);return b},_createExpirationTimestamp:function(a){var b=moment();b.add(a||0,"hours");return b._d},_shouldExpire:function(a){return 0<moment().diff(moment(a))},_serialize:function(a){return"object"===
typeof a?JSON.stringify(a):a},_deserialize:function(a){try{return JSON.parse(a)}catch(b){return null}},_setCookie:function(a,b,d){b=this._serialize(b);void 0===d&&(d={});d.expires||(d.expires=this._createExpirationTimestamp(this.options.defaultCookieExpire));c.cookie(a,b,d)},_setLocalStorage:function(a,b){localStorage.setItem(a,this._serialize(b))},_getLocalStorage:function(a){return this._deserialize(localStorage.getItem(a))},init:function(){this.dirty=!1;this.pageTab=c("input[name\x3dtab]").val()||
this.pageTab;this._storage=this._loadStorageInstance();this._storage.lastUsedTab===this.pageTab&&(this.wasLastUsedPage=!0);this.page=this._storage[this.pageTab]=this._storage[this.pageTab]||this.page;this.sticky=this._storage.sticky;this.history=this.page.searches;this.evictExpiredSearches();0<this.history.length&&(this.hasSearchHistory=!0,this.page.last_updated&&0>moment(this.page.last_updated).diff(this.history[0].createdAt)&&(this.searchHistoryMoreRecent=!0));var a=this;c(window).bind("beforeunload",
function(){try{a.save()}catch(b){}})},save:function(){try{this.options.onSave.call(this)}catch(a){return!1}this.dirty&&this.options.persistLocalStorage&&(this._storage.lastUsedTab=this.pageTab,this._storage.common=this.common,this.page.searches=this.history,this._storage[this.pageTab]=this.page,this._setLocalStorage(this._storageKey,this._storage))},get:function(a){return this.page[a]},set:function(a,b){this.dirty||(this.dirty=!0,this.page.last_updated=this._createExpirationTimestamp());this.page[a]=
b},setSticky:function(a,b){this.dirty||(this.dirty=!0);this.sticky[a]=b},reduceTravelersObjectToTotal:function(){var a=this.sticky.travelersObject,b=0;a&&(b+=parseInt(a.adults),b+=parseInt(a.youth),b+=parseInt(a.children),b+=parseInt(a.infants),b+=parseInt(a.lapinfants),b+=parseInt(a.seniors));return b},getRecentHistory:function(){var a=this.hasSearchHistory&&this.searchHistoryMoreRecent?this.history[0]:null;if(!a){var a={},b;for(b in this.page)a[b]=this.get(b);delete a.last_updated;delete a.searches}return a},
evictExpiredSearches:function(){var a=this;0!==this.history.length&&(this.history.length>this.searchHistoryLimit&&(this.history=this.history.slice(0,this.searchHistoryLimit)),this.history=this.history.filter(function(b){return!a._shouldExpire(b.expiresBy)}))},pushSearchHistory:function(a){a.expiresBy=this._createExpirationTimestamp(this.options.defaultSearchExpire);a.createdAt=this._createExpirationTimestamp();this.dirty=!0;this.history.splice(0,0,a)},purge:function(){localStorage.removeItem(this._storageKey);
this._storage={};this.options.persistLocalStorage=!1}})})(jq||jQuery);
(function(c){R9.extend("Common",{SmartyHistory:function(a){var b=a.historyType;b||(b="flight");var d=R9.Common.SmartyHistory.prototype["_"+b+"Instance"];if(d)return d.init(),R9.Common.SmartyHistory.prototype["_"+b+"Instance"];this.options=c.extend({},this.options,a);this.init();R9.Common.SmartyHistory.prototype["_"+b+"Instance"]=this}});R9.extend("Common.SmartyHistory",{SmartyFlightHistory:function(a){return R9.Common.SmartyHistory.call(this,c.extend({historyType:"flight"},a))},SmartyHotelHistory:function(a){return R9.Common.SmartyHistory.call(this,
c.extend({historyType:"hotel"},a))},SmartyCarHistory:function(a){return R9.Common.SmartyHistory.call(this,c.extend({historyType:"car"},a))},SmartyClearHistory:function(){this.currentSmartyHistory&&(this.currentSmartyHistory.clearHistory(),this.currentSmarty.hideDropdown(),this.currentSmarty.runSearch(!1));R9.Analytics.api.trackEvent("smartyHistory/click/clearHistory")}});R9.extend("Common.SmartyHistory.prototype",{history:null,received:!1,options:{historyType:"flight",maxSearchHistory:30,searchHistorySubtype:"",
showPastDates:R9.config.getBoolean("ui.smarty-history.showPastDates",!1)},init:function(){this.received&&null!=this.history||setTimeout(this.update.bind(this),1)},update:function(){var a=this;c.ajax({type:"GET",dataType:"json",url:"/s/run/recentsearchhistory/gethistory",data:{searchType:a.options.historyType,maxSearchHistoryNum:a.options.maxSearchHistory,searchHistorySubtype:a.options.searchHistorySubtype},success:function(b){if(b)for(a.history=b,a.processPastDates(),a.received=!0,b=0;b<a.history.length;b++)a.history[b].idx=
b}})},clearHistory:function(){this.history=[];var a=this;c.ajax({type:"POST",url:"/s/run/recentsearchhistory/clearhistory",data:{searchType:a.options.historyType},success:function(b){a.history=[];R9.Analytics.api.trackEvent({category:"Smarty-History",action:"clear-history"})}})},matchWord:function(a,b){var c=a.indexOf(b);0!==c&&(c=a.indexOf(" "+b),-1<c&&(c+=1));return c},processPastDates:function(){var a=[];if(null!==this.history){for(var b=0;b<this.history.length;b++){var c=this.history[b],e=c.startDate||
c.checkinDate,f=c.endDate||c.checkoutDate;if(e&&f){var e=new moment(e),f=new moment(f),g=new moment;e.isBefore(g,"day")||f.isBefore(g,"day")?this.options.showPastDates&&(c.isPast=!0,a.push(c)):a.push(c)}}this.history=a}}});R9.extend("Common.SmartyHistory.SmartyFlightHistory.prototype",!0,R9.Common.SmartyHistory.prototype,{filter:function(a,b,c,e,f){c=c||Infinity;var d=[];if(null==this.history)return[];var h=[];if(b||""===f)h=this.history;else for(var l=0;l<this.history.length;l++){var k=this.history[l];
k.departCode===f&&h.push(k)}h=this.filterByRoundTrip(h,e);if(""===a)return h.slice(0,c);for(l=0;l<h.length&&!(k=h[l],f=k.departShortName+" "+k.departAirportName.toUpperCase(),b||(f=k.destShortName+" "+k.destAirportName.toUpperCase()),-1<this.matchWord(f,a)&&(d.push(k),d.length>=c));l++);return this.filterByRoundTrip(d,e).slice(0,c)},filterByRoundTrip:function(a,b){if(null==a)return[];if(R9.config.getBoolean("ui.flight.smarty-history.separateRTOW",!1)){for(var c=[],e=0;e<a.length;e++){var f=a[e];f.isRoundTrip===
b&&c.push(f)}return c}return a}});R9.extend("Common.SmartyHistory.SmartyHotelHistory.prototype",!0,R9.Common.SmartyHistory.prototype,{filter:function(a,b){b=b||Infinity;var c=[];if(null==this.history)return[];if(""==a)return this.history.slice(0,b);for(var e=0;e<this.history.length;e++){var f=this.history[e],g=f.location.toUpperCase();if(-1<this.matchWord(g,a)&&(c.push(f),c.length>=b))break}return c.slice(0,b)}});R9.extend("Common.SmartyHistory.SmartyCarHistory.prototype",!0,R9.Common.SmartyHistory.prototype,
{filter:function(a,b,c,e){c=c||Infinity;var d=[];if(null==this.history)return[];var g=this.filterByOneWay(this.history,e);if(""===a)return g.slice(0,c);for(var h=0;h<g.length;h++){var l=g[h],k=null==l.airportCode?l.location.toUpperCase():l.location.toUpperCase()+" "+l.airportCode;b||(k=null==l.airportCode2?l.location2.toUpperCase():l.location2.toUpperCase()+" "+l.airportCode2);if(-1<this.matchWord(k,a)&&(d.push(l),d.length>=c))break}return this.filterByOneWay(d,e).slice(0,c)},filterByOneWay:function(a,
b){if(null==a)return[];for(var c=[],e=0;e<a.length;e++){var f=a[e];f.oneWay===b&&c.push(f)}return c}})})(jq||jQuery);
(function(c){R9.extend("Common",{SmartyControlGroup:function(a){this.options=c.extend({},this.options,a);null===this.options.startFormat&&(this.options.startFormat=R9.Widgets.DaterangePicker.prototype.options.startFormat);null===this.options.endFormat&&(this.options.endFormat=R9.Widgets.DaterangePicker.prototype.options.endFormat);this.init()}});R9.extend("Common.SmartyControlGroup.prototype",{options:{form:"",smartyHistory:null,daterangePicker:"",startFormat:null,endFormat:null},type:"flight",getHistory:function(){return this.options.smartyHistory()},
getTime:function(a){return null==a?null:a.getTime()},validateDate:function(a){return null==a?null:this.datepicker().utils.validate(new Date(a))},datepicker:function(){return c(this.options.daterangePicker).data("datepicker")}});R9.extend("Common.SmartyControlGroup",{SmartyFlightControlGroup:function(a){R9.Common.SmartyControlGroup.call(this,a)},SmartyHorizonFlightControlGroup:function(a){R9.Common.SmartyControlGroup.call(this,a)},SmartyHotelControlGroup:function(a){R9.Common.SmartyControlGroup.call(this,
a)},SmartyHorizonHotelControlGroup:function(a){R9.Common.SmartyControlGroup.call(this,a)},SmartyCarControlGroup:function(a){R9.Common.SmartyControlGroup.call(this,a)},SmartyHorizonCarControlGroup:function(a){R9.Common.SmartyControlGroup.call(this,a)}});R9.extend("Common.SmartyControlGroup.SmartyFlightControlGroup.prototype",!0,R9.Common.SmartyControlGroup.prototype,{options:c.extend(R9.Common.SmartyControlGroup.prototype.options,{form:null,originInput:"",destInput:"",originCode:"",destCode:"",daterangePicker:"",
cabin:"",travelers:"",nearbyDeparture:"",nearbyArrival:"",isRoundTrip:null}),init:function(){this.type="flight"},setFieldsFromHistoryItem:function(a,b){this.datepicker().setStartDate(this.validateDate(a.startDate));this.datepicker().setEndDate(this.validateDate(a.endDate));c(this.options.nearbyDeparture).prop("checked",a.departureAllowNearby);c(this.options.nearbyArrival).prop("checked",a.arrivalAllowNearby);b&&(this.options.form.noCheckInfant=!0);this.setTravelersFromHistoryItem(a);b&&(this.options.form.noCheckInfant=
!1);b?(c(this.options.originInput).val(a.departAirportName),c(this.options.destInput).val(a.destAirportName),c(this.options.originCode).val(a.departCode),c(this.options.destCode).val(a.destCode)):(b={type:"ap",id:a.departCode,short_str:a.departAirportName},c(this.options.originInput).data("smarty").setItem(b),a={type:"ap",id:a.destCode,short_str:a.destAirportName},c(this.options.destInput).data("smarty").setItem(a))},saveFieldsToHistoryItem:function(){var a={};a.departAirportName=c(this.options.originInput).val();
a.destAirportName=c(this.options.destInput).val();a.departCode=c(this.options.originCode).val();a.destCode=c(this.options.destCode).val();a.startDate=this.getTime(this.datepicker().getStartDate());a.endDate=this.getTime(this.datepicker().getEndDate());a.departureAllowNearby=c(this.options.nearbyDeparture).prop("checked");a.arrivalAllowNearby=c(this.options.nearbyArrival).prop("checked");c(this.options.travelers).each(function(b){b=c(this).data("r9NumberBox");var d=c(this).parent().data("for").toLowerCase();
a[d]=b.getValue()});a.cabin=c(this.options.cabin).val();return a},isRoundTrip:function(){return"function"===typeof this.options.isRoundTrip?this.options.isRoundTrip():"checked"===c("#roundtrip").attr("checked")?!0:0<c(".inlineSearchAgainView").length&&"y"!==c('[name\x3d"oneway"]',".inlineSearchAgainView").val()?!0:!1},setTravelersFromHistoryItem:function(a){var b=0;c(this.options.travelers).each(function(d){d=c(this).data("r9NumberBox");var e=c(this).parent().data("for").toLowerCase(),e=a[e];b+=e;
void 0!=d&&d.setValue(e)});var d=c(".ptcAdults .r9NumberBox",c(this.options.form.e)).data("r9NumberBox");0==b&&d.setValue(1);0<c(this.options.cabin).length&&c(this.options.cabin).val(a.cabin);this.setTravelerCount();d.options.callback.call(d,0)},setTravelerCount:function(){var a=0;c(".fieldInputPTCType .numberHolder",this.form).each(function(b){b=+c(this).val();isNaN(b)||(a+=b)});!a&&c("select#mobiletravelers",this.form).length&&(a=+c("#mobiletravelers",this.form).val());c("[name\x3dtravelers]",this.form).val(a);
var b;1==a?(b="adults",c(".fieldInputPTCType",this.form).each(function(){if(1==c(this).find(".numberHolder").val())return b=c(this).data("for").toLowerCase(),!1})):b="traveler_count";var d=c("#travelers, #travelers2",this.form).data("dropdownDialog");if(d){void 0===this.statusMessage[b]&&(b="traveler_count");var e=this.statusMessage[b];if(void 0!==e){var e="traveler_count"===b?R9.Common.Utils.String.formatChoice(e,a,a):R9.Common.Utils.String.formatString(e,a),f=c("#cabin option:selected",this.form).text();
d.updateLabel(e+", "+f)}}},statusMessage:{adults:"{0} adult",seniors:"{0} senior",children:"{0} child",traveler_count:"1#1 traveler|2#{0} travelers"}});R9.extend("Common.SmartyControlGroup.SmartyHotelControlGroup.prototype",!0,R9.Common.SmartyControlGroup.prototype,{options:c.extend(R9.Common.SmartyControlGroup.prototype.options,{form:null,locationInput:"",ctid:"",lmid:"",hid:"",nhid:"",daterangePicker:"",rooms:"",guests:"",minStars:"",priceRange:"",rating:""}),init:function(){this.type="hotel"},
setFieldsFromHistoryItem:function(a,b){this.datepicker().setStartDate(this.validateDate(a.checkinDate));this.datepicker().setEndDate(this.validateDate(a.checkoutDate));this.options.rooms&&c(this.options.rooms).data("r9NumberBox").setValue(a.rooms);c(this.options.guests).data("r9NumberBox").setValue(a.guests);c(this.options.minStars).val(a.minStars);c(this.options.rating).val(Math.floor(a.rating/10));b?(c(this.options.locationInput).val(a.location),c(this.options.ctid).val(a.ctid),c(this.options.lmid).val(a.lmid),
c(this.options.hid).val(a.hid),c(this.options.nhid).val(a.nhid),c(this.options.frid).val(a.frid),c(this.options.rid).val(a.rid),c(this.options.cid).val(a.cid)):(a={id:a.ctid,str:a.location,lmid:a.lmid,hid:a.hid,nhid:a.nhid,frid:a.frid,rid:a.rid,cid:a.cid},c(this.options.locationInput).data("smarty").setItem(a))},saveFieldsToHistoryItem:function(){var a={};a.location=c(this.options.locationInput).val();a.ctid=c(this.options.ctid).val();a.lmid=c(this.options.lmid).val();a.hid=c(this.options.hid).val();
a.nhid=c(this.options.nhid).val();a.frid=c(this.options.frid).val();a.rid=c(this.options.rid).val();a.cid=c(this.options.cid).val();a.checkinDate=this.getTime(c(this.options.daterangePicker).daterangePicker("getStartDate"));a.checkoutDate=this.getTime(c(this.options.daterangePicker).daterangePicker("getEndDate"));a.rooms=c(this.options.rooms).data("r9NumberBox").getValue();a.guests=c(this.options.guests).data("r9NumberBox").getValue();a.minStars=c(this.options.minStars).val();a.rating=Math.floor(10*
c(this.options.rating).val());return a}});R9.extend("Common.SmartyControlGroup.SmartyHorizonFlightControlGroup.prototype",!0,R9.Common.SmartyControlGroup.prototype,{options:c.extend(R9.Common.SmartyControlGroup.prototype.options,{form:null,formObject:null,originInput:"",destInput:"",originCode:"",destCode:"",daterangePicker:"",cabin:null,travelers:"",nearbyDeparture:"",nearbyArrival:"",smartyObject:"",maxHistory:5,state:null,isRoundTrip:null}),init:function(){this.type="flight"},setFieldsFromHistoryItem:function(a,
b){b&&!R9.config.getBoolean("ui.smarty.previewUpdatesForm.enabled",!1)||null==this.options.formObject||this.options.formObject.updateTravelDateState(this.validateDate(a.startDate),this.validateDate(a.endDate));this.datepicker().setStartDate(this.validateDate(a.startDate));this.datepicker().setEndDate(this.validateDate(a.endDate));c(this.options.nearbyDeparture).prop("checked",a.departureAllowNearby);c(this.options.nearbyArrival).prop("checked",a.arrivalAllowNearby);this.setTravelersFromHistoryItem(a);
b?(c(this.options.originInput).val(a.departAirportName),c(this.options.destInput).val(a.destAirportName),c(this.options.originCode).val(a.departCode),c(this.options.destCode).val(a.destCode)):(b={type:"ap",id:a.departCode,short_str:a.departAirportName},this.options.originInput.getWidget().setItem(b),a={type:"ap",id:a.destCode,short_str:a.destAirportName},this.options.destInput.getWidget().setItem(a))},saveFieldsToHistoryItem:function(){var a={};a.departAirportName=c(this.options.originInput).val();
a.destAirportName=c(this.options.destInput).val();a.departCode=c(this.options.originCode).val();a.destCode=c(this.options.destCode).val();a.startDate=this.getTime(this.datepicker().getStartDate());a.endDate=this.getTime(this.datepicker().getEndDate());a.departureAllowNearby=c(this.options.nearbyDeparture).prop("checked");a.arrivalAllowNearby=c(this.options.nearbyArrival).prop("checked");c(".Common-Widgets-Number-NumberBox",this.options.travelers.elementNode).each(function(){var b=c(this).getWidget(),
d=c(this).attr("id").split("-").pop().toLowerCase();a[d]=b.getValue()});a.cabin=this.options.cabin.getValue();return a},isRoundTrip:function(){return"function"===typeof this.options.isRoundTrip?this.options.isRoundTrip():"checked"===c("#roundtrip").attr("checked")?!0:0<c(".inlineSearchAgainView").length&&"y"!==c('[name\x3d"oneway"]',".inlineSearchAgainView").val()?!0:!1},setTravelersFromHistoryItem:function(a){null!=this.options.cabin&&(this.options.cabin.setValue(a.cabin),this.options.state.cabinDisplayType=
this.options.cabin.getSelectedElement().title,this.options.state.cabin=this.options.cabin.getSelectedElement().value);c(".Common-Widgets-Number-NumberBox",this.options.travelers.elementNode).each(function(){var b=c(this).getWidget(),d=c(this).attr("id").split("-").pop().toLowerCase(),d=a[d];void 0!=b&&b.setValue(d)})},datepicker:function(){return this.options.daterangePicker},setSmarty:function(a){this.options.smartyObject=a},getMaxHistory:function(){return this.options.maxHistory},statusMessage:{adults:"{0} adult",
seniors:"{0} senior",children:"{0} child",traveler_count:"1#1 traveler|2#{0} travelers"}});R9.extend("Common.SmartyControlGroup.SmartyHorizonHotelControlGroup.prototype",!0,R9.Common.SmartyControlGroup.prototype,{options:c.extend(R9.Common.SmartyControlGroup.prototype.options,{form:null,locationInput:"",ctid:"",lmid:"",hid:"",nhid:"",daterangePicker:"",rooms:"",guests:"",minStars:"",priceRange:"",rating:"",smartyObject:"",maxHistory:5}),init:function(){this.type="hotel"},setSmarty:function(a){this.options.smartyObject=
a},validateDate:function(a){return null==a?null:this.options.daterangePicker.utils.validate(new Date(a))},getMaxHistory:function(){return this.options.maxHistory},setFieldsFromHistoryItem:function(a,b){this.options.daterangePicker.setStartDate(this.validateDate(a.checkinDate));this.options.daterangePicker.setEndDate(this.validateDate(a.checkoutDate));this.options.rooms&&this.options.rooms.setValue(a.rooms);this.options.guests.setValue(a.guests);c(this.options.minStars).val(a.minStars);c(this.options.rating).val(Math.floor(a.rating/
10));b?(c(this.options.locationInput).val(a.location),c(this.options.ctid).val(a.ctid),c(this.options.lmid).val(a.lmid),c(this.options.hid).val(a.hid),c(this.options.nhid).val(a.nhid),c(this.options.frid).val(a.frid),c(this.options.rid).val(a.rid),c(this.options.cid).val(a.cid)):this.options.smartyObject.setItem({id:a.ctid,str:a.location,lmid:a.lmid,hid:a.hid,nhid:a.nhid,frid:a.frid,rid:a.rid,cid:a.cid})},saveFieldsToHistoryItem:function(){var a={};a.location=c(this.options.locationInput).val();a.ctid=
c(this.options.ctid).val();a.lmid=c(this.options.lmid).val();a.hid=c(this.options.hid).val();a.nhid=c(this.options.nhid).val();a.frid=c(this.options.frid).val();a.rid=c(this.options.rid).val();a.cid=c(this.options.cid).val();a.checkinDate=this.getTime(this.options.daterangePicker.getStartDate());a.checkoutDate=this.getTime(this.options.daterangePicker.getEndDate());this.options.rooms&&(a.rooms=this.options.rooms.getValue());a.guests=this.options.guests.getValue();a.minStars=c(this.options.minStars).val();
a.rating=Math.floor(10*c(this.options.rating).val());return a}});R9.extend("Common.SmartyControlGroup.SmartyCarControlGroup.prototype",!0,R9.Common.SmartyControlGroup.prototype,{options:{form:null,location:"",location2:"",ctid1:"",ctid2:"",daterangePicker:"",pickupHour:"",dropoffHour:""},init:function(){this.type="car"},isOneWay:function(){return"function"===typeof this.options.isOneWay?this.options.isOneWay():c("#carsearchbar").hasClass("oneway")?!0:0<c(".inlineSearchAgainView").length&&"y"===c('[name\x3d"oneway"]',
".inlineSearchAgainView").val()?!0:!1},setFieldsFromHistoryItem:function(a,b){this.datepicker().setStartDate(this.validateDate(a.startDate));this.datepicker().setEndDate(this.validateDate(a.endDate));c(this.options.pickupHour).val(a.pickupHour);c(this.options.dropoffHour).val(a.dropoffHour);b?(a.airportName?c(this.options.location).val(a.airportDisplayName):c(this.options.location).val(a.location),a.airportName2?c(this.options.location2).val(a.airportDisplayName2):c(this.options.location2).val(a.location2),
c(this.options.ctid1).val(a.cityCode),c(this.options.ctid2).val(a.cityCode2)):(b={id:a.cityCode,str:a.airportDisplayName||a.location},c(this.options.location).data("smarty").setItem(b),a={id:a.cityCode2,str:a.airportDisplayName2||a.location2},c(this.options.location2).data("smarty").setItem(a))},saveFieldsToHistoryItem:function(){var a={};a.location=c(this.options.location).val();a.location2=c(this.options.location2).val();a.cityCode=c(this.options.ctid1).val();a.cityCode2=c(this.options.ctid2).val();
a.startDate=this.getTime(this.datepicker().getStartDate());a.endDate=this.getTime(this.datepicker().getEndDate());a.pickupHour=c(this.options.pickupHour).val();a.dropoffHour=c(this.options.dropoffHour).val();return a}});R9.extend("Common.SmartyControlGroup.SmartyHorizonCarControlGroup.prototype",!0,R9.Common.SmartyControlGroup.prototype,{options:{form:null,location:"",location2:"",ctid1:"",ctid2:"",daterangePicker:"",pickupHour:"",dropoffHour:"",locationSmarty:null,location2Smarty:null},init:function(){this.type=
"car"},setLocationSmarty:function(a){this.options.locationSmarty=a},setLocation2Smarty:function(a){this.options.location2Smarty=a},getMaxHistory:function(){return this.options.maxHistory},datepicker:function(){return this.options.daterangePicker},validateDate:function(a){return null==a?null:this.options.daterangePicker.utils.validate(new Date(a))},isOneWay:function(){return"function"===typeof this.options.isOneWay?this.options.isOneWay():"true"==c(".formType.active").attr("data-oneway")?!0:0<c(".inlineSearchAgainView").length&&
"y"===c('[name\x3d"oneway"]',".inlineSearchAgainView").val()?!0:!1},setFieldsFromHistoryItem:function(a,b){this.datepicker().setStartDate(this.validateDate(a.startDate));this.datepicker().setEndDate(this.validateDate(a.endDate));this.options.pickupHour.setValue(a.pickupHour);this.options.dropoffHour.setValue(a.dropoffHour);b?(a.airportName?c(this.options.location).val(a.airportDisplayName):c(this.options.location).val(a.location),a.airportName2?c(this.options.location2).val(a.airportDisplayName2):
c(this.options.location2).val(a.location2),c(this.options.ctid1).val(a.cityCode),c(this.options.ctid2).val(a.cityCode2)):(this.options.locationSmarty.setItem({id:a.cityCode,str:a.airportDisplayName||a.location}),a={id:a.cityCode2,str:a.airportDisplayName2||a.location2},null!=this.options.location2Smarty&&null!=a&&null!=a.str&&this.options.location2Smarty.setItem(a))},saveFieldsToHistoryItem:function(){var a={};a.location=c(this.options.location).val();a.location2=c(this.options.location2).val();a.cityCode=
c(this.options.ctid1).val();a.cityCode2=c(this.options.ctid2).val();a.startDate=this.getTime(this.datepicker().getStartDate());a.endDate=this.getTime(this.datepicker().getEndDate());a.pickupHour=this.options.pickupHour.getValue();a.dropoffHour=this.options.dropoffHour.getValue();return a}})})(jq||jQuery);function kmail(c){document.write('\x3ca class\x3d"mlink" href\x3d"mailto:'+c+'\x26#64;kayak\x26#46;com"\x3e'+c+"\x26#64;kayak\x26#46;com\x3c/a\x3e")}
function kmail2(c,a){document.write('\x3ca class\x3d"mlink" href\x3d"mailto:'+c+"\x26#64;"+a+'"\x3e'+c+"\x26#64;"+a+"\x3c/a\x3e")}function validateEmail(c){if(!c||!c.match)return!1;c=c.match(/^[A-Z0-9._%+-]{1,63}@(?:[A-Z0-9-]+\.){1,125}[A-Z]{2,63}$/i);return!!(c&&c[0]&&c[0].length)}function getRadioValue(c){return jq(c).filter(":checked").val()||null}
function showmessage(c,a){var b=jq("#messagebox");b.length||(b=jq("\x3cdiv id\x3d'messagebox'\x3e\x3c/div\x3e").appendTo("body").r9dialog({autoOpen:!1,closeOnEscape:!1,dialogClass:"messagebox",modal:!1,position:["center",185],showCloseX:!1}));b.html(c);a?b.r9dialog("option","title",a).r9dialog("widget").removeClass("ui-dialog-no-title"):b.r9dialog("widget").addClass("ui-dialog-no-title");b.r9dialog("open")}function hidemessage(){0<jq("#messagebox").length&&jq("#messagebox").r9dialog("close")}
function msie(c){return jq.browser.msie&&(!c||c>=jq.browser.version-0)&&jq.browser.version-0||0}function getFader(){var c=jq("#faderPane");c.length||(c=jq("\x3cdiv id\x3d'faderPane' class\x3d'faderPane'\x3e\x3c/div\x3e").appendTo("body"));return c}function toggleFaderPane(c,a){fader=getFader();c?(fader.css("height",jq(window).height()).show(),jq(window).resize(function(){fader.css("height",jq(window).height())})):fader.hide();hideMeOnPopup(c);fader[0].onclick="function"==typeof a&&c?a:null}
function htmlSafe(c){return c.replace(/\&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/\"/g,"\x26quot;").replace(/\'/g,"\x26#39;")}function stripSpaces(c){return c.replace(/\s/g,"")}function safeSpaces(c){return c.replace(/\s/g,"%20")}
function displaysmartad(c,a){if(!window.skipSmartAd){var b=jq(c).contents().find("iframe");null!=b&&0<b.length&&(c=b);c=jq(c).contents().find("body #smtdiv");try{var d=eval("smtad\x3d"+jq(c).text());d.searchid=d.searchid||window.searchid;d.provider_code&&d.searchid&&(getsmartadcreative(a,d.provider_code,d.searchid,d.click_tracking,d.sz,!0,Streaming.done),Streaming.done||pollsmartadcreative(a,d.provider_code,d.searchid,d.click_tracking,d.sz))}catch(e){}}}
function getsmartadcreative(c,a,b,d,e,f,g){var h=document.getElementById("displayAd"+c),l;if(R9.Ads.SmartAd.imageSlotEnabled)if("0"===c)l="R0";else if("1"===c)l="R1";else{if("4"===c||"3"===c)l="M0"}else"1"===c?l="R0":"3"===c&&(l="M0");l||(l="R0");h&&(a="/h/ads/smartad?provider_code\x3d"+safeSpaces(a)+"\x26searchid\x3d"+b+"\x26clicktracking\x3d"+encodeURIComponent(d)+"\x26sz\x3d"+e+"\x26rank\x3d"+c+"\x26logimpr\x3d"+f+"\x26strm\x3d"+g+"\x26pageorigin_location\x3d"+l+"\x26isstreaming\x3d"+("undefined"!==
typeof Streaming?Streaming.done:!1),-1==navigator.appVersion.indexOf("MSIE")||window.showNewGPTAds?setIframeUrl(h,a):(c=document.getElementById("displayAdSpanFrame"+c),c.innerHTML=c.innerHTML.replace(/src="[^"]*"/,'src\x3d"'+a+'"')))}function pollsmartadcreative(c,a,b,d,e){Streaming.done?getsmartadcreative(c,a,b,d,e,!1,!0):setTimeout(function(){pollsmartadcreative(c,a,b,d,e)},1E3)}function loadDisplayAds(){window.showNewGPTAds&&showNewGPTAds()}
function displayGPTCallback(){jq("div.GPT").each(function(){var c=jq(this),a=c.attr("id").replace("displayAd","");try{var b=jq(c).find("iframe").contents().find("body #smtdiv");b&&1==b.length&&displaysmartad(jq(c).find("iframe"),a)}catch(d){}})}jq(loadDisplayAds);
function resizeIframeToContents(c){if(!window.showNewGPTAds&&null!=c){var a=jq(c).contents().find("iframe");null!=a&&0<a.length&&(c=a);var a=jq(c).attr("id").replace("displayAd","displayAdHide"),b=!1,d=jq(c).contents().find("body img");d&&0!=d.length||(d=jq(c).contents().find("iframe").contents().find("body img"));d&&1==d.length&&null!=d.attr("src")&&0<d.attr("src").indexOf("/kayakadpixel.gif")&&(b=!0);d&&0!=d.length||((d=jq(c).contents().find("iframe").contents().find("body div.kayakadpixel"))&&
1==d.length?b=!0:(d=jq(c).contents().find("iframe").contents().find("body \x3e *"))&&0!=d.length||(b=!0));b?(c=a.replace("displayAdHide",""),jq("#bannerad"+c).hide(),jq("#"+a).hide()):(jq("#"+a).css("visibility","visible"),c=a.replace("displayAdHide",""),jq("#bannerad"+a.replace("displayAdHide","")).show(),"2"==c&&jq("#"+a).show())}}var clearFlagTimer=null,canReloadAds=!0;
function reloadBannerAds(){function c(a){var b=document.getElementById(a);if(null!=b){if(!b.src){window.Streaming&&Streaming.dbg(a+" NAF");return}var c=-1!=navigator.appVersion.indexOf("MSIE")?b.contentWindow.location.href:b.src;"undefined"!=typeof document.bannerUrls&&null!=document.bannerUrls[a]&&(c=document.bannerUrls[a]);a=(new Date).getTime();var c=(0>c.indexOf("\x26ad_ts\x3d")?c+"\x26ad_ts\x3d"+(new Date).getTime():c.substring(0,c.indexOf("\x26ad_ts")))+"\x26ad_ts\x3d"+(new Date).getTime(),
f=/ord%3D([0-9]*)%3F/;c.match(f)&&(c=c.replace(f,"ord%3D"+a+"%3F"));var g=jq(b).hasClass("hideAllAds");setIframeUrl(b,c);jq(b).load(function(){if(g)var a=0,c=setInterval(function(){try{2==a&&(jq(b).hasClass("hide_all_displayed_ads_before_load")||jq(b).addClass("hide_all_displayed_ads_before_load")),50<jq(b).contents().find("#output").height()&&(jq(b).removeClass("hide_all_displayed_ads_before_load"),clearInterval(c)),30<a++&&clearInterval(c)}catch(k){clearInterval(c)}},1E3)})}0<jq("#displayAdSpanFrame2").length?
jq("#displayAdHide2").show():jq("#displayAdHide2").hide()}function a(a){return(a=document.getElementById(a))&&"none"!=a.style.display}canReloadAds?(canReloadAds=!1,window.refreshGPTAds?refreshGPTAds():(c("displayAd1","1"),a("bannerad2")&&c("displayAd2","2"),a("bannerad3")&&c("displayAd3","3"),a("bannerad4")&&c("displayAd4","4")),R9.Analytics.api.trackEvent("bannerreload")):clearTimeout(clearFlagTimer);(function(){clearFlagTimer=setTimeout(function(){canReloadAds=!0},R9.globals.adsRefreshTimer||2500)})()}
function loadTT(c,a){var b=c.match(/^\#ttip(.*)/),d=b&&b[1];if(!d||jq(c).length)a();else{var b=function(){jq(c).length||jq("\x3cdiv id\x3d'ttip"+d+"'\x3e\x3c/div\x3e").appendTo("body");a()},e={action:"ttip",t:d};if(R9.ttip&&R9.ttip[d]){if(R9.ttip[d].empty)return b();jq.extend(e,R9.ttip[d].params)}return ssAJAX("/s/toolbox",e,b)}}
function showTT(c,a,b,d,e,f){loadTT("#ttip"+b,function(){""!=a&&jq("#ttipText"+b).html(a);"BL"==b?jq("#ttip"+b).css({left:"-9999",visibility:"visible"}).show(function(){_showTT(c,a,b,d,e,f)}):_showTT(c,a,b,d,e,f)})}
function _showTT(c,a,b,d,e,f){if(null==e||!e)hideAllTT(!1);else if(null!=f)for(parts=f.split(","),a=0;a<parts.length;a++)hideTTType(parts[a]);a=jq("#ttip"+b);obj=document.getElementById("ttip"+b);obj.style.display="block";f=jq(c).offset();e=f.top;f=f.left;null!=d&&(e+=d.y,f+=d.x);if("BL"==b)a.show(function(){jq(this).position({my:"left bottom",at:"left top",offset:"-30 5",of:jq(c)})});else{if("TL"==b)e=e+c.offsetHeight-5,f=f+c.offsetWidth-50;else if("CL"==b)e=e+c.offsetHeight-30,f=f+c.offsetWidth+
25;else if("CR"==b||"FSP"==b)e=e-a.outerHeight()/2+c.offsetHeight/2,f="CL"==b||"FL"==b||"FSP"==b?f+c.offsetWidth:f-a.outerWidth();else if("FL"==b)f=f+jq(c).outerWidth()+20,e=e+jq(c).outerHeight()/2-65;else if("DL"==b)f+=jq(c).outerWidth(),e=e+jq(c).outerHeight()/2-50,obj.style.zIndex="45";else if("DR"==b)e=e+jq(c).outerHeight()/2-50,f-=jq(obj).outerWidth()+3,obj.style.zIndex="45";else if("CT"==b||"CB"==b)e=e-0+c.offsetHeight,!jq.browser.mozilla&&!jq.browser.safari||"CL"!=b&&"FL"!=b?jq.browser.msie&&
parseInt(jq.browser.version):e+=8,f-=obj.offsetWidth/2;jq(obj).css({top:e,left:f,visibility:"visible"})}}function hideAllTT(c){-1!=navigator.appVersion.indexOf("MSIE 6.")&&jq("select.hideOnTT").css("visibility","visible");null==c&&(c=!0);jq.each("BL TL CL CR CB CT DL DR FL FSP DX DXC DT DG SHR HP SLT SLB".split(" "),function(){hideTTType(this)});try{jq("#createShareDiv").r9popover("close")}catch(a){}"function"==typeof localTTHidden&&c&&localTTHidden();jq("div.hideableTT").hide()}
function hideTTType(c){jq("#ttip"+c).hide()}function simpleurl(c){if(null==c)return c;var a=0==c.indexOf("http://"),b=c.indexOf("/",a?7:0);c=0<b?c.substring(a?7:0,b):c.substring(a?7:0);return 0==c.indexOf("www.")?c.substring(4):c}function cleanUrl(c,a){a="http"+(!0===a||"true"===a?"s":"");""!=c&&(0>c.indexOf("http")?c=a+"://"+c.slice(0,1017):0!=c.indexOf(a)&&0==c.indexOf("http")&&(c=a+c.slice(4,1017)));return c}
function replaceArgs(){for(var c=arguments[0],a=1;a<=arguments.length;a++)c=c.replace("{"+(a-1)+"}",arguments[a]);return c}"undefined"==typeof String.prototype.localeCompare&&(String.prototype.localeCompare=function(c){return this<c?-1:this>c?1:0});var R9_DisplayEds_JustHidden=!1;function hideDisplayAds(c){R9_DisplayEds_JustHidden=!0;null==c||c?(AjaxReg.regtype="displayad",AjaxReg.ui.register(function(){AjaxAlert.disableDisplayAds()})):AjaxAlert.disableDisplayAds()}
function StringBuilder(c){this.strings=[""];this.append(c)}jq.extend(StringBuilder.prototype,{append:function(c){c&&this.strings.push(c);return this},clear:function(){this.strings.length=1}});StringBuilder.prototype.toString=function(){return this.strings.join("")};function r9Float(c){return c-0}function hideMeOnPopup(c){jq("div.hideMeOnPopup").css({visibility:null==c||c?"hidden":"visible"})}
function hideOnOutsideClick(c,a){c=(a?".":"#")+c;jq("body").click(function(){jq(c).hide().unbind("click");jq("body").unbind("click")});jq(c).click(function(a){a.stopPropagation()})}function setToAnchor(c,a,b,d,e){var f=jq("#"+a).offset(),g=jq("#"+c).outerWidth();a=jq("#"+a).outerWidth();var h=f.left,f=f.top;"left"==b?h-=g:"right"==b&&(h+=a);0!=d&&(f+=d);0!=e&&(h+=e);jq("#"+c).css({position:"absolute",left:h,top:f,zIndex:50})}
function gradientDialogCleanup(){function c(){jq(".dialog_top").hide().show()}c();window.setTimeout(c,2E3)}function evalScript(c){c.src?jq.ajax({url:c.src,async:!1,dataType:"script"}):jq.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function loadResults(c){showRPSpinner(R9.globals.messages.searchInProgress);jq.cookie("nus","t",{path:"/"});R9.ViewState.getInstance().reset();document.location.href=c}
function showRPSpinner(c,a){a=a||1;jq(".RPTopText").html(c);c=jq(".resbodySpinnerContainer");c.css({display:"block"});c.stop().animate({opacity:a},150)}function hideRPSpinner(){var c=jq(".resbodySpinnerContainer");c.stop().animate({opacity:0},150,function(){c.css({display:"none"})});removeCarResultsFade()}function addCarResultsFade(){jq(".carOuterResults #listbody").addClass("resultsFade")}function removeCarResultsFade(){jq(".carOuterResults #listbody").removeClass("resultsFade")}
function logTiming(c,a,b,d,e){b-=a;d-=a;a=e-a;jq.post("/s/sparkle",{searchid:c,action:"ss",rt:b,ht:d,st:a});R9&&(R9.extend("globals",{logTiming:"\x3cb\x3ePerformance metrics:\x3c/b\x3e\x3cbr /\x3eresp: "+b+"\x3cbr /\x3ehtml: "+d+"\x3cbr /\x3escript: "+a+"\x3cbr /\x3e"}),"undefined"==typeof FilterList&&displayLogTiming())}function displayLogTiming(){R9&&R9.globals&&R9.globals.logTiming&&jq("#kayak_pm_0001").html(R9.globals.logTiming)}
function deepExtend(c,a){if(!c)return a;jq.each(a,function(a,d){c[a]=deepExtend(c[a],d)});return c}function setIframeUrl(c,a){var b=R9.Common.Utils.getId();c.contentWindow?c.contentWindow.location.replace(a):jq(c).html("\x3ciframe id\x3d"+b+" onLoad\x3d\"autoResize('"+b+"');\" frameborder\x3d'0' scrolling\x3d'no' style\x3d'text-align:center;margin:0;padding:0;' src\x3d'"+a+"'\x3e\x3c/iframe\x3e")}
function autoResize(c){function a(){var d=document.getElementById(c);if(d&&d.contentWindow)var e=jq(d.contentWindow.document.body).height(),f=jq(d.contentWindow.document.body).width();d=jq(d);e&&0<e&&f&&0<f&&(d.css({height:e+"px",width:f+"px"}),d.attr("height",String(e)+"px"),d.attr("width",String(f)+"px"));0<b--&&setTimeout(a,500)}var b=3;try{a()}catch(d){}}R9.metacookie=R9.metacookie||{};R9.metacookie.saveQueue=R9.metacookie.saveQueue||[];
function saveQueuedMetaCookie(){if(0!=R9.metacookie.saveQueue.length){var c=R9.metacookie.saveQueue[0];jq.ajax({type:"POST",url:"/k/cookie",data:{action:"setmeta",metacookie:c.name,metavalue:c.value,formtoken:R9.globals.formtoken},complete:function(){R9.metacookie.saveQueue.shift();saveQueuedMetaCookie()},success:function(){c.callback()}})}}function setMetaCookie(c,a,b){R9.metacookie.saveQueue.push({name:c,value:a,callback:b||jq.noop});1==R9.metacookie.saveQueue.length&&saveQueuedMetaCookie()}
function deleteMetaCookie(c,a){"undefined"!=typeof a&&a||(a=jq.noop);jq.ajax({type:"POST",url:"/k/cookie",data:{action:"deletemeta",metacookie:c,formtoken:R9.globals.formtoken},success:a})}function attachEmailDisclaimerTooltip(){jq("#emailSpecialDealsLabel \x3e a").tipTip({delay:0,fadeOut:400})}
function initScrollbarSize(){var c=jq("\x3cp\x3e\x3c/p\x3e")[0];c.style.width="100%";c.style.height="200px";var a=jq("\x3cdiv\x3e\x3c/div\x3e")[0];a.style.position="absolute";a.style.top="0px";a.style.left="0px";a.style.visibility="hidden";a.style.width="200px";a.style.height="150px";a.style.overflow="hidden";a.appendChild(c);document.body.appendChild(a);var b=c.offsetWidth;a.style.overflow="scroll";c=c.offsetWidth;b==c&&(c=a.clientWidth);document.body.removeChild(a);window.scrollbarSize=b-c}
function getScrollbarSize(){window.scrollbarSize||initScrollbarSize();return window.scrollbarSize}function disableSelection(c){"undefined"!=typeof c.onselectstart?c.onselectstart=function(){return!1}:"undefined"!=typeof c.style.MozUserSelect?c.style.MozUserSelect="none":c.onmousedown=function(){return!1}}
function refreshGPTAds(){try{"undefined"!==typeof cygnus_index_start?cygnus_index_start():"undefined"!==typeof amznads?amznads.getAdsCallback("3131",function(){window.googletag.pubads().clearTargeting("amznslots");amznads.setTargetingForGPTAsync("amznslots");window.googletag.pubads().refresh();window.setTimeout("displayGPTCallback()",500);window.setTimeout("displayGPTCallback()",800);window.setTimeout("displayGPTCallback()",1500);window.setTimeout("displayGPTCallback()",2500)}):(window.googletag.pubads().refresh(),
window.setTimeout("displayGPTCallback()",500),window.setTimeout("displayGPTCallback()",800),window.setTimeout("displayGPTCallback()",1500),window.setTimeout("displayGPTCallback()",2500))}catch(c){}}jq.ajaxPrefilter("script",function(c){c.cache=!0});function updateRoomsAndGuests(c,a,b){for(var d in c)c.hasOwnProperty(d)&&updateSelectorTitleAndHtml("select[id\x3dguests"+d+"],select[id\x3dguests2"+d+"]",a,b);updateSelectorTitleAndHtml("select[name\x3drooms]",c,b)}
function updateSelectorButtonsTitles(c,a,b){c=jq("#guests"+c+"-status");var d=jq("#rooms-status");d.is("span")&&d.html(a);c.is("span")&&c.html(b)}function updateSelectorTitleAndHtml(c,a,b){c=void 0!=b?jq(c,b):jq(c);c.is("select")&&c.find("option").each(function(){var b=jq(this).val();(b=b?a[b]:null)&&jq(this).attr("title",b).html(b)})}
function r9scrollIntoView(c,a,b){c=c.offset();var d=jq(document).scrollTop(),e=d+jq(window).height(),f=c.top,g=!1;b=b||{};b.center&&(f-=.5*(e-d),g=4<Math.abs(c.top-f));b=function(){"function"===typeof a&&a();a=null};c.top<d||c.top>e||g?jq("html, body").animate({scrollTop:f},1E3,b):b()}
var emailDealSaveSuccess_clientSuccess=null,emailDealSaveSuccess_clientError=null,R9KayakLoginLogger,AjaxReg=function(){function c(a,b,c){w(b)}function a(){return jq("#ajaxinner button")}function b(){h();k();jq("#showAlertRegLink").attr("href","javascript:showAlertSection()");jq("#emailAlertsPopupAfterClick").hide();jq("#hiddenCarsPopupAfterClick").show();AjaxReg.alreadyRegistered=!0}function d(){location.reload(!0)}function e(){jq("#ajaxinner").parents(".r9-dialog-wrapper").remove()}function f(){a().button("disable")}
function g(){a().button("enable")}function h(){e();return!1}function l(){jq("tr.error").hide();jq("."+R9.Widgets.Tooltip.prototype.widgetBaseClass+"-wrapper").remove();jq("#ajaxloginfields").removeClass("error")}function k(){try{jq.ajax({url:"/k/headerajax?"+(new Date).getTime(),data:{redir:window.location.href,commonheader:!0},dataType:"html",success:function(a){jq("#hd:not(.gl_header #header, .branded-header, .crpmodal-header)").html(a);R9.ui.initHeader();r9CurrencyPicker.view.addMyAccountMenuHandler()},
error:function(){location.reload()},cache:!1})}catch(z){AjaxReg.showError('An unknown error has occurred. If it continues, please \x3ca href\x3d"/feedback/form"\x3esend feedback\x3c/a\x3e.');try{jq.isPlainObject(window.JSON)&&jq.post("/k/run/auth/error",{e:JSON.stringify(z)})}catch(C){}}}function p(a){a=a||{};"function"===typeof a&&(a={success:a});a.trackingData=jq.extend({},{category:"account-login",label:null},a.trackingData);return a}function n(a,b,c,d){jq.ajax({type:"POST",url:a,data:b,headers:{"X-CSRF":R9.globals.formtoken},
dataType:"json",success:c,error:d})}function q(a,b,d){e();try{jq.ajax({url:"/k/run/auth/display/"+a,data:b,dataType:"html",success:d||m,error:c,cache:!1})}catch(D){AjaxReg.showError('An unknown error has occurred. If it continues, please \x3ca href\x3d"/feedback/form"\x3esend feedback\x3c/a\x3e.');try{jq.isPlainObject(window.JSON)&&jq.post("/k/run/auth/error",{e:JSON.stringify(D)})}catch(H){}}}function r(){jq("#promoContainer").hasClass("carousel")&&(A=setInterval(t,5E3))}function t(a){var b=jq("#promoContainer"),
c=parseInt(b.find(".dot.active").attr("data-index"))+1;c>=b.find(".dot").length&&(c=0);u(c);a&&clearInterval(A)}function u(a,b){jq("#promoContainer .active").removeClass("active");jq("#promoImage_%s, #promoDot_%s".format(a,a)).addClass("active");b&&clearInterval(A)}function w(a,b,c,d){a={content:a,baseClass:"loginError",showImmediately:!0,activation:"click",position:c||"top",readContentOnOpen:!0,onClose:function(){this._removeAllWidgetBindings();this.element.removeData(this.widgetName)}};"undefined"!==
typeof b&&b||(a.position="top",a.baseClass="loginErrorNoArrow",b="#credentials");jq(b,d).tipTip(a);var e=jq(b).data().tooltip;jq("body").one("click",function(){e.close()});g()}function y(){var a=jq(window).height(),b=Math.floor((a-550)/2);10>b&&(b=10);return.12*a<b?"12%":b+"px"}function m(b,c,d){b=jq(b);var e="ui-dialog ui-widget ui-widget-content ui-corner-all ";void 0!=d&&(e=e+" "+d.dialogClass);e={spinner:!1,close:function(){jq("#emailValidatorWarnBox").r9popover("destroy").remove();jq("#fbLoginPopover").is(":visible")&&
jq("#fbLoginPopover").r9popover("close");l();clearInterval(A);"function"===typeof c&&c()},open:function(){jq("html").removeClass("zeroScrollbar").removeClass("defaultScrollbar")},viewPortClass:e,hideTitle:!0,modalOpacity:B?.18:.45,closeButtonClass:" tighter",contentClass:"",width:"270px",minWidth:"270px",top:y(),focusSelector:"input:not[tabindex\x3d-1]"};d&&jq.extend(e,d);b.attr("title","").newDialog(e).find("form").submit(f);a().button();jq("#ajaxinner input[type\x3d'checkbox']").newCheckbox();e.aftershow&&
e.aftershow(b)}function v(){l();var a=document.ajaxlogreg;jq(a).find(".highlight").removeClass("highlight");jq(a.username).val(jq.trim(a.username.value));return validateEmail(a.username.value)||-1!=a.username.value.indexOf("@runwaynine.com")?0==a.passwd.value.length?(w("Please enter a password","#loginPassword",null,a),R9.ui.isTouchDevice()||jq(a.passwd).addClass("highlight").focus(),!1):!0:(w("Please enter a valid email address.","#loginUsername",null,a),R9.ui.isTouchDevice()||jq(a.username).addClass("highlight").focus(),
!1)}var A,B=jq("html").is("._sgiua22a");return{regtype:"default",defaultAirportCode:"",alreadyRegistered:!1,confcode:"",usernamedefault:"",searchid:"",utils:{backendCall:function(a,b,c,d){n(a,b,c,d)}},showError:function(a){w(a,"#credentials")},changeSlide:function(a,b){u(a,b)},nextSlide:function(a){t(a)},previousSlide:function(a){var b=jq("#promoContainer"),c=parseInt(b.find(".dot.active").attr("data-index"))-1;0>c&&(c=b.find(".dot").length-1);u(c);a&&clearInterval(A)},startCarousel:function(){r()},
stopCarousel:function(){clearInterval(A)},facebook:{link:function(a,b,c){l();n(AjaxReg.remoteHost+"/k/run/fbauth/link",{accessToken:b||"",userId:c||""},function(b){0==b.status?(R9.extend("globals",{formtoken:b.formToken}),a?(h(),k(),AjaxReg.alreadyRegistered=!0,a()):d()):1==b.status?(FB.logout(),q("linkConflict")):-1==b.status&&w(b.message,"fbConnectButton","left")})},login:function(a,c,e,f,g,k){l();n(AjaxReg.remoteHost+"/k/run/fbauth/login",{confcode:e||"",confirm:a||0,accessToken:f||"",userId:g||
"",sticky:!0},function(a){0==a.status?(k=jq.extend({},{category:"account-login",actionLogin:"login-facebook",actionSignup:"signup-facebook",label:null},k),"signin"===a.message?R9.Analytics.api.trackEvent({category:k.category,action:k.actionLogin,label:k.label}):"signup"===a.message&&R9.Analytics.api.trackEvent({category:k.category,action:k.actionSignup,label:k.label}),R9.extend("globals",{formtoken:a.formToken}),c?(b(),c()):d()):1==a.status?"l"==a.message?q("fbLink",null,function(a){a=jq(a);a.find("#ajaxlinkwelcome a").click(function(){h();
FB.logout();AjaxReg.regtype="toprightsignin";AjaxReg.ui.login()});m(a,null,{dialogClass:"fbLinkDlg"});jq("#ajaxlinkfields").submit(AjaxReg.facebook.loginAndLink(c,f,g))}):"n"==a.message?q("fbCannotLink",null,function(a){a=jq(a);a.find("#ajaxcannotlink a").click(function(){h();FB.logout();AjaxReg.regtype="toprightsignin";AjaxReg.ui.login()});m(a,null,{dialogClass:"fbLinkDlg"})}):q("fbWelcome",null,function(a){m(a,null,{dialogClass:"fbLinkDlg"});jq("#ajaxfbwelcome a").first().click(function(){jq("#ajaxfbwelcomefields").slideDown();
jq("#ajaxfbwelcome a:first").slideUp();return!1}).end().last().click(function(){AjaxReg.facebook.login(1,c,e,f,g);return!1});jq("#ajaxfbwelcomefields").submit(AjaxReg.facebook.loginAndLink(c,f,g))}):-1==a.status&&w(a.message,"[name\x3dpasswd]")})},loginAndLink:function(a,c,e){return function(){if(v()){l();var f=jq("#ajaxinner form").serialize()+"\x26accessToken\x3d"+c+"\x26userId\x3d"+e;n("/k/run/fbauth/loginAndLinkExisting",f,function(c){0==c.status?("signin"===c.message?R9.Analytics.api.trackEvent({category:"account-login",
action:"login-facebook"}):"signup"===c.message&&R9.Analytics.api.trackEvent({category:"account-login",action:"signup-facebook"}),a?(b(),a()):d()):w(c.message,"[name\x3dpasswd]")})}return!1}},unlink:function(a){l();jq.ajax({type:"POST",url:"/k/run/fbauth/unlink",dataType:"json",headers:{"X-CSRF":R9.globals.formtoken},success:function(c){0==c.status?(R9.extend("globals",{formtoken:c.formToken}),a?(b(),AjaxReg.alreadyRegistered=!0,a()):d()):w(c.message)},error:c})}},google:{link:function(a,b){l();n(AjaxReg.remoteHost+
"/k/run/googleauth/link",{idToken:b||""},function(b){0==b.status?(R9.extend("globals",{formtoken:b.formToken}),a?(h(),k(),AjaxReg.alreadyRegistered=!0,a()):d()):1==b.status?(R9.Social.Google.postAuthCallback=function(a){gapi.auth.signOut()},R9.Social.Google.ensureAPILoaded(),q("linkConflict")):-1==b.status&&w(b.message,".googleConnectButton")})},login:function(a,c,e,f,g){l();n(AjaxReg.remoteHost+"/k/run/googleauth/login",{confcode:e||"",confirm:a||0,idToken:f||"",sticky:!0},function(a){0==a.status?
(g=jq.extend({},{category:"account-login",actionLogin:"login-google",actionSignup:"signup-google",label:null},g),"signin"===a.message?R9.Analytics.api.trackEvent({category:g.category,action:g.actionLogin,label:g.label}):"signup"===a.message&&R9.Analytics.api.trackEvent({category:g.category,action:g.actionSignup,label:g.label}),R9.extend("globals",{formtoken:a.formToken}),c?(b(),c()):d()):1==a.status?"w"==a.message&&q("googleWelcome",null,function(a){m(a,null,{dialogClass:"googleWelcomeDlg"});jq("#ajaxgooglewelcome a").first().click(function(){jq("#ajaxgooglewelcomefields").slideDown();
jq("#ajaxgooglewelcome a:first").slideUp();return!1}).end().last().click(function(){AjaxReg.google.login(1,c,e,accessToken);return!1});jq("#ajaxgooglewelcomefields").submit(AjaxReg.google.loginAndLink(c,accessToken))}):-1==a.status&&w(a.message,"#credentials")})},loginAndLink:function(a,c){return function(){if(v()){l();var e=jq("#ajaxinner form").serialize()+"\x26idToken\x3d"+c;n("/k/run/googleauth/loginAndLinkExisting",e,function(c){0==c.status?("signin"===c.message?R9.Analytics.api.trackEvent({category:"account-login",
action:"login-google"}):"signup"===c.message&&R9.Analytics.api.trackEvent({category:"account-login",action:"signup-google"}),a?(b(),a()):d()):w(c.message)})}return!1}},unlink:function(a){l();jq.ajax({type:"POST",url:"/k/run/googleauth/unlink",headers:{"X-CSRF":R9.globals.formtoken},dataType:"json",success:function(c){0==c.status?(R9.extend("globals",{formtoken:c.formToken}),a?(b(),AjaxReg.alreadyRegistered=!0,a()):d()):w(c.message)},error:c})}},ui:{fbLinkWarning:function(b,c){q("linkWarning",null,
function(d){m(d,null,{dialogClass:"fbLinkDlg"});a().click(function(){f();return R9.Social.FB.link(b,c)})})},defaultLogin:function(a){R9.Social.FB.ensureAPILoaded();R9.Social.Google.ensureAPILoaded();a=p(a);var b={width:"420px",wrapperClass:"new-dialog"};R9.config.getBoolean("ui.login.simplified.signup.V2",!1)&&jq.extend(b,{width:"456px",wrapperClass:"simplified-signup-dialog-v2 bigX keel"});"undefined"!==typeof a.promo&&(AjaxReg.regtype=a.promo,a.data=jq.extend(a.data,{promo:a.promo}));"undefined"===
typeof a.data&&(a.data={});"undefined"===typeof a.data.promoType&&(a.data.promoType="all");q("default",jq.extend({cc:AjaxReg.confcode,regtype:AjaxReg.regtype,srch:AjaxReg.searchid},a.data),function(c){m(c,a.error||a.onclose,b);R9.Analytics.api.trackEvent({category:"account-login",action:"display-dialog",label:a.data.promoType});jq("#facebookLogin").click(function(){fbOptions={success:function(b,c){AjaxReg.facebook.login(0,a.success,AjaxReg.confcode,b,c,{label:a.data.promoType})}};return R9.Social.FB.login(fbOptions)});
jq("#googleLogin").click(function(){return R9.Social.Google.login(function(b){AjaxReg.google.login(0,a.success,AjaxReg.confcode,b.id_token,{label:a.data.promoType})})});jq("#signInOrUp").find("span.sign-up").click(function(){"undefined"!==typeof a.promo&&R9.Analytics.api.trackEvent("%s/signup/show".format(a.promo),jq.noop);a.loggingData?R9.Analytics.api.trackEvent({category:a.loggingData.desc+"/signup-tab",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId}):R9.Analytics.api.trackEvent("socialsignin/kayaksignup",
{},jq.noop,!0);R9.Analytics.api.trackEvent({category:"account-login",action:"use-email-address",label:a.data.promoType});l();jq.extend(a,{setView:"signup"});AjaxReg.ui.register(a);return!1});jq("#signInOrUp").find("span.sign-in").click(function(){"undefined"!==typeof a.promo&&R9.Analytics.api.trackEvent("%s/signin/show".format(a.promo),jq.noop);R9.Analytics.api.trackEvent({category:"account-login",action:"use-email-address",label:a.data.promoType});l();jq.extend(a,{setView:"login"});AjaxReg.ui.login(a);
return!1})})},login:function(a){a&&a.forceLogInForm&&!0===a.forceLogInForm?AjaxReg.ui.loginInternal(a):R9.Social.WebCredentials.trySignIn(function(){AjaxReg.ui.loginInternal(a)})},loginInternal:function(a){if(!B||R9.config.getBoolean("ui.social.forceOff",!1)||a&&a.setView&&"login"===a.setView){R9.Social.FB.ensureAPILoaded();R9.Social.Google.ensureAPILoaded();a=p(a);R9KayakLoginLogger||(R9KayakLoginLogger=R9.Common.Utils.debounce(function(){"undefined"!==typeof a.promo&&R9.Analytics.api.trackEvent("%s/login/show".format(a.promo),
jq.noop);R9.Analytics.api.trackEvent("topstrip/kayaklogin",{},jq.noop,!0)},200));R9KayakLoginLogger();var c=jq("input[name\x3dusername]"),c=c.val()&&c.val()!=c.attr("placeholder")?c.val():null,c=a.loginuname||a.username||c||AjaxReg.usernamedefault,e=jq("input[name\x3dpasswd]").val()||"",f={dialogClass:"loginDlg",width:a.dialogWidth||"335px"};a.aftershow&&"function"===typeof a.aftershow&&jq.extend(f,{aftershow:a.aftershow});jq("html").is("._2h7iph0d")&&jq.extend(f,{width:"820px",wrapperClass:"promoDialog bigX"});
jq("html").is("._sgiua22a")&&jq.extend(f,{width:"420px",wrapperClass:"new-dialog"});R9.config.getBoolean("ui.login.simplified.signup.V2",!1)?jq.extend(f,{width:"456px",wrapperClass:"simplified-signup-dialog-v2 bigX keel"}):jq("html").is("._vxurxaqb")&&jq.extend(f,{width:"420px",wrapperClass:"simplified-signup-dialog bigX"});"undefined"!==typeof a.promo&&(AjaxReg.regtype=a.promo,a.data=jq.extend(a.data,{promo:a.promo}));"undefined"!==typeof a.promoType&&(AjaxReg.regtype=a.promoType,a.data=jq.extend(a.data,
{promoType:a.promoType}));a.redirecturl&&(a.success=function(){window.location=a.redirecturl});a.preventCloseExceptButton&&(f.closeOnModalClick=!1,f.closeOnEscape=!1);a.preventClose&&(f.closeOnModalClick=!1,f.closeOnEscape=!1,f.closeButtonClass="hidden");q("login",jq.extend({cc:AjaxReg.confcode,regtype:AjaxReg.regtype,srch:AjaxReg.searchid,un:c},a.data),function(c){m(c,a.error||a.onclose,f);r();jq(".thirdPartyConnectButton.fbConnectButton").click(function(){if(!jq(this).hasClass("disabled"))return fbOptions=
{success:function(b,c){AjaxReg.facebook.login(0,a.success,AjaxReg.confcode,b,c)}},R9.Social.FB.login(fbOptions)});jq(".thirdPartyConnectButton.googleConnectButton").click(function(){if(!jq(this).hasClass("disabled"))return R9.Social.Google.login(function(b){AjaxReg.google.login(0,a.success,AjaxReg.confcode,b.id_token)})});jq("a.signUpLink, .signUpLink a.actionlink").click(function(){"undefined"!==typeof a.promo&&R9.Analytics.api.trackEvent("%s/signup/show".format(a.promo),jq.noop);a.loggingData?R9.Analytics.api.trackEvent({category:a.loggingData.desc+
"/signup-tab",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId}):R9.Analytics.api.trackEvent("topstrip/kayaksignup",{},jq.noop,!0);l();AjaxReg.ui.register(a);return!1});jq(".forgotpassword").click(function(a){R9.Analytics.api.trackEvent({category:"forgot-password",action:"reset-password"});R9.config.getBoolean("ui.login.forgotPassword.dialog.enabled",!1)&&(a.preventDefault(),AjaxReg.ui.toggleForgotForm(!0))});B&&(jq("#cancelButton").click(function(){l();AjaxReg.ui.defaultLogin(a);return!1}),
jq("#signUpLink").find("span.signup").click(function(){l();jq.extend(a,{setView:"signup"});AjaxReg.ui.register(a);return!1}),jq("#forgot").find("span.pword").click(function(a){R9.Analytics.api.trackEvent({category:"forgot-password",action:"reset-password"});R9.config.getBoolean("ui.login.forgotPassword.dialog.enabled",!1)&&(a.preventDefault(),AjaxReg.ui.toggleForgotForm(!0))}));var k=jq("#ajaxloginfields");jq("input[name\x3dpasswd]",k).val(e);k.submit(function(){var c=jq("#loginUsername").val();"undefined"!==
typeof a.promo&&R9.Analytics.api.trackEvent("%s/login/login".format(a.promo),jq.noop);a.loggingData?R9.Analytics.api.trackEvent({category:a.loggingData.desc+"/login",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId}):R9.Analytics.api.trackEvent("topstrip/kayaklogin/login",{},jq.noop,!0);R9.Analytics.api.trackEvent({category:a.trackingData.category,action:"login-email",label:a.trackingData.label});v()&&(l(),n("/k/run/auth/login",jq(this).serialize(),function(e){0==e.status?R9.Tracking.GoogleTagManager.loginEvent(c).always(function(){R9.extend("globals",
{formtoken:e.formToken});if(a.success){AjaxReg.alreadyRegistered=!0;a.success();b();var c=document.ajaxlogreg;c&&R9.Social.WebCredentials.tryStorePasswordLoginInWebCredentials(c.username,c.passwd)}else jq("input[name\x3dusername]",c).focus(),h(),d()}):w(e.message,"#credentials",null,k)}));return!1});R9.ui.isTouchDevice()||jq("input",k).focus(g);jq("input[name\x3dusername]",k).val()&&!R9.ui.isTouchDevice()?jq("input[name\x3dpasswd]",k).focus():R9.ui.isTouchDevice()||jq("input[name\x3dusername]",k).focus();
jq("input",k).placeholder();R9.config.getBoolean("ui.login.forgotPassword.dialog.enabled",!1)&&(AjaxReg.ui.forgotPassword({trackingData:{label:"forgot_password_submit"}}),AjaxReg.ui.toggleForgotForm(!1))})}else AjaxReg.ui.defaultLogin(a)},sociallogin:function(a){R9.Social.WebCredentials.trySignIn(function(){AjaxReg.ui.socialloginInternal(a)})},socialloginInternal:function(a){if(B)AjaxReg.ui.defaultLogin(a);else{R9.Social.FB.ensureAPILoaded();R9.Social.Google.ensureAPILoaded();a=p(a);var b={width:"490px",
top:"90px",wrapperClass:"bigX"};q("sociallogin",jq.extend({cc:AjaxReg.confcode,regtype:AjaxReg.regtype,srch:AjaxReg.searchid},a.data),function(c){m(c,a.error||a.onclose,b);jq("#facebookLogin").click(function(){fbOptions={success:function(b,c){AjaxReg.facebook.login(0,a.success,AjaxReg.confcode,b,c)}};return R9.Social.FB.login(fbOptions)});jq("#googleLogin").click(function(){return R9.Social.Google.login(function(b){AjaxReg.google.login(0,a.success,AjaxReg.confcode,b.id_token)})});jq("#emailSignUp").click(function(){"undefined"!==
typeof a.promo&&R9.Analytics.api.trackEvent("%s/signup/show".format(a.promo),jq.noop);a.loggingData?R9.Analytics.api.trackEvent({category:a.loggingData.desc+"/signup-tab",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId}):R9.Analytics.api.trackEvent("socialsignin/kayaksignup",{},jq.noop,!0);l();AjaxReg.ui.register(a);return!1});jq("#emailSignIn").click(function(){"undefined"!==typeof a.promo&&R9.Analytics.api.trackEvent("%s/signin/show".format(a.promo),jq.noop);R9.Analytics.api.trackEvent("socialsignin/kayaksignin",
{},jq.noop,!0);l();AjaxReg.ui.login(a);return!1})})}},register:function(a){if(!B||R9.config.getBoolean("ui.social.forceOff",!1)||a&&a.setView&&"signup"===a.setView){R9.Social.FB.ensureAPILoaded();R9.Social.Google.ensureAPILoaded();a=p(a);var c=jq("input[name\x3dusername]"),c=c.val()&&c.val()!=c.attr("placeholder")?c.val():null,c=a.reguname||a.username||c||AjaxReg.usernamedefault,f=jq("input[name\x3dpasswd]").val()||"",h={dialogClass:"loginDlg",width:a.dialogWidth||"640px"};jq("html").is("._2h7iph0d")&&
jq.extend(h,{width:"820px",wrapperClass:"promoDialog bigX"});jq("html").is("._sgiua22a")&&jq.extend(h,{width:"420px",wrapperClass:"new-dialog"});R9.config.getBoolean("ui.login.simplified.signup.V2",!1)?jq.extend(h,{width:"456px",wrapperClass:"simplified-signup-dialog-v2 bigX keel"}):jq("html").is("._vxurxaqb")&&jq.extend(h,{width:"420px",wrapperClass:"simplified-signup-dialog bigX"});a.aftershow&&"function"===typeof a.aftershow&&jq.extend(h,{aftershow:a.aftershow});a.preventCloseExceptButton&&(h.closeOnModalClick=
!1,h.closeOnEscape=!1);a.preventClose&&(h.closeOnModalClick=!1,h.closeOnEscape=!1,h.closeButtonClass="hidden");"undefined"!==typeof a.promo&&(a.data=jq.extend(a.data,{promo:a.promo}),AjaxReg.regtype=a.promo);a.redirecturl&&(a.success=function(){window.location=a.redirecturl});q("reg",jq.extend({regtype:AjaxReg.regtype,dac:AjaxReg.defaultAirportCode,cc:AjaxReg.confcode,un:c,srch:AjaxReg.searchid},a.data),function(c){m(c,a.error||a.onclose,h);r();"forcedsignup"!=a.promo&&"promotedsignupv2"!=a.promo||
R9.Analytics.api.trackEvent(a.promo+"/impression",jq.noop);var k=jq("#ajaxregisterfields");jq(".thirdPartyConnectButton.fbConnectButton").click(function(){return R9.Social.FB.login({success:function(b,c){"forcedsignup"!=a.promo&&"promotedsignupv2"!=a.promo||R9.Analytics.api.trackEvent(a.promo+"/facebook",jq.noop);a.loggingData&&R9.Analytics.api.trackEvent({category:a.loggingData.desc+"/facebook",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId});AjaxReg.facebook.login(0,a.success,AjaxReg.confcode,
b,c)}})});jq(".thirdPartyConnectButton.googleConnectButton").click(function(){return R9.Social.Google.login(function(b){"forcedsignup"!=a.promo&&"promotedsignupv2"!=a.promo||R9.Analytics.api.trackEvent(a.promo+"/google",jq.noop);a.loggingData&&R9.Analytics.api.trackEvent({category:a.loggingData.desc+"/google",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId});AjaxReg.google.login(0,a.success,AjaxReg.confcode,b.id_token)})});B&&(jq("#cancelButton").click(function(){l();AjaxReg.ui.defaultLogin(a);
return!1}),jq("#signInLink").find("span.signin").click(function(){l();jq.extend(a,{setView:"login"});AjaxReg.ui.login(a);return!1}));jq("#ajaxoptin").click(function(){R9.Analytics.api.trackEvent("topstrip/lastminutedeals/"+jq(this).is(":checked"),{},jq.noop,!0);R9.Analytics.api.trackEvent({category:"account-login",action:jq(this).is(":checked")?"email-opt-in":"email-opt-out"})});jq("input[name\x3dpasswd]",k).textInput().val(f);a.confirmed&&jq("input[name\x3dconfirmed]").val("true");k.submit(function(){"undefined"!==
typeof a.promo&&R9.Analytics.api.trackEvent("%s/signup/signup".format(a.promo),jq.noop);"forcedsignup"!=a.promo&&"promotedsignupv2"!=a.promo||R9.Analytics.api.trackEvent(a.promo+"/kayak",jq.noop);a.loggingData?R9.Analytics.api.trackEvent({category:a.loggingData.desc+"/register",pageId:a.loggingData.pageId,subPageId:a.loggingData.subPageId}):R9.Analytics.api.trackEvent("topstrip/kayaksignup/signup",{},jq.noop,!0);R9.Analytics.api.trackEvent({category:a.trackingData.category,action:"signup-email",label:a.trackingData.label});
k.find(".highlight").removeClass("highlight");k.find('input[name\x3d"username"').val(jq.trim(this.username.value));if(!validateEmail(this.username.value))return w("Please enter a valid email address.","#regUsername",null,k),R9.ui.isTouchDevice()||jq(this.username).addClass("highlight").focus(),g(),!1;if(0==this.passwd.value.length)return w("Please enter a password","#regPassword",null,k),R9.ui.isTouchDevice()||jq(this.passwd).addClass("highlight").focus(),g(),!1;if(this.airport&&0==this.airport.value.length)return w("Please enter a home airport.",
"#regAirport",null,k),R9.ui.isTouchDevice()||jq(this.airport).addClass("highlight").focus(),g(),!1;if(this.consent&&!this.consent.checked)return w("Please confirm that you have read and accepted our Terms \x26 Conditions","#ajaxconsent-icon",null,k),jq(this.consent).parent().addClass("highlight"),R9.ui.isTouchDevice()||this.consent.focus(),g(),!1;l();n("/k/run/auth/register",jq(this).serialize(),function(c){0==c.status?R9.Tracking.GoogleTagManager.signupEvent().always(function(){R9.extend("globals",
{formtoken:c.formToken});a.success?(AjaxReg.alreadyRegistered=!0,a.success(),b()):d()}):(jq("#regUsername, #regPassword, #regAirport").addClass("highlight"),w(c.message,null,null,k))});R9.ui.isTouchDevice()||jq("input[name\x3dusername]",k).focus();return!1});jq("input[name\x3dairport]",k).r9AirportsSmarty({clearItem:function(a){jq("input[name\x3dairportcode]",k).val("")},dropdownClass:"registrationAirportSmarty",setItem:function(a,b,c){setTimeout(function(){jq("input[name\x3dairportcode]",k).val(b.id);
a.elementNode.value=b.str},1)},minWidth:175});jq("#ajaxinner").on("click","a.loginLink, .loginLink a.actionlink",function(){l();"forcedsignup"!=a.promo&&"promotedsignupv2"!=a.promo||R9.Analytics.api.trackEvent(a.promo+"/login",jq.noop);AjaxReg.ui.login(a);return!1});jq("input[name\x3dusername]",k).val()&&!R9.ui.isTouchDevice()?jq("input[name\x3dpasswd]",k).focus():R9.ui.isTouchDevice()||jq("input[name\x3dusername]",k).focus();if("forcedsignup"==a.promo||"promotedsignupv2"==a.promo)jq(".r9-dialog-closeButton.r9-icon-x").on("click",
function(){R9.Analytics.api.trackEvent(a.promo+"/exit-button",jq.noop)}),jq(".r9-no-thanks").on("click",function(){R9.Analytics.api.trackEvent(a.promo+"/exit-no-thanks",jq.noop);e()});"priceAlert"==a.promo&&(jq(".r9-dialog-closeButton.r9-icon-x").on("click",function(){R9.Analytics.api.trackEvent("signup/pricealert/exitbutton",jq.noop)}),jq(".promoDialog .r9-dialog-modalBackground").on("click",function(){R9.Analytics.api.trackEvent("signup/pricealert/closedialog",jq.noop)}));jq("input",k).placeholder()})}else AjaxReg.ui.defaultLogin(a)},
requireMediationAndRedirect:function(){R9.Social.WebCredentials.requireUserMediation();document.location="/k/ident/signout?redir\x3d"+encodeURIComponent(window.location.pathname)},forgotPassword:function(a){R9.Analytics.api.trackEvent({category:"forgot-password",action:"reset-password",label:a.trackingData.label});var b=jq("#forgot-container"),c=jq("#ajaxforgotfields"),d=jq("#forgotUsername");a=jq("#cancel-link",b);b=jq(".loginLink",b);c.submit(function(a){a.preventDefault();c.find(".highlight").removeClass("highlight");
a=jq.trim(d.val());d.val(a);if(!validateEmail(a))return w("Please enter a valid email address.","#forgotUsername",null,c),R9.ui.isTouchDevice()||d.addClass("highlight").focus(),g(),!1;n("/k/run/auth/forgot",{username:a},function(a){AjaxReg.ui.toggleForgotSuccess(!0,a)});R9.ui.isTouchDevice()||jq("input[name\x3dforgotemail]",c).focus();return!1});a.click(AjaxReg.ui.toggleForgotSuccess.bind(this,!1));b.click(AjaxReg.ui.toggleForgotForm.bind(this,!1))},toggleForgotForm:function(a){var b=jq("#forgot-container"),
c=jq("#loginSimpleForm, #loginSimpleFormV2");b.toggleClass("hidden",!a);c.toggleClass("hidden",a);jq("#forgot-container");jq("#success-message",b).addClass("hidden");jq("#forgot-form",b).removeClass("hidden");a?jq("#forgotUsername",b).focus():jq("#loginUsername").focus();g()},toggleForgotSuccess:function(a){var b=jq("#forgot-container");g();jq("#success-message",b).toggleClass("hidden",!a);jq("#forgot-form",b).toggleClass("hidden",a);a&&(a=jq("#forgotUsername",b).val(),jq("#loginUsername").val(a),
jq("#success-message").find(".loginLink").focus())},logout:function(a){l();jq.ajax({type:"POST",url:"/k/run/fbauth/logout",dataType:"json",success:function(b){0==b.status?(R9.extend("globals",{formtoken:b.formToken}),h(),k(),AjaxReg.alreadyRegistered=!1,a?a():d()):w(b.message)},error:c})},bindInlineRegistrationForm:function(a,c){R9.Social.FB.ensureAPILoaded();R9.Social.Google.ensureAPILoaded();jq("#sw_reg_form button").button();jq("#sw_reg_form input[type\x3d'checkbox']").newCheckbox();jq(".thirdPartyConnectButton.fbConnectButton",
a).click(function(){return R9.Social.FB.login({success:function(a,b){AjaxReg.facebook.login(0,c.success,AjaxReg.confcode,a,b)}})});jq(".thirdPartyConnectButton.googleConnectButton",a).click(function(){return R9.Social.Google.login(function(a){AjaxReg.google.login(0,c.success,AjaxReg.confcode,a.id_token)})});jq("input[name\x3dusername]",a).textInput().emailValidator();var e=jq("input[name\x3dpasswd]").val()||"";jq("input[name\x3dpasswd]",a).textInput().val(e);a.submit(function(){a.find(".highlight").removeClass("highlight");
a.find('input[name\x3d"username"').val(jq.trim(this.username.value));if(!validateEmail(this.username.value))return w("Please enter a valid email address.","#regUsername",null,a),R9.ui.isTouchDevice()||jq(this.username).addClass("highlight").focus(),g(),!1;if(0==this.passwd.value.length)return w("Please enter a password","#regPassword",null,a),R9.ui.isTouchDevice()||jq(this.passwd).addClass("highlight").focus(),g(),!1;if(0==this.airport.value.length)return w("Please enter a home airport.","#regAirport",
null,a),R9.ui.isTouchDevice()||jq(this.airport).addClass("highlight").focus(),g(),!1;if(this.consent&&!this.consent.checked)return w("Please confirm that you have read and accepted our Terms \x26 Conditions",null,null,a),jq(this.consent).parent().addClass("highlight"),R9.ui.isTouchDevice()||this.consent.focus(),g(),!1;l();n("/k/run/auth/register",jq(this).serialize(),function(a){0==a.status?(R9.extend("globals",{formtoken:a.formToken}),c.success?(AjaxReg.alreadyRegistered=!0,c.success(),b()):d()):
(jq("#regUsername, #regPassword, #regAirport").addClass("highlight"),w(a.message))});R9.ui.isTouchDevice()||jq("input[name\x3dusername]",a).focus();return!1});jq("input[name\x3dairport]",a).r9AirportsSmarty({clearItem:function(b){jq("input[name\x3dairportcode]",a).val("")},dropdownClass:"registrationAirportSmarty",setItem:function(b,c,d){setTimeout(function(){jq("input[name\x3dairportcode]",a).val(c.id);b.elementNode.value=c.str},1)},minWidth:175});jq("#ajaxinner").on("click","a.loginLink, .loginLink a.actionlink",
function(){l();AjaxReg.ui.login(c);return!1});jq("input",a).placeholder()}}}}(),AjaxAlert={_ajaxError:function(c,a,b){alert(a)},_doPost:function(c,a,b){jq("tr.error").hide();jq.ajax({type:"POST",headers:{"X-CSRF":R9.globals.formtoken},url:c,data:a,success:b,dataType:"script",error:this._ajaxError})},_getDriveByData:function(){return jq("#ajaxalert").serialize()},showEmailAlertError:function(c){jq("#ajaxalerterror").show();jq("#ajaxalerterror").html(c)},showDuplicateEmailAlertError:function(c,a){"function"==
typeof showPriceAlertSaved&&showPriceAlertSaved(c,a)},emailAlertSaveSuccess:function(c){"function"==typeof showPriceAlertSaved&&showPriceAlertSaved(c)},saveEmailAlert:function(){this._doPost("/k/alertajax","action\x3dsave\x26"+jq("#alertUpsellContent input").serialize())},saveHotelAlert:function(){this._doPost("/alerts/hrp/save",jq("#hotelalert").serialize())},hotelAlertSaveSuccess:function(c){"function"==typeof showAlertSaved&&showAlertSaved(c)},showHotelAlertError:function(c){"function"==typeof showAlertError&&
showAlertError(c)},showDriveByAlertDialog:function(c,a,b,d){var e="driveby",f=jq.noop;"object"===typeof d&&(e=d.alternateAction,f=d.afterUserAction);a||(a="driveby");b||(b=!1);jq.ajax({type:"POST",url:"/s/toolbox",data:{action:e,searchid:c,alertsrc:a,noforcelogin:b},dataType:"html",success:function(a){if(a&&a.length){var b="ui-dialog ui-widget ui-widget-content ui-corner-all driveByDialog"+(R9.config.getBoolean("ui.newdriveby",!1)?" newdriveByDialog":"");jq(a).newDialog({spinner:!1,close:function(){R9.Analytics.api.trackEvent("pricealert/driveby/close");
toggleFaderPane(!1);f()},open:function(){jq("html").removeClass("zeroScrollbar").removeClass("defaultScrollbar");R9.Analytics.api.trackEvent({category:"Drive-By",action:"show"})},width:371,isFixed:!0,modalOpacity:.45,viewPortClass:b})}else f()},error:this._ajaxError,cache:!1})},saveCompletedAjaxReg:function(c,a,b,d,e,f){var g=jq("#driveBySuccessMessage").clone(),h="boolean"===typeof f?!f:!0;jq("button",g).click(function(){g.data("dialog").close()});e||(e=!1);jq.ajax({type:"POST",url:"/k/run/drivebyalert/createflightpricealert",
headers:{"X-CSRF":R9.globals.formtoken},data:{searchid:c,email:a,optin:b,regurl:d,noforcelogin:e},success:function(b){b&&b.success?(h&&g.show().newDialog(),R9.Analytics.api.trackEvent({category:"Drive-By",action:"signup"})):b&&!b.success&&b.existingUser&&AjaxAlert.saveAlertAjaxReg(c,a,!0)},error:this._ajaxError,cache:!1})},saveAlertAjaxReg:function(c,a,b){var d=this._getDriveByData();if(AjaxReg.alreadyRegistered)AjaxAlert.saveDriveByEmailAlert(d);else{var e=jq("#ajaxalert"),f=e.find("input:hidden[name\x3dalertsrc]").val();
AjaxReg.regtype=f;AjaxReg.searchid=c;a&&(AjaxReg.usernamedefault=a);AjaxReg.ui[b?"login":"register"]({promoType:"alerts",success:function(){AjaxAlert.saveDriveByEmailAlert(d)},data:{alertsrc:f,hid:e.find("input:hidden[name\x3dhid]").val()}})}},saveDriveByEmailAlert:function(c){this._doPost("/k/alertajax","action\x3dsave\x26"+(c||jq("#ajaxalert").serialize()))},disableDisplayAds:function(){jq.ajax({type:"GET",url:"/s/sparkle",data:"action\x3dhidedisplayads\x26formtoken\x3d"+R9.globals.formtoken+"\x26"+
jq("#ajaxalert").serialize(),dataType:"text",success:function(){jq("#displayAd1, #displayAd2, #displayAd3, #displayAd4, .hidedisplayad").hide("slow",function(){window.R9&&R9.RP&&R9.RP.FloatingAd&&R9.RP.FloatingAd.refresh()})},error:this._ajaxError,cache:!1})},openCorpPage:function(c){var a=function(){window.open("terms"===c?"/help/terms.html":"/help/privacy.html","_blank")};c&&jq.ajax({type:"GET",url:"/s/horizon/corporate/pages/formatPageLinks",success:function(b){b&&b.POLICY&&b.TERMS?window.open("terms"===
c?b.TERMS:b.POLICY,"_blank"):a()},error:function(b,c,e){a()}})}};
0<jq("html._habkdn13").length&&(AjaxAlert.dontRemoveDriveByAlert=!1,AjaxAlert.loadCompleted=!1,AjaxAlert.onDriveByAlertCreation=function(c){jq("html").removeClass("zeroScrollbar").removeClass("defaultScrollbar");var a=c.element.find("#featuresandsignupdialogform"),b=a.find("#useraddress");c.element.parent().click(function(){AjaxAlert.dontRemoveDriveByAlert=!0});a.submit(function(d){d.preventDefault();d=b.val();var e=a.find("#r9username").val();AjaxAlert.saveAlertAjaxReg(searchid,d,d==e);c.close()});
AjaxAlert.onProgressBarIsSet=function(){var a=c.element.find(".separator .orange");R9PBar.addCallback(function(b){a.width((AjaxAlert.loadCompleted?"100":b)+"%")})};if(R9PBar)AjaxAlert.onProgressBarIsSet()},AjaxAlert.showDriveByAlertDialog=function(c){jq.ajax({type:"POST",url:"/s/toolbox",data:{action:"driveby",searchid:c,alertsrc:"driveby"},dataType:"html",success:function(a){var b="ui-dialog ui-widget ui-widget-content ui-corner-all driveByDialog"+(R9.config.getBoolean("ui.newdriveby",!1)?" newdriveByDialog":
"");jq(a).newDialog({spinner:!1,closeButtonClass:"r9-dialog-closeNoBorder",width:350,opened:function(){AjaxAlert.onDriveByAlertCreation(this)},isFixed:!0,modalOpacity:.45,viewPortClass:b,top:"25%",minHeight:"100px"})},error:this._ajaxError,cache:!1})},AjaxAlert.saveDriveByEmailAlert=function(c){this._doPost("/k/alertajax","action\x3dsave\x26"+(c||jq("#ajaxalert").serialize()))},AjaxAlert.closeDriveByEmailAlertIfNoInteraction=function(){if(!this.dontRemoveDriveByAlert){var c=jq("#featuresandsignupdialog").data("dialog");
c&&c.close()}AjaxAlert.loadCompleted=!0});function showAlertRegRedirect(c){R9.globals.isLoggedIn?window.location="/alerts":(AjaxReg.regtype="alert",AjaxReg.ui.register({onclose:function(){},success:function(){R9.globals.isLoggedIn=!0;window.location="/alerts"}}))}
jq(function(){if(R9.globals.showForcedSignup){var c=window.location.href;0<=c.lastIndexOf("/forgot-password")||0<=c.lastIndexOf("/account")||(R9.config.getBoolean("ui.multilocale.mandatorysignup.enabled",!1)?AjaxReg.ui.login({promo:"multilocale",preventClose:!0,forceLogInForm:!0}):-1==c.lastIndexOf("/maps/hotelnew")&&-1===c.lastIndexOf("/hotellisting")&&-1==c.lastIndexOf("/reset/")&&setMetaCookie("forced-signup-shown","true",function(){R9.config.getBoolean("ui.forcedsignup.enabled",!1)?AjaxReg.ui.register({promo:"promotedsignupv2"}):
AjaxReg.ui.register({promo:"forcedsignup",preventCloseExceptButton:!0})}))}});
function formatDate(c){if(6>c.length||10<c.length)return!1;if(0<=c.indexOf("/")){var a=c.split("/");if(3!=a.length||0==a[0].length||0==a[1].length||0==a[2].length)return!1;c=parseInt(a[1],10);var b=parseInt(a[0],10),a=parseInt(a[2],10)}else if(0<=c.indexOf("-")){a=c.split("-");if(3!=a.length||0==a[0].length||0==a[1].length||0==a[2].length)return!1;c=parseInt(a[2],10);b=parseInt(a[1],10);a=parseInt(a[0],10)}else if(0<=c.indexOf(".")){a=c.split(".");if(3!=a.length||0==a[0].length||0==a[1].length||0==
a[2].length)return!1;c=parseInt(a[0],10);b=parseInt(a[1],10);a=parseInt(a[2],10)}else return!1;100>a&&(a=30>a?a+2E3:a+1900);if(!isValidDate(a,b,c))return!1;var d="";10>b&&(d+="0");d+=b+"/";10>c&&(d+="0");return d+(c+"/")+a}function isValidDate(c,a,b){if(1970<=c){var d=new Date(c,a-1,b);if(b!=d.getDate()||a!=d.getMonth()+1||c!=d.getFullYear())return!1}else if(1>b||31<b||1>a||12<a||1E3>c||3E3<c)return!1;return 28<b&&getNumberOfDays(c,a)<b?!1:!0}
function getNumberOfDays(c,a){switch(a){case 2:return isLeapYear(c)?29:28;case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;default:return 30}}function isLeapYear(c){return 0==c%4&&0!=c%100||0==c%400}
function validDate(c){if(0==c.value.length)return!0;if(!formatDate(c.value))return alert("Please enter a valid date. (MM/DD/YYYY format)"),c.focus(),c.select(),!1;var a=formatDate(c.value);if(isNaN(Date.parse(a)))return alert("Please enter a valid date. (MM/DD/YYYY format)"),c.focus(),c.select(),!1;c.value=a;return!0}function parseDate(c){var a=c.split("/");c=parseInt(zeroUnpad(a[0]));var b=parseInt(zeroUnpad(a[1])),a=parseInt(zeroUnpad(a[2]));return new Date(a,c-1,b)}
function zeroPad(c){return 1==c.length?"0"+c:c}function zeroUnpad(c){c=""+c;return c.match(/^0/)?c.substring(1):c}function addDays(c,a){c.setDate(c.getDate()+a);a=c.getMonth()+1;var b=c.getDate();c=c.getYear();1900>c&&(c+=1900);return zeroPad(a)+"/"+zeroPad(b)+"/"+c}
function countDays(c,a){c.setUTCMilliseconds(0);c.setUTCSeconds(0);c.setUTCMinutes(0);c.setUTCHours(12);a.setUTCMilliseconds(0);a.setUTCSeconds(0);a.setUTCMinutes(0);a.setUTCHours(13);c=a.getTime()-c.getTime();return Math.floor(c/864E5)}function existsInArray(c,a){for(var b=0;b<c.length;b++)if(c[b]==a)return!0;return!1}
Date.prototype.formatDate=function(c,a){function b(){return u[m.getDay()]}function d(){return m.getHours()}function e(){return 1==(new String(m.getHours())).length?"0"+m.getHours():m.getHours()}function f(){return 1==(new String(m.getMinutes())).length?"0"+m.getMinutes():m.getMinutes()}function g(){return m.getDate()}function h(){var a=q();return 0==a%4&&0!=a%100||0==a%4&&0==a%100&&0==a%400?1:0}function l(){return w[m.getMonth()]}function k(){return m.getMonth()+1}function p(){var a=Math.abs(m.getTimezoneOffset()),
b=""+Math.floor(a/60),a=""+a%60;1==b.length&&(b="0"+b);1==a.length&&(a="0"+a);return 0>m.getTimezoneOffset()?"+"+b+a:"-"+b+a}function n(){return 1==(new String(m.getSeconds())).length?"0"+m.getSeconds():m.getSeconds()}function q(){if(m.getFullYear){var a=(new Date("January 1 2001 00:00:00 +0000")).getFullYear();if(2001==a)return m.getFullYear()}a=m.getYear();a%=100;return a+(38>a?2E3:1900)}var r={a:function(){return 11<m.getHours()?"pm":"am"},A:function(){return 11<m.getHours()?"PM":"AM"},B:function(){var a=
60*(m.getTimezoneOffset()+60),a=3600*m.getHours()+60*m.getMinutes()+m.getSeconds()+a,a=Math.floor(a/86.4);1E3<a&&(a-=1E3);0>a&&(a+=1E3);1==(""+a).length&&(a="00"+a);2==(""+a).length&&(a="0"+a);return a},d:function(){return 1==(new String(m.getDate())).length?"0"+m.getDate():m.getDate()},D:b,F:function(){return y[m.getMonth()]},g:function(){return 12<m.getHours()?m.getHours()-12:m.getHours()},G:d,h:function(){if(12<m.getHours()){var a=new String(m.getHours()-12);return 1==a.length?"0"+(m.getHours()-
12):m.getHours()-12}a=new String(m.getHours());return 1==a.length?"0"+m.getHours():m.getHours()},H:e,i:f,j:g,l:function(){return t[m.getDay()]},L:h,m:function(){return 9>m.getMonth()?"0"+(m.getMonth()+1):m.getMonth()+1},M:l,n:k,O:p,r:function(){return b()+", "+g()+" "+l()+" "+q()+" "+e()+":"+f()+":"+n()+" "+p()},s:n,t:function(){return 1==h()&&2==k()?29:[null,31,28,31,30,31,30,31,31,30,31,30,31][k()]},T:function(){return d()+":"+f()},U:function(){return Math.round(m.getTime()/1E3)},w:function(){return m.getDay()},
y:function(){var a=q()+"";return a.substring(a.length-2,a.length)},Y:q,z:function(){var a=new Date("January 1 "+q()+" 00:00:00"),a=m.getTime()-a.getTime();return Math.floor(a/1E3/60/60/24)}},t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),u="Sun Mon Tue Wed Thu Fri Sat".split(" "),w="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),y="January February March April May June July August September October November December".split(" "),m=this;if(a){var v=m.getTime();
m.setTime(a)}c=c.split("");for(a=0;c[a];)"\\"==c[a]?c.splice(a,1):r[c[a]]&&(c[a]=r[c[a]].call()),a++;v&&m.setTime(v);return c.join("")};
Date.prototype.formatUTCDate=function(c,a){function b(){return u[m.getUTCDay()]}function d(){return m.getUTCHours()}function e(){return 1==(new String(m.getUTCHours())).length?"0"+m.getUTCHours():m.getUTCHours()}function f(){return 1==(new String(m.getUTCMinutes())).length?"0"+m.getUTCMinutes():m.getUTCMinutes()}function g(){return m.getUTCDate()}function h(){var a=q();return 0==a%4&&0!=a%100||0==a%4&&0==a%100&&0==a%400?1:0}function l(){return w[m.getUTCMonth()]}function k(){return m.getUTCMonth()+
1}function p(){var a=Math.abs(m.getTimezoneOffset()),b=""+Math.floor(a/60),a=""+a%60;1==b.length&&(b="0"+b);1==a.length&&(a="0"+a);return 0>m.getTimezoneOffset()?"+"+b+a:"-"+b+a}function n(){return 1==(new String(m.getUTCSeconds())).length?"0"+m.getUTCSeconds():m.getUTCSeconds()}function q(){if(m.getUTCFullYear){var a=(new Date("January 1 2001 00:00:00 +0000")).getUTCFullYear();if(2001==a)return m.getUTCFullYear()}a=m.getUTCYear();a%=100;return a+(38>a?2E3:1900)}var r={a:function(){return 11<m.getUTCHours()?
"pm":"am"},A:function(){return 11<m.getUTCHours()?"PM":"AM"},B:function(){var a=60*(m.getTimezoneOffset()+60),a=3600*m.getHours()+60*m.getMinutes()+m.getSeconds()+a,a=Math.floor(a/86.4);1E3<a&&(a-=1E3);0>a&&(a+=1E3);1==(""+a).length&&(a="00"+a);2==(""+a).length&&(a="0"+a);return a},d:function(){return 1==(new String(m.getDate())).length?"0"+m.getDate():m.getUTCDate()},D:b,F:function(){return y[m.getUTCMonth()]},g:function(){return 12<m.getUTCHours()?m.getUTCHours()-12:m.getUTCHours()},G:d,h:function(){if(12<
m.getUTCHours()){var a=new String(m.getUTCHours()-12);return 1==a.length?"0"+(m.getUTCHours()-12):m.getUTCHours()-12}a=new String(m.getUTCHours());return 1==a.length?"0"+m.getUTCHours():m.getUTCHours()},H:e,i:f,j:g,l:function(){return t[m.getUTCDay()]},L:h,m:function(){return 9>m.getUTCMonth()?"0"+(m.getUTCMonth()+1):m.getUTCMonth()+1},M:l,n:k,O:p,r:function(){return b()+", "+g()+" "+l()+" "+q()+" "+e()+":"+f()+":"+n()+" "+p()},s:n,t:function(){return 1==h()&&2==k()?29:[null,31,28,31,30,31,30,31,
31,30,31,30,31][k()]},T:function(){return d()+":"+f()},U:function(){return Math.round(m.getTime()/1E3)},w:function(){return m.getUTCDay()},y:function(){var a=q()+"";return a.substring(a.length-2,a.length)},Y:q,z:function(){var a=new Date("January 1 "+q()+" 00:00:00"),a=m.getTime()-a.getTime();return Math.floor(a/1E3/60/60/24)}},t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),u="Sun Mon Tue Wed Thu Fri Sat".split(" "),w="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
y="January February March April May June July August September October November December".split(" "),m=this;if(a){var v=m.getTime();m.setTime(a)}c=c.split("");for(a=0;c[a];)"\\"==c[a]?c.splice(a,1):r[c[a]]&&(c[a]=r[c[a]].call()),a++;v&&m.setTime(v);return c.join("")};function getShortTime(c,a){if(null==a||isFlexDate)a=!1;c.getUTCHours();c.getUTCMinutes();return a?c.formatUTCDate("D T"):c.formatUTCDate("T")}function getShortDate(c){return c.formatUTCDate("j M")}
function getShortTime(c,a){if(null==a||isFlexDate)a=!1;var b=c.getUTCHours();13<=b?b-=12:0==b&&(b=12);var d=c.getUTCMinutes();10>d&&(d="0"+d);var e=12<=c.getUTCHours()?"p":"a";return a?dow[c.getUTCDay()]+" "+b+":"+d+e:b+":"+d+e}function getShortDate(c){return c.formatUTCDate("M j")}
(function(){function c(){if(a)try{a.abort()}catch(d){}}var a,b={air:1,car:2,hotel:29,freeregions:29,any:4,crc:5,crcg:6,deal:7,crcga:8,hotelname:11,brandname:15};jq.fn.smartbox=function(d,e,f){function g(){return jq(l).find("ul li")}function h(a){retIndex=g().index(a);return-1==retIndex?0:retIndex}if(d&&!jq.isPlainObject(d))return"option"===d&&(this.data("smartboxOptions")[e]=f),this;d=jq.extend({},jq.fn.smartbox.defaults,d);var l,k;this.each(function(){function e(){l&&(l.style.display="none");k&&
(k.style.display="none");E=!0;v.trigger("sbclose")}function f(){return v.data("smartboxOptions")}function q(){z=h(this);w(z);e()}function r(){z=-1;u(-1)}function t(){z=h(this);u(z)}function u(a){var b=f().itemHighlightClass,c=g();c.removeClass(b);0<=a&&(jq(c[a]).addClass(b),z=a)}function w(a){var b=f();if(0>a)B="",v.data(b.dataKey,""),b.callbackWithNull&&b.callback.call(v[0],null);else{var c=g();if(0<c.length){var d=c[a],c=d.id.split("-"),e="";1<c.length&&(e=c[1]);0<jq(d).find("span.nearbyHotels").length&&
jq(d).find("span.nearbyHotels").remove();0<jq(d).find("span.nearbyRentals").length&&jq(d).find("span.nearbyRentals").remove();0<jq(d).find("span.smarty-emoji").length&&jq(d).find("span.smarty-emoji").remove();v.data(b.dataKey,e).val(jq(d).text());d=jq.extend({id:e,str:d.innerHTML,type:c[0]},jq(d).data());"isl"==d.type&&1<c.length&&(codes=c[1].split("/"),d.str=codes[0]);2<c.length&&(d.hc=c[2]);3<c.length&&("hotel"===d.type?d.hid=c[3]:"rest"===d.type?d.rtid=c[3]:"freereg"===d.type?d.frid=c[3]:"reg"===
d.type?d.rid=c[3]:"ctry"===d.type?d.cid=c[3]:d.lmid=c[3]);b.callback.call(v[0],d)}}v.trigger("sbset",[a])}function y(){v.trigger("sbopen");var c=f(),d=v.val();0<B.length&&B==d||(d.length<c.minChars?m(null):(B=d,d=jq.extend({f:"h",lc:c.localeLanguage,lc_cc:c.localeCountry,s:b[c.searchType]||c.searchType,where:B},null!=c.getSmartData?c.getSmartData():c.smartData),c.countryCode&&(d.cc=c.countryCode),a=jq.post(c.smartUrl,d,m,"text")))}function m(a){var b=f(),c;var d=f();c=v.val().toUpperCase();var e=
"";if(null!=d.recentList&&0<d.recentList.length)for(var h=0;h<d.recentList.length;h++)d.keyPressed&&0<c.length&&0>d.recentList[h].display.toUpperCase().indexOf(c)||(0==e.length&&(e="\x3cli class\x3d'separator'\x3e\x3cb\x3eRecently searched:\x3c/b\x3e\x3c/li\x3e"),e+="\x3cli id\x3d'"+d.recentList[h].code+"' class\x3d'"+d.recentList[h].className+"'\x3e"+d.recentList[h].display+"\x3c/li\x3e");c=0==jq.trim(e).length?null:e;if(null!=c||null!=a){d=null==a?1:0;a=a||"\x3cul\x3e";null!=c&&0<a.length&&0<a.indexOf("\x3c/ul\x3e")&&
(a=a.substr(0,a.indexOf("\x3c/ul\x3e")));a+=(c||"")+"\x3c/ul\x3e";"function"==typeof b.addCustomDataStyle&&(a=b.addCustomDataStyle(a));a+=b.customHTML;l.innerHTML=a;b.maxResults&&jq(l).find("ul li").slice(b.maxResults).remove();a=g();C=a.length;if(0<C){a.mousedown(q).mouseout(r).mouseover(t);l.style.width="auto";a=f();c=l.style;e=k.style;c.display="inline";window.opera||(e.display="inline");h=Math.min(a.maxWidth,Math.max(a.minWidth,l.offsetWidth));c.width=e.width=h+"px";var p=v.offset(),n=p.left;
"right"===a.position&&(n+=v.width()-h-2);c.left=n+"px";c.top=p.top+v.outerHeight()+"px";e.height=l.offsetHeight+"px";e.top=c.top;e.left=c.left}else l.style.display=k.style.display="none";z=b.forceSelection||b.forceSingle&&1==C?d:-1;u(z)}}var v=jq(this),A=0,B,z,C,E=!1,D=!1;jq(this).attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"}).blur(function(){var a=f();v.data(a.dataKey)||(0<=z&&a.forceSelection&&!a.noForceOnBlur||a.forceSingle&&1==C||0>=z&&a.forceFirstSelection&&!a.noForceOnBlur?
w(0):a.promptText&&(v.css("color",a.promptColor).val(a.promptText),D=!0));c();e();E=!1}).data("smartboxOptions",d).click(function(){var a=f();null!=a.recentList&&0<a.recentList.length&&(c(),y())}).focus(function(){var a=f();a.keyPressed=!1;D&&(v.css("color","").val(""),D=!1);var b=a.targetId;l=document.getElementById(b)||jq("\x3cdiv/\x3e",{id:b,css:{display:"none",position:"absolute",width:"auto",zIndex:1E4}}).appendTo("body")[0];l.className=a.targetClass||"smartbox";l.className+=" "+l.className+
"-"+a.searchType;b=a.targetBGId;k=document.getElementById(b)||jq("\x3ciframe/\x3e",{id:b,css:{display:"none",position:"absolute",zIndex:9999},frameborder:0,scrolling:"no"}).appendTo("body")[0];B="";z=-1;E=!1;v.size()&&0<v.val().length&&a.searchOnFocus?y():a.getInitData&&(a=a.getInitData.call())&&m(a)}).keydown(function(a){var b=f();A=a=document.all?a.keyCode:a.which;(new Date).getTime();b.keyPressed=!0;switch(a){case 37:case 38:z=Math.max(z-1,0);u(z);break;case 39:case 40:z=Math.min(z+1,C-1);u(z);
break;case 13:0<C&&(w(z),e());break;case 27:e();break;case 9:0<=z&&z<C&&w(z);break;case 18:case 16:break;default:z=-1,w(-1),setTimeout(function(){13!=A&&(v.size()&&0<v.val().length?(c(),y()):(w(-1),e()))},1)}}).keypress(function(){var a=!E;E=!1;return a?!0:13!=A})});return this};jq.fn.smartbox.defaults={callback:jq.noop,callbackWithNull:!1,countryCode:null,dataKey:"smartbox",forceSelection:!0,forceFirstSelection:!1,forceSingle:!1,itemHighlightClass:"smartbox-hover",localeCountry:"US",localeLanguage:"en",
maxResults:null,maxWidth:1E3,minChars:1,minWidth:50,position:"left",promptColor:"#666",promptText:null,recentList:null,searchType:"air",smartData:{},smartUrl:"/m/smarty",targetClass:null,targetId:"smartbox",targetBGId:"smartboxBG",customHTML:""}})();R9=R9||{};R9.extend("globals.messages",{searchInProgress:"Searching...",filterInProgress:"Applying your filter choices...",sortInProgress:"Sorting results...",updatingInProgress:"Updating results..."});
R9.ui=function(){function c(){var a=jq("#moreHeaderLink"),b=jq(document.body),c=function(){a.removeClass("show-tooltip").blur();b.off("click.bucketAction",c)},d=function(){jq("#more_login").on("click.bucketAction",function(a){a.stopPropagation();c();jq("#headersigninlink").trigger("click")})};a.on("click.bucketAction",function(e){e.stopPropagation();window.r9CurrencyPicker.view.hidePickers(!0);R9.globals.loadMoreMenuAjax&&!a.children().length?jq.get("/k/headerajax",{moremenuonly:!0}).then(function(e){a.html(e);
a.addClass("show-tooltip");b.on("click.bucketAction",c);d()}):a.hasClass("show-tooltip")||(a.addClass("show-tooltip"),b.on("click.bucketAction",c))})}var a=!1,b=null,d=!1;return{initHeader:function(){jq.support.touch||"undefined"!=typeof window.ontouchstart?(jq("html").addClass("touch"),d=!0,jq.ui.r9dialog.prototype.options.draggable=!1,jq.datepicker._defaults.showButtonPanel=!0):jq("html").addClass("no-touch");R9.Tabs&&R9.Tabs.SearchTabs&&R9.Tabs.SearchTabs.bindEvents();c()},isTouchDevice:function(){return d},
initMapsAPI:function(a){b=a;R9.Maps.Google.load(b,"initMapsAPI")},initMapsAPIComplete:function(c){a=!0;b(c)},isMapsAPIInitialized:function(){return a},doAfterMapsAPIInitialized:function(b){a?b():this.initMapsAPI(b)}}}();jq(R9.ui.initHeader);var bound=!1;
function hoverDisclaimer(c,a,b,d){if(!jq("#ttipDXC").is(":visible")){bound||(jq("a.disclaim, span.disclaim, span.closeareadis").click(function(a){a.stopPropagation()}),bound=!0);var e={};null==b&&(b=20);null==d&&(d=-20);e.x=b;e.y=d;a?(hideTTType("DX"),hideTTType("DT"),hideTTType("DG"),showTT(c,"","DXC",e,!0)):showTT(c,"","DX",e,!0)}}function hideDisclaimerClicked(c){null==c&&(c=!0);c?hideAllTT(!1):hideTTType("DXC")}
function hideDisclaimer(c){jq("#ttipDXC").is(":visible")||(null==c&&(c=!0),c?hideAllTT(!1):(hideTTType("DX"),hideTTType("DT"),hideTTType("DG")))}
function generateFlightsUrl(c,a,b,d,e,f,g){var h="";if(null!=a&&"weekend"!=f)g&&isRegionSearch(c.destcode.value)&&(h+="region/"),h+=generateLegParams(c,-1,a,f),"openflex"==f&&(b=new Date(a.getTime()),b.setDate(b.getDate()+30)),null!=b&&(d=dateToString(b),h=h+"/"+d,c.return_time&&(h+=getTimeOption(c.return_time.value)),"openflex"!=f?h+=getFlexOption(c.return_date_flex&&c.return_date_flex.value):(d=c.lengthofstay.value.replace("-","to").replace(/ /g,""),h+="-flexible-calendar-"+d));else if(d)for(f=
0;f<e&&null!=c["origin"+f]&&""!=c["origin"+f].value;f++)0<f&&(h+="/"),h+=generateLegParams(c,f,d[f],"exact");else h=generateOaD(c,""),h+="/weekend",d=generateWeekendDays(c),e=c.weekend_depart_date?c.weekend_depart_date.value:"","WEEKEND"!=e?(h=e.substring(4,6).match(/\d\d/)?h+("/"+e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6)):h+("/"+e.substring(0,4)+"-"+e.substring(4)),""!=d&&(h+="-"+d)):""!=d&&(h+="/"+d);void 0!==c.cabin&&(h+=getCabinClass(c.cabin.value));h+=getTravelersUrlPart(c);(d=
c["baggageCount-input"])&&0<d.value&&(h+="/bags-"+d.value);void 0==c.prefer_nonstop||!c.prefer_nonstop.checked&&"Y"!=c.prefer_nonstop.value||(h+="?fs\x3dstops\x3d0");return"/flights/"+h}
function getTravelersUrlPart(c){var a="";if(c&&c.adults&&("0"!==c.adults.value||c.children&&"0"!==c.children.value||c.seniors&&"0"!==c.seniors.value||c.students&&"0"!==c.students.value)){var b=parseInt(c.adults.value,10);isNaN(b)&&(b=0);var d=parseInt(c.seniors.value,10);isNaN(d)&&(d=0);var e=parseInt(c.children.value,10);isNaN(e)&&(e=0);var f=-1;c.students&&(f=parseInt(c.students.value,10),isNaN(f)&&(f=0));1<b||0<d||0<e?a+="/"+b+"adults":1===b&&0<f&&(a+="/"+b+"adults");0<d&&(a+="/"+d+"seniors");
0<f&&(a+="/"+f+"students");if(0<e)for(a+="/children",b=1;b<=e;b++)c["childAge"+b]&&(a+="-"+c["childAge"+b].value)}else c.travelers&&(c=c.travelers.value,1<c&&(a+="/"+c+"adults"));return a}function generateLegParams(c,a,b,d){var e="";-1<a&&(e=a+"");var f="depart_time"+e,e=generateOaD(c,e);b=dateToString(b);e=e+"/"+b;c[f]&&(e+=getTimeOption(c[f].value));-1==a&&"openflex"!=d?e+=getFlexOption(c.depart_date_flex&&c.depart_date_flex.value):"openflex"==d&&(e+="-flexible-calendar-0");return e}
function isRegionSearch(c){return c&&null!=/[0-9]+[fr]{1,2}/.exec(c)||-1!==c.indexOf("cy")||-1!==c.indexOf("cg")}
function generateOaD(c,a){var b="origin"+a,d="destination"+a,e="destcode"+a,f="nearbyO"+a,g="nearbyD"+a,h=/(([A-Z]{3}))/g;a=c["origincode"+a].value.substr(0,3);if(""==a||0==a.indexOf("C-"))a=c[b].value+"",a=a.replace(/ /g,""),-1!=a.indexOf("(")&&(b=h.exec(a),null!=b&&(a=b[0]));b=c[e].value.substr(0,3);isRegionSearch(c[e].value)&&(b=c[e].value);if(""==b||0==b.indexOf("C-"))b=c[d].value+"",b=b.replace(/ /g,""),-1!=b.indexOf("(")&&(h.compile(h),d=h.exec(b),null!=d&&(b=d[0]));d=a;c[f]&&c[f].checked&&
(d+=",nearby");d+="-"+b;c[g]&&c[g].checked&&(d+=",nearby");return d}function dateToString(c){var a=c.getMonth()+1;10>a&&(a="0"+a);var b=c.getDate();10>b&&(b="0"+b);return c.getFullYear()+"-"+a+"-"+b}function getTimeOption(c){return"a"==c?"":"r"==c?"-early-morning":"m"==c?"-morning":"n"==c?"-afternoon":"e"==c?"-evening":"l"==c?"-night":"-"+c+"h"}function getCabinClass(c){return"p"==c?"/premium":"b"==c?"/business":"f"==c?"/first":""}
function generateWeekendDays(c){var a="";if(c.weekend_depart){var b=c.weekend_depart.value;c=c.weekend_return.value;if("FRIDAY_ANYTIME"!=b||"SUNDAY_ANYTIME"!=c)a=generateWeekendDay(b)+"-"+generateWeekendDay(c)}return a}
function generateWeekendDay(c){return"THURSDAY_ANYTIME"==c?"Thu":"THURSDAY_AM"==c?"Thu-AM":"THURSDAY_PM"==c?"Thu-PM":"FRIDAY_ANYTIME"==c?"Fri":"FRIDAY_AM"==c?"Fri-AM":"FRIDAY_PM"==c?"Fri-PM":"SATURDAY_ANYTIME"==c?"Sat":"SATURDAY_AM"==c?"Sat-AM":"SUNDAY_ANYTIME"==c?"Sun":"SUNDAY_AM"==c?"Sun-AM":"SUNDAY_PM"==c?"Sun-PM":"MONDAY_ANYTIME"==c?"Mon":"MONDAY_AM"==c?"Mon-AM":"MONDAY_PM"==c?"Mon-PM":""}
function getFlexOption(c){return"plusminusthree"==c?"-flexible":"plusminustwo"==c?"-flexible-2days":"plusminusone"==c?"-flexible-1day":"plusone"==c?"-flexible-1day-after":"minusone"==c?"-flexible-1day-before":""}
function generatePhoenixCruisesUrl(c){var a="",b=c.find("#dep_date_inline-status").val();""!=b&&(a=b.substr(0,4),b=b.substr(4,2),a=a+"-"+b);b=c.find("#originselect-status");"ALL"!=b.val()&&(a+="/"+encodeURIComponent(generateOriginDestOrLineString(b.text())));b=c.find("#destinationselect-status");"ALL"!=b.val()&&(a+="/"+encodeURIComponent(generateOriginDestOrLineString(b.text())));c=c.find("#cruiselineselect-status");"undefined"!=typeof c.val()&&""!=c.val()&&(a+="/"+generateOriginDestOrLineString(c.text()));
return"/cruises/"+a}function generateOriginDestOrLineString(c){return(c+"").replace(/\//g,"-").replace(/\s-\s/g,"-").replace(/\s/g,"-")}function generateLength(c){return c.options[c.selectedIndex].text.replace(" ","").replace("+","-").toLowerCase()}
function encodeLocation(c){c=R9.Common.RemoveAccents.removeAccentedChars((c+"").replace(/, /g,",").replace(/ - /g,",").replace(/ /g,"-"));if("undefined"==typeof R9.globals||"undefined"==typeof R9.globals.useFullSearchUrl||1!=R9.globals.useFullSearchUrl)c=c.replace(/[^A-Za-z0-9_\-,.]/g,"");return c}
function generateHotelsUrl(c,a,b,d){var e=void 0!=c.hid&&"undefined"!==c.hid.value&&""!==c.hid.value&&null!==c.hid.value,f=void 0!=c.amenity&&""!==c.amenity.value&&null!==c.amenity.value,g=void 0!=c.frid&&"undefined"!==c.frid.value&&""!==c.frid.value&&null!==c.frid.value,h=void 0!=c.rid&&"undefined"!==c.rid.value&&""!==c.rid.value&&null!==c.rid.value,l=void 0!=c.cid&&"undefined"!==c.cid.value&&""!==c.cid.value&&null!==c.cid.value,k=c.othercity.value,p="-c",n=void 0!=c.address?c.address.value:"";""!=
n&&(k=n,-1==n.indexOf(c.location.value)&&(k+=","+c.location.value),p="-a");var k=encodeLocation(k),q=c.citycode.value;g?k+="-e"+c.frid.value:h?k+="-r"+c.rid.value:l?k+="-u"+c.cid.value:""!=q&&(k+=p+q);e?(k+="-h"+c.hid.value,d&&(k+="-details")):c.lmid&&c.lmid.value?k+="-l"+c.lmid.value:c.nhid&&c.nhid.value&&(k+="-n"+c.nhid.value);c.minstars&&c.minstars.value&&2<=parseInt(c.minstars.value,10)&&(k+="-"+c.minstars.value+"stars");c.rating&&c.rating.value&&2<=parseInt(c.rating.value,10)&&(k+="-mgRating"+
c.rating.value+"0");f&&(k+="-f"+c.amenity.value);null!=a&&null!=b&&(k+="/"+dateToString(a)+"/"+dateToString(b));a="undefined"===typeof c["guests-input"]?c.guests.value:c["guests-input"].value;b="undefined"===typeof c["rooms-input"]?c.rooms.value:c["rooms-input"].value;1<a&&(k+="/"+a+"adults");1<b&&(k+="/"+b+"rooms");a=void 0!=c.address_nickname?c.address_nickname.value:"";""!=a&&a!=n&&(k+="/at-"+encodeLocation(a));void 0!=c.neighborhood&&""!=c.neighborhood.value&&null!=c.neighborhood.value&&(k=-1!=
k.indexOf("?")?k+"\x26":k+"?",k+="neighborhood\x3d"+c.neighborhood.value,k+="\x26filterType\x3dN");void 0!=c.ambiance&&""!=c.ambiance.value&&null!=c.ambiance.value&&(k=-1!=k.indexOf("?")?k+"\x26":k+"?",k+="ambiance\x3d"+c.ambiance.value,k+="\x26filterType\x3dA");return"/hotels/"+k}
function generateCarsUrl(c,a,b){var d=c.citycode1.value,e=c.citycode1.getAttribute("data-attr-location-type"),f=null,g=void 0===c.oneway.value?c.oneway[1].checked:"y"===c.oneway.value;3===d.indexOf("/")&&(f=e&&"rail"===e?"-t":"-a",f=d.substring(0,3)+f+d.substring(4));null===f&&(f=encodeLocation(c.location.value)+"-c"+d);g&&(f+="/",d=c.citycode2.value,g=c.citycode2.getAttribute("data-attr-location-type"),e=null,3===d.indexOf("/")&&(g=g&&"rail"===g?"-t":"-a",e=d.substring(0,3)+g+d.substring(4)),f=null!=
e?f+e:f+(encodeLocation(c.location2.value)+"-c"+d));void 0!=c.inlinepickup_hour?(f+="/"+generateDateTime(c,"inlinepickup",a),f+="/"+generateDateTime(c,"inlinedropoff",b)):(f+="/"+generateDateTime(c,"pickup",a),f+="/"+generateDateTime(c,"dropoff",b));return"/cars/"+f}function generateDateTime(c,a,b){b=dateToString(b);c=c[a+"_hour"].value;12!=c&&(b+="-"+c+"h");return b}
function dateToString(c){var a=c.getMonth()+1;10>a&&(a="0"+a);var b=c.getDate();10>b&&(b="0"+b);return c=c.getFullYear()+"-"+a+"-"+b}function generatePackageToursUrl(c){return"/packages/"+generatePackageToursAbsoluteUrl(c)}
function generatePackageToursAbsoluteUrl(c){var a=R9.packagetours.Globals.VIEWTYPE,b="",d=packageToursOptionalParams(c),e=c.cardViewEnabled&&"true"==c.cardViewEnabled.value,b=b+createSearchCriteriaUrl(c.searchCriteriaJson.value,c.defaultSearchCriteriaJson.value);c.dhid&&""!=c.dhid.value&&c.dhotelurlame&&""!=c.dhotelurlame.value&&(b+="/"+c.dhotelurlame.value+"-details-"+c.dhid.value);b+="/"+c.departDate.value;if(c.flexDays){var f=parseInt(c.flexDays.value,10);0<=f||(f=0);b+="/"+f}else b+="/"+c.returnDate.value;
b+="/"+c.duration.value;b+="/"+c.adults.value;b+="/"+c.child1.value+","+c.child2.value+","+c.child3.value;b+="/"+(generateDepartureAirport(c)||"-");d&&!jq.isEmptyObject(d)&&(b+=serializePackageToursParams(d,":",";"));c=c.resultView?c.resultView.value:a.HOTELS;if(c===a.MAP||c===a.FLIGHTS||c===a.REGION&&e)b+=";"+c;return b}
function serializePackageToursParams(c,a,b){var d={sort:!0,desc:!0,fsort:!0,fdesc:!0,details:!0,showEmpty:!0,maxPrice:!0,category:!0,amenities:!0,airlines:!0,stops:!0,freebies:!0,takeoffTimes:!0,landingTimes:!0,hotelnames:!0,layovertime:!0,legduration:!0,guestRatings:!0,splitbooking:!0,providers:!0},e=[],f=[],g="";jq.each(c,function(b,c){d[b]?f.push(b+a+c):e.push(b+a+c)});0<e.length&&(g+="/"+e.join("/"));0<f.length&&(g=0<e.length?g+(b+f.join(b)):g+("/"+f.join(b)));return g}
function generateDepartureAirport(c){var a=/(([A-Z]{3}))/g,b=c.origincode.value;""===b||0==b.indexOf("C-")?(b=c.origin.value+"",b=b.replace(/ /g,""),-1!=b.indexOf("(")?(c=a.exec(b),b=null!=c?c[0]:""):null===a.exec(b)&&(b="")):0<b.indexOf("/")&&(b=b.substring(0,3));return""==b?"-":b}
function packageToursKeyValueToJson(c,a,b,d){var e=R9.packagetours.Globals.CachedQueryParams,f={};b=b?b:"\x3d";c=c.split(a?a:";");for(a=0;a<c.length;a++){var g=c[a].split("\x3d");g.splice(1,g.length-1,g.slice(1).join(b));2!=g.length||packageToursIsEmptyFilterStateValue(g[0])||(f[g[0]]=d||g[0]===e.HOTEL_NAMES?g[1]:g[1].replace(/-/g,","))}return f}function packageToursIsEmptyFilterStateValue(c){if(!c)return!0;c=jq.trim(c);return 0===c.length||"NO_DEFAULT"===c?!0:!1}
function serializePackageToursFsKeyValueObject(c,a){var b=[];a=a?a:"\x3d";jq.each(c,function(c,e){b.push(c+a+e)});return b.join(";")}
function packageToursOptionalParams(c){var a=function(a){var b=a.split(",");if(2!=b.length)return 2400;a=parseInt(b[0].substring(0,b[0].length-3))%86400;b=parseInt(b[1].substring(0,b[1].length-3))%86400;return isNaN(a)||isNaN(b)?2400:1E4*(100*Math.floor(a/60/60)+Math.floor(a/60)%60)+100*Math.floor(b/60/60)+Math.floor(b/60)%60},b=function(a,b,c){b||(b=a);f[a]&&!packageToursIsEmptyFilterStateValue(f[a])&&(packageToursIsEmptyFilterStateValue(d[b])?d[b]=f[a]:d[b]=d[b]+","+f[a]);"undefined"===typeof c||
null===c||d[b]||(d[b]=c)},d={},e=R9.packagetours.Globals.CachedQueryParams,f=packageToursKeyValueToJson(c.fsParameters.value);b(e.CATEGORY);b(e.GUEST_RATINGS);b(e.MAX_PRICE);b(e.ROOM_TYPES);b(e.BOARD_TYPES);b(e.SPORT_TYPE);b(e.HOLIDAY_TYPE);b(e.TRAVELERS_TYPE);b(e.TRANSFER);b(e.HOTELS_ONLY);b(e.SHOW_SPLIT_BOOKING);(function(){var a=e.SHOW_EMPTY,b=f[a];if(b&&"NO_DEFAULT"===b||"true"==b)d[a]=!0})();b(e.RATINGS_COUNT);b(e.OVERALL_RATING);b(e.RECOMMENDATION);b(e.AMENITIES_ACCOMODATION,e.AMENITIES);b(e.AMENITIES_ACCOMODATION_TYPE,
e.AMENITIES);b(e.AMENITIES_LOCATION,e.AMENITIES);b(e.AMENITIES_ROOM,e.AMENITIES);(function(){var b=e.TIMES;if(f[b]&&!packageToursIsEmptyFilterStateValue(f[b])){b=packageToursKeyValueToJson(f[b],"|");if(b.Takeoff0||b.Takeoff1){var c=2400,l=2400;b.Takeoff0&&(c=a(b.Takeoff0));b.Takeoff1&&(l=a(b.Takeoff1));d[e.TAKE_OFF_TIMES]=c+","+l}if(b.Landing0||b.Landing1)l=c=2400,b.Landing0&&(c=a(b.Landing0)),b.Landing1&&(l=a(b.Landing1)),d[e.LANDING_TIMES]=c+","+l}})();b(e.STOPS);b(e.FREEBIES);b(e.HOTEL_NAMES);
b(e.AIRLINES);b(e.LEG_DURATION);b(e.LAYOVER_TIME);c.dhid&&""!=c.dhid.value&&(d[e.DETAILS]=c.dtab&&""!=c.dtab.value?c.dtab.value:"overview",c.isDetailsKayakLive&&"true"==c.isDetailsKayakLive.value&&(d[e.DETAILS_KLIVE]=c.isDetailsKayakLive.value));b(e.PROVIDERS);return d}
function containsHotelInside(c){var a=/^([A-Z]{3})$/g;c=jq.trim(c);if(""===c)return!1;var b=JSON.parse(c);if(0===b.length)return!1;for(c=0;c<b.length&&"string"===(typeof b[c].id).toLowerCase()&&null==a.exec(b[c].id);c++)if(-1!=b[c].id.indexOf("H"))return!0;return!1}
function createSearchCriteriaUrl(c,a){var b=[];c=jq.trim(c);a=jq.trim(a);if(""===c){if(""===a)return"-";c=a}c=JSON.parse(c);if(0===c.length){if(""===a)return"-";c=JSON.parse(a);if(0===c.length)return"-"}for(a=0;a<c.length;a++)b.push(encodeSearchCriteria(c[a].name)+"-"+c[a].id);return b.join(",")}function encodeSearchCriteria(c){return R9.Common.Utils.String.cleanUrl(c+"")}
function redirectToPackageTourUrl(c){var a;0===c.indexOf("/")&&(c=c.substring(1));(c=c.split("/"))&&1<c.length&&(a=c.splice(1,c.length).join("/"),window.location.assign(window.location.protocol+"//"+window.location.hostname+"/"+c[0]+"/"+a))}
(function(c){R9.extend("URL",{Generator:function(a,b){this.form=c(a);this.options=c.extend(!0,{},this.options,b||{})}});R9.extend("URL.Generator",{generate:function(a,b){return(new R9.URL.Generator(a,b)).generate()}});R9.extend("URL.Generator.prototype",{form:null,options:{isInlineSearch:!1,maxLegs:4,useCleanUrls:!1},generate:function(){if(!this.isUseShortUrls())return null;var a=this.generateFullUrl();this.setUpCookie(a);return a},generateFullUrl:function(){jq(this.form.get(0)).trigger("form-pre-submit");
switch(this.getElement("tab").val()){case "flights":var a=this.getElement("dtFlexCat"),a=a.length?this.options.isInlineSearch||"hidden"==a[0].type?a.val():a.filter(":checked").val():null,b=this.getElement("oneway");1<b.length&&(b=b.filter(":checked"));var c=null,e=null,f=null,g=jq("#travel_dates-end-wrapper").hasClass("r9-datepicker-twofields");if(this.options.isInlineSearch&&"weekend"!=a||!this.options.isInlineSearch&&("n"==b.val()||"y"==b.val()))e=g?this.getTravelDatesWrapper().daterangePickerTwoFields("getStartDate"):
jq("#travel_dates").daterangePickerOrSingleDate("getStartDate"),"n"==b.val()&&(f=g?this.getTravelDatesWrapper().daterangePickerTwoFields("getEndDate"):jq("#travel_dates").daterangePickerOrSingleDate("getEndDate")),this.options.isInlineSearch&&null==e&&(e=jq("#inline_depart_date").datepicker("getDate"),0==e.length&&(e=null),"n"==b.val()&&(f=jq("#inline_return_date").datepicker("getDate"),0==f.length&&(f=null))),null==e&&(e=this.getDateFromLegacyFrom("#depart_date"),"n"==b.val()&&(f=this.getDateFromLegacyFrom("#return_date"))),
null==e&&(e=this.getDateFromLegacyFrom("#flightSearchForm_depart_date"),"n"==b.val()&&(f=this.getDateFromLegacyFrom("#flightSearchForm_return_date")));else if("m"==b.val())for(c=[],b=0;b<this.options.maxLegs;b++)c[b]=jq("#travel_date"+b).daterangePickerOrSingleDate("getStartDate");b=R9.config.getBoolean("ui.flights.region-flow.enabled",!1);return generateFlightsUrl(this.form.get(0),e,f,c,this.options.maxLegs,a,b);case "flightsMultiCity":return window.location.href;case "hotels":return 0<this.getTravelDatesWrapper().length?
(a=this.getTravelDatesWrapper().daterangePicker("getStartDate"),c=this.getTravelDatesWrapper().daterangePicker("getEndDate")):0<this.getElementsBySelector(".r9-datepicker-wrapper").length?(a=this.getElementsBySelector(".r9-datepicker-wrapper").daterangePicker("getStartDate"),c=this.getElementsBySelector(".r9-datepicker-wrapper").daterangePicker("getEndDate")):(a=this.getElementsBySelector("[id^\x3dcheckin_date]").datepicker("getDate"),c=this.getElementsBySelector("[id^\x3dcheckout_date]").datepicker("getDate")),
a=generateHotelsUrl(this.form.get(0),a,c,"true"===this.getElement("hidToDetailsPage").val()),this.options.isInlineSearch&&(c=R9.ViewState.getUrlStateString(),""===c&&/\.hotelMap\.ksp$/.test(window.location.href)&&(c="map"),c&&(a+=R9.ViewState.getInstance().options.stateDelimiter+c)),a;case "cars":return 0<this.getTravelDatesWrapper().length?(a=this.getTravelDatesWrapper().daterangePickerTwoFields("getStartDate"),c=this.getTravelDatesWrapper().daterangePickerTwoFields("getEndDate")):(a=this.getElement("pickup_date").datepicker("getDate"),
c=this.getElement("dropoff_date").datepicker("getDate")),a=generateCarsUrl(this.form.get(0),a,c),this.options.isInlineSearch&&(c=R9.ViewState.getUrlStateString())&&(a+=R9.ViewState.getInstance().options.stateDelimiter+c),a;case "vacations":return generateVacationsUrl(this.form.get(0),this.getElement("depart_date").datepicker("getDate"),this.getElement("return_date").datepicker("getDate"));case "cruises":return generatePhoenixCruisesUrl(this.form);case "packagetours":return generatePackageToursUrl(this.form.get(0));
default:return""}},isUseShortUrls:function(){var a=this.getElement("usecleanurl");return a.length?"true"==a.val():this.options.useCleanUrls},getElement:function(a){return this.form.find('[name\x3d"'+a+'"]')},getElementsBySelector:function(a){return this.form.find(a)},getTravelDatesWrapper:function(){return this.form.find("#travel_dates-end-wrapper")},setUpCookie:function(a){if(null!=a){var b="/"+this.getElement("tab").val()+"/",c=encodeURIComponent(a.substring(a.indexOf(b)+b.length));0>a.indexOf(b)&&
(c=encodeURIComponent(a.substring(a.indexOf("/",1)+1)));"flightsMultiCity"==this.getElement("tab").val()&&(c=encodeURIComponent(this.getElement("searchparam").val()));a="hiddenParams"+c;var b=this.collectCookieParams(),c=new Date,e=c.getTime();c.setTime(e+1E4);document.cookie=a+"\x3d"+encodeURIComponent(b)+"; expires\x3d"+c.toGMTString()+"; path\x3d/"}},getDateFromLegacyFrom:function(a){a=jq(a).datepicker("getDate");0==a.length&&(a=null);return a},collectCookieParams:function(){var a={},b,d="src searchingagain page_origin c2s po personality originsid provider r9secret r9debug searchType recent fid prevsearch_id".split(" ");
for(b=0;b<d.length;b++){var e=this.getElement(d[b]);e.length&&(a[d[b]]=e.val())}a.c2s="";a.page_origin="";a.src="";a.comparetosite="";b=this.getElement("comparetokayak");if(b.length){var f=[];b.each(function(){this.checked&&f.push(this.value)});a.comparetokayak=f.join(",")}b=this.getElement("fsParameters");b.length&&(a.fsParameters=b.val().replace(/=/g,"##"));b=this.getElement("primetehkila");b.length&&b.get(0).checked&&(a.primetehkila=b.val());b=this.getElement("ccFeeCalcSelector");d=this.getElement("ccFeeCalcEnable");
d.length&&("checkbox"!=d.get(0).type||d.get(0).checked)||0==d.length?a.ccFeeCalcSelector=b.val():a.ccFeeCalcSelector="none";b=this.getElement("railFlyFilterEnable");b.length&&b.get(0).checked||0==b.length?a.railFlyFilter="on":b.length&&!b.get(0).checked&&(a.railFlyFilter="off");switch(this.form.get(0).action.value){case "dohotels":a=this.getHotelCookieParams(a);b=this.getElement("priceselect");b.length&&(document.cookie="hotelPriceType\x3d"+encodeURIComponent(b.val())+"; path\x3d/");break;case "doflights":a=
this.getFlightCookieParams(a);break;case "dopackagetours":a=this.getPackageTourCookieParams(a);break;case "docars":a=this.getCarsCookieParams(a)}return decodeURIComponent(c.param(a))},getFlightCookieParams:function(a){var b=this.getElement("airlineFilter");b.length&&""!==b.val()&&(a.airlineFilter=b.val());return a},getHotelCookieParams:function(a){var b=this.getElement("filterMinStars"),c=this.getElement("filterPriceRange"),e=this.getElement("filterMinGuestRating"),f=this.getElement("filterPropertyType");
b.length&&""!=b.val()&&(a.filterMinStars=b.val());c.length&&""!=c.val()&&"0"!=c.val()&&(b=c.val().split(","),a.filterMinPrice=b[0],a.filterMaxPrice=b[1]);e.length&&""!=e.val()&&(a.filterMinGuestRating=e.val());f.length&&""!=f.val()&&(a.filterPropertyType=f.val());return a},getPackageTourCookieParams:function(a){var b=this.getElement("isFrontDoor"),c=this.getElement("searchType");b.length&&"true"==b.val()&&c.length&&"P"==c.val()&&(a.isPFD=b.val(),a.maxPrice="",a.category="",a.guestRatings="",a.amenities=
"",b=this.getElement("fsParameters"),b.length&&""!=b.val()&&(b=packageToursKeyValueToJson(b.val(),";","\x3d",!0),a.maxPrice="undefined"!==typeof b.maxPrice?b.maxPrice:"",a.category="undefined"!==typeof b.category?b.category:"",a.guestRatings="undefined"!==typeof b.guestRatings?b.guestRatings:"",a.amenities="undefined"!==typeof b.amenities?b.amenities:""));return a},getCarsCookieParams:function(a){return a}})})(jq||jQuery);
function generateSearchUrl(c,a){R9.Trips.ResultPages.Storage.remove("hotels.results.saveToTrips.tripId");return R9.URL.Generator.generate(c,{isInlineSearch:a})}function setupSearchParams(c){document.cookie="formParams\x3d"+encodeURIComponent(c)+"; path\x3d/";return!0}
(function(c,a){c.extend("CountryCurrencyPicker",{Controller:function(a,c){this.view=a;this.model=c;this.init()}});c.extend("CountryCurrencyPicker.Controller.prototype",{view:null,model:null,init:function(){var a=this;a.view.on(a.view.events.currencyPicked,function(b,c){a.model.saveCurrency(b,c)})}});c.extend("CountryCurrencyPicker",{Model:function(){}});c.extend("CountryCurrencyPicker.Model.prototype",{scrollTopBeforeReload:function(){a(window).on("beforeunload",function(){a(window).scrollTop(0)})},
saveCurrency:function(b,c){var d=this;a.ajax({type:"POST",url:"/k/ident/currency",data:{currency:b,posted:!0,save:c},dataType:"text",success:function(){d.scrollTopBeforeReload();location.reload()},cache:!1})}});c.extend("CountryCurrencyPicker",{View:function(b){this.options=a.extend.apply(this,[{},this.options,b||{}]);this.emitter=new c.Common.Emitter(this);this.init()}});c.extend("CountryCurrencyPicker.View.prototype",{options:{countryLink:"#countrypickerlink",currencyLink:"#currencyPickerlink",
languageLink:"#langpickerlink",countryList:"#countryList",currencyList:"#currencyList",languageList:"#languageList",profileLinkOld:"#userDisplayEmail",profileLink:".userDisplayEmailTrigger",profileLinkArrow:"#userDisplayEmailArrow",profileList:"#headermenudropdown",profileMenu:"#accountTooltip",moreNavLink:"#moreNavLink",moreNavLinkArrow:"#moreNavLinkArrow",moreNavList:"#moreNavMenuDropdown",moreNavMenu:".more-tooltip",tripsMenuTrigger:".tripsIcon",tripsMenu:"#tripsMenuDropDown, #tripsMenuIconDropDown",
upSellMessage:"#redirectMessage",moreMenuLink:"#moreHeaderLink"},events:{currencyPicked:"currencyPicked"},hidePickers:function(b){var c=this.options;b=b||!1;this.shown=!1;a([c.countryLink,c.currencyLink,c.languageLink,c.profileLink].join(", ")).removeClass("open");a([c.countryList,c.currencyList,c.languageList,c.profileMenu].join(", ")).hide();b?this.shown=!0:a(c.moreMenuLink).removeClass("show-tooltip");a(this.options.profileLinkArrow).removeClass("arrow-up").addClass("arrow-down");a(this.options.profileLink).removeClass("open");
a(this.options.profileLinkOld).removeClass("open");a(this.options.moreNavMenu).removeClass("open");a(this.options.moreNavLink).removeClass("open")},centerTip:function(a,c){var b=a.find(".header-tooltip .tip");c=Math.floor((a.width()-6)/2+c);b.css("right",c);b.css("left","auto");return c},setMaxWidth:function(b){b=b.find("#accountTooltip");var c=0;a(".item").each(function(){a(this).outerWidth()>c&&(c=a(this).outerWidth())});b.css("max-width",c+"px")},setListHeight:function(a){if(a&&0!==a.length){var b=
a.offset().top;a=a.find(".inner");0===a.length||0<=b||(b=a.height()+b-50,100>=b||a.height(b).css("overflow","auto"))}},makeRedirect:function(b,d,e){c.globals.isSeo?e():a.ajax({url:b+"/k/run/isp/setcc",dataType:"jsonp",data:{cc:d},complete:function(){e()}})},hideUpSell:function(){a(this.options.upSellMessage).hide()},addMyAccountMenuHandler:function(){var b=this;a(b.options.profileLinkOld+":not("+b.options.profileLink+")").off("click").on("click",function(c){var d=a(b.options.profileMenu),e=a(b.options.profileLinkArrow);
d.is(":hidden")?(b.hideUpSell(),b.shown&&b.hidePickers(),b.shown=!0,d.show(),e.removeClass("arrow-down").addClass("arrow-up"),a(b.options.profileLink).addClass("open"),b.setMaxWidth(a(this).parent())):b.shown&&b.hidePickers();c.stopPropagation()});var d=function(c){var d=a(b.options.profileMenu),e=a(b.options.profileLinkArrow);d.is(":hidden")?(b.hideUpSell(),b.shown&&b.hidePickers(),b.shown=!0,d.show(),e.removeClass("arrow-down").addClass("arrow-up"),a(b.options.profileLink).addClass("open"),b.setMaxWidth(a(this).parent())):
b.shown&&b.hidePickers();a("#travelers").removeClass("r9-dropdownDialog-open");c.stopPropagation()};if(c.config.getBoolean("ui.common.header.use-account-v2-header",!1)){var e=a(b.options.profileMenu),f;a(b.options.profileLink).add(e).off("mouseenter focus click").on("mouseenter focus click",function(e){clearTimeout(f);a(b.options.profileMenu).is(":hidden")&&(d(e),c.Analytics.api.trackEvent({action:"my-account-link",label:"open"}));e.stopPropagation()});a(b.options.profileLink).add(e).off("mouseleave").on("mouseleave",
function(a){f=setTimeout(function(){b.shown&&b.hidePickers()},c.config.getInt("ui.common.account.header.v2.timeout",150))});e.off("focusout").on("focusout",function(a){f=setTimeout(function(){0===e.find(document.activeElement).length&&b.shown&&b.hidePickers()},c.config.getInt("ui.common.account.header.v2.timeout",150))})}else a(b.options.profileLink).off("click keypress.click").on("click",d).on("keypress.click",c.utils.clickByEnter)},addMoreNavMenuHandler:function(){var b=this;a(b.options.moreNavLink).on("click",
function(d){c.Analytics.api.trackEvent("header/morenavlink/open");var e=a(b.options.moreNavMenu);e.length||jq.get("/k/headerajax",{moremenuonly:!0,news16header:!0,isSeo:c.globals.isSeo}).then(function(c){a(b.options.moreNavLink).append(c);a(b.options.moreNavMenu).addClass("open");a(b.options.moreNavLink).addClass("open");b.shown&&b.hidePickers();b.shown=!0;b.setMaxWidth(a(this).parent())});e.is(":hidden")?(b.shown&&b.hidePickers(),b.shown=!0,e.addClass("open"),a(b.options.moreNavLink).addClass("open"),
b.setMaxWidth(a(this).parent())):b.shown&&b.hidePickers();a("#travelers").hasClass("r9-dropdownDialog-open")&&a("#travelers").removeClass("r9-dropdownDialog-open");d.stopPropagation()})},getCurrencySelectionText:function(a){var b=a.find("[class*\x3dsymbol]").text();a=a.find("[class*\x3dcurrencyname]").text();return b+" "+a},getAllCurrenciesBottomHeight:function(){var b=a(".all-currencies").last(),c=b.height(),e=b.find("[class*\x3dcolumn]").map(function(){return a(this).height()}).get(),e=Math.max.apply(null,
e),b=b.scrollTop();return e-c-b},handleFade:function(){var b=a(".all-currencies_fade");if(768>window.innerWidth)b.hide();else{var c=this.getAllCurrenciesBottomHeight();0>=c?b.hide():5>=c?b.height(25):(b.show(),b.height(60))}},shown:!1,init:function(){var b=this;"/"===window.location.pathname&&a(b.options.upSellMessage).show();a("#footerMenu .isp-redirect.footer-country-picker a").on("click",function(b){b.preventDefault();b.stopPropagation();var d=a(this).attr("href");c.Analytics.api.trackEvent("upsell/footerRedirect",
function(){window.location.href=d})});try{550>a(b.options.currencyLink).offset().top&&a(b.options.currencyList).addClass("shrunken")}catch(d){}a(b.options.upSellMessage).is(":visible")&&(c.Analytics.api.trackEvent("upsell/show"),b.centerTip(a(b.options.upSellMessage).parent(),a(b.options.upSellMessage).parent().data("offset")||0),b.shown=!0);a(b.options.upSellMessage).on("click",function(a){a.stopPropagation()});a(b.options.upSellMessage).on("click",".redirect-link",function(d){d.stopPropagation();
var e=a(this).parent().data("href"),f=a(this).parent().data("locale");c.Analytics.api.trackEvent("upsell/redirect",function(){b.makeRedirect(e,f,function(){window.location.href=e})})});a(b.options.upSellMessage).on("click",".no-thanks",function(d){d.stopPropagation();d.preventDefault();c.Analytics.api.trackEvent("upsell/no-thanks",function(){a.ajax({url:"/k/run/isp/no-thanks",dataType:"jsonp",complete:function(){b.hideUpSell()}})})});a(b.options.countryLink).on("click",function(d){var e=a(b.options.countryList);
e.is(":hidden")?(b.hideUpSell(),b.shown&&b.hidePickers(),b.shown=!0,e.show(),b.centerTip(a(this),a(this).data("offset")||0),b.setListHeight(e),a(this).addClass("open"),c.Analytics.api.trackEvent("countrylangpicker/open")):b.shown&&(b.hidePickers(),a(this).removeClass("open"));d.stopPropagation()});a(b.options.currencyLink).on("click",function(c){var d=a(b.options.currencyList);d.is(":hidden")?(b.hideUpSell(),b.shown&&b.hidePickers(),b.shown=!0,d.show(),b.centerTip(a(this),a(this).data("offset")||
30),b.setListHeight(d),a(this).addClass("open")):b.shown&&b.hidePickers();c.stopPropagation()});a(b.options.languageLink).on("click",function(d){var e=a(b.options.languageList);e.is(":hidden")?(b.hideUpSell(),b.shown&&b.hidePickers(),b.shown=!0,e.show(),b.centerTip(a(this),a(this).data("offset")||57),b.setListHeight(e),a(this).addClass("open")):b.shown&&b.hidePickers();c.Analytics.api.setSubPageId("main");c.Analytics.api.trackEvent("langpicker/click");d.stopPropagation()});this.addMyAccountMenuHandler();
this.addMoreNavMenuHandler();a(b.options.countryList+" .languageLink").on("click",function(d){d.preventDefault();d.stopPropagation();c.Analytics.api.trackEvent("countrylangpicker/change/"+a(this).attr("hreflang"));d=a.proxy(function(){window.location=a(this).data("href")+"\x26url\x3d"+encodeURIComponent(window.location.pathname+window.location.search+window.location.hash)},this);var e=a("#country_tooltip").data("href");e?b.makeRedirect(e,a(this).attr("hreflang"),d):d()});a(document.body).on("click",
function(c){0===a(b.options.profileMenu).find(a(c.target)).length&&(b.shown&&b.hidePickers(),b.shown=!1)});a("#country_tooltip a").on("click",function(c){c.preventDefault();c=a.proxy(function(){var b=a(this).attr("data-href");window.location=b?b:a(this).attr("href")},this);var d=a("#country_tooltip").data("href");d?b.makeRedirect(d,a(this).attr("hreflang"),c):c()});a("#language_tooltip a").on("click",function(b){b.preventDefault();jq(this).hasClass("active")||(c.Analytics.api.setSubPageId("main"),
c.Analytics.api.trackEvent("setlanguage/"+jq(this).attr("lang")));b=a.proxy(function(){var b=a(this).attr("data-href");window.location=b?b:a(this).attr("href")},this);a(this).attr("data-href")&&b()});a(b.options.currencyList+" .item").on("click",function(d){d.stopPropagation();b.shown&&b.hidePickers();d=b.getCurrencySelectionText(a(this));var e=a(this).data("cur");c.CountryCurrencyPicker.config["sparkle.affiliate.countrypicker.currency.showSaveToProfileDialog"]?a.ajax({type:"POST",url:"/k/run/currencysetter/setcurrency",
data:{newcurrency:d},dataType:"html",success:function(c){var d=a(c);""!==d.text()?(d.find("button").button(),d.find("#saveCurrency").click(function(){b.emitter.emit(b.events.currencyPicked,[e,!0])}),d.find("#setCurrency").click(function(){b.emitter.emit(b.events.currencyPicked,[e,!1])}),d.find("#currencysignup").click(function(){a(d).data("dialog").close();AjaxReg.ui.register(function(){b.emitter.emit(b.events.currencyPicked,[e,!0])})}),a(d).newDialog({viewPortClass:"currencyDialog",width:410,minHeight:85})):
b.emitter.emit(b.events.currencyPicked,[e,!1])}}):b.emitter.emit(b.events.currencyPicked,[e,!1])});0<a(".all-currencies").length&&(a(".all-currencies").on("scroll",function(a){b.handleFade()}),a(window).on("resize",function(a){b.handleFade()}))}});a(function(){window.r9CurrencyPicker=new c.CountryCurrencyPicker.Controller(new c.CountryCurrencyPicker.View,new c.CountryCurrencyPicker.Model)})})(window.R9,window.jq||window.jQuery);
R9.extend("Logging",{Config:{LINK_REQUEST_TIMEOUT:200,logTopStrip:!1,logBottomStrip:!0,logflightsForm:!0,loghotelsForm:!0,logcarsForm:!0,logmoreForm:!0,logmoreMenu:!1,logdealsForm:!0,logcruisesForm:!1,logvacationsForm:!0}});R9.extend("Logging",{CommonLogging:function(c){this.initialize(c)}});
R9.extend("Logging.CommonLogging.prototype",{initialize:function(c){this._options=c;R9.Logging.Config.logTopStrip&&this._initTopStrip();R9.Logging.Config.logBottomStrip&&this._initBottomStrip();R9.Logging.Config.logmoreMenu&&this._initMoreMenu()},_initMoreMenu:function(){for(var c=this,a="airlineFees freeMobileApp airlineDir help directFlights lowFareTips explore myTrips".split(" "),b=a.length-1;0<=b;b--)(function(a){jq("#more_"+a).on("click","a",function(){c.before(c.logPureLink,"moremenu/"+a)})})(a[b])},
_initTopStrip:function(){function c(b){return a.before(a.logPureLink,"topstrip/"+b)}var a=this;jq("#logo").off("click.topstrip").on("click.topstrip",jq.proxy(this.before(this.logo),this));jq("#flights-link").off("click.topstrip").on("click.topstrip",jq.proxy(c("flights"),this));jq("#hotels-link").off("click.topstrip").on("click.topstrip",jq.proxy(c("hotels"),this));jq("#cars-link").off("click.topstrip").on("click.topstrip",jq.proxy(c("cars"),this));jq("#more-link").off("click.topstrip").on("click.topstrip",
jq.proxy(c("more"),this));jq("#mytripsheaderlink").off("click.topstrip").on("click.topstrip",jq.proxy(c("trips"),this));jq("#mobilebug").off("click.topstrip").on("click.topstrip",jq.proxy(c("mobileapp"),this));jq("#countrypickerlink").off("click.topstrip").on("click.topstrip",R9.Common.Utils.debounce(jq.proxy(c("localecurrencychooser"),this)))},_initBottomStrip:function(){function c(b){return a.before(a.logPureLink,"bottomstrip/"+b)}var a=this;jq("#aboutus-link").on("click.bottomstrip",jq.proxy(c("about"),
this));jq("#privacy-link").on("click.bottomstrip",jq.proxy(c("privacy"),this));jq("#help-link").on("click.bottomstrip",jq.proxy(c("help"),this))},before:function(c,a){var b=this;return function(d){c.call(b,d,a);b._options&&!1===b._options.preventDefault||d.preventDefault()}},log:function(c,a){R9.Analytics.api.trackEvent("fd/"+c,{},this.complete(a),!0)},complete:function(c){var a=this,b,d=!1;b=setTimeout(function(){d=!0;a._doNavigation(c)},R9.Logging.Config.LINK_REQUEST_TIMEOUT);return function(){d||
(clearTimeout(b),a._doNavigation(c))}},_doNavigation:function(c){this._options&&!1===this._options.doNavigation||!c||(window.location.href=c)},logo:function(){var c=jq("#logo").attr("href");this.log("topstrip/kayaklogo",c)},logPureLink:function(c,a){a&&(c="A"!=typeof c.target.tagName?jq(c.target).closest("a").prop("href"):c.target.href,this.log(a,c))}});var LogUserEvents=!0;new R9.Logging.CommonLogging({preventDefault:!1,doNavigation:!1});
(function(){BrowserConfig=window.BrowserConfig||{};BrowserConfig.getRaw=function(c,a){return window.R9&&R9.globals&&R9.globals.browserCapabilities&&"undefined"!=typeof R9.globals.browserCapabilities[c]?R9.globals.browserCapabilities[c]:a};BrowserConfig.set=function(c,a){"undefined"!=typeof window.R9&&"undefined"!=typeof R9.globals&&"undefined"!=typeof R9.globals.browserCapabilities&&(R9.globals.browserCapabilities[c]=String(a))};BrowserConfig.getString=function(c,a){return String(this.getRaw(c,String(a)))};
BrowserConfig.getBoolean=function(c,a){return"true"==this.getString(c,a)};BrowserConfig.getNumber=function(c,a){return Number(this.getString(c,a))}})();
(function(c){R9.extend("Utils",{BrowserHistory:function(a){if(R9.Utils.BrowserHistory.prototype._Instance)return R9.Utils.BrowserHistory.prototype._Instance;this.options=c.extend({},this.options,a);this.init();R9.Utils.BrowserHistory.prototype._Instance=this}});R9.extend("Utils.BrowserHistory.prototype",{currentState:void 0,isRestoringState:!1,options:{detectState:function(){return null},popStateHandler:function(a,b){},stopCustomHandlingCondition:function(a){return"undefined"!==typeof a},hasState:function(){return!!history.state}},
init:function(){this.options.hasState()?this.currentState=history.state:(this.currentState=this.options.detectState(),history.replaceState(this.currentState,document.title));this.setCustomPopStateListener()},changeState:function(a){this.isRestoringState?this.finishRestoringState():(history.pushState(a,document.title),this.currentState=a,this.setCustomPopStateListener())},setCustomPopStateListener:function(){var a=this;c(window).off("popstate");c(window).on("popstate",function(){a.options.stopCustomHandlingCondition(history.state)?
a.removePopStateListener():(a.isRestoringState=!0,a.options.popStateHandler(a.currentState,history.state),a.currentState=history.state)})},finishRestoringState:function(){this.isRestoringState=!1},removePopStateListener:function(){c(window).off("popstate");c(window).trigger("popstate")}})})(jq||jQuery);
var swfobject=function(){function c(){if(!G){try{var a=v.getElementsByTagName("body")[0].appendChild(v.createElement("span"));a.parentNode.removeChild(a)}catch(O){return}G=!0;for(var a=z.length,b=0;b<a;b++)z[b]()}}function a(a){G?a():z[z.length]=a}function b(a){if("undefined"!=typeof m.addEventListener)m.addEventListener("load",a,!1);else if("undefined"!=typeof v.addEventListener)v.addEventListener("load",a,!1);else if("undefined"!=typeof m.attachEvent)r(m,"onload",a);else if("function"==typeof m.onload){var b=
m.onload;m.onload=function(){b();a()}}else m.onload=a}function d(){var a=v.getElementsByTagName("body")[0],b=v.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),x.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}
function e(){var a=C.length;if(0<a)for(var b=0;b<a;b++){var c=C[b].id,d=C[b].callbackFn,e={success:!1,id:c};if(0<x.pv[0]){var k=q(c);if(k)if(!t(C[b].swfVersion)||x.wk&&312>x.wk)if(C[b].expressInstall&&g()){e={};e.data=C[b].expressInstall;e.width=k.getAttribute("width")||"0";e.height=k.getAttribute("height")||"0";k.getAttribute("class")&&(e.styleclass=k.getAttribute("class"));k.getAttribute("align")&&(e.align=k.getAttribute("align"));for(var p={},k=k.getElementsByTagName("param"),r=k.length,n=0;n<
r;n++)"movie"!=k[n].getAttribute("name").toLowerCase()&&(p[k[n].getAttribute("name")]=k[n].getAttribute("value"));h(e,p,c,d)}else l(k),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else w(c,!0),d&&((c=f(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;(a=q(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function g(){return!J&&t("6.0.65")&&(x.win||x.mac)&&!(x.wk&&312>x.wk)}
function h(a,b,c,d){J=!0;K=d||null;M={success:!1,id:c};var e=q(c);if(e){"OBJECT"==e.nodeName?(H=k(e),I=null):(H=e,I=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";v.title=v.title.slice(0,47)+" - Flash Player Installation";d=x.ie&&x.win?"ActiveX":"PlugIn";d="MMredirectURL\x3d"+m.location.toString().replace(/&/g,"%26")+"\x26MMplayerType\x3d"+
d+"\x26MMdoctitle\x3d"+v.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("\x26"+d):d;x.ie&&x.win&&4!=e.readyState&&(d=v.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());p(a,b,c)}}function l(a){if(x.ie&&x.win&&4!=a.readyState){var b=v.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(k(a),b);a.style.display=
"none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=v.createElement("div");if(x.win&&x.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function p(a,b,c){var d,e=q(c);if(x.wk&&312>x.wk)return d;if(e)if("undefined"==typeof a.id&&
(a.id=c),x.ie&&x.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class\x3d"'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'\x3d"'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='\x3cparam name\x3d"'+h+'" value\x3d"'+b[h]+'" /\x3e');e.outerHTML='\x3cobject classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+"\x3e"+g+"\x3c/object\x3e";E[E.length]=a.id;d=q(a.id)}else{h=v.createElement("object");h.setAttribute("type",
"application/x-shockwave-flash");for(var l in a)a[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?h.setAttribute("class",a[l]):"classid"!=l.toLowerCase()&&h.setAttribute(l,a[l]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,l=b[f],c=v.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",l),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function n(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(x.ie&&x.win?(b.style.display="none",function(){if(4==
b.readyState){var c=q(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function q(a){var b=null;try{b=v.getElementById(a)}catch(O){}return b}function r(a,b,c){a.attachEvent(b,c);D[D.length]=[a,b,c]}function t(a){var b=x.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:
!1}function u(a,b,c,d){if(!x.ie||!x.mac){var e=v.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(L=F=null),F&&L==c||(d=v.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),F=e.appendChild(d),x.ie&&x.win&&"undefined"!=typeof v.styleSheets&&0<v.styleSheets.length&&(F=v.styleSheets[v.styleSheets.length-1]),L=c),x.ie&&x.win?F&&"object"==typeof F.addRule&&F.addRule(a,b):F&&"undefined"!=typeof v.createTextNode&&F.appendChild(v.createTextNode(a+
" {"+b+"}")))}}function w(a,b){N&&(b=b?"visible":"hidden",G&&q(a)?q(a).style.visibility=b:u("#"+a,"visibility:"+b))}function y(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var m=window,v=document,A=navigator,B=!1,z=[function(){B?d():e()}],C=[],E=[],D=[],H,I,K,M,G=!1,J=!1,F,L,N=!0,x=function(){var a="undefined"!=typeof v.getElementById&&"undefined"!=typeof v.getElementsByTagName&&"undefined"!=typeof v.createElement,b=A.userAgent.toLowerCase(),
c=A.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if("undefined"!=typeof A.plugins&&"object"==typeof A.plugins["Shockwave Flash"])!(g=A.plugins["Shockwave Flash"].description)||"undefined"!=typeof A.mimeTypes&&A.mimeTypes["application/x-shockwave-flash"]&&!A.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(B=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,
"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof m.ActiveXObject)try{if(g=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(Q){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){x.w3&&(("undefined"!=typeof v.readyState&&
"complete"==v.readyState||"undefined"==typeof v.readyState&&(v.getElementsByTagName("body")[0]||v.body))&&c(),G||("undefined"!=typeof v.addEventListener&&v.addEventListener("DOMContentLoaded",c,!1),x.ie&&x.win&&(v.attachEvent("onreadystatechange",function(){"complete"==v.readyState&&(v.detachEvent("onreadystatechange",arguments.callee),c())}),m==top&&function(){if(!G){try{v.documentElement.doScroll("left")}catch(P){setTimeout(arguments.callee,0);return}c()}}()),x.wk&&function(){G||(/loaded|complete/.test(v.readyState)?
c():setTimeout(arguments.callee,0))}(),b(c)))})();(function(){x.ie&&x.win&&window.attachEvent("onunload",function(){for(var a=D.length,b=0;b<a;b++)D[b][0].detachEvent(D[b][1],D[b][2]);a=E.length;for(b=0;b<a;b++)n(E[b]);for(var c in x)x[c]=null;x=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(x.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;C[C.length]=e;w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(x.w3)return f(a)},
embedSWF:function(b,c,d,e,f,l,k,n,r,q){var u={success:!1,id:c};x.w3&&!(x.wk&&312>x.wk)&&b&&c&&d&&e&&f?(w(c,!1),a(function(){d+="";e+="";var a={};if(r&&"object"===typeof r)for(var m in r)a[m]=r[m];a.data=b;a.width=d;a.height=e;m={};if(n&&"object"===typeof n)for(var v in n)m[v]=n[v];if(k&&"object"===typeof k)for(var y in k)m.flashvars="undefined"!=typeof m.flashvars?m.flashvars+("\x26"+y+"\x3d"+k[y]):y+"\x3d"+k[y];if(t(f))v=p(a,m,c),a.id==c&&w(c,!0),u.success=!0,u.ref=v;else{if(l&&g()){a.data=l;h(a,
m,c,q);return}w(c,!0)}q&&q(u)})):q&&q(u)},switchOffAutoHideShow:function(){N=!1},ua:x,getFlashPlayerVersion:function(){return{major:x.pv[0],minor:x.pv[1],release:x.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,b,c){if(x.w3)return p(a,b,c)},showExpressInstall:function(a,b,c,d){x.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){x.w3&&n(a)},createCSS:function(a,b,c,d){x.w3&&u(a,b,c,d)},addDomLoadEvent:a,addLoadEvent:b,getQueryParamValue:function(a){var b=v.location.search||v.location.hash;if(b){/\?/.test(b)&&
(b=b.split("?")[1]);if(null==a)return y(b);for(var b=b.split("\x26"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("\x3d"))==a)return y(b[c].substring(b[c].indexOf("\x3d")+1))}return""},expressInstallCallback:function(){if(J){var a=q("SWFObjectExprInst");a&&H&&(a.parentNode.replaceChild(H,a),I&&(w(I,!0),x.ie&&x.win&&(H.style.display="block")),K&&K(M));J=!1}}}}();
(function(c){R9.extend("Utils.ResourcePreloader",{loadResources:function(a,b){var c,e;a&&a.length||b&&b();c=a.length;b&&(e=function(){c--;0==c&&b()});for(var f=0;f<a.length;f++)e?jq.ajax(a[f]).done(e):jq.ajax(a[f])}})})(jq||jQuery);
(function(c){R9.extend("App",{Application:function(a){this.options=c.extend(!0,{},this.options,a||{});this.init()}});R9.extend("App.Application",{});R9.extend("App.Application.prototype",{options:{useDefaultNavigation:!1,useClientCache:!0,cacheInitialPage:!1,maxCacheEntrySize:10,maxCacheTTL:12E5,ignoreUrls:[]},router:null,pageCache:null,setContentInProgress:!1,setContentRequest:null,useAbsoluteUrl:!0,init:function(){var a=this;this.router=new Backbone.Router;this.pageCache=new R9.Common.Cache({maxLifeSpam:this.options.maxCacheTTL,
defaultLifeSpam:this.options.maxCacheTTL,garbageCollectionTime:6E4,maxCacheEntrySize:this.options.maxCacheEntrySize});this.options.cacheInitialPage&&!1!==this.options.useClientCache&&this.cacheCurrentPage();this.router.route(/^(.*)$/,function(b){a.defaultRoute(b)});this.router.route(/^((flights|hotels|cars|deals|vacations)\/(.*))$/,function(b,c,e){a.searchRoute(b,c,e)});this.router.route(/^((flights|hotels|cars|deals|vacations)\/?)$/,function(b,c){a.frontDoorRoute(b,c)});Backbone.history.start({pushState:!0,
silent:!0,hashChange:!1})},navigate:function(a,b){if(a){if(!this.supportsAjax()||this.options.useDefaultNavigation)return this.defaultNavigation(a);var c=this.options.useClientCache;b&&b.reload&&(Backbone.history.fragment=null,this.options.useClientCache=!1);try{0!=a.indexOf("/")&&(this.useAbsoluteUrl=!1),Backbone.history.loadUrl(a)}finally{this.options.useClientCache=c}}},frontDoorRoute:function(a,b){if(this.isIgnored(a))return this.defaultNavigation(a);a="/"+b;this.options.beforeNavigate&&this.options.beforeNavigate.call(this,
"fd",b,a);this.loadPage(a)},searchRoute:function(a,b,c){if(this.isIgnored(a))return this.defaultNavigation(a);a="/"+b+"/"+c;this.options.beforeNavigate&&this.options.beforeNavigate.call(this,"rp",b,a);R9.ViewState.getInstance().reset();"undefined"!=typeof FilterList&&FilterList&&FilterList.reset();this.loadPage(a)},defaultRoute:function(a){if(this.isIgnored(a))return this.defaultNavigation(a);a=(this.useAbsoluteUrl?"/":"")+(a||"");this.options.beforeNavigate&&this.options.beforeNavigate.call(this,
null,null,a);this.loadPage(a)},supportsAjax:function(){var a=window.history&&window.history.pushState,b=jq("\x3cbody\x3e\x3c/body\x3e");b[0].innerHTML="\x3chtml\x3e\x3chead\x3e\x3cstyle\x3e\x3c/style\x3e\x3c/head\x3e\x3c/html\x3e";b=0<b.find("style").length;return a&&b},loadPage:function(a){var b,c=this;if(!this.supportsAjax()||this.options.useDefaultNavigation)return this.defaultNavigation(a);this.request&&(this.request.abort(),this.request=null);var e=!1!==this.options.useClientCache;if(e&&(b=this.getCachedContent(a))){this.setContent(b,
!0,!1,null);return}var f=(new Date).getTime();this.request=jq.ajax({url:a,dataType:"text"}).done(function(d){var g=(new Date).getTime();b=c.prepareContent(a,d);e&&c.cacheContent(a,b);c.setContent(b,!1,!1,{start_t:f,resp_t:g});c.request=null})},cachePage:function(a){var b=this;this.supportsAjax()&&!1!==this.options.useClientCache&&jq.ajax({url:a,dataType:"text"}).done(function(c){c=b.prepareContent(a,c);b.cacheContent(a,c);b.setContent(c,!0,!0,null)})},cachePageMerge:function(a){var b=this;this.supportsAjax()&&
!1!==this.options.useClientCache&&jq.ajax({url:a,dataType:"text",data:{forcache:!0}}).done(function(c){c=b.prepareContent(a,c);c.body=document.body;b.cacheContent(a,c)})},cacheCurrentPage:function(){var a=this;this.supportsAjax()&&!1!==this.options.useClientCache&&jq(document).ready(function(){var b=document.location.pathname,c=a.prepareContent(b,document.documentElement.outerHTML);a.cacheContent(b,c)})},getCachedContent:function(a){var b=this.pageCache.get(a);if(b&&b.url&&b.body&&b.head&&b.scripts)return b;
this.pageCache.set(a,null);return null},cacheContent:function(a,b){b&&b.url&&b.body&&b.head&&b.scripts&&this.pageCache.set(a,b)},prepareContent:function(a,b){var c,e,f;if("string"==typeof b){c=jq("\x3chtml\x3e\x3c/html\x3e");e=jq("\x3chead\x3e\x3c/head\x3e");f=jq("\x3cbody\x3e\x3c/body\x3e");f[0].innerHTML=b;var g;jq.each({head:e,body:f},function(a,c){(g=b.match(new RegExp("\x3c"+a+"([^\x3c\x3e]*)\x3e","i")))&&jq.each(jq("\x3cdiv".concat(g[1],"/\x3e"))[0].attributes,function(a,b){c.attr(b.nodeName,
b.nodeValue)})});e.append(f.find("link,style").detach());e.append(f.find("meta").detach());e.append(f.find("title").detach());c[0].appendChild(f[0]);c[0].appendChild(e[0])}else c=jq(b);e=c.find("body");f=c.find("head");c=c.find("script").not("type\x3dtext/x-dot-template").detach();return{url:a,body:e[0],head:f[0],scripts:c}},setContent:function(a,b,c,e){var d=this;if(this.setContentInProgress)this.setContentRequest=function(){d.setContent(a,b,e)};else{this.setContentInProgress=!0;a={url:a.url,body:a.body,
head:a.head.cloneNode(!0),scripts:a.scripts};this.options.beforeHtmlSet&&this.options.beforeHtmlSet.call(this,a,b,c);var g=function(c){var f=document.documentElement,g=document.getElementsByTagName("head")[0],h=document.body,n={},q={},r=[],t={},u;if(!c){jq("style[type\x3d'text/css'][data-href],link[rel\x3d'stylesheet']",a.head).each(function(){u=this.href||jq(this).attr("data-href");n[u]=this});jq("style[type\x3d'text/css'][data-href],link[rel\x3d'stylesheet']",g).each(function(){u=this.href||jq(this).attr("data-href");
q[u]=this});for(u in n)"link"==n[u].nodeName.toLowerCase()&&(q[u]||r.push(u));for(u in q)n[u]||(t[u]=q[u])}R9.Utils.ResourcePreloader.loadResources(r,function(){d.options.beforeCssReplace&&d.options.beforeCssReplace.call(d,a,b,c,{head:g,body:h});if(!c){for(u in t)jq(t[u]).detach();for(u in n)g.appendChild(n[u]);for(u in q)t[u]||jq(q[u]).detach()}var l=jq("title",g)[0],k=jq("title",a.head)[0];l&&k?(jq(l).detach(),g.appendChild(k)):k&&g.appendChild(k);f.replaceChild(a.body,h);var p=(new Date).getTime(),
l=function(){d.options.afterHtmlSet&&d.options.afterHtmlSet.call(d,a,b,c,{head:g,body:h});d.options.beforeScripts&&d.options.beforeScripts.call(d,a,b,c);d.updateBrowserLocationWithoutNavigation(a.url);d.cachedEval=b;jq(a.scripts).each(function(){d.evalScript(this)});d.options.afterScripts&&d.options.afterScripts.call(d,a,b,c);d.cachedEval=null;var f=(new Date).getTime();e&&window.searchid&&d.logTiming(window.searchid,e.start_t,e.resp_t,p,f);d.setContentInProgress=!1;d.setContentRequest&&(f=d.setContentRequest,
d.setContentRequest=null,f())};c?l():setTimeout(l,100)})};b&&!c?setTimeout(g,100):g(c)}},evalScript:function(a){try{var b=a.src;if(b){var c=jq(a).attr("data-tag");this.isLoaded(b)&&"common"==c||jq.ajax({url:b,async:!1,dataType:"script"})}else jq.globalEval(a.text||a.textContent||a.innerHTML||"");a.parentNode&&a.parentNode.removeChild(a)}catch(e){R9&&R9.utils&&R9.utils.log("Error in script eval.",e,a)}},isLoaded:function(a){if(window.R9App){var b=window.R9App.scripts;if(b){var c=a.indexOf("?");-1!=
c&&(a=a.substring(0,c));for(var e in b)if(b.hasOwnProperty(e)&&-1!==a.indexOf(e,a.length-e.length))return!0}}return!1},logTiming:function(a,b,c,e,f){jq.post("/s/sparkle",{searchid:a,action:"ss",rt:c-b,ht:e-b,st:f-b})},isIgnored:function(a){var b=0,c=this.options.ignoreUrls;if(null!==a)for(;b<c.length;b++)if(a.match(new RegExp(c[b])))return!0;return!1},defaultNavigation:function(a){-1==a.indexOf("://")?(a=("/"+a).replace(/\/+/g,"/"),document.location.href=document.location.protocol+"//"+document.location.host+
a):document.location.href=a;return!1},updateBrowserLocationWithoutNavigation:function(a){Backbone.history.fragment=null;this.router.navigate(a,{trigger:!1})},updateBrowserLocationWithoutNavigationAndHistory:function(a){Backbone.history.fragment=null;this.router.navigate(a,{trigger:!1,replace:!0})}})})(jq||jQuery);
(function(c){R9.extend("Tabs",{SearchTabs:function(a){this.options=c.extend(!0,{},this.options,a||{});this.tabArea=c(this.options.tabAreaSelector)}});R9.extend("Tabs.SearchTabs",{lastKnownTabs:null,newTabSelected:function(a,b){return(new R9.Tabs.SearchTabs(b)).selectNewTab(a)},setLastKnownTabs:function(a){a=c(a.body).find(R9.Tabs.SearchTabs.prototype.options.tabsContainer);var b=document.createDocumentFragment();0<a.size()&&b.appendChild(a[0].cloneNode(!0));this.lastKnownTabs=b},clearLastKnownTabs:function(){this.lastKnownTabs=
null},setLastKnownTabsFromDocument:function(){var a={};a.body=document.body;R9.Tabs.SearchTabs.setLastKnownTabs(a)},restoreLastKnownTabs:function(a){if(null!=this.lastKnownTabs){for(var b=this.lastKnownTabs.querySelectorAll(".pageTab.transient"),d=0;d<b.length;d++)b[d].parentNode.removeChild(b[d]);c(".pageTab",this.lastKnownTabs.firstChild).removeClass("selected").removeClass("loading");b=c(a.body);d=b.find(".pageTab.transient");if(d.length){d.addClass("selected");var e=this.lastKnownTabs.querySelector(R9.Tabs.SearchTabs.prototype.options.tabsContainer),
f=this.lastKnownTabs.querySelector(R9.Tabs.SearchTabs.prototype.options.closeAllTabsSelector);null==f&&(f=e.lastElementChild);e.insertBefore(d[0],f)}else c(".pageTab",this.lastKnownTabs.firstChild).each(function(b){b=c(this);b.data("taburl")==a.url&&b.addClass("selected")});d=b.find(R9.Tabs.SearchTabs.prototype.options.tabAreaSelector)[0];null!=d&&(b=b.find(R9.Tabs.SearchTabs.prototype.options.tabsContainer),0==b.length?d.appendChild(this.lastKnownTabs.cloneNode(!0)):(d.replaceChild(this.lastKnownTabs.cloneNode(!0),
b[0]),1==c(d).find(".pageTab").length?c(d).find(".pageTabs").addClass("hidden"):c(d).find(".pageTabs").removeClass("hidden")),R9.Tabs.SearchTabs.adjustTabSizeToFitBar(!1))}},adjustTabSizeToFitBar:function(a){var b=c(R9.Tabs.SearchTabs.prototype.options.tabsContainer),d=b.find(".pageTabCloseAll");a&&(b.children().css("width","auto"),b.children().css("max-width","none"),b.removeClass("compressed"),d.css("width","30px"));if(1==b.length&&b[0].scrollHeight>1.5*b[0].offsetHeight){b.addClass("compressed");
a=b.children(".pageTab:not(.selected)").not(".pageTabCloseAll");var b=b[0].offsetWidth-(1==d.length?d.width():0)-1,d=c(a).length,e=c(".pageTab.selected").width()/d,b=Math.floor((b-2*(d+1))/d)-Math.ceil(e)-1;c(a).css({width:b+"px","max-width":"none"})}},removeTab:function(a){a=c(a).closest(".pageTab");var b=a.hasClass("selected");if(-1!=a.data("permtabindex")&&R9.globals&&R9.globals.formtoken){var d={tabUrl:a.data("taburl"),formtoken:R9.globals.formtoken};c.post("/s/run/tabs/remove",d)}if(b){var e=
a.next(".pageTab");if(0==e.length||e.hasClass("pageTabCloseAll"))e=a.prev(".pageTab");0==e.length&&(document.location.href="/");a.remove();R9.Tabs.SearchTabs.setLastKnownTabsFromDocument();jq(".pageTabs .closeX").remove();window.setTimeout(function(){e.trigger("click")},50)}else a.remove(),R9.Tabs.SearchTabs.adjustTabSizeToFitBar(!0),R9.Tabs.SearchTabs.setLastKnownTabsFromDocument()},changeCurrentTabUrl:function(a,b){var d=c(R9.Tabs.SearchTabs.prototype.options.tabsContainer).find(".pageTab.selected"),
e=d.data("taburl");d.attr("taburl",a).data("taburl",a);R9.Tabs.SearchTabs.setLastKnownTabsFromDocument();0<d.length&&-1!=d.data("permtabindex")&&R9.globals.formtoken&&c.post("/s/run/tabs/replace",{oldTabUrl:e,newTabUrl:a,formtoken:R9.globals.formtoken},b)},removeAllTabs:function(){c(R9.Tabs.SearchTabs.prototype.options.tabAreaSelector).empty();R9.Tabs.SearchTabs.clearLastKnownTabs();c.post("/s/run/tabs/removeAll",{formtoken:R9.globals.formtoken})},bindEvents:function(){c(".pageTabs .closeX").click(function(a){a.stopPropagation();
R9.Tabs.SearchTabs.removeTab(this)});c(".pageTab").hasClass("hoverable")||c(".pageTab .tabText").tipTip();R9.Tabs.SearchTabs.adjustTabSizeToFitBar(!1);c(window).resize(function(){R9.Tabs.SearchTabs.adjustTabSizeToFitBar(!0)})}});R9.extend("Tabs.SearchTabs.prototype",{tabArea:null,options:{tabAreaSelector:".pageTabsOuter",tabsContainer:".pageTabs",closeAllTabsSelector:".pageTabCloseAll",message:"Loading results...",vsLoggingEnabled:!0},selectNewTab:function(a){a=c(a);R9.Analytics.api.trackEvent("tabclick/"+
a.closest(".pageTab").data("tablogging"));a.closest(".pageTab").hasClass("selected")||(this.tabArea.find(".pageTab.selected").removeClass("selected"),a.closest(".pageTab").addClass("selected").addClass("loading"));"undefined"===typeof Streaming||Streaming.done||(Streaming.reset(),Streaming.stopClientTimeout())}})})(jq||jQuery);
(function(c){c.logger=function(a){return{componentPath:a,componentPathString:"%c %s %c".format(this.componentPath),info:function(){window.R9Log?window.R9Log.info.apply(window.R9Log,["dev",arguments]):window.console.info.apply(window.console,arguments)},debug:function(){window.R9Log?window.R9Log.debug.apply(window.R9Log,["dev",arguments]):window.console.debug.apply(window.console,arguments)},error:function(){window.R9Log?window.R9Log.error.apply(window.R9Log,["dev",arguments]):window.console.error.apply(window.console,
arguments)},warn:function(){window.R9Log?window.R9Log.warn.apply(window.R9Log,["dev",arguments]):(window.console.warn||window.console.error).apply(window.console,arguments)},time:function(a){window.console.time&&window.R9.globals.showComponentLog&&window.console.time(a+(this.componentPath?":"+this.componentPath:""))},timeEnd:function(a){window.console.timeEnd&&window.R9.globals.showComponentLog&&window.console.timeEnd(a+(this.componentPath?":"+this.componentPath:""))},console:function(){c.globals.showComponentLog&&
(1===arguments.length&&"string"===typeof arguments[0]?window.console.log("%s %s".format(this.consoleFormatString,arguments[0]),"background: rgba(10, 10, 10, .9); color: #f49100","background: rgba(10,10,10, .9); color: #d3d1a1; text-shadow: 0 1px 6px rgba(255,255,255,0.81)"):this.consoleGroup.apply(this,arguments))},consoleGroup:function(){window.console.log("--- %s ---".format(this.consoleFormatString),"background: rgba(10, 10, 10, .9); color: #f49100","");try{console.group&&console.group()||console.log();
for(var a=0;a<arguments.length;a++)"string"===typeof arguments[a]?window.console.log("%c %s".format(arguments[a]),"background: rgba(10,10,10, .9); color: #d3d1a1; text-shadow: 0 1px 6px rgba(255,255,255,0.81)"):window.console.log(arguments[a]);console.groupEnd&&console.groupEnd()}catch(d){console.groupEnd&&console.groupEnd()}}}}})(R9);
(function(c,a){c.extend("UILogger",!0,{log:function(b,c,e,f,g,h,l){a.ajax({url:"/r9/log/uilogger",data:{type:b,msg:c,url:e,line:f,evt:g,cstack:h},type:"GET",complete:function(){"function"===typeof l&&l()}})},lookup:function(a,c,e,f){a.replace(c,function(a,b,c){f+=e+b;return a});return f},logAjax:function(a,c,e,f,g){e="Request Status Code\x3d"+(c&&c.status?c.status:"unknown")+" Status\x3d"+(e||"unknown")+" Error\x3d"+(f||"unknown");if(c=c.responseText)e=this.lookup(c,/name="dt" value="([^"]*)">/g,
" ODT\x3d",e),e=this.lookup(c,/name="cl" value="([^"]*)">/g," OCL\x3d",e),e=this.lookup(c,/name="rc" value="([^"]*)">/g," OEN\x3d",e);window.searchid&&(e+=" SearchID\x3d"+window.searchid);this.log(a,e,location.href,null,null,null,g)},logTimeout:function(a,c,e){this.log(a,c,location.href,null,null,null,e)}})})(window.R9,window.jq||window.jQuery);
(function(c){c=c||{};c.CompareTo=c.CompareTo||{};window.R9=c;var a={};(function(a){a.apply=function(a,b){if(a&&b&&"object"===typeof b)for(var c in b)a[c]=b[c];return a};a.applyIf=function(a,b){if(a&&b&&"object"===typeof b)for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}})(a);(function(a){a.extend=function(b,c){var d={},e=!1,h=0,l=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],h++);for(;h<l;h++){var k=void 0,p=arguments[h];for(k in p)Object.prototype.hasOwnProperty.call(p,
k)&&(e&&"[object Object]"===Object.prototype.toString.call(p[k])?d[k]=a.extend(!0,d[k],p[k]):d[k]=p[k])}return d}})(a);(function(a){var b=Array.prototype.slice,c;a.Functions=c={bind:function(a,c,d,e){return 2>arguments.length?a:3>arguments.length?a.bind(c):4>arguments.length?Function.prototype.bind.apply(a,[].concat(c,d)):function(){var f=d||arguments;!0===e&&(f=b.call(arguments,0),f=f.concat(d));return a.apply(c||global,f)}},pass:function(a,b,c){return function(){var d=b.slice();d.push.apply(d,arguments);
return a.apply(c||this,d)}},createBarrier:function(a,b,c){return function(){--a||b.apply(c,arguments)}},processSequenceWithTimeOut:function(a,b,d,e,k){var f=a.shift();f&&(k=d||e||k?c.bind(f,d,e,k):f,k(),setTimeout(function(){c.processSequenceWithTimeOut(a,b,d,e)},b||1E3))}}})(a);(function(a){var b=Object.create||function(){var a=function(){};return function(b){a.prototype=b;return new a}}(),c=[],f,g;a.Base=g=function(){};a.apply(g,{$staticsMembers:c,$_isClass:!0,deepExtend:!1,extend:function(a){var c,
d;c=this.prototype=b(a.prototype);if(!a.$_isClass)for(d in a=g.prototype,a)a.hasOwnProperty(d)&&d in c&&(c[d]=a[d])},addMembers:function(b,c){c=c?this:this.prototype;var d,e;for(d in b)b.hasOwnProperty(d)&&(e=b[d],"object"===typeof e&&"undefined"!==typeof c.deepExtend&&!0===c.deepExtend&&(e=a.extend(!0,{},c[d]||{},e||{})),c[d]=e);return this},mixin:function(c,d){var e,f,g;if("string"!==typeof c){for(e in c)c.hasOwnProperty(e)&&this.mixin(e,c[e]);return this}if(!d)return this;d=d.prototype;e=this.prototype;
e.hasOwnProperty("mixins")||(e.mixins="mixins"in e?b(e.mixins):{});for(f in d)d.hasOwnProperty(f)&&(g=d[f],"mixins"===f?a.applyIf(e.mixins,g):"mixinId"!==f&&void 0===e[f]&&(e[f]=g));e.mixins[c]=d;return this}});for(f in g)g.hasOwnProperty(f)&&c.push(f);g.$staticsMembers=c;g.addMembers({$className:"CompareTo.Base",deepExtend:!0,constructor:function(a){}})})(a);(function(a){function b(){return function(){return this.constructor.apply(this,arguments)||null}}var c,f=a.Base,g=f.$staticsMembers;a.ClassCreator=
c=function(a,b,d){b||(b={});var e=c.createClass(a);c.process(a,b,d);return e};a.apply(c,{makeConstructor:b,onBeforeCreated:function(a,b,c){a.addMembers(b);c.onCreated.call(a,a)},createClass:function(a){var c,d=g.length;for(a||(a=b());d--;)c=g[d],a[c]=f[c];return a},process:function(a,b,d){var e=c.orderPreprocessors,f=c.preprocessors,g=[],h,l,k={onBeforeCreated:c.onBeforeCreated,preprocessors:g,onCreated:d};h=0;for(l=e.length;h<l;h++)d=e[h],"string"===typeof d&&(d=f[d],"function"===typeof d&&g.push(d));
k.preprocessors=g;c.doProcess(a,b,k)},doProcess:function(a,b,d){for(var e=d.preprocessors,f=e.shift(),g=c.doProcess;f;f=e.shift())if(!1===f.call(c,a,b,d,g))return;d.onBeforeCreated.apply(c,arguments)},orderPreprocessors:[],preprocessors:{},registerProcessor:function(a,b,d,e){d||(d="last");c.preprocessors[a]=b;c.setPreprocessorPosition(a,d,e);return c},setPreprocessorPosition:function(a,b,d){var e=c.orderPreprocessors,f;if("string"===typeof b){if("first"===b)return e.unshift(a),c;if("last"===b)return e.push(a),
c;f="after"===b?1:-1}b=e.indexOf(d);-1!==b?e.splice(Math.max(0,b+f),0,a):e.push(a);return c}});c.registerProcessor("extend",function(a,b){var c=f.prototype,d=b.extend,e;if(d&&"string"===typeof d)throw Error("Extend class not found maybe you need to change extending order?");delete b.extend;b=d&&d!==Object?d:f;if(!b.$_isClass)for(e in d=b.prototype,c)c.hasOwnProperty(e)&&!d[e]&&(d[e]=c[e]);a.extend(b)});c.registerProcessor("mixins",function(a,b,c){if(b.mixins){var d=b.mixins,e=c.onCreated;delete b.mixins;
c.onCreated=function(){c.onCreated=e;a.mixin(d);return c.onCreated.apply(this,arguments)}}})})(a);(function(a){var b=a.ClassCreator,c=a.Functions,f,g=[],h={};a.ClassManager=f={classes:{},enableNamespaceParseCache:!0,namespaceParseCache:{},dependencies:{},parseNamespace:function(b){if("string"!==typeof b)throw Error("[Manager#parseNamespace] Invalid namespace, must be a string");var c=f.namespaceParseCache,d;if(f.enableNamespaceParseCache&&c.hasOwnProperty(b))return c[b];d=[];d.push(a);d=d.concat(b.split("."));
f.enableNamespaceParseCache&&(c[b]=d);return d},setNamespace:function(b,c){var d=a;b=f.parseNamespace(b);var e=b.length-1,g=b[e],h,l;for(h=0;h<e;h++)l=b[h],"string"!==typeof l?d=l:(d[l]||(d[l]={}),d=d[l]);d[g]=c;return d[g]},set:function(a,b){f.classes[a]=f.setNamespace(a,b);return f},get:function(b){var c=f.classes,d,e,g;if(c[b])return c[b];c=a;b=f.parseNamespace(b);e=0;for(g=b.length;e<g;e++)if(d=b[e],"string"!==typeof d)c=d;else{if(!c||!c[d])return null;c=c[d]}return c},getDependencies:function(a){var b=
f.dependencies;if(b[a])return b[a];throw Error("Can't get class"+a);},setDependency:function(a,b){var c=f.getName(a);f.dependencies[c]||(f.dependencies[c]={});f.dependencies[c][b]=a[b]},isCreated:function(a){if(!f.get(a,!1))return!1;f.triggerCreated(a);return!0},getName:function(a){return a&&a.$className||""},createClass:function(a,c){if(null!==a&&"string"!==typeof a)throw Error("Invalid class name '"+a+"' specified, must be a non-empty string");var d=b.makeConstructor();c.$className=a;return b(d,
c,function(b){a&&f.set(a,b);c.singleton&&f.set(a,new b);a&&f.triggerCreated(a)})},notify:function(a,b,c){var d=[a],e,f,g,h,l;e=0;for(f=b.length;e<f;e++)h=b[e],h.fn.call(h.scope,a);e=0;for(f=d.length;e<f;e++)if(l=d[e],b=c[l]){a=0;for(g=b.length;a<g;a++)h=b[a],h.fn.call(h.scope,l);delete c[l]}},onCreated:function(a,b,c){f.addListener(a,b,c,g,h)},triggerCreated:function(a){f.notify(a,g,h)},addListener:function(a,b,d,e,g){if(d instanceof Array){var h=c.createBarrier(d.length,a,b);a=0;for(b=d.length;a<
b;a++)f.addListener(h,null,d[a],e,g)}else h={fn:a,scope:b},d?f.isCreated(d)?a.call(b,d):(g[d]||(g[d]=[]),g[d].push(h)):e.push(h)}};a.apply(a,{define:function(a,b,c){return f.createClass.apply(f,arguments)}})})(a);(function(a){var b=a.ClassCreator,c=a.ClassManager,f=["extend","requires","mixins"],g=function(){};a.apply(g,{require:function(a,b){var d=[],e,f,h;e=0;for(f=a.length;e<f;e++)h=a[e],c.isCreated(h)||d.push(h);if(d.length)c.onCreated(function(){b&&b()},g,a);else b&&b()}});var h=function(a,b){var c,
d,e;b||(b=[]);if(!a)return b;"string"===typeof a&&b.push(a);if(a instanceof Array)for(d=a.length,e=0;e<d;e++)c=a[e],"string"===typeof c&&b.push(c);if("string"!==typeof a&&!(a instanceof Array)&&"function"!==typeof a)for(e in a)a.hasOwnProperty(e)&&(c=a[e],"string"===typeof c&&b.push(c));return b};b.registerProcessor("loader",function(a,b,d,e){var l=this,k=[],p,n,w,y,m=[];p=0;for(n=f.length;p<n;p++)w=f[p],b.hasOwnProperty(w)&&(y=b[w],k=h(y,k));if(0!==k.length)return g.require(k,function(){p=0;for(n=
f.length;p<n;p++)if(w=f[p],b.hasOwnProperty(w)){y=b[w];var g=void 0,h,k,r=b,t=w,q=y,u=m;u||(u=[]);if(q){"string"===typeof q&&(k=c.get(q),r[t]=k,u.push(k));if(q instanceof Array)for(h=q.length,g=0;g<h;g++)k=q[g],"string"===typeof k&&(k=c.get(k),r[t][g]=k,u.push(k));if("string"!==typeof q&&!(q instanceof Array)&&"function"!==typeof q)for(g in q)q.hasOwnProperty(g)&&(k=q[g],"string"===typeof k&&(k=c.get(k),r[t][g]=k,u.push(k)))}m=u;c.setDependency(b,w)}e.call(l,a,b,d)}),!1},"first")})(a);(function(a){a.define("BrowserConfig",
{singleton:!0,getString:function(a,b){return c.globals&&c.globals.browserCapabilities&&"undefined"!==typeof c.globals.browserCapabilities[a]?c.globals.browserCapabilities[a]:b},getBoolean:function(a,b){return(a=this.getString(a,""))?"true"===a.toLowerCase():b},getInt:function(a,b){return(a=this.getString(a,""))?parseInt(a):b}})})(a);(function(a){a.define("Config",{singleton:!0,getString:function(a,b){return c.config&&"function"===typeof c.config.getString?c.config.getString(a,b):b},getBoolean:function(a,
b){return c.config&&"function"===typeof c.config.getBoolean?c.config.getBoolean(a,b):b},getInt:function(a,b){return c.config&&"function"===typeof c.config.getInt?c.config.getInt(a,b):b}})})(a);(function(a){var b=/[^\x20\t\r\n\f]+/g,c=function(a){return(a.match(b)||[]).join(" ")},f=function(a){return a.getAttribute&&a.getAttribute("class")||""};(function(a){"function"!==typeof a.matches&&(a.matches=a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);
for(var b=0;a[b]&&a[b]!==this;)++b;return!!a[b]});"function"!==typeof a.closest&&(a.closest=function(a){for(var b=this;b&&1===b.nodeType;){if(b.matches(a))return b;b=b.parentNode}return null})})(window.Element.prototype);a.define("Dom.Element",{singleton:!0,hasClass:function(a,b){return a?(b=" "+b+" ",1===a.nodeType&&-1<(" "+c(f(a))+" ").indexOf(b)):!1},addClass:function(a,d){if(a){var e,g,h,n;e=f(a);if(g=1===a.nodeType&&" "+c(e)+" "){h=d.match(b)||[];for(n=0;d=h[n++];)0>g.indexOf(" "+d+" ")&&(g+=
d+" ");g=c(g);e!==g&&a.setAttribute("class",g)}}},removeClass:function(a,d){if(a){var e,g,h,n;e=f(a);if(g=1===a.nodeType&&" "+c(e)+" "){h=0;for(n=d.match(b)||[];d=n[h++];)for(;-1<g.indexOf(" "+d+" ");)g=g.replace(" "+d+" "," ");g=c(g);e!==g&&a.setAttribute("class",g)}}},children:function(a){var b=[];for(a=a.firstChild;a;a=a.nextSibling)1===a.nodeType&&b.push(a);return b},isLastChild:function(a){if(a.parentNode){var b=a.parentNode.childNodes;return b[b.length-1]===a}throw"There is not parent node in element";
},closest:function(a,b){return a.closest(b)},isVisible:function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}})})(a);(function(a){var b=document.createElement("div"),c;c=b.addEventListener?function(a,b,c){"undefined"===typeof a._eventListeners&&(a._eventListeners=[]);a.addEventListener(b,c,!1);var d=a._eventListeners;d.push({type:b,fn:c});a._eventListeners=d}:function(){};var f=function(a,b){return"function"===typeof a.matches?a.matches(b):"function"===typeof a.webkitMatchesSelector?
a.webkitMatchesSelector(b):"function"===typeof a.mozMatchsSelector?a.mozMatchesSelector(b):"function"===typeof a.msMatchesSelector?a.msMatchesSelector(b):!1};a.define("Dom.Event",{singleton:!0,addEvent:c,removeEvent:b.removeEventListener?function(a,b,c){if("undefined"!==typeof a._eventListeners){a.removeEventListener(b,c);for(var d=a._eventListeners,e,f=[],g=0,h=d.length;g<h;g++)e=d[g],e.type!==b&&e.fn!==c&&f.push(d[g]);a._eventListeners=d}}:function(){},removeAllEvents:function(a,b){if("undefined"!==
typeof a._eventListeners){for(var c=a._eventListeners||[],d,e=[],f=0,g=c.length;f<g;f++)d=c[f],b&&d.type!==b?e.push(d):a.removeEventListener(d.type,d.fn);a._eventListeners=c}},delegateEvent:function(a,b,d,e){c(a,b,function(b){for(var c=b.target;a!==c&&!f(c,"html");){if(f(c,d)){e(c,b);break}c=c.parentNode}})}})})(a);(function(a){var b=function(a){var b={},c,d=a.length;for(c=0;c<d;c++)c in a&&(b[c]=a[c]);return b},c=/#.*$/,f,g,h=/\?/,l=/([?&])_=[^&]*/;a.define("Helper.Url.Param",{singleton:!0,update:function(a,
b,d){b&&"string"!==b&&(b=this.get(b));a||(a="");f=a.replace(c,"");g=a.slice(f.length);b&&(f+=(h.test(f)?"\x26":"?")+b);!1===d&&(f=f.replace(l,"$1"),g=(h.test(f)?"\x26":"?")+"_\x3d"+(new Date).getTime()+g);return f+g},get:function(a,c){var d=[],e,f,g,h=Object.prototype.hasOwnProperty;for(f in a)if(h.call(a,f)){g=a[f];e=c?c+"["+f+"]":f;switch(typeof g){case "object":e=this.get(g,e);break;case "array":e=this.get(b(g),e);break;default:e=e+"\x3d"+encodeURIComponent(g)}g&&d.push(e)}return d.join("\x26")}})})(a);
(function(a){a.define("Helper.Browser",{singleton:!0,chromePDFInstalled:null,isChromePDFInstalled:function(){if(null===this.chromePDFInstalled){var a=!1,b=!1,c=navigator.plugins,g,h;for(h=0;g=c[h];h++)"Chrome PDF Viewer"===g.name&&"internal-pdf-viewer"===g.filename&&(a=!0),"Chrome PDF Viewer"===g.name&&"mhjfbmdgcfjbbpaeojofohoefgiehjai"===g.filename&&(b=!0);this.chromePDFInstalled=a&&b}return this.chromePDFInstalled},isDevToolsOpened:function(){var a=!1,b=new Image;Object.defineProperty(b,"id",{get:function(){a=
!0}});console.debug("%c",b);return a}})})(a);(function(a){var b={0:200,1223:204};a.define("Helper.HttpRequest",{singleton:!0,handleResponses:function(a){if(a&&a.text&&"string"===typeof a.text)try{return{state:"success",data:JSON.parse(a.text)}}catch(f){return{state:"parsererror",error:f}}return{state:"success",data:a}},sanitizeResponse:function(a,b,c){var d,e=b;b=200<=a&&300>a||304===a;c=this.handleResponses(c);if(b)204===a?e="nocontent":304===a?e="notmodified":(e=c.state,d=c.error,b=!d);else if(d=
e,a||!e)e="error";return{success:b,status:a,data:c.data,error:d,statusText:e}},request:function(a){var c,d=this,e,l,k=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");k.open(a.type,a.url,a.async);a.headers||(a.headers={});a.crossDomain||a.headers["X-Requested-With"]||(a.headers["X-Requested-With"]="XMLHttpRequest");for(c in a.headers)a.headers.hasOwnProperty(c)&&k.setRequestHeader(c,a.headers[c]);"function"!==typeof a.complete&&(a.complete=null);e=function(c){return function(){e&&
(e=l=k.onload=k.onerror=k.onabort=k.ontimeout=k.onreadystatechange=null,"abort"===c?k.abort():"error"===c?"number"!==typeof k.status?a.complete&&a.complete(d.sanitizeResponse(0,"error")):a.complete&&a.complete(d.sanitizeResponse(k.status,k.statusText)):a.complete&&a.complete(d.sanitizeResponse(b[k.status]||k.status,k.statusText,"text"!==(k.responseType||"text")||"string"!==typeof k.responseText?{binary:k.response}:{text:k.responseText})))}};k.onload=e();l=k.onerror=k.ontimeout=e("error");void 0!==
k.onabort?k.onabort=l:k.onreadystatechange=function(){4===k.readyState&&window.setTimeout(function(){e&&l()})};e=e("abort");try{k.send(a.data||null)}catch(p){if(e)throw p;}return k}})})(a);(function(a){var b,c,f=a.ClassManager;a.define("Helper.Http",{requires:["Helper.Url.Param","Helper.HttpRequest"],singleton:!0,hostname:"",crossDomain:!1,constructor:function(){var a=f.getDependencies("Helper.Http").requires;b=a[0];c=a[1]},changeHostName:function(a){this.hostname=a.replace(/^(.+?)\/*?$/,"$1");this.crossDomain=
!0},getHostName:function(){return this.hostname},isCrossDomain:function(){return this.crossDomain},getUrl:function(a){return(a=a.replace(/(^[\/#]*|[\/#]*$)/g,""))&&a.startsWith("http")?a:this.getHostName()+"/"+a},updateUrl:function(a,c,d){return this.isCrossDomain()?this.getUrl(b.update(a,c,d)):b.update(a,c,d)},handleResponse:function(a,b,c){a.success?b&&"function"===typeof b&&b.call(null,a.data):c&&"function"===typeof c&&c.call(null,a.error,a.statusText)},get:function(a,b,d,e){var f=this;return c.request({type:"GET",
url:f.updateUrl(a,b,!1),crossDomain:f.crossDomain,async:!0,complete:function(a){f.handleResponse(a,d,e)}})},post:function(a,d,e,f){var g=this;return c.request({type:"POST",crossDomain:g.crossDomain,url:g.getUrl(a),async:!0,data:"string"===typeof d?d:b.get(d),headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(a){g.handleResponse(a,e,f)}})}})})(a);(function(a){a.define("Helper.Location",{singleton:!0,origin:function(){var a=window.location;return a.protocol+"//"+a.host}})})(a);
(function(a){a.define("Helper.ObjectProgress",{mixinId:"objectProgress",objectProgressStatus:1,constructor:function(){this.objectProgressStatus=2},stopObjectProgress:function(){this.objectProgressStatus=1},startObjectProgress:function(){this.objectProgressStatus=3},isObjectInProgress:function(){return 3===this.objectProgressStatus}})})(a);(function(a){a.define("Helper.Observer",{mixinId:"observer",events:{},constructor:function(){this.events={}},on:function(a,b){var c=this.events[a];c||(this.events[a]=
c=[]);c.push(b);return this},off:function(a,b){var c=this.events[a];if(!c)return this;"undefined"===typeof b?delete this.events[a]:this.events[a]=c.filter(function(a){if(a!==b)return a});return this},publish:function(a,b){if(b&&!b instanceof Array)throw Error("args must be array or empty");var c=this;a=c.events[a];if(!a)return c;a.forEach(function(a){a.apply(c,b||[])});return c}})})(a);(function(a){var b=a.ClassManager,c,f=a.extend,g={};a.define("Helper.ResponseSanitizer",{requires:["Helper.Storage"],
mixins:{observer:"Helper.Observer"},options:{},constructor:function(a){var d=b.getDependencies("Helper.ResponseSanitizer"),e=d.requires;d.mixins.observer.prototype.constructor.call(this);c=e[0];g=c.get("cmp2.state")||{};this.bindEvents();this.updateOptions(a)},bindEvents:function(){var a=this;a.on("updateOptions",function(b){a.updateOptions(b)});a.on("input.event",function(b,d){if("change"===b){b=d.data;var e=b.checked;a.persistItemsState(d,e);g[b.id]=e;c.set("cmp2.state",g)}})},updateOptions:function(a){this.options=
f(!0,{},this.options,a)},persistItemsState:function(a,b){var d=a.checkedItems&&0===a.checkedItems.length;b&&(d=a.checkedItems&&a.displayItems&&a.checkedItems.length===a.displayItems.length);d?c.set("cmp2.check.all",b):c.remove("cmp2.check.all")},onPrepareRendering:function(a){var b=this.options,d=0,e=0,f=Math.min(b.maxCheckedItems,b.maxPreCheckItems);a=a.items;for(var h=c.get("cmp2.check.all"),r=0;r<a.length;r+=1){var t=a[r];if(t.visible){var u=t.checked;b.storeStateSession&&g&&g.hasOwnProperty(t.id)&&
(t.checked=u=g[t.id]);b.limited&&!t.checked&&t.prechecked&&(e>=f&&(t.prechecked=!1),e+=1);u||(u=t.prechecked&&b.usePreCheckItems);null!==h&&(u=h);(t.checked=u)&&d++;b.limited&&d>b.maxCheckedItems&&(t.checked=!1)}}}})})(a);(function(a){var b,c=a.ClassManager;a.define("Helper.Cookie",{requires:["Helper.Http"],singleton:!0,constructor:function(){b=c.getDependencies("Helper.Cookie").requires[0]},get:function(a){a+="\x3d";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=
d.substring(1);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return""},set:function(a,c,d,e,k){if(b.isCrossDomain())b.post("/s/horizon/common/compareto/CompareTosSave",c,function(a){k&&"function"===typeof k&&k(a)});else{var f="";d&&(f=new Date,f.setTime(f.getTime()+d),f="; expires\x3d"+f.toUTCString());"object"===typeof c&&(c=JSON.stringify(c));d=e?"; domain\x3d"+e:"";document.cookie=a+"\x3d"+encodeURIComponent(decodeURIComponent(c))+f+d+"; path\x3d/";k&&"function"===typeof k&&k({})}}})})(a);
(function(a){var b=!1,c,f;try{c=window.localStorage}catch(g){}try{c&&(c.setItem("vendor-support-test","success?"),f=c.getItem("vendor-support-test"),c.removeItem("vendor-support-test")),"success?"===f&&(b=!0)}catch(g){}a.define("Helper.Storage",{singleton:!0,get:function(a){if(b&&c){a=c.getItem(a);try{return JSON.parse(a)}catch(h){return a}}return null},set:function(a,d){try{b&&c&&(null!==d&&"object"===typeof d?c.setItem(a,JSON.stringify(d)):c.setItem(a,d))}catch(l){}},remove:function(a){try{b&&c&&
c.removeItem(a)}catch(h){}},clear:function(){b&&c&&c.clear()}})})(a);(function(a){a.define("Helper.UUID",{singleton:!0,get:function(){var a=(new window.Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})},randomString:function(a){var b="";a=a||5;for(var c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return b}})})(a);
(function(a){var b,c=a.ClassManager,f={scrollbars:1,location:1,statusbar:1,menubar:0,resizable:1},g=a.extend;a.define("Helper.Window",{requires:["Helper.Http"],singleton:!0,getSpinnerPath:function(){return b.getUrl("/s/compareresults/spinner")},constructor:function(){b=c.getDependencies("Helper.Window").requires[0]},getMultipleProvidersUrl:function(c){if(!c)return null;var d=c.compareTos||[],e=[],f="";if(0<d.length){for(var g=0,h;h=d[g];g++)"CLOSE"!==h.deepLink&&(e.push(h.code),f=h.deepLink);if(0<
e.length)return d=e.length,1===d?f:b.updateUrl("/s/compareresults/multi",a.apply({forcehttp:!0,providerCodes:e.join(",")},c.extra||{}))}return null},getWindowInformation:function(a){try{a=a?a:window;var b=a.document,c=a.screen,d=b.documentElement,e=b.getElementsByTagName("body")[0];return{y:"screenY"in a?a.screenY:a.screenTop,x:"screenX"in a?a.screenX:a.screenLeft,width:a.innerWidth||d.clientWidth||e.clientWidth,height:a.innerHeight||d.clientHeight||e.clientHeight,availTop:"availTop"in c?c.availTop:
0,availLeft:"availLeft"in c?c.availLeft:0,screenWidth:c.availWidth,screenHeight:c.availHeight}}catch(q){}return{y:0,x:0,width:window.screen.availWidth||800,height:window.screen.availHeight||600,availTop:0,availLeft:0,screenWidth:window.screen.availWidth||800,screenHeight:window.screen.availHeight||600}},tiled:function(a,b,c,d){return{url:this.getUrl(a),name:a.code,features:this.featuresForTiled(b,c,d)}},hidden:function(a,b){return{url:this.getUrl(a),name:a.code,features:this.featuresForHidden(!1,
b)}},getUrl:function(a){if("undefined"!==typeof a.useDeepLink&&!0===a.useDeepLink&&"undefined"!==typeof a.deepLink)return a.deepLink;var c="";a.verticalName&&(c="\x26vertical\x3d"+a.verticalName);return b.getUrl("/s/compareresults/spinner?code\x3d"+encodeURIComponent(a.code)+c)},featuresForHidden:function(a,b){var c=Math.min(1024,b.height-20),d=Math.min(1280,b.width-20),e=b.y+10,h=b.x+10;a&&(d=c=160,e=b.y+(b.height-110),h=b.x+(b.width-185));return g({},f,{top:e,left:h,height:c,width:d})},featuresForTiled:function(a,
b,c){b=Math.floor(c.screenWidth/b-10);return g({},f,{left:Math.floor((b+5)*a),top:0,height:Math.floor(c.screenHeight),width:b})},open:function(a,b,c,d){"object"===typeof c&&(c=this.objectToFeatureString(c));return open(a,this.getWindowName(b),c,d)},getWindowName:function(a){return a.replace(/[^a-z0-9]+/gi,"")},objectToFeatureString:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"\x3d"+a[c]);return b.join(",")},features:function(a,b){var c=!0===a.top||!1,d=!0===a.bottom||!1,e=!0===
a.left||!1,h=!0===a.right||!1,l=a.height||150;a=a.width||250;var t=0,u=0;d&&(t+=c?0:b.height);h&&(u+=e?0:b.width);t+=c?10:-l;u+=h?-a:10;e&&h&&(a=b.width-20,u=10);c&&d&&(l=b.height+40,t=10);return g({},f,{top:b.y+t,left:b.x+u,height:l,width:a})},cloneHandleDimensions:function(a){var b=this.getWindowInformation(a);a=b.height;var c=b.width,d=b.y+5,b=b.x+5;return g({},f,{screenX:b,screenY:d,top:d,left:b,innerHeight:a,innerWidth:c,height:a,width:c})}})})(a);(function(a){var b=a.ClassManager;a.define("Type.CheckBoxButtonGroup",
{requires:["Dom.Element"],mixins:{observer:"Helper.Observer"},constructor:function(){var a=this,c=b.getDependencies("Type.CheckBoxButtonGroup"),d=c.requires[0];c.mixins.observer.prototype.constructor.call(this);a.on("click",function(b){d.hasClass(b,"checked")?(d.removeClass(b,"checked"),a.publish("deselect",[b,"deselect"])):(d.addClass(b,"checked"),a.publish("select",[b,"select"]));a.publish("change",[b,"change"])})}})})(a);(function(a){var b=a.ClassManager;a.define("Type.RadioButtonGroup",{requires:["Dom.Element",
"Config"],mixins:{observer:"Helper.Observer"},constructor:function(){var a=this,c=b.getDependencies("Type.RadioButtonGroup"),d=c.requires,h=d[0],l=d[1],k;c.mixins.observer.prototype.constructor.call(this);a.on("click",function(b){k&&b!==k&&(h.removeClass(k,"checked"),a.publish("change",[k,"change"]),a.publish("deselect",[k,"deselect"]));h.hasClass(b,"checked")?l.getBoolean("cmp2.radio.buttons.allow.deselect",!1)&&(k=0,h.removeClass(b,"checked"),a.publish("change",[b,"change"]),a.publish("deselect",
[b,"deselect"])):(k=b,h.addClass(b,"checked"),a.publish("change",[b,"change"]),a.publish("select",[b,"select"]))});a.on("repaint",function(a){if(a){var b=a.length,c,d;for(c=k=0;c<b;c++)d=a[c],h.hasClass(d,"checked")&&!k?k=d:h.removeClass(d,"checked")}})}})})(a);(function(a){var b={},c,f=a.ClassManager,g=a.extend;a.define("Workaround.Core",{requires:["Helper.Window"],mixins:{observer:"Helper.Observer"},options:{},blank:"about:blank",constructor:function(a){var b=f.getDependencies("Workaround.Core"),
d=b.requires;b.mixins.observer.prototype.constructor.call(this);c=d[0];this.options=g(!0,{},this.options,a);this.bindEvents()},bindEvents:function(){var a=this;a.on("input.event",function(b,c){switch(b){case "change":a.onChange(c);break;case "click":a.onClick(c);break;case "mousedown":a.onMouseDown(c);break;case "mouseup":a.onMouseUp(c);break;case "deselect":a.onDeselect(c);break;case "select":a.onSelect(c)}})},onChange:function(){},onClick:function(){},onMouseDown:function(){},onMouseUp:function(){},
onDeselect:function(){},onSelect:function(){},onResultPageOpen:function(a){var b=a.preOpen,d=a.preOpenItem,e=a.postOpenItem,f=a.postOpen;"function"===typeof b&&b.call(this,a);var b=this.getActiveProviderList(a.compareTos||[],!0),g=b.length,h=c.getWindowInformation(),t,u,w,y,m,v=c.featuresForTiled;for(t=0;u=b[t];t++)try{m={url:u.deepLink,name:u.code,features:v(t,g,h)},"function"===typeof d&&d.call(this,m,a),y=u.code,w=this.getHandle(y),w||(w=c.open(this.blank,y,m.features),this.addHandle(y,w)),this.tilingWindow(w,
m.features),w&&(w.location.href=m.url),"function"===typeof e&&e.call(this,m,w,a)}catch(A){}"function"===typeof f&&f.call(this,a)},getActiveProviderList:function(a,b){for(var c=[],d=0,e;e=a[d];d++)e.deepLink&&"CLOSE"===e.deepLink&&b&&this.closeWindow(e.code),e.deepLink&&"CLOSE"!==e.deepLink&&c.push(e);return c},closeWindow:function(a){try{c.open(this.blank,a).close()}catch(l){}},onDirectOpen:function(a,b){if("click"===a.type)this.onResultPageOpen({compareTos:b})},onSubmit:function(a){this.fireSubmitEvent(a)},
fireSubmitEvent:function(a){if("undefined"===typeof a)throw"Need specify data parameter for submit event";this.publish("onSubmit",[a])},addHandle:function(a,c){b[a]=c},getHandles:function(){return b},setHandles:function(a){b=a},getHandle:function(a){try{var c=b[a];return!c||c.closed?null:c}catch(k){return null}},tilingWindow:function(a,b){if("undefined"!==typeof b&&a){var c;this.options.resizeBeforeOpening?"undefined"!==typeof b.left&&"undefined"!==typeof b.top&&(a.resizeTo(100,100),a.moveTo(-1E7,
-1E7),c=["screenX"in a?a.screenX:a.screenLeft,"screenY"in a?a.screenY:a.screenTop],a.moveTo(c[0]+b.left,c[1]+b.top)):"undefined"!==typeof b.left&&"undefined"!==typeof b.top&&a.moveTo(b.left,b.top);"undefined"!==typeof b.width&&"undefined"!==typeof b.height&&a.resizeTo(b.width,b.height)}}})})(a);(function(a){var b,c=a.ClassManager,f;a.define("Workaround.AsyncOpen",{requires:["Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=c.getDependencies("Workaround.AsyncOpen"),d=a.requires;
f=a.extend.prototype;f.constructor.apply(this,arguments);b=d[0]},onDirectOpen:function(a,c){if("click"===a.type){var d=this;a=b.getWindowInformation();for(var e=c.length,f=0,g;g=c[f];f++)g=b.tiled(g,f,e,a),this.open(g);setTimeout(function(){d.onResultPageOpen({compareTos:c})},1)}},open:function(a){setTimeout(function(){try{b.open(a.url,a.name,a.features)}catch(h){}},0)},onSubmit:function(a){var c=this,d,e,f,g;g=a.checkedItems.length;f=b.getWindowInformation();for(e=0;d=a.checkedItems[e];e++)d=b.tiled(d,
e,g,f),c.open(d);setTimeout(function(){var a=window.open("","_self");a&&!a.closed&&a.focus()},0);setTimeout(function(){c.fireSubmitEvent(a)},1)}})})(a);(function(a){var b,c=a.ClassManager,f;a.define("Workaround.AsyncOpenLastClose",{requires:["Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=c.getDependencies("Workaround.AsyncOpenLastClose"),d=a.requires;f=a.extend.prototype;f.constructor.apply(this,arguments);b=d[0]},onDirectOpen:function(a,c){if("click"===a.type){var d=this;
a=b.getWindowInformation();for(var e=c.length,f=0,g;g=c[f];f++)g=b.tiled(g,f,e,a),delete g.features,this.open(g);setTimeout(function(){d.onResultPageOpen({compareTos:c})},1)}},open:function(a){setTimeout(function(){try{b.open(a.url,a.name,a.features)}catch(h){}},0)},onSubmit:function(a){var c=this,d,e,f,g;g=a.checkedItems.length;f=b.getWindowInformation();for(e=0;d=a.checkedItems[e];e++)d=b.tiled(d,e,g,f),delete d.features,c.open(d);setTimeout(function(){var a=window.open("about:blank","_blank");
a&&!a.closed&&a.close()},0);setTimeout(function(){c.fireSubmitEvent(a)},1)}})})(a);(function(a){var b,c,f=a.ClassManager,g;a.define("Workaround.ChangeWindowName",{requires:["Helper.UUID","Helper.Window"],extend:"Workaround.Core",constructor:function(a){var d=f.getDependencies("Workaround.ChangeWindowName"),e=d.requires;g=d.extend.prototype;g.constructor.apply(this,arguments);b=e[0];c=e[1]},onResultPageOpen:function(a){if(a.compareTos&&0<a.compareTos.length){var d=b.get();window.name=d;a.postOpenItem=
function(){c.open("",d,"")};a.postOpen=function(){c.open("",d,"")};g.onResultPageOpen.call(this,a)}},onSubmit:function(a){var d=b.get(),e,f,g,h,r;window.name=d;h=a.checkedItems.length;r=c.getWindowInformation();for(e=0;f=a.checkedItems[e];e++)try{g=c.tiled(f,e,h,r),c.open(g.url,g.name,g.features),c.open("",d,"")}catch(t){}this.fireSubmitEvent(a)}})})(a);(function(a){var b,c=a.ClassManager,f;a.define("Workaround.DocumentFocus",{requires:["Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=
c.getDependencies("Workaround.DocumentFocus"),d=a.requires;f=a.extend.prototype;f.constructor.apply(this,arguments);b=d[0];this.blank=b.getSpinnerPath()},onSelect:function(a){f.onSelect.call(this,a);try{var c=a.data,d=b.getWindowInformation(),e=b.hidden(c,d);e.features=b.features({bottom:!0},d);var g=b.open(e.url,e.name,e.features);this.addHandle(e.name,g);this.windowFocus(g)}catch(n){}},onDeselect:function(a){f.onDeselect.call(this,a);try{var b=this.getHandle(a.data.code);b&&b.close()}catch(l){}},
focusInterval:null,windowFocus:function(a){this.focusInterval&&clearInterval(this.focusInterval);var b=0,c=this.focusInterval=setInterval(function(){try{a&&(a.blur(),a.opener.focus()),window.self.focus(),window.focus(),document.focus()}catch(k){}b++;10<b&&c&&clearInterval(c)},300)},onSubmit:function(a){var c=b.getWindowInformation(),d,e,f,g;for(d=0;e=a.checkedItems[d];d++)try{f=b.hidden(e,c),f.features=b.features({bottom:!0},c),g=b.open(f.url,f.name,f.features),this.addHandle(f.name,g),this.windowFocus(g)}catch(q){}this.fireSubmitEvent(a)}})})(a);
(function(a){var b,c=a.ClassManager,f;a.define("Workaround.HandleOpen",{requires:["Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=c.getDependencies("Workaround.HandleOpen"),d=a.requires;f=a.extend.prototype;f.constructor.apply(this,arguments);b=d[0]},onDirectOpen:function(a,b){if("click"===a.type)this.onResultPageOpen({compareTos:b,postOpenItem:function(a,b){b&&!b.closed&&b.open("about:blank").close()}})},onSubmit:function(a){var c,d,e,f,g,q,r;r=a.checkedItems.length;q=b.getWindowInformation();
for(d=0;g=a.checkedItems[d];d++)try{c=b.tiled(g,d,r,q),(e=b.open(c.url,c.name,c.features))&&!e.closed&&(f=e.open("about:blank"),f.close())}catch(t){}this.fireSubmitEvent(a)}})})(a);(function(a,c){function b(a){return a.charCodeAt(0)}function d(a,c,d){c=c||"";d=d||1024;for(var e=[],f=0;f<a.length;f+=d){var g=a.slice(f,f+d),g=Array.prototype.map.call(g,b),g=new Uint8Array(g);e.push(g)}return new Blob(e,{type:c})}var g,h,l,k,p=a.ClassManager,n,q=[];a.define("Workaround.PdfAlert",{requires:["Helper.UUID",
"Helper.Window","Helper.Browser","Dom.Event"],extend:"Workaround.Swapper",constructor:function(){var a=p.getDependencies("Workaround.PdfAlert"),b=a.requires,d=b[2];n=a.extend.prototype;n.constructor.apply(this,arguments);g=b[0];l=b[1];h=b[3];k=d.isChromePDFInstalled();h.addEvent(c,"message",function(a){a.origin===c.location.origin&&a.data&&"undefined"!==typeof a.data.cmp2&&c.focus()})},options:{timer:1E3},timer:null,onResultPageOpen:function(a){if(!k)return n.onResultPageOpen.apply(this,arguments);
var b=l.getMultipleProvidersUrl(a);if(b){var d=l.open("",c.name+"popUnderWindow");d&&(d.location.href=b)}},focusWindow:function(){var a=this,b=a.options.timer,e=0,f=!1,k=function(b){h.removeEvent(c,"focus",k);f=!1;var d,e,g;for(d=0;e=q[d];d++)(g=e.dom)&&g.parentNode&&g.parentNode.removeChild(g),URL.revokeObjectURL(e.source);q=[];a.timer&&clearInterval(a.timer);"boolean"!==typeof b&&a.fireSubmitEvent(a.data)},l=function(){if(e++>b)k();else if(document.hasFocus())f&&k();else{var a;if(!(a=f)){a=g.get();
var c=g.get();a=["%PDF-1.7","%\u00e2\u00e3\u00cf\u00d3","5 0 obj","\x3c\x3c/Filter/FlateDecode/Length 8\x3e\x3estream",atob("eJwDAAAAAAE\x3d"),"endstream","endobj","4 0 obj","\x3c\x3c/Contents 5 0 R/MediaBox[0 0 595 842]/Parent 2 0 R/Resources\x3c\x3c\x3e\x3e/TrimBox[0 0 595 842]/Type/Page\x3e\x3e","endobj","1 0 obj","\x3c\x3c/OpenAction 6 0 R/Pages 2 0 R/Type/Catalog\x3e\x3e","endobj","3 0 obj","\x3c\x3c\x3e\x3e","endobj","2 0 obj","\x3c\x3c/Count 1/Kids[4 0 R]/Type/Pages\x3e\x3e","endobj","6 0 obj",
"\x3c\x3c/JS(app.alert('Please wait...', 4);)/S/JavaScript/Type/Action\x3e\x3e","endobj","xref","0 7","0000000000 65535 f.","0000000203 00000 n.","0000000285 00000 n.","0000000265 00000 n.","0000000088 00000 n.","0000000015 00000 n.","0000000336 00000 n.","trailer","\x3c\x3c/ID [\x3c"+a+"\x3e\x3c"+c+"\x3e]/Info 3 0 R/Root 1 0 R/Size 7\x3e\x3e","startxref","419","%%EOF"];a=URL.createObjectURL(d(a.join("\n"),"application/pdf"));c=document.createElement("object");c.setAttribute("data",a);c.setAttribute("type",
"application/pdf");c.setAttribute("style","visibility:visible;width:0;height:0;opacity:0;position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;");var h=document.createElement("iframe");document.body.appendChild(h);h.contentWindow.document.open();h.contentWindow.document.write(c.outerHTML);h.contentWindow.document.close();q.push({dom:h,source:a});a=!0}f=a}};a.timer&&k(!1);a.timer=setInterval(function(){l()},1);h.addEvent(c,"focus",k);l()},onSubmit:function(a){var b=this;if(k){if(0!==a.checkedItems.length){b.data=
a;var d=g.get();c.name=d;l.open(l.getSpinnerPath(),d+"popUnderWindow");a.callback=function(){b.focusWindow()}}b.fireSubmitEvent(a)}else n.onSubmit.call(b,a)}})})(a,window);(function(a){var b,c=a.ClassManager,f,g,h,l,k,p=a.Functions;a.define("Workaround.PostMessage",{requires:["Helper.Window","Dom.Event","Helper.UUID","Helper.Browser","Helper.Http"],extend:"Workaround.Core",handles:[],constructor:function(){var a=this,d=c.getDependencies("Workaround.PostMessage"),e=d.requires;f=d.extend.prototype;
f.constructor.apply(a,arguments);b=e[0];g=e[1];l=e[2];k=e[3];h=e[4];a.id=l.get();g.addEvent(window,"message",function(b){b=b.data;var c=b.id;"open"===b.method&&a.id===c&&a.createWindow(b)})},createWindow:function(a){var b=this,c,d=!1;"tab"===b.options.method&&!0!==a.direct?d=(c=open("about:blank",a.name))&&!c.closed:(d=(c=open("about:blank",a.name,a.options||""))&&!c.closed,a.close&&(c&&!c.closed&&c.close(),c=null,d=!1));d&&setTimeout(function(){c&&!c.closed&&(a.direct||b.handles.push(c),c.location=
a.url,b.notifyCreate&&b.notifyCreate())},b.options.delay)},onDirectOpen:function(a,c){if(!k.isDevToolsOpened()&&"click"===a.type){var d=this;a=b.cloneHandleDimensions();d.handles=[];for(var e=0,f;f=c[e];e++)d.fireOpen({url:f.deepLink,name:b.getWindowName(f.code),options:a,direct:!0});setTimeout(function(){d.onResultPageOpen({compareTos:c})},0)}},fireOpen:function(a){window.postMessage({method:"open",id:this.id,url:a.url||"",name:a.name||"_blank",options:a.options||"",close:a.close||!1,direct:a.direct||
!1},window.location.origin)},renameHandles:function(a,c){var d,e,f=0,g,k=this.handles;k.unshift(window);for(d=0;e=k[d];d++)if(e&&!e.closed){if(g=a[f])e.name=b.getWindowName(g.code);g=e;f+=1}g&&(g.name="k"+this.id,g.location=c);window!==g&&(window.location=h.getUrl("/s/compareresults/spinner"))},onSubmit:function(a){if(k.isDevToolsOpened()||0===a.checkedItems.length)a.checkedItems=[],this.fireSubmitEvent(a);else{var c=this,d=0,e,f,g=a.checkedItems.length,h=!1,l=!1,n,A=b.getWindowInformation();window.name=
"k"+c.id;c.handles=[];"tab"===c.options.method&&(n=setTimeout(function(){c.renameHandles(a.checkedItems,a.url)},1E3),c.notifyCreate=p.createBarrier(g,function(){h=!0;l&&(n&&clearTimeout(n),c.renameHandles(a.checkedItems,a.url))},c));for(;e=a.checkedItems[d];d++)try{f=b.tiled(e,d,g,A),c.fireOpen({url:f.url,name:b.getWindowName(e.code),options:f.features})}catch(B){}"tab"===c.options.method?a.callback=function(a){l=!0;h&&(n&&clearTimeout(n),c.renameHandles(a.checkedItems,a.url))}:c.fireOpen({url:"about:blank",
close:!0});c.fireSubmitEvent(a)}}})})(a);(function(a){var b,c=a.ClassManager,f;a.define("Workaround.SelfTarget",{requires:["Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=c.getDependencies("Workaround.SelfTarget"),d=a.requires;f=a.extend.prototype;f.constructor.apply(this,arguments);b=d[0]},onDirectOpen:function(a,c){if("click"===a.type){a=window.open("","_self");for(var d=b.getWindowInformation(),e=0,f;f=c[e];e++)f=b.hidden(f,d),b.open(f.url,f.name,f.features),a.focus();this.onResultPageOpen({compareTos:c})}},
onSubmit:function(a){var c=window.open("","_self"),d=b.getWindowInformation(),e,f,g;for(f=0;g=a.checkedItems[f];f++)try{e=b.hidden(g,d),e.features=b.features({bottom:!0},d),b.open(e.url,e.name,e.features),c.focus()}catch(q){}this.fireSubmitEvent(a)}})})(a);(function(a){var b,c=a.ClassManager,f;a.define("Workaround.SimpleOpen",{requires:["Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=c.getDependencies("Workaround.SimpleOpen"),d=a.requires;f=a.extend.prototype;f.constructor.apply(this,
arguments);b=d[0]},onSelect:function(a){f.onSelect.call(this,a);try{var c=b.tiled(a.data,0,2,b.getWindowInformation()),d=b.open(c.url,c.name,c.features);this.addHandle(c.name,d)}catch(k){}},onDeselect:function(a){f.onDeselect.call(this,a);try{var b=this.getHandle(a.data.code);b&&b.close()}catch(l){}},onSubmit:function(a){var c=b.getWindowInformation(),d,e,f,g;for(d=0;e=a.checkedItems[d];d++)try{f=b.hidden(e,c),f.features=b.features({bottom:!0},c),g=b.open(f.url,f.name,f.features),this.addHandle(f.name,
g)}catch(q){}this.fireSubmitEvent(a)}})})(a);(function(a){function b(a){(a=a.originalEvent?a.originalEvent:a)&&a.state&&a.state.hasOwnProperty("cmp2BackUrl")&&location.replace(a.state.cmp2BackUrl)}var e,f,g,h=a.ClassManager,l,k;a.define("Workaround.Swapper",{requires:["Helper.Window","Helper.Storage","Dom.Event","Helper.Location","Helper.Http"],extend:"Workaround.Core",constructor:function(){var a=h.getDependencies("Workaround.Swapper"),c=a.requires,d=c[2];l=a.extend.prototype;l.constructor.apply(this,
arguments);f=c[0];e=c[1];k=c[3];g=c[4];d.removeEvent(window,"popstate",b);d.addEvent(window,"popstate",b)},onDirectOpen:function(a,b,c){"click"===a.type&&(a=f.getMultipleProvidersUrl({compareTos:b,extra:c}))&&f.open(a,"rr_compare",f.cloneHandleDimensions())},onResultPageOpen:function(a){window.opener&&(a=f.getMultipleProvidersUrl(a))&&window.opener&&!window.opener.closed&&(this.options.loadAfterPageLoaded?window.opener.postMessage({type:"cmp2ResultPageOpen",url:a},k.origin()):window.opener.location.replace(a),
this.changeBrowserHistory())},changeBrowserHistory:function(){try{var a=window.location.href,b=e?e.get("cmp2.back.url"):0;e&&e.remove("cmp2.back.url");if(b){var c={};c.cmp2BackUrl=b;window.history.replaceState(c,"",b);b={};b.cmp2BackUrl=a;window.history.pushState(b,"",a)}}catch(r){}},onSubmit:function(a){if(0!==a.checkedItems.length){var b=window.location.href,d=window.open(f.getSpinnerPath(),"_blank");d&&(e&&e.set("cmp2.back.url",b),a.callback=function(a){a.url&&0<=a.url.indexOf("%s")&&("function"===
typeof c.logger?new c.logger:window.Rollbar||window.console).error("CompareTo.Workaround.Swapper submit url has invalid %s parameter");d.location.href=g.getUrl(a.url);window.location.href=g.getUrl("/s/compareresults/spinner")})}this.fireSubmitEvent(a)}})})(a);(function(a){var b,c,f=a.ClassManager,g=a.Functions,h;a.define("Workaround.SwapperCookie",{requires:["Helper.UUID","Helper.Window"],extend:"Workaround.Core",constructor:function(){var a=f.getDependencies("Workaround.SwapperCookie"),d=a.requires;
h=a.extend.prototype;h.constructor.apply(this,arguments);b=d[0];c=d[1]},onResultPageOpen:function(a){if(a.compareTos&&0<a.compareTos.length){var b=window.name,d=c.getMultipleProvidersUrl(a),e=c.open("","popUnderName"+b);c.open("",b,"");e&&this.createSequence(e,this.getActiveProviderList(a.compareTos||[]),d,function(a,b){a&&!a.closed&&(a.location.href=b);c.open("",window.name,"")})}},onDirectOpen:function(a,b,d){"click"===a.type&&(d=c.getMultipleProvidersUrl({compareTos:b,extra:d}))&&(a=c.open("",
"rr_compare",c.cloneHandleDimensions()),this.createSequence(a,this.getActiveProviderList(b||[]),d,function(a,b){a&&!a.closed&&(a.location.href=b)}))},createSequence:function(a,b,c,d){var e,f,h=[];if(1===b.length)d.call(this,a,c);else{for(f=0;e=b[f];f++)h.push(g.pass(d,[a,e.deepLink],this));h.push(g.pass(d,[a,c],this));g.processSequenceWithTimeOut(h,this.options.delay||1E3)}},onSubmit:function(a){var d=b.get(),e,f=c.getWindowInformation();window.name=d;if(a.checkedItems&&0<a.checkedItems.length)try{e=
c.tiled(a.checkedItems[0],0,1,f),c.open(e.url,"popUnderName"+d,e.features),c.open("",d,"")}catch(q){}this.fireSubmitEvent(a)}})})(a);(function(a){var b=a.ClassManager,c;a.define("Workaround",{requires:"Workaround.Core Workaround.ChangeWindowName Workaround.DocumentFocus Workaround.HandleOpen Workaround.PdfAlert Workaround.PostMessage Workaround.SelfTarget Workaround.Swapper Workaround.SwapperCookie".split(" "),singleton:!0,constructor:function(){c=b.getDependencies("Workaround").requires[0]},get:function(a){var d=
"Workaround."+(a?a.name:"Core"),e;b.isCreated(d)&&(d=b.get(d))&&(e=new d(a));e||(e=new c(a));return e instanceof c?e:null}})})(a);(function(a){var b=a.Dom.Element,e=a.Dom.Event,f=a.ClassManager,g=a.extend,h=a.Helper.Cookie,l=a.Config,k=a.Helper.Http,p=a.Workaround,n=a.Type.RadioButtonGroup,q=a.Type.CheckBoxButtonGroup;a.define("Items",{requires:["Requests","Helper.ResponseSanitizer"],mixins:{observer:"Helper.Observer",objectProgress:"Helper.ObjectProgress"},element:"",itemsElement:"",controlsElements:null,
options:{serverSideOptions:!1,limited:!0,radioButtons:!1,workaround:{},rendering:{},template:{none:"\x3cspan class\x3d'span-button-wrapper'\x3e\x3cspan class\x3d'input'\x3e\x3cspan class\x3d'icon'\x3e\x3c/span\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e",checked:"\x3cspan class\x3d'span-button-wrapper'\x3e\x3cspan class\x3d'input checked' role\x3d'checkbox' aria-checked\x3d'true' data-code\x3d'{code}' tabindex\x3d'0'\x3e\x3cspan class\x3d'icon'\x3e\x3c/span\x3e{label}\x3c/span\x3e\x3c/span\x3e",unChecked:"\x3cspan class\x3d'span-button-wrapper'\x3e\x3cspan class\x3d'input' role\x3d'checkbox' aria-checked\x3d'false' data-code\x3d'{code}' tabindex\x3d'0'\x3e\x3cspan class\x3d'icon'\x3e\x3c/span\x3e{label}\x3c/span\x3e\x3c/span\x3e"},
compareToHiddenClass:"compareToHidden",source:"",pageOrigin:"",enabled:!0,cookieLifetime:6E4,cookieDomain:"",minItemsToShowControls:3},itemsBlock:".items",requests:null,requestData:[],requestToken:"",workaround:null,lastServerResult:null,responseSanitizer:null,constructor:function(a,c){var d=f.getDependencies("Items"),e=d.requires,g=e[0],e=e[1];d.mixins.observer.prototype.constructor.call(this);d.mixins.objectProgress.prototype.constructor.call(this);this.requests=new g({pageOrigin:c.pageOrigin,showOn:c.showOn,
radioButtonsKey:c.radioButtonsKey});this.responseSanitizer=new e(c.rendering);this.element=null;a&&("string"===typeof a?this.element=document.getElementById(a):"nodeType"in a&&1===a.nodeType?this.element=a:"jquery"in a&&(this.element=a[0]));this.element&&(a=this.element.querySelectorAll(this.itemsBlock),1===a.length&&(this.itemsElement=a[0]),this.controlsElements=this.element.querySelectorAll(".CompareTo-Controls .control"),b.addClass(this.element,c.compareToHiddenClass||this.options.compareToHiddenClass),
this.pullServerSideOptions(),this.updateOptions(c),this.stopObjectProgress(),this.element.compareToItems=this)},pullServerSideOptions:function(){var a=this;(c.globals&&c.globals.isSeo||a.options.serverSideOptions)&&a.requests.optionsFromServer(function(b){if(b){a.publish("cmp2.options.update",[b]);var d=setInterval(function(){a.isObjectInProgress()||(clearInterval(d),a.updateOptions(b.settings),b.formToken&&c&&c.globals&&(c.globals.formtoken=b.formToken))},500)}})},setWorkaround:function(){var a=
this;a.workaround=p.get(a.options.workaround);a.workaround.on("onSubmit",function(b){if(a.isVisible()){for(var c=a.getRequestData()||[],d=a.getDisplayItemsMap(),e=b.checkedItems&&0<b.checkedItems.length,f=0,g;g=c[f];f++)"undefined"!==typeof d[g.code]&&(g.checked=e?d[g.code].checked:!1);k.isCrossDomain()&&!e?(b.url=k.updateUrl(b.url),a.fireSubmitEvent(b)):a.setCookie(c,function(c){b.url=k.updateUrl(b.url,c);a.fireSubmitEvent(b)})}else a.fireSubmitEvent(b)})},fireSubmitEvent:function(a){var b=a.callback;
b&&"function"===typeof b?b.call(null,a):this.publish("form.submit",[a])},updateOptions:function(a){var c=this.options=g(!0,{},this.options,a||{}),d=this.element;a=a&&"undefined"!==typeof a.radioButtons?a.radioButtons:b.hasClass(d,"radio")?!0:c.radioButtons;c.radioButtons=a;c.radioButtons?(b.addClass(d,"radio"),c.limited=!0):b.removeClass(d,"radio");this.responseSanitizer.publish("updateOptions",[c.rendering]);this.requests.updateOptions({pageOrigin:c.pageOrigin,showOn:c.showOn,radioButtonsKey:c.radioButtonsKey});
this.setWorkaround();this.bindEvents();this.lastServerResult&&this.isEnabled()&&this.displayServerResults(this.lastServerResult)},handleSubmit:function(a){a.displayItems=this.getDisplayItems();a.checkedItems=this.getCheckedItems();if(0===a.checkedItems.length)this.workaround.fireSubmitEvent(a);else this.workaround.onSubmit(a)},cleanUp:function(){var a=this.itemsElement;a&&(a.innerHTML="");this.displayBlock(0);this.requests.cleanUp()},setCookie:function(a,b){for(var c=this.options,d=a.length||0,e=
[],f={c2s:null,origin:c.pageOrigin,src:c.source,where:c.showOn,token:this.getRequestToken()},g=0;g<d;g++){var k=a[g],l=[],t;l.push(k.id);t=this.createBinaryMask(k.prechecked,"-1"!==k.termId,k.visible,k.checked);l.push(t.toString(16));l.push(k.rank);e.push(l.join("|"))}f.c2s=e.join(";");h.set("compareTos",f,c.cookieLifetime,c.cookieDomain,b)},createBinaryMask:function(){for(var a=0,b=0,c=32<arguments.length?32:arguments.length;b<c;b++)a|=arguments[b]<<b;return a},bindEvents:function(){var a=this,c=
a.element,d,f,g,h;d=a.options.radioButtons?new n:new q;a.inputType=d;var k=["change","deselect","select"];f=0;for(g=k.length;f<g;f++)h=k[f],d.on(h,function(b,c){a.handleUserEvent(c,b)});e.removeAllEvents(c);d=["click","mousedown","mouseup","mouseover","mouseout"];f=0;for(g=d.length;f<g;f++)h=d[f],e.delegateEvent(c,h,".input",function(b,c){a.handleUserEvent(c.type,b)});e.delegateEvent(c,"keydown",".input",function(c,d){var e=d.which;return 32===e||13===e?(d.preventDefault(),d=document.createEvent("Event"),
d.initEvent("click",!0,!0),c.dispatchEvent(d),!1):9===e&&b.isLastChild(c.parentElement)?(d.preventDefault(),a.publish("LastItem.focusOut"),!1):!0});h=a.controlsElements;f=0;for(g=h.length;f<g;f++)d=h[f],e.removeAllEvents(d),e.addEvent(d,"click",function(b){b.preventDefault();a.handleCheckAllNoneClick(b.target)});e.delegateEvent(c,"keydown",".CompareTo-Controls .control",function(b,c){var d=c.which;return 32===d||13===d?(c.preventDefault(),a.handleCheckAllNoneClick(b),!1):!0})},handleUserEvent:function(a,
c){"click"===a&&this.inputType.publish("click",[c]);"change"===a&&(this.changeItemState(c),c.setAttribute("aria-checked",b.hasClass(c,"checked")),this.publish("input.stateChanged",[c,b.hasClass(c,"checked"),this.options.radioButtons]));var d={item:c,data:this.getItemData(c),checkedItems:this.getCheckedItems(),displayItems:this.getDisplayItems()};this.workaround.publish("input.event",[a,d]);this.responseSanitizer.publish("input.event",[a,d,c]);"change"===a&&this.updateControlsStatus(d.displayItems.length,
d.checkedItems.length);this.publish("input.event",[c,a])},updateControlsStatus:function(a,c){var d=this.controlsElements,e=d.length,f=!0,g=!0;if(0!==a)for(a===c&&(f=!1,g=!0),0===c&&(f=!0,g=!1),a=0;a<e;a++){c=d[a];var h=b.hasClass(c,"check-all")?f:g;c.setAttribute("aria-disabled",!h);c.disabled=!h}},handleCheckAllNoneClick:function(a){a=b.hasClass(a,"check-all");for(var c,d=this.element.querySelectorAll(".input"),e=0;c=d[e];e++)if(this.getItemData(c).checked!==a){var f=document.createEvent("Event");
f.initEvent("click",!0,!0);c.dispatchEvent(f)}this.publish("controls.click",[a]);this.publish("checkall.focus")},changeItemState:function(a){a=this.getItemData(a);this.options.rendering.storeStateSession||this.requests.saveItemState({item:a})},getItemData:function(a){a.data.checked=b.hasClass(a,"checked");return a.data},getItems:function(a){var b=this;b.isEnabled()&&(b.printItems([]),b.startObjectProgress(),b.requests.loadItems(a,function(a){b.displayServerResults(a);b.lastServerResult=a;b.stopObjectProgress()}))},
displayServerResults:function(a){if(a&&a.success){var b={items:a.compareTos};this.responseSanitizer.onPrepareRendering(b);this.setRequestData(b.items);this.setRequestToken(a.requestToken);this.printItems(b.items)}else this.printItems([])},printItems:function(a){var b=0,c=[],d=0,e=this.itemsElement,f={items:a,domItems:[]};if(e&&this.isEnabled()){this.publish("cmp2.rendering.start",[f]);e.innerHTML="";for(var g=0,h;h=a[g];g++)if(h.visible){var k=this.getItemDom(h);c.push(k);e.appendChild(k);h.checked&&
(d+=1);b+=1}this.displayBlock(b);this.options.radioButtons&&(l.getBoolean("cmp2.radio.button.add.none",!0)&&e.appendChild(this.getItemDom({name:"",code:"",visible:!1,checked:!1,none:!0})),this.inputType.publish("repaint",[this.element.querySelectorAll(".input")]));f.domItems=c;this.updateControlsStatus(b,d);this.publish("cmp2.rendering.finished",[f])}},displayBlock:function(a){var c=this.options,d=this.element,e=!1===c.radioButtons&&a>=c.minItemsToShowControls&&!c.limited;0<a?(this.publish("cmp2.shown"),
a=d.querySelector(".CompareTo-Controls"),a.style.display=e?"":"none",b.hasClass(d,c.compareToHiddenClass)&&b.removeClass(d,c.compareToHiddenClass)):(this.publish("cmp2.hidden"),b.hasClass(d,c.compareToHiddenClass)||b.addClass(d,c.compareToHiddenClass))},getItemDom:function(a){var b,c;c=this.options.template;b=c.unChecked;var d={name:"",label:a.name,code:a.code,checked:a.checked};d.checked&&(b=c.checked);a.none&&(b=c.none||"");b=b.replace(/(\{label}|\{name}|\{code})/gi,function(a){a=a.substr(1,a.length-
2);a=d[a];return"undefined"!==typeof a?a:""});c=document.createElement("div");c.innerHTML=b;if(b=c.querySelector(".input"))b.data=g({},a);a=c.children;return 1===a.length?a[0]:""},setRequestData:function(a){this.requestData=a},getRequestData:function(){return this.requestData},setRequestToken:function(a){this.requestToken=a},getRequestToken:function(){return this.requestToken},isVisible:function(){return b.isVisible(this.element)},isEnabled:function(){return this.element&&this.options.enabled},getDisplayItems:function(){var a=
[],b,c,d;if(this.isVisible())for(b=this.element.querySelectorAll(".input"),c=0;d=b[c];c++)(d=this.getItemData(d))&&d.visible&&a.push(d);return a},getDisplayItemsMap:function(){var a={},b,c,d;if(this.isVisible())for(b=this.element.querySelectorAll(".input"),c=0;d=b[c];c++)(d=this.getItemData(d))&&d.visible&&(a[d.code]=d);return a},getCheckedItems:function(){var a=[],b,c,d;if(this.isVisible())for(b=this.element.querySelectorAll(".input.checked"),c=0;d=b[c];c++)(d=this.getItemData(d))&&d.visible&&a.push(d);
return a}})})(a);(function(a){var b=a.Helper.Http,c=a.Helper.Url.Param,f=a.extend,g="flights trains hotels cars cruises rentals packages packagetours".split(" "),h=Array.prototype.indexOf,l=function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},k=!1,p=[],n=null;a.define("Requests",{options:{},constructor:function(a){this.options=f(!0,{},this.options,a||{})},updateOptions:function(a){this.options=f(!0,{},this.options,
a||{})},lastRequestString:"",lastRequestData:null,xhr:null,cleanUp:function(){this.lastRequestString=""},loadItems:function(a,d){var e=this;if(e.lastRequestString===c.get(a))d(e.lastRequestData);else{var h=e.xhr;h&&4!==h.readyState&&"function"===typeof h.abort&&h.abort();-1===l(a.vertical,g)?"function"===typeof d&&d(null):(e.lastRequestString=c.get(a),a=e.sanitizeParams(f(!0,{},a)),e.xhr=b.get("/s/cmp2chk/items",a,function(a){"function"===typeof d&&(e.lastRequestData=a,d(a))},function(){"function"===
typeof d&&d(null)}))}},sanitizeParams:function(a){var b=this.putValues,c=this.options,c={ptype:a.vertical,show_on:c.showOn,page_origin:c.pageOrigin};a.url&&(c.url=a.url);switch(a.vertical){case "flights":case "trains":b(a,c,"depart_date return_date depart_date_canon return_date_canon origin origincode destination destinationcode destcode cabin student travelers oneway adults child lapInfant seniors youth seatInfant".split(" "));break;case "hotels":case "rentals":b(a,c,"checkin_date checkout_date checkin_date_canon checkout_date_canon location othercity citycode lmid nhid hid frid rid cid rooms guests adults children".split(" "));
break;case "cars":b(a,c,"pickup_date dropoff_date pickup_date_canon dropoff_date_canon location location1 citycode1 location2 citycode2 pickup_hour dropoff_hour oneway".split(" "));break;case "packages":case "packagetours":c.ptype="packagetours";b(a,c,"depart_date return_date depart_date_canon return_date_canon origincode destcode pt_geo_id".split(" "));break;case "cruises":b(a,c,"destination destinationId cruiseLine sailDate sailDate_canon tripLength".split(" "))}return c},putValues:function(a,b,
c){for(var d=0,e;e=c[d];d++)a.hasOwnProperty(e)&&(b[e]=a[e])},saveItemState:function(a){b.isCrossDomain()||b.post("/s/horizon/common/compareto/CompareTosCheckedState",{name:a.item.code,checked:a.item.checked})},optionsFromServer:function(a){n?a&&a(n):("function"===typeof a&&p.push(a),k||(k=!0,b.post("/s/horizon/common/compareto/CompareTosOptions",this.options,function(a){n=a;k=!1;for(var b=0,c;c=p[b];b++)"function"===typeof c&&c(a);p=[]})))}})})(a);(function(a){var b=a.Helper.Location,c=a.Workaround,
f=a.extend,g=a.Helper.Http;a.define("ResultPage",{options:{workaround:{}},workaround:null,constructor:function(a){a=this.options=f(!0,{},this.options,a);this.workaround=c.get(a.workaround)},open:function(a){var b=this.workaround;if(b)b.onResultPageOpen(a)},delayLoad:function(){window.opener&&!window.opener.closed&&window.opener.postMessage({type:"cmp2DelayLoad"},b.origin())},ajaxOpen:function(a,b){var c=this;g.get("/s/cmp2chk/open",a,function(a){b&&b(a);c.open({compareTos:a.compareTos,extra:{pageOrigin:a.pageOrigin,
searchId:a.searchId}})})}})})(a);(function(a){var b=a.extend,c=a.ClassManager;a.define("RightRails",{requires:["Workaround","Dom.Event"],options:{selector:null,items:[],workaround:{},extra:{}},workaround:null,constructor:function(a){var d=this,e=c.getDependencies("RightRails").requires,f=e[0],e=e[1],k=b({},d.options,a),p=k.workaround,n=k.selector,q,r;a=["click","mousedown","mouseup"];var t=a.length;d.options=k;q=f.get(p);"string"===typeof n?r=document.querySelectorAll(n):"object"===typeof n&&n.jquery&&
(r=[],n.each(function(a,b){r.push(b)}));k=r.length;for(p=0;p<k;p++)for(f=r[p],n=0;n<t;n++)e.addEvent(f,a[p],function(a){d.domEvent(q,a)})},domEvent:function(a,b){if(a)a.onDirectOpen(b,this.options.items,this.options.extra)}})})(a);c.CompareTo.Items=a.Items;c.CompareTo.ResultPage=a.ResultPage;c.CompareTo.RightRails=a.RightRails})(window.R9);
(function(c,a,b){c.extend("CompareTo",{Controller:function(b,e){this.view=b;this.options=a.extend.apply(this,[{},this.options,e||{}]);"function"===typeof this.view.setUniqueId&&(b=this.getUniqueId(),this.view.setUniqueId(b),c.CompareTo.Controller.set(b,this));this.init()},getController:function(a){a=c.CompareTo.View.getUniqueId(a);return c.CompareTo.Controller.get(a)},isBehaviorOfVertical:function(b){return-1<a.inArray(b,["flights","hotels","cars","packagetours","cruises"])}});c.extend("CompareTo.Controller",
{retryCountGenerateUniqueId:3,instanceList:{},get:function(a){return c.CompareTo.Controller.instanceList[a]},set:function(a,b){c.CompareTo.Controller.instanceList[a]=b}});c.extend("CompareTo.Controller.prototype",{options:{limited:!0,maxCheckedItems:1,usePreCheckItems:!0},view:null,workaround:null,init:function(){var d=this.view;if(d instanceof c.CompareTo.View.Core){this.adjustOptions();d.adjustOptionsAccordingPage();d.adjustDynamicOptions();d.adjustPageOrigin();var e=a("#CMP2ItemTemplateNone",this.view.canvas);
this.workaround=new c.CompareTo.CoreWorkaroundUsage(a(this.view.options.compareToRow,this.view.canvas),a.extend({},{pageOrigin:d.getPageOrigin(),workaround:{name:b.getString("workaround","Core"),method:b.getString("method",null),delay:b.getNumber("delay",100),timer:b.getNumber("timer",1E3),resizeBeforeOpening:b.getBoolean("resizeBeforeOpening",!1),loadAfterPageLoaded:b.getBoolean("loadAfterPageLoaded",!1)},rendering:{maxCheckedItems:b.getNumber("maxCheckedItems",1),maxPreCheckItems:b.getNumber("maxPreCheckItems",
2),usePreCheckItems:b.getBoolean("usePreCheckItems",!0),storeStateSession:b.getBoolean("storeStateSession","false"),limited:b.getBoolean("limited","true")},itemsBlock:".compareToCheckboxes",limited:b.getBoolean("limited","true"),cookieLifetime:c.config.getInt("ui.cmp2.cookie.lifetime",6E4),radioButtons:b.getBoolean("radio","true"),enabled:b.getBoolean("cmp2.enabled","true")&&c.config.getBoolean("ui.cmp2.enabled",!0),template:{none:0<e.length?e.get(0).text:void 0}},this.options));this.workaround.parentClass=
this}},changePageOrigin:function(a){this.view.adjustPageOrigin(a)},setShowOnFrontDoor:function(){this.view.setShowOnFrontDoor()},setShowOnResult:function(){this.view.setShowOnResult()},adjustOptions:function(){var a=this.options;a.maxCheckedItems=window.BrowserConfig?b.getNumber("maxCheckedItems",a.maxCheckedItems):a.maxCheckedItems;a.limited=window.BrowserConfig?b.getBoolean("limited",a.limited):a.limited},refresh:function(){var a=this.view;b.getBoolean("cmp2.enabled",!0)&&a.isEnoughInformationForRequest()&&
a.isVisible()?(this.workaround.getItems(a.getFormArgs()),this.workaround.setPageOrigin(a.getPageOrigin())):this.workaround.cleanUp()},cleanUp:function(){this.workaround.cleanUp()},onSubmit:function(a,b){this.workaround.onSubmit(a,b)},disableOpening:function(a){this.view.setDisabled(a)},getUniqueId:function(){var a=c.CompareTo.Controller,b=null,f;for(f=0;f<a.retryCountGenerateUniqueId&&(b=this.normalizeObjectName(this.randomString()),"undefined"!==typeof a.instanceList[b]);f++);return b},normalizeObjectName:function(a){return a.replace(/[^a-zA-Z0-9]+/gi,
"")},randomString:function(a){a=a||10;var b="",c,d;for(d=0;d<a;d++)c=Math.floor(51*Math.random()),b+="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(c,c+1);return b}})})(window.R9,window.jq||window.jQuery,window.BrowserConfig);
(function(c,a){c.extend("CompareTo.Helper.CheckBoxButtonGroup",{});c.CompareTo.Helper.CheckBoxButtonGroup=function(b){this.container=a(b);this.init()};c.CompareTo.Helper.CheckBoxButtonGroup.prototype={constructor:c.CompareTo.Helper.CheckBoxButtonGroup,container:null,input:".input",init:function(){this.container.on("click",this.input,function(){a(this).hasClass("checked")?(a(this).removeClass("checked"),a(this).trigger("change").trigger("deselect")):(a(this).addClass("checked"),a(this).trigger("change").trigger("select"))})}}})(window.R9,
window.jq||window.jQuery);
(function(c,a,b){c.extend("CompareTo.Helper.RadioButtonGroup",{});c.CompareTo.Helper.RadioButtonGroup=function(b){this.container=a(b);this.init()};var d={};c.CompareTo.Helper.RadioButtonGroup.prototype={constructor:c.CompareTo.Helper.RadioButtonGroup,container:null,input:".input",init:function(){this.container.on("click",this.input,function(){var e=a(this).data("name");e in d&&this!==d[e]&&a(d[e]).removeClass("checked").trigger("change").trigger("deselect");a(this).hasClass("checked")?b.getBoolean("cmp2.radio.buttons.allow.deselect",
!1)&&(c.Analytics.api.trackEvent("cmp2/radio/click/deselect"),delete d[e],a(this).removeClass("checked"),a(this).trigger("change").trigger("deselect")):(d[e]=this,a(this).addClass("checked"),a(this).trigger("change").trigger("select"))});var e=this;this.container.on("repaint",function(){e.update()})},update:function(){this.container.find(this.input).each(function(){var b=a(this).data("name");a(this).hasClass("checked")&&!d.hasOwnProperty(b)?d[b]=this:a(this).removeClass("checked")})}}})(window.R9,
window.jq||window.jQuery,window.BrowserConfig);
(function(c,a,b,d,e){c.extend("CompareTo.Helper.SubmitNavigator",{});b=c.CompareTo.Helper.SubmitNavigator=function(a){};b.prototype={constructor:b,navigate:function(a,b){var d=this;if((a=c.CompareTo.getController(a))&&a instanceof c.CompareTo.Controller)a.onSubmit(b,function(){d.navigateCurrentPage(b)});else d.navigateCurrentPage(b)},navigateCurrentPage:function(b){a.cookie("nus","t",{path:"/"});e&&e.AppInstance?e.AppInstance.navigate(b,{reload:!0}):location.href=b}}})(window.R9,window.jq||window.jQuery,
window.BrowserConfig,window.R9.config,window.R9App);
(function(c,a,b,d,e,f){c.extend("CompareTo.View",{});c.CompareTo.View.Core=function(b,d){this.emitter=new c.Common.Emitter(this);this.options=a.extend.apply(this,[{},this.options,d||{}]);this.canvas=a(b)};c.CompareTo.View.getUniqueId=function(b){return a(b).data("uniqueId")};c.CompareTo.View.getViewFromForm=function(b){switch(a(b).find("[name\x3dtab]").val()){case "flights":b=new c.CompareTo.View.Flights(b);break;case "hotels":b=new c.CompareTo.View.Hotels(b);break;case "cars":b=new c.CompareTo.View.Cars(b);
break;case "cruises":b=new c.CompareTo.View.Cruises(b);break;case "packagetours":b=new c.CompareTo.View.PackageTours(b);break;default:throw Error("not implemented");}return b};c.CompareTo.View.Core.prototype={constructor:c.CompareTo.View.Core,canvas:null,isSeo:null,isSem:null,isRp:null,pageOrigin:{vertical:"",type:"",page1:"",page2:"",position:""},pageOriginString:null,resultPageOptions:{showOn:"sa",pageOrigin1:"RP"},frontDoorPageOptions:{showOn:"fd",pageOrigin1:"FD"},options:{showOn:null,pageOrigin1:null,
pageOrigin2:null,pageOriginPosition:"M0",useInterstitialPage:!1,containerSelector:".compareToCheckboxes",compareToRow:".cmp2Block",checkboxSelector:".input",submitSelector:"button[type\x3dsubmit]",limited:!0,suppressKAYAK:!0,usePreCheckItems:!0,overlaySubmit:null,disabled:!1,keepCheckboxState:!0,changeAirportName:!0,checkOnlyAirportCode:!1},events:{optionsChanged:"optionsChanged",openOneWindow:"openOneWindow",openAllWindows:"openAllWindows",saveItemState:"saveItemState"},template:null,verticalName:"core",
verticalShortName:null,printItemIndex:0,serverItems:[],checkboxState:[],adjustedOptionsAccordingOverlay:!1,beget:function(){return function(){var a=function(){};return function(b){a.prototype=b;return new a}}()(this)},compileTemplate:function(){var c=a("#CMP2ItemTemplate",this.canvas);0<c.length&&(this.template=b.template(c.get(0).text))},adjustDynamicOptions:function(){var a="undefined"!==typeof c.cmp2?c.cmp2:{},b=this.options;b.limited=d?d.getBoolean("limited",b.limited):b.limited;b.suppressKAYAK=
"undefined"!==a.suppressKAYAKCompareToPopup&&!0===a.suppressKAYAKCompareToPopup;b.usePreCheckItems="true"===this.getElementByName("preCheckItems").val();b.useInterstitialPage="undefined"!==typeof a.useInterstitialPage&&!0===a.useInterstitialPage;b.keepCheckboxState=d?d.getBoolean("keepCheckboxState",b.keepCheckboxState):b.keepCheckboxState;b.overlaySubmit=d?d.getString("overlaySubmit",b.overlaySubmit):b.overlaySubmit},adjustOptionsAccordingPage:function(){null===this.isSem&&(this.isSem=window.isSemPage?
!0:!1);null===this.isSeo&&(this.isSeo=window.isSeoPage?!0:!1);this.setOptionsAsFrontDoorPageView();null===this.isRp&&(this.isRp=document.inlinesearchagain?!0:!1,!0===this.isRp&&this.setOptionsAsResultPageView())},setOptionsAsResultPageView:function(){this.options=a.extend.apply(this,[{},this.options,this.resultPageOptions||{}])},setOptionsAsFrontDoorPageView:function(){this.options=a.extend.apply(this,[{},this.options,this.frontDoorPageOptions||{}])},adjustPageOrigin:function(b){var c=this.options,
d=this.pageOrigin,e=[];d.vertical=this.verticalShortName;d.type=this.isSem?"M":this.isSeo?"O":"";d.page1=c.pageOrigin1;d.page2=c.pageOrigin2;d.position=c.pageOriginPosition;this.pageOrigin=a.extend.apply(this,[{},d,b||{}]);if("undefined"===typeof b&&(b=this.getElementByName("seoCMPPageOrigin").val(),"undefined"!==typeof b&&0<b.length)){this.pageOriginString=b;return}d=this.pageOrigin;e.push(d.vertical);e.push(d.type);e.push(d.page1);e.push(d.page2);e.push(d.position);this.pageOriginString=e.join(".")},
getPageOrigin:function(){return this.pageOriginString},startSearch:function(){},isVisible:function(){return a(this.canvas).is(":visible")},setDisabled:function(a){this.options.disabled=a},setShowOnResult:function(){this.options.showOn=this.resultPageOptions.showOn},setShowOnFrontDoor:function(){this.options.showOn=this.frontDoorPageOptions.showOn},getFormArgs:function(){var b=this.options,d={ptype:this.verticalName,show_on:b.showOn,page_origin:this.getPageOrigin()};b.useInterstitialPage&&a(this.canvas).find("input[name\x3dpage_origin]").val(this.getPageOrigin());
b=new c.URL.Generator(this.canvas);d.url=b.generateFullUrl();return d},getArgs:function(){return{}},isEnoughInformationForRequest:function(){return!1},saveCompareToImpressions:function(){var b=this,c=this.getCompareToItems(),d=[];a.each(this.serverItems,function(a,e){a=b.getCmp2ObjectByCode(c,e.code);0<a.length?d.push(a[0]):d.push(e)});this.setImpressionValue(this.getImpressionString(d))},setImpressionValue:function(a){},getCompareToItems:function(){var b=[],c=this,d=c.options,e;if(d.disabled)return[];
a(c.canvas).find("input[name^\x3dcomparetosite][type\x3dcheckbox]:visible").each(function(){e=c.getItemData(this);""!==e.code&&b.push(e)});a(c.canvas).find(d.checkboxSelector).each(function(){e=c.getItemData(this);""!==e.code&&b.push(e)});return b},getImpressionString:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=[],f;e.push(d.id);f=this.createBinaryMask(d.prechecked,"-1"!==d.termId,d.visible,d.checked);e.push(f.toString(16));e.push(d.rank);b.push(e.join("|"))}return b.join(";")},createBinaryMask:function(){for(var a=
0,b=0,c=32<arguments.length?32:arguments.length;b<c;b++)a|=arguments[b]<<b;return a},getVerticalName:function(){return this.verticalName},setUniqueId:function(b){a(this.canvas).data("uniqueId",b)},getUniqueId:function(){return a(this.canvas).data("uniqueId")},getElementByName:function(b,c){if("undefined"===typeof c||-1===a.inArray(c,"|*~$!^".split("")))c="";return a(this.canvas).find("[name"+c+'\x3d"'+b+'"]')},isValidAirport:function(a,b){var c=!0,d=!0;if("string"!==typeof a||0===a.length||"/"===
a)c=!1;if(!this.options.checkOnlyAirportCode){if("string"!==typeof b||0===b.length)d=!1;return c||d}return c},changeAirport:function(b){if("string"!==typeof b)return"";if(this.options.changeAirportName&&-1<b.indexOf(",")){var c=b.split(","),d=!0,e=null,f,g,q;for(f in c)c.hasOwnProperty(f)&&0<c[f].length&&(q=a.trim(c[f]),g=q.length,d=3===g?d&&!0:d&&!1,null===e&&(e=q));if(d)return e}return b},isDateValid:function(b){var c=!1,d=a.datepicker._defaults.dateFormat;try{if("string"===typeof b){var e=a.datepicker.parseDate(d,
b);e&&this.isDateInAYear(e)&&(c=!0)}}catch(p){c=!1}return c},isDateRangeValid:function(b,c){var d=!1,e=a.datepicker._defaults.dateFormat;try{var g=a.datepicker.parseDate(e,b);"undefined"===typeof c&&g&&this.isDateInAYear(g)&&(d=!0);if("undefined"!==typeof c){var h=a.datepicker.parseDate(e,c),q=f(h).diff(g,"days");g&&this.isDateInAYear(g)&&h&&this.isDateInAYear(h)&&0<=q&&(d=!0)}}catch(r){d=!1}return d},isDateInAYear:function(a){var b=!1;try{0<=f(a).diff(new window.Date,"days")&&(b=!0)}catch(l){b=!1}return b}}})(window.R9,
window.jq||window.jQuery,window.doT,window.BrowserConfig,window.R9.config,window.moment);
(function(c){c.extend("CompareTo.View",{Cars:function(a,b){return c.CompareTo.View.Core.call(this,a,b)}});c.CompareTo.View.Cars.prototype=c.CompareTo.View.Core.prototype.beget();c.extend("CompareTo.View.Cars.prototype",{verticalName:"cars",verticalShortName:"C",getArgs:function(){return{pickup_date:this.getElementByName("pickup_date").val(),dropoff_date:this.getElementByName("dropoff_date").val(),location:this.getElementByName("location").val(),location1:this.getElementByName("location").val(),citycode1:this.getElementByName("citycode1").val(),
location2:this.getElementByName("location2").val(),citycode2:this.getElementByName("citycode2").val(),pickup_hour:this.getElementByName("pickup_hour").val(),dropoff_hour:this.getElementByName("dropoff_hour").val(),oneway:!this.isSameLocation()}},isSameLocation:function(){return"n"===this.getElementByName("oneway").filter(":checked").val()},isEnoughInformationForRequest:function(){var a=this.getArgs(),b=!0;0===a.citycode1.length?b=!1:this.isSameLocation()||0!==a.citycode2.length?this.isDateValid(a.pickup_date)&&
this.isDateRangeValid(a.pickup_date)?this.isDateValid(a.dropoff_date)&&this.isDateRangeValid(a.dropoff_date)||(b=!1):b=!1:b=!1;return b}})})(window.R9);
(function(c,a){c.extend("CompareTo.View",{Flights:function(a,b){return c.CompareTo.View.Core.call(this,a,b)}});var b=/[0-9]+[fr]{1,2}/;c.CompareTo.View.Flights.prototype=c.CompareTo.View.Core.prototype.beget();c.extend("CompareTo.View.Flights.prototype",{verticalName:"flights",verticalShortName:"F",getArgs:function(){if("y"===this.getElementByName("mc").val())return null;var a=this.isOneWaySelected();return{origin:this.changeAirport(this.getElementByName("origin").val()),origincode:this.getElementByName("origincode").val(),
destination:this.changeAirport(this.getElementByName("destination").val()),destcode:this.getElementByName("destcode").val(),destinationcode:this.getElementByName("destcode").val(),cabin:this.getElementByName("cabin").val(),depart_date:this.getElementByName("depart_date").val(),return_date:a?"":this.getElementByName("return_date").val(),student:this.getElementByName("student").val(),travelers:this.getElementByName("travelers").val(),oneway:a?!0:!1}},isOneWaySelected:function(){var a=this.getElementByName("oneway");
return"y"===("radio"===a[0].type?a.filter(":checked").val():a.val())},isEnoughInformationForRequest:function(){var a=this.getArgs();if(null===a)return!1;var c=this.isOneWaySelected(),f=!0;this.isValidAirport(a.origincode,a.origin)?this.isValidAirport(a.destcode,a.destination)?this.isDateValid(a.depart_date)&&this.isDateRangeValid(a.depart_date)?c||this.isDateValid(a.return_date)&&this.isDateRangeValid(a.depart_date,a.return_date)||(f=!1):f=!1:f=!1:f=!1;(c=a.destcode)&&!(c=b.exec(a.destcode))&&(c=
(a=a.destcode)&&(-1!==a.indexOf("cy")||-1!==a.indexOf("cg")));c&&(f=!1);return f}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("CompareTo.View",{Hotels:function(a,d){return c.CompareTo.View.Core.call(this,a,d)}});c.CompareTo.View.Hotels.prototype=c.CompareTo.View.Core.prototype.beget();c.extend("CompareTo.View.Hotels.prototype",{verticalName:"hotels",verticalShortName:"H",getArgs:function(){var b=this.getElementByName("rooms-input").val(),c=this.getElementByName("guests-input").val();"undefined"==typeof b&&(b=this.getElementByName("rooms").val());"undefined"==typeof c&&(c=a("[name^\x3dguests]",this.canvas).filter(":visible").val());
return{checkin_date:this.getElementByName("checkin_date").val(),checkout_date:this.getElementByName("checkout_date").val(),location:this.getElementByName("othercity").val(),othercity:this.getElementByName("othercity").val(),citycode:this.getElementByName("citycode").val(),rooms:b,guests:c,lmid:this.getElementByName("lmid").val(),nhid:this.getElementByName("nhid").val()}},isEnoughInformationForRequest:function(){var a=this.getArgs(),c=!0,e=this.getElementByName("frid").val()||"",f=this.getElementByName("rid").val()||
"",g=this.getElementByName("cid").val()||"";0<e.length||0<f.length||0<g.length?c=!1:0==a.location.length&&0==a.citycode.length?c=!1:this.isDateValid(a.checkin_date)&&this.isDateRangeValid(a.checkin_date)?this.isDateValid(a.checkout_date)&&this.isDateRangeValid(a.checkout_date)||(c=!1):c=!1;return c}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("CompareTo.View",{PackageTours:function(a,d){return c.CompareTo.View.Core.call(this,a,d)}});c.CompareTo.View.PackageTours.prototype=c.CompareTo.View.Core.prototype.beget();c.extend("CompareTo.View.PackageTours.prototype",{verticalName:"packagetours",verticalShortName:"P",VALID_KPACK_CMP2_GEO_TYPES:"ZSAPDHFIWXYUZLN".split(""),getArgs:function(){var b={depart_date:"",return_date:"",origincode:"",origin:""};try{var c=a.datepicker.parseDate("yy-mm-dd",this.getElementByName("departDate").val()),
e=a.datepicker.parseDate("yy-mm-dd",this.getElementByName("returnDate").val()),f=this.getElementByName("origincode").val(),g=this.getElementByName("origin").val(),h;h=""!=f&&this.isStringStartsWith(f,"C-")&&""!==g?g.split(",")[0]:f;var b=a.extend({},b,{depart_date:a.datepicker.formatDate("yymmdd",c),return_date:a.datepicker.formatDate("yymmdd",e),origincode:h,origin:g}),l=this.getElementByName("destcode");0<l.length?b.destcode=l.val():0<a.parseJSON(this.getElementByName("searchCriteriaJson").val()).length?
b.pt_geo_id=this.getValidKPACKGeoId(this.getElementByName("searchCriteriaJson").val()):0==a.parseJSON(this.getElementByName("searchCriteriaJson").val()).length&&(b.pt_geo_id=this.getElementByName("searchCriteriaUseWhenEmpty").val());b.destinationName=this.getDestinationName(b.pt_geo_id,this.getElementByName("searchCriteriaJson").val())}catch(k){}return b},isStringStartsWith:function(a,c){return a.match("^"+c)==c},getDestinationName:function(b,c){if(0<c.length&&(c=a.parseJSON(c),0<c.length))for(var d=
0;d<c.length;d++)if(b===c[d].id)return c[d].name;return null},getValidKPACKGeoId:function(b){b=a.parseJSON(b);if(0<b.length)for(var c=0;c<b.length;c++){var e=b[c].id,f=e.substring(0,1);if(0<=a.inArray(f,this.VALID_KPACK_CMP2_GEO_TYPES))return e}return""},isEnoughInformationForRequest:function(){var a=this.getArgs(),c=!0;null==a.depart_date||0==a.depart_date.length?c=!1:null==a.return_date||0==a.return_date.length?c=!1:null!=a.destcode&&0!=a.destcode.length||null!=a.pt_geo_id&&0!=a.pt_geo_id.length||
(c=!1);return c}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("CompareTo.View",{Cruises:function(a,d){return c.CompareTo.View.Core.call(this,a,d)}});c.CompareTo.View.Cruises.prototype=c.CompareTo.View.Core.prototype.beget();c.extend("CompareTo.View.Cruises.prototype",{verticalName:"cruises",verticalShortName:"R",getArgs:function(){return{dep_date:this.getElementByName("dep_date").val(),trip_length:this.getElementByName("length").val(),destination:this.getElementByName("destination").val(),destinationId:this.getElementByName("destination").val(),
cruiseline:this.getElementByName("cruiseline").val(),senior:this.getElementByName("senior").val(),region_code:this.getElementByName("region_code").val()}},isEnoughInformationForRequest:function(){var a=this.getArgs(),c=!0;0===a.destination.length?c=!1:0===a.dep_date.length&&(c=!1);return c}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("CompareTo.View",{RightRails:function(a,d,e){this.emitter=new c.Common.Emitter(this);this.canvas=a;this.selector=d;this.links=e}});c.extend("CompareTo.View.RightRails.prototype",{canvas:null,selector:null,links:[],events:{openAllWindows:"openAllWindows"},options:{limited:!0,height:null,width:null,overlaySubmit:null},init:function(){this.adjustOptions();this.bindEvents()},adjustOptions:function(){var b=this.options;b.overlaySubmit=window.BrowserConfig?BrowserConfig.getString("overlaySubmit",
b.overlaySubmit):b.overlaySubmit;b.limited=window.BrowserConfig?BrowserConfig.getBoolean("limited",b.limited):b.limited;b.limited&&(b.height=a(this.selector,this.canvas).outerHeight(!0),b.width=a(this.selector,this.canvas).outerWidth(!0));"undefined"!==typeof this.links&&1<this.links.length&&!b.limited?a("#rightRailCompareAll").show():a("#rightRailCompareAll").hide()},bindEvents:function(){var b=this,d=b.links;a(b.canvas).off("click.rightRailsOpenWindows").on("click.rightRailsOpenWindows",b.selector,
function(){c.Analytics.api.trackEvent("cmp2/rightRails/click/all");b.emitter.emit(b.events.openAllWindows,[d])});a(".cmp2rightrailcontainer .provideritem").on("click",function(){c.Analytics.api.trackEvent("cmp2/rightRails/click/single")});a(".cmp2inlineadcontainer .provideritem").on("click",function(){c.Analytics.api.trackEvent("cmp2/inline/click/single")})}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("CompareTo.CoreWorkaroundUsage",{});var b=c.CompareTo.CoreWorkaroundUsage=function(b,c){this.element=b;this.options=a.extend(!0,this.options,c);this.init()};b.prototype={constructor:b,element:null,options:{},parentClass:null,init:function(){var b=this;this.items=new c.CompareTo.Items(this.element,this.options);this.items.on("cmp2.rendering.start",function(){b.element.removeClass("compareToHidden")});this.items.on("cmp2.options.update",function(c){var d=b.parentClass.view;d.options=
a.extend(!0,{},d.options,c||{});b.parentClass.refresh()});this.items.on("controls.click",function(a){a?c.Analytics.api.trackEvent({category:"Compare-to",action:"compare-to",label:"all"}):c.Analytics.api.trackEvent({category:"Compare-to",action:"compare-to",label:"none"})})},getItems:function(a){a.vertical=a.ptype;this.items.getItems(a)},setPageOrigin:function(a){this.items.options.pageOrigin=a},onSubmit:function(a,b){var c=this;this.items.on("form.submit",function(){c.items.off("form.submit");"function"===
typeof b&&b.call()});this.items.handleSubmit({url:a})},cleanUp:function(){this.items.cleanUp()}}})(window.R9,window.jq||window.jQuery);window.raf=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(c){window.setTimeout(c,1E3/60)}}();
(function(c,a){c.extend("Tracking.GoogleTagManager",{isInitialized:!1,consented:!0,init:function(){c.config.getBoolean("ui.gtm.useConsent",!1)?this.consented=!1:document.body?this.setUp():a(document).ready(a.proxy(this.setUp,this))},setUp:function(){this.isInitialized=!0;c.config.getBoolean("ui.tracking.gtm.iframe",!1)&&!window.location.pathname.startsWith("/gtm")?(this.setUpIframe(),a(this.gtm).load(a.proxy(this.setUpInitialData,this)),this.gtm.src="/gtm"+location.pathname+location.search+location.hash):
(this.setUpInitialData(),this.initApi());this.addEventHandlers()},setUpInitialData:function(){var a=c.globals.analytics||[],d=a.pixelContext||{},a={vertical:a.vertical||c.globals.vertical,locale:c.globals.locale.loc,affiliate:c.globals.affiliate,affiliateskin:c.globals.affiliateskin,geoIpCc:c.globals.geoIpCc,experiment:c.globals.experiment,pageId:a.pageId,subPageId:a.subPageId,presentation:a.presentation||c.globals.presentation,clickTripz:c.config.getBoolean("ui.clicktripz.enabled",!1),pixelContext:d};
c.config.getBoolean("ui.tracking.gtm.iframe",!1)&&(a.event="pageView");this.updateDataLayer(a)},setUpIframe:function(){this.gtm=a('\x3ciframe class\x3d"Common-Tracking-GoogleTagManager" style\x3d"width: 100%;height: 100%;position: fixed;left: 100%;visibility: hidden; bottom: 0;"\x3e\x3c/iframe\x3e').appendTo("body")[0]},updateDataLayer:function(a){if(this.consented)try{if(this.isInitialized){var b=c.config.getBoolean("ui.tracking.gtm.iframe",!1)?this.gtm.contentWindow:window;b.dataLayer||(b.dataLayer=
[]);b.dataLayer.push(a)}}catch(e){}},addEventHandlers:function(){var b=this;a(document).on("gtm.update",function(a,c){b.updateDataLayer(c)})},signupEvent:function(){this.consentEnabled();var b=a.Deferred(),c=setTimeout(function(){b.reject(Error("GTM signUpTimeout"))},1E3);this.updateDataLayer({event:"signup",eventCallback:function(){clearTimeout(c);b.resolve()}});return b.promise()},loginEvent:function(b){this.consentEnabled();var c=a.Deferred(),e=setTimeout(function(){c.reject(Error("GTM loginEventTimeout"))},
1E3);this.updateDataLayer({event:"login",eventCallback:function(){clearTimeout(e);c.resolve()}});return c.promise()},consentEnabled:function(){this.consented=!0;this.isInitialized||this.setUp()},initApi:function(){var a=window,c=document;a.dataLayer=a.dataLayer||[];a.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});a=c.getElementsByTagName("script")[0];c=c.createElement("script");c.async=!0;c.src="//www.googletagmanager.com/gtm.js?id\x3dGTM-T654MX";a.parentNode.insertBefore(c,a)}})})(window.R9,
window.jq||window.jQuery);
(function(c){window.unifiedDataLayer=window.unifiedDataLayer||[];window.addEventListener("load",function(){if(c.globals.unifiedDataLayer){var a=window,b=document;a.unifiedDataLayer=a.unifiedDataLayer||[];a.unifiedDataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});a=b.getElementsByTagName("script")[0];b=b.createElement("script");b.async=!0;b.src="https://www.googletagmanager.com/gtm.js?id\x3dGTM-PSCCSHQ\x26l\x3dunifiedDataLayer";a.parentNode.insertBefore(b,a)}});c.tags=c.tags||{};c.tags.dataLayer=
window.unifiedDataLayer;c.tags.initializeDataLayer=function(a){var b=c.globals.analytics||[];a.vertical=b.vertical||"unknown";a.screenId=b.screenId||b.pageId||"unknown";a.subScreenId=b.subScreenId||b.subPageId;a.eventName=a.eventName||"screenView";a.placement=c.globals.placement||"";c.tags.dataLayer.push(a)}})(R9);
(function(c){R9.extend("Ads.ExitUnit",{SmarterTravel:function(a){jq.extend(this.options,a);this.init()}});R9.extend("Ads.ExitUnit.SmarterTravel.prototype",{options:{placementId:"",vertical:"",extract:jq.noop,isPoppableState:function(){return!0},suppressSelectors:"",updateSelector:"",isRP:!1},url:"//p.smartertravel.com/ext/lib/kayak.min.js",apiKey:"MpmItSe-TwqpARYEZ4Rsvg",currency:"USD",locale:"en_US",leaveBehind:null,init:function(){this.options.isPoppableState()&&(this.loadLibrary(),this.bindEvents())},
loadLibrary:function(){var a=document.createElement("script");a.src=this.url;a.async=!0;var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},bindEvents:function(){var a=this;window.SmarterTravelNetwork_ready=window.SmarterTravelNetwork_ready||[];window.SmarterTravelNetwork_ready.push(function(c){function d(a){switch(a){case "e":case "p":return"economy_coach";case "b":return"business";case "f":return"first_class";default:return null}}var f={apiKey:a.apiKey,contextData:function(){var b=
{currency:a.currency,locale:a.locale,ad_vertical:a.options.vertical};if(a.options.extract!==jq.noop){jq.extend(b,a.options.extract());if(b.hasOwnProperty("date1")){var e=moment(b.date1).format("MM/DD/YYYY");b.date1=c.Util.formatDate(e,"MM/DD/YYYY")}b.hasOwnProperty("date2")&&(e=moment(b.date2).format("MM/DD/YYYY"),b.date2=c.Util.formatDate(e,"MM/DD/YYYY"));b.hasOwnProperty("flight_service_class")&&(b.flight_service_class=d(b.flight_service_class))}return b},popupSuppressionPeriod:24,logLevel:c.Log.LOG_LEVELS.DEBUG};
window.R9Admin&&jq.extend(f,{logLevel:c.Log.LOG_LEVELS.DEBUG});c.init(f);a.leaveBehind=c.createLeaveBehind({placementId:a.options.placementId,clickEventSelector:!1,redirectPageUrl:"/s/horizon/common/ads/SmarterTravelInterstitial"});c.loadPlacements([a.leaveBehind]);jq(document).on("click",b)});var b=function(c){0<jq(c.target).closest(a.options.suppressSelectors).length||!a.options.isPoppableState()||(a.options.isRP?a.leaveBehind.launch():a.leaveBehind.launchHolder(),setTimeout(function(){jq(document).off("click",
b)},50))}},launch:function(){this.options.isPoppableState()&&this.leaveBehind.launch()}})})(jq||jQuery);
(function(c,a){c.extend("Ads.XSell.Hotels",{});var b=c.Ads.XSell.Hotels=function(b,c){this.isAnonymous=c;this.id=b;this.element=a("#"+b);this.init()};b.prototype={constructor:b,id:"",element:a.noop(),isAnonymous:!0,init:function(){this.requestXSell()},bindEvent:function(){var b=this;if(this.isAnonymous)a(".button-unlock",this.element).on("click",function(a){a.preventDefault();b.displayRegister();a=b.getXSellData(this);c.Analytics.api.trackEvent({category:"flight-hotel-xsell",action:"unlock",label:a.destination})});
a(".promo-header",this.element).on("click",function(a){a.preventDefault();a.stopPropagation();a=b.getXSellData(this);b.isAnonymous?(b.displayRegister(),c.Analytics.api.trackEvent({category:"flight-hotel-xsell",action:"view-signin",label:a.destination})):(c.Analytics.api.trackEvent({category:"flight-hotel-xsell",action:"view-results",label:a.destination}),window.open(a.url,"_blank"))});a(".Items-Grid",this.element).on("click",function(d){d.preventDefault();d.stopPropagation();d=a(this).data();var e=
b.getXSellData(this);c.Analytics.api.trackEvent({category:"flight-hotel-xsell",action:"view-hotel",label:e.destination});window.open(d.url,"_blank")});a(".view-deal",this.element).on("click",function(d){d.preventDefault();d.stopPropagation();d=a(this).closest(".Items-Grid").data();var e=b.getXSellData(this);c.Analytics.api.trackEvent({category:"flight-hotel-xsell",action:"view-deal",label:e.destination});window.open(d.url,"_blank")})},getXSellData:function(b){return a(b).closest(".x-sell-data").data()},
displayRegister:function(){var b=a(".promo-header input",this.element).val();AjaxReg.regtype="flight-hotel-xsell";AjaxReg.usernamedefault=b;AjaxReg.ui.register()},requestXSell:function(){var b=this;a.ajax({url:"/s/run/brand/x-sell/hotel",data:{searchId:window.SearchID},success:function(d){""===a.trim(d)?b.element.remove():(b.element.html(d),b.element.show(),d=b.element.children().first().data(),c.Analytics.api.trackEvent({category:"flight-hotel-xsell",action:"display-xsell",label:d.destination}),
b.bindEvent())}})}}})(window.R9,window.jq||window.jQuery);(function(c,a){R9.extend("Privacy.cookiesconsent",{logCookiesConsent:function(a,d){"function"!==typeof d&&(d=c.noop);jq.ajax({type:"POST",data:"isRepeat\x3d"+a,url:"/s/run/privacy/logcookiesconsent",success:d})}})})(jQuery);(function(c){c.fn.undoBox=function(a){return(new R9.Widgets.UndoBox(this.get(),a)).element}})(jq||jQuery);
(function(c,a){var b=function(){var a=0;return function(){return a++}}();c.extend("Header",{TripsCounter:function(){var b=Array.prototype.slice.call(arguments);3===b.length&&("string"===typeof b[0]&&"number"===typeof b[1]&&"number"===typeof b[2]?(a.extend(this,{counterElementSelector:b[0],count:0<=b[1]?b[1]:0,upcomingTripsCount:b[2]}),this.init()):"function"===typeof console.error&&console.error("Incorrect arguments for TripsCounter. Expects element ID / classname and number"))},TripsDropdownBubble:function(b,
c){this.options=a.extend({},this.options,c);this.init(b)}});c.extend("Header.TripsCounter.prototype",{options:{profileMenu:"#accountTooltip",tripsMenuTrigger:null,tripsMenu:null,tripsMenuContainer:"#tripsMenuDropDown, #tripsMenuIconDropDown",tripsMenuOpenClass:"dropdown-open"},counterElementSelector:null,counterElement:null,count:0,upcomingTripsCount:0,init:function(){this.instance=this;this.counterElement=a(this.counterElementSelector);this.options.tripsMenuTrigger=".colTripsIcon";this.options.tripsMenu=
".tripsIconLink";this.addEventListeners().setTripsCount(this.count);this.updateMenu()},addEventListeners:function(){a(document).on("tripAdded",a.proxy(this.up,this));a(document).on("tripRemoved tripsBubbleHelpRemove",a.proxy(this.down,this));a(document).on("updateTripsCount",a.proxy(this.setTripsCount,this));a(document).on("trips.upcomingCount",a.proxy(this.setUpcomingTripsCount,this));return this},setUpcomingTripsCount:function(a){this.upcomingTripsCount=a||0;this.updateMenu()},setTripsCount:function(){var a=
Array.prototype.slice.call(arguments);this.count=a.length&&"number"===typeof a[a.length-1]&&0<=a[a.length-1]?a[a.length-1]:this.count;this.update()},up:function(){this.count+=1;this.setTripsCount();this.updateMenu()},down:function(){0>--this.count&&(this.count=0);this.setTripsCount();this.updateMenu()},updateMenu:function(){0===this.count&&0===this.upcomingTripsCount?this.disableMenu():this.enableMenu()},update:function(){this.counterElement.length&&"number"===typeof this.count&&this.counterElement.html(this.count)},
disableMenu:function(){a(this.options.tripsMenuTrigger).off("mouseenter mouseleave");a(this.options.tripsMenu).off("mouseeneter mouseleave")},enableMenu:function(){this.disableMenu();var b=this,e,f;a(b.options.tripsMenu).length&&(a(b.options.tripsMenuTrigger).on("mouseenter",function(d){f=setTimeout(function(){var d=a(b.options.tripsMenu);d.length&&(d.is(":hidden")||!d.hasClass(b.options.tripsMenuOpenClass)?("undefined"!==typeof a(document).data("dialog")&&(a("#moreHeaderLink").removeClass("show-tooltip"),
a(b.options.profileMenu).is(":visible")&&a(b.options.profileLink).click()),c.config.getBoolean("ui.trips.withchallenger",!1)&&(a("#userDisplayEmailArrow").removeClass("arrow-up").addClass("arrow-down"),a("#accountTooltip").hide(),a(".username").removeClass("open"),a("#moreNavLink").removeClass("open"),a(".new-more-menu").removeClass("open")),a(b.options.tripsMenu).addClass(b.options.tripsMenuOpenClass),a(document).data("dialog",{close:function(){a(b.options.tripsMenu).removeClass(b.options.tripsMenuOpenClass)}})):
clearTimeout(e))},300)}).on("mouseleave",function(){clearTimeout(f);a(b.options.tripsMenu).length&&(e=setTimeout(function(){a(b.options.tripsMenu).removeClass(b.options.tripsMenuOpenClass)},300))}),a(b.options.tripsMenuContainer).on("mouseenter",function(){clearTimeout(e)}).on("mouseleave",function(){a(b.options.tripsMenuContainer);e=setTimeout(function(){a(b.options.tripsMenu).removeClass(b.options.tripsMenuOpenClass)},300)}))}});c.extend("Header.TripsDropdownBubble.prototype",{options:{cookieKey:void 0},
element:void 0,helpWrapper:void 0,removeBubbleHelpLink:void 0,tripsSummariesWrapper:void 0,instanceNum:void 0,init:function(c){this.instanceNum=b();this.element=a("#"+c);this.helpWrapper=this.element.find(".tripsBubbleHelpCol");this.removeBubbleHelpLink=this.helpWrapper.find(".remove");this.tripsSummariesWrapper=this.element.find(".tripsSummariesGrid");this.addEventListeners()},addEventListeners:function(){var b=this;a(document).on("tripAdded."+this.instanceNum,a.proxy(this.tripAdded,this));a(document).on("tripRemoved."+
this.instanceNum,a.proxy(this.tripRemoved,this));a(document).on("tripsBubbleHelpRemove."+this.instanceNum,a.proxy(this.tripsBubbleHelpRemove,this));a(document).on("updateTripsHeader."+this.instanceNum,a.proxy(this.updateTripsHeader,this));this.removeBubbleHelpLink.click(function(){a(document).trigger("tripsBubbleHelpRemove");setMetaCookie(b.options.cookieKey,!0)})},tripAdded:function(a,b){this.updateTripsHeader()},tripRemoved:function(a,b){this.updateTripsHeader()},tripsBubbleHelpRemove:function(a,
b){this.helpWrapper.remove()},updateTripsHeader:function(){var b=this;a.ajax({type:"GET",url:"/k/headerajax",cache:!1,data:{tripsDropdown:!0,visible:b.element.is(":visible"),dropDownId:b.element.attr("id")},dataType:"html",success:function(a){b.element&&b.element.replaceWith(a);b._destroy()}})},_getTripById:function(a){return this.tripsSummariesWrapper.find('*[data-tripId\x3d"'+a+'"]')},_destroy:function(){this.tripsSummariesWrapper=this.removeBubbleHelpLink=this.helpWrapper=this.element=null;a(document).off("tripAdded."+
this.instanceNum);a(document).off("tripRemoved."+this.instanceNum);a(document).off("tripsBubbleHelpRemove."+this.instanceNum);a(document).off("updateTripsHeader."+this.instanceNum)}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("IScraper",{Widget:function(b,d){this.options=a.extend({},this.options,d);this.id=b;this._id=c.IScraper.getWidgetOrdinalNumber(b);this.init();this.addEventHandlers()},InfoDialog:function(b,d){this.options=a.extend({},this.options,d);this.id=b;this._id=c.IScraper.getWidgetOrdinalNumber(b);this.init();this.addEventHandlers()},SuccessDialog:function(b,d){this.options=a.extend({},this.options,d);this.id=b;this._id=c.IScraper.getWidgetOrdinalNumber(b);this.init();this.addEventHandlers()},
getDialogOptions:function(b,c){return{minWidth:function(){return a(window).width()<=b?"100%":b},open:function(){var c=a(window).width()<=b;this.options.useMaxHeight=c;this.options.width=c?0:b;this.element.show()},close:function(){this.element.hide();c&&c()},removeOnClose:!1,viewPortClass:"scrollable",wrapperClass:"#keel_class() iscraper-dialog-wrapper",top:100}},getWidgetOrdinalNumber:function(a){a=a.match(/.+-(.+)$/);return 1<a.length?a[1]:-1},outlookSubmitClickHandler:function(){tripsAdt("email-sync/connect-outlook");
var b=c.config.getString("ui.inbox.outlook.redirect_uri"),b={client_id:c.config.getString("ui.inbox.outlook.clientId"),response_type:"code",response_mode:"form_post",scope:c.config.getString("ui.inbox.outlook.scope"),redirect_uri:b,state:JSON.stringify({token:c.globals.formtoken,lc:c.globals.locale.lc,lc_cc:c.globals.locale.lc_cc})};window.open("https://login.microsoftonline.com/common/oauth2/v2.0/authorize?"+a.param(b),"Trips Email Sync","width\x3d480,height\x3d640");window.removeEventListener("message",
this.onOutlookMessage);this.onOutlookMessage=c.IScraper.onOutlookMessage.bind(this);window.addEventListener("message",this.onOutlookMessage,!1);return!1},onOutlookMessage:function(a){a.origin===location.origin&&(a.data&&a.data.success?(c.IScraper.onSuccess.call(this,a.data),tripsAdt("email-sync/connect-outlook-success")):c.IScraper.onError.call(this,a.data.errorOrigin,a.data.errorCode,a.data.errorMessage))},gmailSubmitClickHandler:function(){tripsAdt("email-sync/connect-google");var a=this;this.errorContainer.hide();
this.ensureAPIPromise.done(function(){c.Social.Google.Gmail.authorize(function(b){c.IScraper.onSuccess.call(a,b);tripsAdt("email-sync/connect-google-success")},c.IScraper.onError.bind(a))}).fail(c.IScraper.onError.bind(a));return!1},onSuccess:function(b){a(document).trigger("iscraper.success.data",b);a(document).trigger("iscraper.success.dialog.open",this._id,b);a(document).trigger("iscraper.widget.close",{id:this._id,group:"all"})},onError:function(a,c,e,f,g){this.errorContainerTechDetails.empty();
if("G"!==a||"popup_closed_by_user"!==c&&"access_denied"!==c){this.errorContainer.attr("style","display: block !important;");null==a&&(a="");null==g&&(g="");var b=null;"I"===a&&7==c?b="#msgj('trip.EMAIL_SYNC_INBOX_ALREADY_CONNECTED_FAILURE')":null!=e?b=e:null!=c?b=a+"_"+c:null!=f&&(b=a+"_("+g+"): "+f);null!=b&&(b=(" "+b).substring(0,500),this.errorContainerTechDetails.text(b))}else this.errorContainer.hide()}});c.extend("IScraper.Widget.prototype",{id:null,_id:null,element:null,closeBtn:null,enableBtn:null,
options:{closeEnabled:!1,reloadOnClose:!1,group:void 0,isOutlookEnabled:!1},init:function(){this.element=a("#"+this.id);this.closeBtn=this.element.find("a.close");this.enableBtn=this.element.find("button");this.gmailSubmitBtn=this.element.find(".gmail-btn");this.outlookSubmitBtn=this.element.find(".outlook-btn");this.errorContainer=this.element.find(".col-error");this.errorContainerTechDetails=this.errorContainer.find(".syncErrorTechDetails");this.ensureAPIPromise=c.Social.Google.Gmail.ensureApiLoaded()},
addEventHandlers:function(){var b=this;if(this.options.isOutlookEnabled)this.outlookSubmitBtn.on("click",c.IScraper.outlookSubmitClickHandler.bind(this)),this.gmailSubmitBtn.on("click",c.IScraper.gmailSubmitClickHandler.bind(this));else this.enableBtn.on("click",function(){a(document).trigger("iscraper.info.open",b._id)});this.closeBtn.on("click",function(d){d.preventDefault();window.setMetaCookie(c.config.getString("ui.trips.iscraper.cookie.closed")+"."+b.options.group,!0,function(){b.options.reloadOnClose&&
(tripsAdt("email-sync/no-thanks"),window.location.reload(!0))});a(document).trigger("iscraper.widget.close",{id:b._id,group:b.options.group})})},onClose:function(a,c){("all"===c.group||this.options.closeEnabled&&this.options.group===c.group&&!this.options.reloadOnClose)&&this.element.hide()}});c.extend("IScraper.InfoDialog.prototype",{id:null,_id:null,element:null,gmailSubmitBtn:null,outlookSubmitBtn:null,initialContentWidth:null,errorContainer:null,ensureAPIPromise:null,options:{isOutlookEnabled:!1},
init:function(){this.element=a("#"+this.id);this.gmailSubmitBtn=this.element.find(".gmail-btn");this.outlookSubmitBtn=this.element.find(".outlook-btn");this.errorContainer=this.element.find(".col-error");this.errorContainerTechDetails=this.errorContainer.find(".syncErrorTechDetails");this.initialContentWidth=this.element.width();this.ensureAPIPromise=c.Social.Google.Gmail.ensureApiLoaded()},addEventHandlers:function(){a(document).on("iscraper.info.open",a.proxy(this.open,this));if(this.options.isOutlookEnabled)this.outlookSubmitBtn.on("click",
c.IScraper.outlookSubmitClickHandler.bind(this));this.gmailSubmitBtn.on("click",c.IScraper.gmailSubmitClickHandler.bind(this))},open:function(a,d){d===this._id&&this.element.newDialog(c.IScraper.getDialogOptions(this.initialContentWidth))},close:function(){null!==this.getDialog()&&this.getDialog().close()},getDialog:function(){return this.element.data("dialog")||null}});c.extend("IScraper.SuccessDialog.prototype",{id:null,_id:null,element:null,initialContentWidth:null,responseData:null,options:{},
init:function(){this.element=a("#"+this.id);this.initialContentWidth=this.element.width()},addEventHandlers:function(){a(document).on("iscraper.success.dialog.open",a.proxy(this.open,this))},open:function(b,d,e){d===this._id&&(this.responseData=e,this.element.newDialog(c.IScraper.getDialogOptions(this.initialContentWidth,a.proxy(this.onClose,this))))},close:function(){null!==this.getDialog()&&this.getDialog().close()},onClose:function(){a(document).trigger("iscraper.success.dialog.closed",this.responseData);
window.location.reload(!0)},getDialog:function(){return this.element.data("dialog")||null}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("Trips",{ResultPages:function(b){this.options=a.extend({},this.options,b);this.init()}});c.extend("Trips.ResultPages",{Storage:{get:function(b){if(window.localStorage)try{return JSON.parse(localStorage.getItem(b))}catch(d){return localStorage.getItem(b)}else return a.cookie(b)},set:function(b,c){window.localStorage?"object"===typeof c?localStorage.setItem(b,JSON.stringify(c)):localStorage.setItem(b,c):a.cookie(b,c,{expires:1825,path:"/"})},remove:function(a){try{window.localStorage&&
localStorage.removeItem(a)}catch(d){console.log("localStorage cannot remove key: "+a)}}}});c.extend("Trips.ResultPages.prototype",{options:{msg:{saveToTripIconText:void 0,savedToTripIconText:void 0,removeFromTripIconText:void 0,removeTooltip:void 0,moveTrip:void 0,viewTrip:void 0,viewTrips:void 0,tripsCounter:void 0,savedToTrips:void 0,savedToTripItems:void 0,savedToTripsItems:void 0,savedToWatchList:void 0,watchListSortMax:void 0},savedItemsCounter:0,tripsURL:void 0,savedResultsInfo:"[]",saveInPlaceEnabled:!1,
stickyEnabled:!1,spinnerEnabled:!1,tripsSaveRemove:null,watchListMsgDuration:2E3},isWatchListMakeOverEnabled:!1,isWatchlistDeadEndFix:!1,watchListTab:null,watchListTabCountEl:null,watchListMsgTimeoutId:null,savedItemsListContainer:null,watchListSortBlock:null,savedItemsWrapper:null,savedItemsHeader:null,savedItemsHeaderPlaceholder:null,savedItemsCounter:null,savedItemsList:null,savedItemsHeaderTripsLink:null,savedItemsHeaderTitle:null,saveToTripsElements:null,savedItemsHeaderExpiryMsg:null,init:function(){var b=
this,d;this.isWatchListMakeOverEnabled=c.config.getBoolean("ui.watchlistMakeover",!1);this.isWatchlistDeadEndFix=c.config.getBoolean("ui.watchlist.deadEndFix.enabled",!1);this.isWatchListMakeOverEnabled&&(this.watchListTab=a("#watchlistTab"),this.watchListTabCountEl=a("#watchlistCount"),this.watchListSortBlock=a("#sortTabsOuter"));this.savedTrips.init(this.options.savedResultsInfo);this.options.tripsSaveRemove||(this.options.tripsSaveRemove=new c.Trips.SaveRemove);this.savedItemsWrapper=a("#savedContentWrapper");
this.savedItemsHeader=a("#savedItemsHeader");this.savedItemsHeaderPlaceholder=a("#savedItemsHeaderPlaceholder");this.savedItemsCounter=this.savedItemsHeader.find(".Trips-Counter \x3e span");this.savedItemsListContainer=a("#savedToTripsList");this.savedItemsList=a("#savedToTripsList .savedToTripsListContent");this.savedItemsHeaderTripsLink=this.savedItemsHeader.find(".my-saved-trips-controls .go-to-trips");this.savedItemsHeaderTitle=this.savedItemsHeader.find(".savedItemsHeaderTitle");this.savedItemsHeaderExpiryMsg=
this.savedItemsHeader.find(".my-saved-trips-controls .expiryMessage");this.savedItemsHeaderExpiryMsg.on("click",function(){c.Trips.LoginOptions.login({skipConfirmation:c.config.getBoolean("ui.trips.anon.second-step-dialog.enabled",!1),forceLogin:!0,trackingLabel:"urgency-message"})});this.saveToTripsElements=a(".inner .save-to-trips");d=a(".inner .saved-to-trips");d.each(function(){var c=a(this),d=c.find(".saveLinkText");c.on("mouseenter",a.proxy(b._savedLinkOnMouseEnter,b,d));c.on("mouseleave",a.proxy(b._savedLinkOnMouseLeave,
b,d))});var e=c.globals.isLoggedIn||AjaxReg.alreadyRegistered;this.saveToTripsElements.on("click",this,this[this.isWatchlistDeadEndFix&&!e?"showLogin":"saveToTrips"]);d.on("click",this,this.removeFromTrips);a(".toggle-saved-trips").on("click",this,this.toggleSaved);a(".go-to-trips").on("click",this,this.logGoToTrips);a(".buylink .ui-button").on("click",this,this.logBookit);this.updateSavedItemHeader();this.options.stickyEnabled&&this.createStickyHeader();a(window).off("finalUpdateDisplayDone.updateHeader");
a(window).on("finalUpdateDisplayDone.updateHeader",function(){0<b.savedTrips.getSize()&&a(document).trigger("updateTripsHeader")})},logBookit:function(b){0<b.data.savedItemsList.has(a(this)).length&&c.Analytics.api.trackEvent({subPageId:"saved",category:"clickthrough"})},logGoToTrips:function(){c.Analytics.api.trackEvent({subPageId:"saved",category:"go-to-trip"})},watchListActive:function(){return a("#watchlistTab").find(".sortTab").hasClass("active")},leaveItemInList:function(){return this.options.saveInPlaceEnabled||
this.isWatchListMakeOverEnabled&&!this.watchListActive()},showLogin:function(b,d){b.stopPropagation();AjaxReg.ui.login({success:a.proxy(this.saveToTrips,this,b,d,!0),aftershow:function(){c.Analytics.api.trackEvent({category:"watchlist-login",action:"show-dialog"})},onclose:function(){c.Analytics.api.trackEvent({category:"watchlist-login",action:"close-dialog"})}})},toggleSaved:function(b){b=a(b.target);var d=!b.data("toggle"),e=b.data("toggle"+!d),f={vertical:c.globals.vertical};d?c.Analytics.api.trackEvent({subPageId:"saved",
category:"show-saved"}):c.Analytics.api.trackEvent({subPageId:"saved",category:"hide-saved"});a(".savedToTripsListContent").toggle(d);b.data("toggle",d);b.text(e);b={type:"POST",url:"/s/run/saveToMyTrips/toggleSavedTrips",data:JSON.stringify(f),dataType:"json",contentType:"application/json"};(new c.Ajax(b.url,b)).execute();return!1},removeFromTrips:function(b){var d=b.data,e=a(b.currentTarget),f=a("#tbd"+e.data("index")+" .inner"),g=e.data("tripid");b=e.attr("data-resultid");var h=e.data("searchid");
d.options.tripsSaveRemove.removeFromTrips({tripId:g,resultId:b,searchId:h},{beforeSend:function(){d.hideAllMultiBooks();f.append("\x3cdiv class\x3d'removeItemOverlay'\x3e\x3c/div\x3e")},success:function(b){b.success?(d.leaveItemInList()?(d.restoreItemSaveUI(f),f.find(".removeItemOverlay").remove()):f.parent().remove(),d.tripsIconCountRemove(e.data("tripid")),d.savedTrips.removeItem(g),d.decreaseSavedItemsCounter(),d.updateSavedItemHeader(),d.isWatchListMakeOverEnabled&&d.watchListActive()&&d.options.savedItemsCounter&&
d.watchListTab.children(".sortTab").trigger("click"),d.options.stickyEnabled||0!==d.options.savedItemsCounter||a("#savedContentWrapper").hide()):f.find(".removeItemOverlay").remove()},complete:function(){c.Widgets.Tooltip.getInstance(e).close()}});return!1},saveToTrips:function(b,c,e){var d=b.data;b=a(b.target).closest("a");if(b.hasClass("saved-to-trips"))return!1;c={resultId:b.attr("data-resultid"),searchId:b.data("searchid"),tripName:b.data("newtripname")||"",encodedTripId:b.data("autosavetripid")||
"",savedAutomatically:c&&!0===c.savedAutomatically};!c.encodedTripId&&0<d.savedTrips.getSize()&&(c.encodedTripId=d.savedTrips.getFirstTripId());e&&(c.reload=e);e=d.createSaveCallbacks(c);d.options.tripsSaveRemove.startSaveToTripsProcedure(c,e);return!1},createSaveCallbacks:function(b){var d,e,f=this,g=c.config.getBoolean("ui.trips-simple-save.enabled",!1);return{beforeSend:function(){f.tripBeforeAdd(b.resultId);f.hideAllMultiBooks();f.options.spinnerEnabled?f.showSpinner():(d=a("#listbody .resultrow[data-resultId\x3d'"+
b.resultId+"']"),e=d.clone(),d.append("\x3cdiv class\x3d'removeItemOverlay'\x3e\x3c/div\x3e"))},onSuccess:function(c){var h=a(document).data("dialog"),k=c.tripID,p=c.tripName;f.tripsIconCountAdd(k);b.reload&&location.reload(!0);g&&!f.isWatchListMakeOverEnabled&&f.showSuccessSaveToast(c);f.isWatchListMakeOverEnabled&&f.showWatchListMessage();h&&h.close&&h.close();f.options.spinnerEnabled?(f.showSpinner(),f.refreshResults()):(f.savedItemsWrapper.is(":visible")||f.savedItemsWrapper.show(),f.savedTrips.has(k)?
f.savedTrips.addItem(k):f.savedTrips.add(k,p,1,c.tripUrl),f.leaveItemInList()?(d.find(".removeItemOverlay").remove(),f.updateItemToSaved(d,k),f.moveItemToSaved(e,k),f.setDetailsSaveButtonState(d)):(d.fadeOut({duration:1E3,complete:function(){f.moveItemToSaved(e,k)}}),f.setDetailsSaveButtonState(e)),f.increaseSavedItemsCounter(),f.savedItemsCounter.parent().addClass("new"),setTimeout(function(){f.savedItemsCounter.parent().removeClass("new")},3E3),f.updateSavedItemHeader(c.expiryMessage))},onFail:function(b){var c=
a(document).data("dialog");"string"===typeof b.error&&alert(b.error);c&&c.close&&c.close();b.showDialog&&hideRPSpinner();d.find(".removeItemOverlay").remove()}}},setDetailsSaveButtonState:function(a){var b=this,c=a.find(".tripsSaveLink a");c.text(this.options.msg.savedToTripIconText).mouseenter(function(){c.text(b.options.msg.removeFromTripIconText)}).mouseout(function(){c.text(b.options.msg.savedToTripIconText)})},hideAllMultiBooks:function(){"function"===typeof hideVMBPopup&&hideVMBPopup()},showSuccessSaveToast:function(b,
d){d=a.extend({},this.options,d);var e=c.globals.isLoggedIn||AjaxReg.alreadyRegistered,f=b.tripID,g=b.tripUrl,h=_.escape(b.tripName),l=c.Common.Utils.String.formatChoice(d.msg.savedToTrips,1,"%s"),k=c.Common.Utils.String.formatString(d.msg.viewTrip),h="\x3cspan class\x3d'r9-toast-text'\x3e%s\x3c/span\x3e".format(l).format("\x3ca href\x3d'%s' target\x3d'_blank'\x3e\x3cstrong\x3e%s\x3c/strong\x3e\x3c/a\x3e").format(g,h),h=h+"\x3ca href\x3d'%s' target\x3d'_blank' class\x3d'r9-toast-link'\x3e%s\x3c/a\x3e".format(g,
k);e&&(h+="\x3ca href\x3d'#' class\x3d'r9-toast-link %s'\x3e%s\x3c/a\x3e".format("changeTripLink",d.msg.moveTrip));d=c.Widgets.Toaster.addToast(h,{button:!1,escaped:!0,theme:"centered"});a(d.element).find(".changeTripLink").data({eventId:b.eventID,tripId:f}).click(this.openMoveDialog)},showWatchListMessage:function(){this.removeWatchListMessage();clearTimeout(this.watchListMsgTimeoutId);this.inViewport()?this.showWatchListToolTip():this.animateInView(this.showWatchListToolTip.bind(this))},showWatchListToolTip:function(a){var b=
this;setTimeout(function(){b.watchListTabCountEl.tipTip({subNameSpace:"watchListAdded",content:b.options.msg.savedToWatchList,position:"bottom",baseClass:"Color-green",activation:"click",showImmediately:!0,closeOnBodyClick:!1,offsetAgainstEdge:!1,appendTo:"#"+b.watchListTab.attr("id")})},0);this.watchListMsgTimeoutId=setTimeout(function(){b.removeWatchListMessage();"function"===typeof a&&a()},this.options.watchListMsgDuration)},removeWatchListMessage:function(){c.Widgets.Tooltip.removeWidget(this.watchListTabCountEl)},
inViewport:function(){var b,c;b=a(window).scrollTop();c=b+a(window).height();var e,f;e=this.watchListSortBlock.offset().top;f=e+this.watchListSortBlock.outerHeight();return e<=c&&f>=b},animateInView:function(b){var c=this,e=this.watchListSortBlock.find(".sortTabsGridOuter"),f=this.watchListSortBlock.outerHeight();this.watchListSortBlock.css("height",f);e.addClass("fixed down");a(window).on("scroll.SortTabContainer",function(){c.inViewport()&&(e.removeClass("fixed down"),a(window).off("scroll.SortTabContainer"))});
setTimeout(function(){b(function(){e.removeClass("down");a(window).off("scroll.SortTabContainer");setTimeout(function(){e.removeClass("fixed");c.watchListSortBlock.css("height","")},500)})},500)},openMoveDialog:function(b){b.preventDefault();b=a(b.target).data();b={url:"/trips/e/dcmDialog",type:"GET",data:{tripid:b.tripId,eventid:b.eventId,datestamp:null,legnum:-1,action:"move"},dataType:"html",cache:!1,beforeSend:function(){a.fn.newDialog({id:"ChangeTrip",viewPortClass:"tripModal",wrapperClass:"keel-mom",
allowMultipleDialogs:!1,width:466,modal:!0,spinner:!0,adjustToScreenHeight:!0,display:function(){this.viewPort.fadeIn()}})},success:function(b){b=b.replace(/tripsAdt/g,"R9.Analytics.api.trackEvent");var c=a("#dialogChangeTrip");c.removeClass("r9-spinner");c.find(".r9-dialog-content").html(b)},error:function(a){dialog.removeClass("r9-spinner");dialog.find(".r9-dialog-content").html(a)}};(new c.Ajax(b.url,b)).execute()},tripBeforeAdd:function(b){a(document).trigger("tripBeforeAdd",{resultId:b})},tripsIconCountAdd:function(b){a(document).trigger("tripAdded",
{tripId:b})},tripsIconCountRemove:function(b){a(document).trigger("tripRemoved",{tripId:b})},showSpinner:function(){showRPSpinner("",.95);0<a("#savedToTripsList").length&&0>a("#savedToTripsList")[0].getBoundingClientRect().top&&a("body").animate({scrollTop:0},1E3)},refreshResults:function(){if(window.ssRefreshResults)return ssRefreshResults(Streaming.lastPoll,null,null,this.refreshResultHandler)},refreshResultHandler:function(){hideRPSpinner()},isSavedItemsOnScreen:function(){return a(window).scrollTop()<
this.savedItemsHeader.offset().top+this.savedItemsHeader.outerHeight()},createStickyHeader:function(b,c){var d=this;"function"!==typeof b&&(b=a.noop);var f=null;a(document).off("scroll.sticky").on("scroll.sticky",function(){d.savedItemsHeader.is(":visible")&&null===f&&(f=d.savedItemsHeader.offset().top,d.savedItemsHeaderPlaceholder.height(d.savedItemsHeader.outerHeight()));null!==f&&(a(window).scrollTop()<f?(d.savedItemsHeaderPlaceholder.hide(),d.savedItemsHeader.removeClass("sticky")):(d.savedItemsHeaderPlaceholder.show(),
d.savedItemsHeader.addClass("sticky"),d.savedItemsHeader.css("width",d.savedItemsWrapper.width())))});setTimeout(function(){b()},500)},increaseSavedItemsCounter:function(){var a=this.options.savedItemsCounter;0===a&&this.savedItemsCounter.parent().show();this.savedItemsCounter.html(++a);this.options.savedItemsCounter+=1;this.broadcastUpdate(a)},decreaseSavedItemsCounter:function(){var a=this.options.savedItemsCounter;this.savedItemsCounter.html(--a);0===a&&(this.savedItemsCounter.parent().hide(),
this.savedItemsWrapper.hide());--this.options.savedItemsCounter;this.broadcastUpdate(a)},broadcastUpdate:function(b){a(document).trigger({type:"savedItemsListUpdated",listSize:b})},_savedLinkOnMouseEnter:function(a){a.text(this.options.msg.removeFromTripIconText)},_savedLinkOnMouseLeave:function(a){a.text(this.options.msg.savedToTripIconText)},updateItemToSaved:function(b,c){var d=b.find("a.save-to-trips");b=b.find(".saveLinkText");b.text(this.options.msg.savedToTripIconText);d.attr("data-tripid",
c).removeClass("save-to-trips").addClass("saved-to-trips").off("click").on("click",this,this.removeFromTrips).on("mouseenter.savedLink",a.proxy(this._savedLinkOnMouseEnter,this,b)).on("mouseleave.savedLink",a.proxy(this._savedLinkOnMouseLeave,this,b))},moveItemToSaved:function(a,c){this.updateItemToSaved(a,c);this.options.saveInPlaceEnabled||this.isWatchListMakeOverEnabled||this.savedItemsList.append(a)},restoreItemSaveUI:function(a){var b=a.find("a.saved-to-trips");a.find(".saveLinkText").text(this.options.msg.saveToTripIconText);
b.removeAttr("data-tripid").removeClass("saved-to-trips").addClass("save-to-trips").off("click").on("click",this,this.saveToTrips).off("mouseenter.savedLink").off("mouseleave.savedLink")},updateSavedItemHeader:function(){var a=this.savedTrips.getSize(),d=this.savedTrips.getFirst(),e=this.options.savedItemsCounter,f=this.options.tripsURL,g="",h=_.unescape(this.options.msg.savedToTripItems),l=_.unescape(this.options.msg.savedToTripsItems);if(this.isWatchListMakeOverEnabled&&this.watchListTab.length&&
this.watchListTabCountEl.length){var k=this.watchListTab.siblings();this.watchListTab.toggleClass("col-hidden",!e);e?(k.removeClass("col-1-3").addClass("col-1-4"),this.watchListTab.removeClass("col-1-3").addClass("col-1-4")):(k.removeClass("col-1-4").addClass("col-1-3"),this.watchListTab.removeClass("col-1-4").addClass("col-1-3"));this.watchListTabCountEl.text(9<e?this.options.msg.watchListSortMax:e);k=this.watchListActive();e||(this.savedItemsListContainer.addClass("hidden"),k&&this.watchListTab.next().children(".sortTab").trigger("click"))}a&&
(1<a?(this.savedItemsHeaderTripsLink.attr("href",f),g=c.Common.Utils.String.formatChoice(l,e,e,a,f)):1===a&&(f=d.tripUrl,this.savedItemsHeaderTripsLink.attr("href",f),g=c.Common.Utils.String.formatChoice(h,e,e,_.escape(d.tripName),f)),this.savedItemsHeaderTripsLink.html(c.Common.Utils.String.formatChoice(this.options.msg.viewTrips,a)).attr("target","_blank"),this.savedItemsHeaderTitle.html(g),this.savedItemsHeaderTripsLink.attr("target","_blank"),this.savedItemsHeaderTitle.find("a").attr("target",
"_blank"))},savedTrips:{items:[],init:function(a){a=JSON.parse(a);for(var b=0;b<a.length;b++){var c=a[b].tripId;this.items.hasOwnProperty(c)?this.items[c].savedItemsCounter++:this.items[c]={tripId:c,tripName:_.unescape(a[b].tripName),tripUrl:a[b].tripDetailsPath,savedItemsCounter:1}}},getFirstTripId:function(){var a=this.getFirst();return null!==a?a.tripId:null},getFirst:function(){var a=null,c;for(c in this.items)if(this.items.hasOwnProperty(c)&&0<this.items[c].savedItemsCounter){a=this.items[c];
break}return a},getSize:function(){var a=0,c;for(c in this.items)this.items.hasOwnProperty(c)&&0<this.items[c].savedItemsCounter&&a++;return a},has:function(a){return this.items.hasOwnProperty(a)},getById:function(a){return this.has(a)?this.items[a]:null},add:function(a,c,e,f){this.has(a)||(this.items[a]={tripId:a,tripName:c,tripUrl:f,savedItemsCounter:e})},remove:function(a){this.has(a)&&delete this.items[a]},addItem:function(a){this.has(a)&&this.items[a].savedItemsCounter++},removeItem:function(a){if(this.has(a)){var b=
this.getById(a);1<b.savedItemsCounter?b.savedItemsCounter--:this.remove(a)}}}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("Trips",{SaveRemove:function(b){this.options=a.extend({},this.options,b);this.init()}});c.extend("Trips.SaveRemove.prototype",{options:{},init:a.noop,removeFromTrips:function(b,d){b={url:"/s/run/saveToMyTrips/remove",type:"POST",spinner:!0,data:JSON.stringify(b),contentType:"application/json",dataType:"json"};a.extend(b,d);c.Analytics.api.trackEvent({subPageId:"saved",category:"remove-saved"});(new c.Ajax(b.url,b)).execute()},startSaveToTripsProcedure:function(a,d){var b=c.config.getBoolean("ui.trips-simple-save.enabled",
!1),f=c.config.getBoolean("ui.results.trips.anon.save.enabled",!1),g=c.globals.isLoggedIn||AjaxReg.alreadyRegistered,b=b||a.encodedTripId;f||g?b?this.saveAjax(a,d):this.createSaveDialog(a,d):this.createLoginDialog(a,d);c.Analytics.api.trackEvent({subPageId:"resultsinline",category:"save-result"})},createLoginDialog:function(a,d){var b=c.config.getBoolean("ui.trips-simple-save.enabled",!1)||a.encodedTripId,f=this;AjaxReg.regtype="trips";AjaxReg.searchid="";var g={data:{dslide:"save_for_later",promoType:"save_for_later"},
loggingData:{desc:"saved-signup",pageId:"results"},success:function(){b?f.saveAjax(a,d):f.createSaveDialog(a,d)},onclose:function(){c.Analytics.api.trackEvent({subPageId:"saved-signup",category:"close"})}};c.globals.r9username?AjaxReg.ui.login(g):AjaxReg.ui.register(g)},createSaveDialog:function(b,d){var e=this;this.getTripsListDialogContent(b.searchId,function(){a.fn.newDialog({id:"SaveTripDialog",viewPortClass:"saveTripDialog tripModal",allowMultipleDialogs:!1,width:466,modal:!0,spinner:!0,adjustToScreenHeight:!0,
display:function(){this.viewPort.fadeIn()},open:a.noop,close:function(){c.Analytics.api.trackEvent({subPageId:"saved-select",category:"close"})}})},function(c){var f=a("#dialogSaveTripDialog");f.removeClass("r9-spinner");f.find(".r9-dialog-content").html(c.html);e.initSavePopup(b.resultId,b.tripName,d)},a.noop)},getTripsListDialogContent:function(a,d,e,f){c.conditions.isNotNullNotUndefinedNotEmptyNotWhitespaceString(a);c.conditions.isFunction(d);c.conditions.isFunction(e);c.conditions.isFunction(f);
a={url:"/s/run/saveToMyTrips/chooseTrip",type:"POST",data:{searchId:a},dataType:"json",beforeSend:d,success:e,complete:f};(new c.Ajax(a.url,a)).execute()},initSavePopup:function(b,d,e){c.conditions.isNotNullNotUndefinedNotEmptyNotWhitespaceString(b);c.conditions.isNullOrNotUndefinedNotEmptyNotWhitespaceString(d);var f=this,g=a("#tripSelector");f.initDropdown(g);a(".Trips-TripEditing-TripForm .r9-dropdown-select").dropdown();a(".Trips-TripEditing-TripForm .r9-dropdown-select").change(function(b){b=
a(b.target);f.initDropdown(b)});a("#saveToMyTripsResultId").val(b);a(".tripName").val(d);a(".saveToTrip").on("click",function(b){b=a(b.delegateTarget);b=f.getSaveItemToTripDetailsFromDialog(b);f.saveAjax(b,e)});f.initLoggingListeners()},initLoggingListeners:function(){a("#saveToExistingTrip").one("click",function(){c.Analytics.api.trackEvent({subPageId:"saved-select",category:"existing-trip"})});a("#saveToNewTrip").one("click",function(){c.Analytics.api.trackEvent({subPageId:"saved-select",category:"new-trip"})})},
initDropdown:function(a){c.conditions.jquery.hasExactlyOneJqElement(a);a.parent().children(".r9-dropdown-status").html(a.find("option:selected").html())},getSaveItemToTripDetailsFromDialog:function(b){c.conditions.jquery.hasExactlyOneJqElement(b);var d=a("#saveToMyTripsSearchId").val(),e=a("#saveToMyTripsResultId").val(),f=a(".tripName").val()||"",g="";b.addClass("ui-state-disabled");b.prop("disabled",!0);a(".saveTripTabs").tabs("option","disabled",[0,1]);"saveToNewTrip"!==b.attr("id")&&(g=a("#tripSelector").find("option:selected").val());
return{searchId:d,resultId:e,encodedTripId:g,tripName:f}},addToTripsPixel:function(b){c.conditions.isNotNullNotUndefinedNotEmptyNotWhitespaceString(b);var d={event:"addToTrips"};"hotel"===c.globals.vertical&&(d.pixelContext={hotelId:b});a(document).trigger("gtm.update",d)},saveAjax:function(a,d){c.conditions.isFunction(d.beforeSend);c.conditions.isFunction(d.onSuccess);c.conditions.isFunction(d.onFail);(new c.Ajax({url:"/s/run/saveToMyTrips/save",type:"POST",spinner:!0,data:a,dataType:"json",headers:{"X-CSRF":c.globals.formtoken},
beforeSend:d.beforeSend,success:function(a){if(a.success)d.onSuccess(a);else d.onFail(a)},error:d.onFail})).execute();this.addToTripsPixel(a.resultId)}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("Trips.LoginOptions",{init:function(b){this.stayAnon=b;this.trackingCategory="anon-trips-login";this.loginDialog=a(".loginOptionsDialog");this.confirmationDialog=a(".confirmationDialog");this.restrictionsDialog=a(".tripsRestrictionDialog");this.addEventHandlers()},login:function(a){this.skipConfirmation=a.skipConfirmation;this.successCallback=a.successCallback;this.loginCallback=a.loginCallback;this.trackingLabel=a.trackingLabel||null;c.config.getBoolean("ui.results.trips.anon.save.enabled",
!1)?!0===this.stayAnon&&this.successCallback?this.successCallback.call():this.showDialog():this.regularAuth()},addEventHandlers:function(){this.loginDialog.find(".guestConnect").click(a.proxy(this.anonAuth,this));a(".regularConnect").click(a.proxy(this.regularAuth,this));a(".googleConnect").click(a.proxy(this.googleAuth,this));a(".fbConnect").click(a.proxy(this.fbAuth,this));this.confirmationDialog.find(".backToSignUp").click(a.proxy(this.backToSignUp,this));this.confirmationDialog.find(".guestConfirmation").click(a.proxy(this.confirmAnon,
this));this.restrictionsDialog.find(".guestConnect").click(a.proxy(this.anonRestrictedAuth,this))},showDialog:function(){this.showDialogHandler(this.loginDialog);this.track("display-dialog")},showConfirmation:function(){this.showDialogHandler(this.confirmationDialog)},showShareRestriction:function(){this.restrictionsDialog.find(".restriction-msg").hide();this.restrictionsDialog.find(".share-msg").show();this.showDialogHandler(this.restrictionsDialog)},showRestriction:function(){this.restrictionsDialog.find(".restriction-msg").hide();
this.restrictionsDialog.find(".regular-msg").show();this.showDialogHandler(this.restrictionsDialog)},showDialogHandler:function(b){var d={width:350,minHeight:550,spinner:!1,removeOnClose:!1,contentClass:"loginOptionsDialog"};a.when(c.Social.FB.ensureAPILoaded(),c.Social.Google.ensureAPILoaded()).always(function(){window.openResponsiveDialog?openResponsiveDialog(b,d):b.newDialog(d)})},closeConfirmation:function(){var a=this.confirmationDialog.data("dialog");a&&a.close()},closeDialog:function(){var a=
this.loginDialog.data("dialog");a&&a.close()},regularAuth:function(){this.closeDialog();this.track("use-email-address");var a={trackingData:{category:this.trackingCategory,label:this.trackingLabel}};this.loginCallback?this.loginCallback.call(null,a):AjaxReg.ui.login(a)},anonAuth:function(){this.closeDialog();this.skipConfirmation?this.confirmAnon():this.showConfirmation()},anonRestrictedAuth:function(){this.track("continue-as-guest");this.restrictionsDialog.data("dialog").close()},confirmAnon:function(){this.track("guest-confirm");
this.closeConfirmation();this.stayAnon=!0;this.successCallback&&this.successCallback.call()},backToSignUp:function(){this.track("guest-sign-me-up");this.closeConfirmation();this.showDialog()},fbAuth:function(){var a=this;this.closeDialog();c.Social.FB.login({success:function(b,c){AjaxReg.facebook.login(0,a.successCallback,AjaxReg.confcode,b,c,{category:a.trackingCategory,label:a.trackingLabel})}})},googleAuth:function(){var a=this;this.closeDialog();c.Social.Google.login(function(b){AjaxReg.google.login(0,
a.successCallback,AjaxReg.confcode,b.id_token,{category:a.trackingCategory,label:a.trackingLabel})})},track:function(a){c.Analytics.api.trackEvent({category:this.trackingCategory,action:a,label:this.trackingLabel})}})})(window.R9,window.jq||window.jQuery);
(function(c){var a={init:function(){0<c("#commonfooter footer.Common-Layout-Footer").length&&this.loadContent();this.setupFooterMenuLinks()},loadContent:function(){c.ajax({url:"/s/horizon/common/layout/AjaxFooterLinks",data:{id:"footer",isSeo:R9.globals.isSeo||!1},dataType:"html",success:function(a){"string"===typeof a&&(a=c.parseJSON(a));var b=c("\x3cdiv\x3e");b.html(a.content);b.children().each(function(a,b){a=c("#%s".format(b.id));0<a.length&&a.html(c(b).html())})},cache:!1})},setupFooterMenuLinks:function(){var a=
{privacyLink:"/privacy",tosLink:"/terms-of-use",adChoicesLink:"/privacy#trackingtools",imprintLink:"/impressum"};c.each(a,function(b,e){e=c(".footerMenuLink."+b);if(0<c(e).length)c(e).on("click",function(c){window.location.href=a[b]})})}};c(function(){a.init()})})(jq||jQuery);
(function(c,a){var b=function(b,c){this.element=a(b);this.options=a.extend({},this.options,c||{});this.init();this.addEventHandlers()};b.prototype={element:null,content:null,isOpen:!1,options:{autoOpen:!1,alignment:"left",direction:"down",isPopover:!1,matchWidth:!1,content:null,container:null,onOpen:null},init:function(){this.options.autoOpen&&this.open();this.createContent();this.createTrigger()},addEventHandlers:function(){function b(a){c.close()}var c=this,d=a("body");d.on("click",b);a(c.element).click(function(a){c.element.closest(".Common-Widgets-DropdownDialog-Content").length||
(d.off("click",b),c.toggleContent(),setTimeout(function(){d.on("click",b)},10))});a(document).keydown(function(a){27===a.which&&c.close(a)});a(window).on("resize",function(){c.isOpen&&c.reposition()});a(document).on("scroll",function(){c.isOpen&&c.reposition()});a(".viewport").on("scroll",function(){c.isOpen&&c.reposition()});this.content.on("mouseup touchend",function(){c.element.is(":visible")&&setTimeout(function(){c.reposition()},25)})},createContent:function(){this.content=this.options.content?
a(this.options.content):a("#"+this.element.attr("id")+"_content")},createTrigger:function(){this.element.hasClass("open")&&(this.isOpen=!0)},open:function(){this.isOpen=!0;var b=this,c="body";this.options.container&&""!==this.options.container&&(c=this.options.container,a(b.options.container).off("scroll."+b.id()).on("scroll."+b.id(),function(){b.isOpen&&b.reposition()}));this.content.appendTo(c);this.reposition();b.element.addClass("open");b.content.addClass("open");if(this.options.onOpen)this.options.onOpen(this)},
close:function(a){var b=this.isOpen;this.isOpen=!1;this.element.removeClass("open");this.content.removeClass("open");this.element.after(this.content);if(this.options.onClose)this.options.onClose(b,this,a)},toggleContent:function(){this.isOpen?this.close():this.open()},reposition:function(){var b=this.element.offset(),c=a(this.options.container);if(c.length)var d=c.offset(),b={top:b.top-d.top+c.scrollTop(),left:b.left-d.left};else c=a(window);d=b.top+this.element.outerHeight();"up"===this.options.direction&&
(d=b.top-this.element.outerHeight()-this.content.outerHeight());var e={top:d+"px"};"right"===this.options.alignment?e.right=c.width()-(b.left+this.element.outerWidth())+"px":e.left="center"===this.options.alignment?b.left-this.content.outerWidth()/2+this.element.outerWidth()/2+"px":b.left+"px";this.options.isPopover&&"right"===this.options.alignment&&(e.left=b.left+this.element.outerWidth()+22+"px",e.top=d-45+"px");e.width=this.options.matchWidth?this.element.outerWidth()+"px":"";e.zIndex=this.element.zIndex()+
9999;this.content.css(e)}};a.fn.HorizonDownDialog2=function(a){return this.each(function(){return new b(this,a)})};var d,e=function(){if(d)return d;this.init();d=this;return this};e.prototype={id:"uber-header",dom:null,currencyDialog:null,options:{currentLocale:"",baseUrl:""},init:function(){this.loadHorizonHeader()},loadHorizonHeader:function(){var b=this,d=b.id;a.ajax({url:"/s/horizon/common/layout/features/uber/Uber",data:{id:d,pickerContent:!0,seo:c.globals.isSeo||c.globals.seoHeaderNavMenu},
dataType:"html",success:function(c){"string"===typeof c&&(c=a.parseJSON(c));var e=a("\x3cdiv\x3e");e.html(c.content);e.children().each(function(c,e){c=e.id;c==d&&(c=a("#%s".format(c)),0<c.length&&(c.replaceWith(e),b.dom=e,b.bindEvents()))});(c=c.bufferedHTML)&&0<c.length&&(e=a("\x3cdiv\x3e"),e.html(c[0]),e.children().each(function(c,d){c=a("#%s".format(d.id));b.currencyDialog=d;0<c.length?c.replaceWith(d):a("body").append(d)}))},cache:!1})},getAllCurrenciesBottomHeight:function(){var b=a(".all-currencies").last(),
c=b.height(),d=b.find("[class*\x3dcolumn]").map(function(){return a(this).height()}).get(),d=Math.max.apply(null,d),b=b.scrollTop();return d-c-b},handleFade:function(){var b=a(".all-currencies_fade"),c=this.getAllCurrenciesBottomHeight();768>window.innerWidth?b.hide():0>=c?b.hide():5>=c?b.height(25):(b.show(),b.height(40))},getCurrencySelectionText:function(a){var b=a.find("[class*\x3dsymbol]").text();a=a.find("[class*\x3dcurrencyname]").text();return b+" "+a},bindEvents:function(){var b=this,d=b.dom;
a(".language-dropdown",d).HorizonDownDialog2({alignment:"center",onOpen:function(){c.Analytics.api.trackEvent({category:"/languagepicker",action:"display"})}});a("li",d).off(".uber").on("click.uber",function(){var b=a(this).data("lang");a(this).hasClass("active")?c.Analytics.api.trackEvent({category:"/languagepicker",action:"selectactive",label:b}):c.Analytics.api.trackEvent({category:"/languagepicker",action:"select",label:b},function(){a.ajax({url:"/in",data:{lc:b,noUrl:!0},success:function(){window.location.reload()}})})});
a("#uber-header-currencyPicker-dropdown",d).HorizonDownDialog2({alignment:"right",onOpen:function(){c.Analytics.api.trackEvent({category:"/currencypicker",action:"display"})}});a(".currency-tooltip-item",d).off(".uber").on("click.uber",function(){var d=a(this).data("cur");c.Analytics.api.trackEvent({category:"/currencypicker",action:"select",label:d});b.currencyPickerItem(this,d)});a("#uber-header-CountryPicker-dropdown",d).HorizonDownDialog2({alignment:"right",onOpen:function(){c.Analytics.api.trackEvent({category:"/countrylangpicker",
action:"display"})}});a(".languageLink").on("click",function(d){d.preventDefault();var e=a(d.target).attr("data-locale");if(e!==b.options.currentLocale){c.Analytics.api.trackEvent("countrylangpicker/change/"+e);var f=a.proxy(function(){var b=a(d.target).attr("data-href")||a(this).attr("href");window.location=b},this);b.options.baseUrl?b.makeRedirect(b.options.baseUrl,e,f):f()}});0<a(".all-currencies").length&&(a(".all-currencies").on("scroll",function(a){b.handleFade()}),a(window).on("resize",function(a){b.handleFade()}))},
currencyPickerItem:function(b,d){var e=this,f=a(this.currencyDialog).attr("class"),g=a(this.currencyDialog).clone().find(".body");g.addClass("keel").addClass(f);b=e.getCurrencySelectionText(a(b));a(".currency_holder",g).html(b);b=a(".saveToProfile",g);a(".visitOnly",g).on("click",function(){e.saveCurrency(d,!1)});if(c.globals.isLoggedIn)b.on("click",function(){e.saveCurrency(d,!0)});else b.on("click",function(){AjaxReg.ui.register({onclose:a.noop,success:function(){e.saveCurrency(d,!0)}})});a(g).newDialog({width:410,
minHeight:85})},scrollTopBeforeReload:function(){a(window).on("beforeunload",function(){a(window).scrollTop(0)})},saveCurrency:function(b,c){var d=this;a.ajax({type:"POST",url:"/k/ident/currency",data:{currency:b,posted:!0,save:c},dataType:"text",success:function(){d.scrollTopBeforeReload();window.location.reload()},cache:!1})},makeRedirect:function(b,c,d){a.ajax({url:b+"/k/run/isp/setcc",dataType:"jsonp",data:{cc:c},complete:function(){d()}})}};document.addEventListener("DOMContentLoaded",function(){0<
a("#uber-header").length&&new e})})(window.R9,window.jq||window.jQuery);
(function(c){var a,b=function(){if(a)return a;this.init();a=this;return this};b.prototype={activeVertical:"unknown",wrapperId:"#extern-header",selectedItemCls:"selected",externalCls:"wide",init:function(){this.loadVertical.call(this);this.setSelectedVertical.call(this);this.removeExternalCls.call(this)},loadVertical:function(){var a=c(this.wrapperId).data("vertical");a&&(this.activeVertical=a)},setSelectedVertical:function(){var a=this;a.headerMenuItems=c.find("#topmenu ul li");0<a.headerMenuItems.length&&
!1===a.isCarsActiveVertical()&&c.each(a.headerMenuItems,function(b,d){b=c(d);0<b.attr("id").indexOf(a.activeVertical)?b.addClass(a.selectedItemCls):b.removeClass(a.selectedItemCls)})},isCarsActiveVertical:function(){return 0<this.activeVertical.indexOf("car")},removeExternalCls:function(){for(var a=c("body"),b=a.prop("className").split(" "),f=0,g=0;g<b.length;g++)b[g]===this.externalCls&&f++;1===f&&a.removeClass(this.externalCls)}};document.addEventListener("DOMContentLoaded",function(){new b})})(window.jq||
window.jQuery);
(function(c,a){var b,d=function(){if(b)return b;this.init();b=this;return this};d.prototype={id:"page-footer",links:null,mobileViewBreakpoint:768,init:function(){this.loadHorizonHeader()},adjustClassOnSize:function(){window.innerWidth>this.mobileViewBreakpoint&&this.links.each(function(){a(this).removeClass("hidden")})},bindEvents:function(){var b=this;b.links.each(function(){a(this).find(".header").on("click",function(){window.innerWidth<=b.mobileViewBreakpoint&&a(this).parent().toggleClass("hidden")})});a(window).resize(function(){b.adjustClassOnSize()})},
getSvgs:function(b){if(b.bufferedSVGs&&b.bufferedSVGs.length){b=b.bufferedSVGs[0].replace(/^<symbol|symbol>[\s\S]?$/g,function(a){return a.startsWith("\x3c")?"\x3csvg":"svg\x3e"});var c=a("\x3cdiv\x3e");c.addClass("hidden");return c.html(b).get(0)}},loadHorizonHeader:function(){var b=this,c=b.id;a.ajax({url:"/s/horizon/common/layout/brands/cheapflights/Footer",dataType:"html",success:function(d){"string"===typeof d&&(d=a.parseJSON(d));var e=b.getSvgs(d),f=a("\x3cdiv\x3e");f.html(d.content);f.children().each(function(d,
f){d=a(f);var g=f.id;g==c&&(g=a("#%s".format(g)),0<g.length&&(d.append(e),g.replaceWith(f)),b.links=d.find(".footerLinks"))});b.bindEvents()},cache:!1})}};document.addEventListener("DOMContentLoaded",function(){0<a("#page-footer").length&&new d})})(window.R9,window.jq||window.jQuery);
(function(c){function a(a){if(b){a=localStorage.getItem(a);try{return JSON.parse(a)}catch(f){return a}}}var b=!1;try{window.localStorage.setItem("vendor-support-test","success?"),window.localStorage.removeItem("vendor-support-test"),b=!0}catch(e){}var d={init:function(a,b){if(0<jq(".hackerDialog:visible, #dialogcarDetailsDialog:visible").length)return!0;var d=R9.config.getString("ui.nps.type","click");if(this.shouldShow()){c("body").click();this.saveLast();if("click-no-details"===d||"click"===d)return this.item=
c(a),event.stopPropagation(),event.stopImmediatePropagation(),event.preventDefault(),this.showDialog(b),!1;if("leave"===d||"leave-no-details"===d)return this.showDialog(b),window.preventAfterClick=!0}else return!0},getTime:function(){return 2592E6},saveLast:function(){if(b){var a=(new Date).getTime();try{b&&(null!==a&&"object"===typeof a?localStorage.setItem("nps-last-shown",JSON.stringify(a)):localStorage.setItem("nps-last-shown",a))}catch(f){22==f.code&&console.log("localStorage quota exceeded")}}},
shouldShow:function(){this.shown=!b||null!=a("nps-last-shown")&&(new Date).getTime()-parseInt(a("nps-last-shown"))<this.getTime();R9.config.getBoolean("ui.nps.limit.rate",!0)&&(this.shown=this.shown?this.shown:0===Math.round(Math.random()));return!this.shown},showDialog:function(a){var b=this;this.dialog=jq(".Common-Promo-NPSDialog");this.dialog.r9dialog({width:770,close:function(){window.preventAfterClick=!1}});R9.Analytics.api.trackEvent("nps/impression/"+R9.globals.analytics.vertical+"/"+a);c(".nps-score-bubble").on("click",
function(){var d=c(this),e=d.data("score");c(".nps-score-bubble").removeClass("nps-score-bubble-active");d.addClass("nps-score-bubble-active");6<e&&9>e||"click-no-details"===R9.config.getString("ui.nps.type","click")||"leave-no-details"===R9.config.getString("ui.nps.type","click")?(b.recordScore(e,"none",a),b.afterDialog()):c(".nps-feedback").show()});c(".nps-button").on("click",function(d){d=c(".nps-score-bubble.nps-score-bubble-active").data("score");var e=c(".nps-feedback:visible .nps-feedback-area").val();
b.recordScore(d,e||"none",a);b.afterDialog()})},recordScore:function(a,b,c){jq.ajax({type:"POST",url:"/s/horizon/common/promo/SaveNPS",data:{vertical:R9.globals.analytics.vertical,text:b,score:a,resultId:c,formtoken:R9.globals.formtoken},dataType:"json",success:function(a){},error:function(a,b,c){},cache:!1})},afterDialog:function(){window.preventAfterClick=!1;this.item&&(this.item[0].click(),this.item=null);this.dialog.r9dialog("close")},onFirst:function(a,b,d){a.each(function(){c(this).on(b,d);
var a=c._data(this,"events")[b];a.splice(0,0,a.pop())})}};window.showNPS=function(a,b){return window.Streaming&&Streaming.done?d.init(a,b):!0}})(jq);
(function(c,a){c.extend("Common",{SwindleListener:function(a){jq.extend(this.options,a);this.init();this.addEventHandlers()}});c.extend("Common.SwindleListener.prototype",{isSwindleTab:!1,swindleTabQueryKey:"syncTab",filterURL:null,options:{acceptedURLRegex:".*"},useQueryParam:function(){return c.config.getBoolean("ui.swindle.syncQueryParam",!1)},init:function(){this.isSwindleTab=!this.useQueryParam();this.filterURL=new RegExp(this.options.acceptedURLRegex);this.useQueryParam()&&(this.isSwindleTab=
window.location.hash==="#"+this.swindleTabQueryKey,c.Common.Utils.URL.removeHash())},addEventHandlers:function(){var b=this;window.addEventListener("storage",function(a){"swindle"===a.key&&b.isSwindleTab&&b.filterURL.test(a.newValue)&&setTimeout(function(){if(localStorage.getItem("swindle")){var d=b.useQueryParam()?c.Common.Utils.URL.addHash(a.newValue,b.swindleTabQueryKey):a.newValue;localStorage.removeItem("swindle");b.launchUrl(d)}},Math.floor(500*Math.random()))},!1);a(document).on("swindleTab.deactivated",
function(){b.isSwindleTab=!1});a(document).on("swindleTab.activated",function(){b.isSwindleTab=!0})},shouldReload:function(a){a=c.Common.Utils.URL.stripHash(a);return this.useQueryParam()&&-1!==window.location.href.indexOf(a)},redirect:function(a){window.location=a;this.shouldReload(a)&&window.location.reload()},launchUrl:function(b){var c=this,e=b.match(/^(https?:\/\/[^\/]+)\//);e?a.ajax(e[1]+"/s/horizon/hotels/swindle/CacheCookieAction",{data:{search:b},method:"POST",success:function(){c.redirect(b)}}):
(e=(new Date(Date.now()+18E4)).toGMTString(),document.cookie="cached-search\x3d"+encodeURIComponent(b)+";path\x3d/;expires\x3d"+e,c.redirect(b))}})})(window.R9,window.jq||window.jQuery);
(function(c,a){c.extend("Common.RedirectMessage",{});var b=c.Common.RedirectMessage=function(a,b,c){this.containerId=a;this.redirectFromTo=b;this.redirectFromToAlt=c;this.init();return this};b.prototype={_constructor:b,containerId:void 0,element:void 0,redirectFromTo:void 0,redirectFromToAlt:void 0,selector:{allRedirectLinks:".redirect-banner a",redirectLink:".redirect-banner\x3ea",dualRedirectLink:".redirect-banner-dual\x3ea",closeLink:".close"},init:function(){this.element=a("#"+this.containerId);
this.element.slideDown("slow");this.updateRedirectUrl();this.bindRedirectAdt()},updateRedirectUrl:function(){this.element.find(this.selector.allRedirectLinks).each(function(){var b=a(this),c=b.attr("href"),f=window.location.pathname,g=c.indexOf("\x26url\x3d");-1!==g&&(c=c.substr(0,g));f&&"/"!==f&&(c+="\x26url\x3d"+f);b.attr("href",c)})},addEventHandlers:function(){var b=this;this.element.find(this.selector.closeLink).click(function(){b.element.slideUp("slow");var c=a(this).attr("data-mc");setMetaCookie(c,
!0)})},bindRedirectAdt:function(){var b=this.element.find(this.selector.redirectLink),c=this.element.find(this.selector.dualRedirectLink);0!==b.length?b.off("click").click(this.redirectFromTo||this.redirectFromToAlt,this.redirectClickAdt):2===c.length&&(a(c.get(0)).off("click").click(this.redirectFromTo,this.redirectClickAdt),a(c.get(1)).off("click").click(this.redirectFromToAlt,this.redirectClickAdt))},redirectClickAdt:function(a){c.Analytics.api.trackEvent({category:"redirect-banner",action:"click",
label:a.data})}}})(window.R9,window.jq||window.jQuery);