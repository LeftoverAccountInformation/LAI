(function(window){window.hn=window.hn||{};window.hnt=window.hnt||{}})(window);(function tracklib(hnt){hnt.ga=function hntGa(){var GTMEvent=function GTMEvent(args){function arg(i){if(typeof args[i]==="function"){return args[i]()}return args[i]||null}return{event:"legacyEvent",eventCategory:arg(0),eventAction:arg(1),eventLabel:arg(2),eventValue:arg(3)}};if(window.dataLayer){window.dataLayer.push(new GTMEvent(arguments))}};hnt.gaTxt=function hntGaTxt(elem,cat,act){if(elem.value){hnt.ga(cat,act,elem.value)}};hnt.gaChkbox=function hntGaChkbox(elem,cat,act,lbl){var prefix=elem.checked?"":"in";var label=prefix+"aktivera "+lbl;hnt.ga(cat,act,label)};hnt.gaChkboxParent=function hntGaChkboxParent(elem,cat,act){var prefix=elem.checked?"":"in";var label=prefix+"aktivera "+elem.parentNode.innerText.replace(/^\s*/,"").replace(/\s*$/,"");hnt.ga(cat,act,label)};hnt.gaSelect=function hntGaSelect(elem,cat,act){var val=elem.value;hnt.ga(cat,act,val===""?elem.querySelector("option:checked").innerText:val)};hnt.gaSelectText=function hntGaSelectText(elem,cat,act){hnt.ga(cat,act,elem.querySelector("option:checked").innerText)};hnt._curForm=null;hnt.curForm=function curForm(){var classifySearchForm=function classifySearchForm(formEl){if(!formEl){return"inget sökformulär"}if(formEl.classList.contains("js-tracking-search-form-start")){return"sökformulär framsida"}if(formEl.classList.contains("js-tracking-search-form-sidebar-for-sale")){return"sökformulär objektlista"}if(formEl.classList.contains("js-tracking-search-form-sidebar-sold")){return"sökformulär slutpriser"}if(formEl.classList.contains("js-tracking-search-form-advanced")){return"sökformulär avancerad"}if(formEl.classList.contains("js-tracking-search-form-prefab")){return"sökformulär bygganytt"}return"sökformulär okänt"};var formEl=document.querySelector("#search-form");hnt._curForm=hnt._curForm||classifySearchForm(formEl);return hnt._curForm};hnt.loginStatus=function hntLoginStatus(){if(!Hemnet.server.isUserLoggedIn()){return"ej inloggad"}return""};window.hnt=hnt})(hnt);window.Hemnet=window.Hemnet||{};Hemnet.server=Hemnet.server||{};Hemnet.server.data=Hemnet.server.data||{};(function(server){server.refresh=function(callback){var request=new XMLHttpRequest;var path=server.data.refreshPath;if(!path){setTimeout(callback,1,false);return}request.open("GET",path,true);request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200){var data=JSON.parse(request.responseText);server.data=data;callback(true)}else{callback(false)}}};request.send()};server.isUserLoggedIn=function(){return typeof server.data.user!=="undefined"};server.userFirstName=function(){return(server.data.user||{}).firstName||""};server.userFullName=function(){return(server.data.user||{}).fullName||""};server.userName=server.userFullName;server.userId=function(){return(server.data.user||{}).id};server.userEmail=function(){return(server.data.user||{}).email};server.csrfToken=function(){return server.data.csrf};server.sentryDSN=function(){return server.data.sentryDSN};server.environment=function(){return server.data.environment};server.isInternalTraffic=function(){return server.data.isInternalTraffic||false};server.municipalitiesPath=function(){return server.data.search.municipalitiesPath};server.newSessionPath=function(){return server.data.search.newSessionPath}})(Hemnet.server);